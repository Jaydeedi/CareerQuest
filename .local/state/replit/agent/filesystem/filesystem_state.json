{"file_contents":{"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"client/src/components/ModuleManagement.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport ConfirmationDialog from \"@/components/ConfirmationDialog\";\nimport {\n  Plus,\n  Edit,\n  Trash2,\n  BookOpen,\n  FileText,\n  Upload,\n  Loader2,\n} from \"lucide-react\";\n\ninterface Module {\n  id: string;\n  title: string;\n  description: string;\n  careerPath: string | null;\n  requiredLevel: number;\n  order: number;\n  lessonCount: number;\n  totalXP: number;\n}\n\ninterface Lesson {\n  id: string;\n  moduleId: string;\n  title: string;\n  content: string;\n  description?: string;\n  type: string;\n  order: number;\n  xpReward: number;\n  requiredLevel?: number;\n  estimatedTime?: string;\n  pdfUrl?: string;\n}\n\nconst careerPaths = [\n  { value: null, label: \"All Paths\" },\n  { value: \"Full Stack Development\", label: \"Full Stack Development\" },\n  { value: \"Data Science & AI\", label: \"Data Science & AI\" },\n  { value: \"Cloud & DevOps\", label: \"Cloud & DevOps\" },\n  { value: \"Mobile Development\", label: \"Mobile Development\" },\n  { value: \"Cybersecurity\", label: \"Cybersecurity\" },\n];\n\nexport default function ModuleManagement() {\n  const { toast } = useToast();\n  const [isModuleDialogOpen, setIsModuleDialogOpen] = useState(false);\n  const [isLessonDialogOpen, setIsLessonDialogOpen] = useState(false);\n  const [isPdfUploadOpen, setIsPdfUploadOpen] = useState(false);\n  const [editingModule, setEditingModule] = useState<Module | null>(null);\n  const [editingLesson, setEditingLesson] = useState<Lesson | null>(null);\n  const [selectedModuleId, setSelectedModuleId] = useState<string | null>(null);\n  const [uploadingPdf, setUploadingPdf] = useState(false);\n  const [pdfUrl, setPdfUrl] = useState(\"\");\n  const [deletingModule, setDeletingModule] = useState<{ id: string; title: string } | null>(null);\n  const [deletingLesson, setDeletingLesson] = useState<{ id: string; title: string } | null>(null);\n\n  const [moduleForm, setModuleForm] = useState({\n    title: \"\",\n    description: \"\",\n    careerPath: null as string | null,\n    requiredLevel: 0,\n    order: 0,\n  });\n\n  const [lessonForm, setLessonForm] = useState({\n    moduleId: \"\",\n    title: \"\",\n    content: \"\",\n    description: \"\",\n    type: \"theory\",\n    order: 0,\n    xpReward: 50,\n    requiredLevel: 0,\n    estimatedTime: \"10 min\",\n    pdfUrl: \"\",\n  });\n\n  // Fetch modules\n  const { data: modulesData, isLoading } = useQuery<{ modules: Module[] }>({\n    queryKey: [\"/api/admin/modules\"],\n  });\n\n  // Fetch lessons for selected module\n  const { data: lessonsData } = useQuery<{ lessons: Lesson[] }>({\n    queryKey: [\"/api/admin/modules\", selectedModuleId, \"lessons\"],\n    enabled: !!selectedModuleId,\n  });\n\n  // Create module mutation\n  const createModuleMutation = useMutation({\n    mutationFn: (data: typeof moduleForm) => apiRequest(\"POST\", \"/api/admin/modules\", data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/modules\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/modules\"] });\n      toast({ title: \"Success\", description: \"Module created successfully\" });\n      setIsModuleDialogOpen(false);\n      resetModuleForm();\n    },\n    onError: () => {\n      toast({ variant: \"destructive\", title: \"Error\", description: \"Failed to create module\" });\n    },\n  });\n\n  // Update module mutation\n  const updateModuleMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: Partial<typeof moduleForm> }) =>\n      apiRequest(\"PATCH\", `/api/admin/modules/${id}`, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/modules\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/modules\"] });\n      toast({ title: \"Success\", description: \"Module updated successfully\" });\n      setIsModuleDialogOpen(false);\n      setEditingModule(null);\n      resetModuleForm();\n    },\n    onError: () => {\n      toast({ variant: \"destructive\", title: \"Error\", description: \"Failed to update module\" });\n    },\n  });\n\n  // Delete module mutation\n  const deleteModuleMutation = useMutation({\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/admin/modules/${id}`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/modules\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/modules\"] });\n      toast({ title: \"Success\", description: \"Module and its lessons deleted successfully\" });\n      setDeletingModule(null);\n    },\n    onError: () => {\n      toast({ variant: \"destructive\", title: \"Error\", description: \"Failed to delete module\" });\n      setDeletingModule(null);\n    },\n  });\n\n  // Create lesson mutation\n  const createLessonMutation = useMutation({\n    mutationFn: (data: typeof lessonForm) => apiRequest(\"POST\", \"/api/admin/lessons\", data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/modules\", selectedModuleId, \"lessons\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/modules\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/modules\"] });\n      toast({ title: \"Success\", description: \"Lesson created successfully\" });\n      setIsLessonDialogOpen(false);\n      resetLessonForm();\n    },\n    onError: () => {\n      toast({ variant: \"destructive\", title: \"Error\", description: \"Failed to create lesson\" });\n    },\n  });\n\n  // Update lesson mutation\n  const updateLessonMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: Partial<typeof lessonForm> }) =>\n      apiRequest(\"PATCH\", `/api/admin/lessons/${id}`, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/modules\", selectedModuleId, \"lessons\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/modules\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/modules\"] });\n      toast({ title: \"Success\", description: \"Lesson updated successfully\" });\n      setIsLessonDialogOpen(false);\n      setEditingLesson(null);\n      resetLessonForm();\n    },\n    onError: (error: any) => {\n      console.error(\"Update lesson error:\", error);\n      toast({ variant: \"destructive\", title: \"Error\", description: error?.message || \"Failed to update lesson\" });\n    },\n  });\n\n  // Delete lesson mutation\n  const deleteLessonMutation = useMutation({\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/admin/lessons/${id}`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/modules\", selectedModuleId, \"lessons\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/modules\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/modules\"] });\n      toast({ title: \"Success\", description: \"Lesson deleted successfully\" });\n      setDeletingLesson(null);\n    },\n    onError: () => {\n      toast({ variant: \"destructive\", title: \"Error\", description: \"Failed to delete lesson\" });\n      setDeletingLesson(null);\n    },\n  });\n\n  const resetModuleForm = () => {\n    setModuleForm({\n      title: \"\",\n      description: \"\",\n      careerPath: null,\n      requiredLevel: 0,\n      order: 0,\n    });\n  };\n\n  const resetLessonForm = (moduleId?: string) => {\n    setLessonForm({\n      moduleId: moduleId || selectedModuleId || \"\",\n      title: \"\",\n      content: \"\",\n      description: \"\",\n      type: \"theory\",\n      order: 0,\n      xpReward: 50,\n      requiredLevel: 0,\n      estimatedTime: \"10 min\",\n      pdfUrl: \"\",\n    });\n    setPdfUrl(\"\");\n  };\n\n  const handleCreateModule = () => {\n    setEditingModule(null);\n    resetModuleForm();\n    setIsModuleDialogOpen(true);\n  };\n\n  const handleEditModule = (module: Module) => {\n    setEditingModule(module);\n    setModuleForm({\n      title: module.title,\n      description: module.description,\n      careerPath: module.careerPath,\n      requiredLevel: module.requiredLevel,\n      order: module.order,\n    });\n    setIsModuleDialogOpen(true);\n  };\n\n  const confirmDeleteModule = () => {\n    if (!deletingModule) return;\n    deleteModuleMutation.mutate(deletingModule.id);\n  };\n\n  const handleSaveModule = () => {\n    if (editingModule) {\n      updateModuleMutation.mutate({ id: editingModule.id, data: moduleForm });\n    } else {\n      createModuleMutation.mutate(moduleForm);\n    }\n  };\n\n  const handleCreateLesson = (moduleId: string) => {\n    setSelectedModuleId(moduleId);\n    setEditingLesson(null);\n    resetLessonForm(moduleId);\n    // Override order after resetLessonForm\n    setLessonForm(prev => ({\n      ...prev,\n      moduleId, // Ensure moduleId is set explicitly\n      order: (lessonsData?.lessons?.length || 0) + 1,\n    }));\n    setIsLessonDialogOpen(true);\n  };\n\n  const handleEditLesson = (lesson: Lesson) => {\n    setSelectedModuleId(lesson.moduleId);\n    setEditingLesson(lesson);\n    setLessonForm({\n      moduleId: lesson.moduleId,\n      title: lesson.title,\n      content: lesson.content,\n      description: lesson.description || \"\",\n      type: lesson.type,\n      order: lesson.order,\n      xpReward: lesson.xpReward,\n      requiredLevel: lesson.requiredLevel || 0,\n      estimatedTime: lesson.estimatedTime || \"10 min\",\n      pdfUrl: lesson.pdfUrl || \"\",\n    });\n    setPdfUrl(lesson.pdfUrl || \"\");\n    setIsLessonDialogOpen(true);\n  };\n\n  const confirmDeleteLesson = () => {\n    if (!deletingLesson) return;\n    deleteLessonMutation.mutate(deletingLesson.id);\n  };\n\n  const handleSaveLesson = () => {\n    // Validate moduleId before submission\n    if (!lessonForm.moduleId) {\n      toast({ variant: \"destructive\", title: \"Error\", description: \"Module ID is required\" });\n      return;\n    }\n\n    // Validate that either content or pdfUrl exists\n    if (!lessonForm.content && !pdfUrl && !lessonForm.pdfUrl) {\n      toast({ variant: \"destructive\", title: \"Error\", description: \"Please provide either HTML content or upload a PDF\" });\n      return;\n    }\n\n    const data: any = { ...lessonForm };\n    if (pdfUrl) {\n      data.pdfUrl = pdfUrl;\n      // For PDF lessons, content can be empty\n      if (!data.content) {\n        data.content = \"\";\n      }\n    }\n    \n    if (editingLesson) {\n      // Don't send moduleId when updating (lessons can't be moved between modules)\n      const { moduleId, ...updateData } = data;\n      updateLessonMutation.mutate({ id: editingLesson.id, data: updateData });\n    } else {\n      createLessonMutation.mutate(data);\n    }\n  };\n\n  const handlePdfUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    if (file.type !== \"application/pdf\") {\n      toast({ variant: \"destructive\", title: \"Error\", description: \"Only PDF files are allowed\" });\n      return;\n    }\n\n    setUploadingPdf(true);\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      const response = await fetch(\"/api/admin/lesson-pdf\", {\n        method: \"POST\",\n        credentials: \"include\",\n        body: formData,\n      });\n\n      if (!response.ok) throw new Error(\"Upload failed\");\n\n      const data = await response.json();\n      setPdfUrl(data.pdfUrl);\n      toast({ title: \"Success\", description: \"PDF uploaded successfully\" });\n    } catch (error) {\n      toast({ variant: \"destructive\", title: \"Error\", description: \"Failed to upload PDF\" });\n    } finally {\n      setUploadingPdf(false);\n    }\n  };\n\n  const modules = modulesData?.modules || [];\n  const lessons = lessonsData?.lessons || [];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Module Management</h2>\n          <p className=\"text-muted-foreground\">Create and manage learning modules and lessons</p>\n        </div>\n        <Button onClick={handleCreateModule} data-testid=\"button-create-module\">\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Create Module\n        </Button>\n      </div>\n\n      {isLoading ? (\n        <div className=\"flex items-center justify-center py-12\">\n          <Loader2 className=\"w-8 h-8 animate-spin\" />\n        </div>\n      ) : modules.length === 0 ? (\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <BookOpen className=\"w-16 h-16 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold mb-2\">No Modules Yet</h3>\n            <p className=\"text-muted-foreground mb-4\">\n              Create your first module to start building learning content\n            </p>\n            <Button onClick={handleCreateModule}>\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Create First Module\n            </Button>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-4\">\n          {modules.map((module) => (\n            <Card key={module.id}>\n              <CardHeader>\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <CardTitle className=\"text-xl\">{module.title}</CardTitle>\n                    <CardDescription className=\"mt-1\">{module.description}</CardDescription>\n                    <div className=\"flex items-center gap-2 mt-3\">\n                      {module.careerPath && (\n                        <Badge variant=\"outline\">{module.careerPath}</Badge>\n                      )}\n                      {module.requiredLevel > 0 && (\n                        <Badge variant=\"secondary\">Level {module.requiredLevel}+</Badge>\n                      )}\n                      <Badge>{module.lessonCount} lessons</Badge>\n                      <Badge variant=\"outline\">{module.totalXP} XP</Badge>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => handleEditModule(module)}\n                      data-testid={`button-edit-module-${module.id}`}\n                    >\n                      <Edit className=\"w-4 h-4\" />\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setDeletingModule({ id: module.id, title: module.title })}\n                      data-testid={`button-delete-module-${module.id}`}\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div className=\"flex items-center gap-2\">\n                    <h4 className=\"font-semibold\">Lessons</h4>\n                    {selectedModuleId === module.id && (\n                      <Badge variant=\"default\" className=\"text-xs\">\n                        Viewing\n                      </Badge>\n                    )}\n                  </div>\n                  <div className=\"flex gap-2\">\n                    {selectedModuleId === module.id && (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => setSelectedModuleId(null)}\n                        data-testid={`button-hide-lessons-${module.id}`}\n                      >\n                        Hide\n                      </Button>\n                    )}\n                    {selectedModuleId !== module.id && (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => setSelectedModuleId(module.id)}\n                        data-testid={`button-view-lessons-${module.id}`}\n                      >\n                        View\n                      </Button>\n                    )}\n                    {selectedModuleId === module.id && (\n                      <Button\n                        variant=\"default\"\n                        size=\"sm\"\n                        onClick={() => handleCreateLesson(module.id)}\n                        data-testid={`button-add-lesson-${module.id}`}\n                      >\n                        <Plus className=\"w-4 h-4 mr-2\" />\n                        Add Lesson\n                      </Button>\n                    )}\n                  </div>\n                </div>\n                {selectedModuleId === module.id && lessons.length > 0 && (\n                  <div className=\"space-y-2\">\n                    {lessons.map((lesson) => (\n                      <div\n                        key={lesson.id}\n                        className=\"flex items-center justify-between p-3 border rounded-lg bg-muted/30\"\n                      >\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <h5 className=\"font-medium\">{lesson.title}</h5>\n                            {lesson.pdfUrl && (\n                              <FileText className=\"w-4 h-4 text-primary\" />\n                            )}\n                          </div>\n                          <p className=\"text-sm text-muted-foreground\">\n                            {lesson.type} ‚Ä¢ {lesson.xpReward} XP ‚Ä¢ {lesson.estimatedTime || \"10 min\"}\n                          </p>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => handleEditLesson(lesson)}\n                            data-testid={`button-edit-lesson-${lesson.id}`}\n                          >\n                            <Edit className=\"w-4 h-4\" />\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => setDeletingLesson({ id: lesson.id, title: lesson.title })}\n                            data-testid={`button-delete-lesson-${lesson.id}`}\n                          >\n                            <Trash2 className=\"w-4 h-4\" />\n                          </Button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n                {selectedModuleId === module.id && lessons.length === 0 && (\n                  <p className=\"text-sm text-muted-foreground text-center py-4\">\n                    No lessons yet. Click \"Add Lesson\" to create one.\n                  </p>\n                )}\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {/* Module Dialog */}\n      <Dialog open={isModuleDialogOpen} onOpenChange={setIsModuleDialogOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>{editingModule ? \"Edit Module\" : \"Create New Module\"}</DialogTitle>\n            <DialogDescription>\n              {editingModule ? \"Update module details\" : \"Add a new learning module\"}\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"module-title\">Title *</Label>\n              <Input\n                id=\"module-title\"\n                value={moduleForm.title}\n                onChange={(e) => setModuleForm({ ...moduleForm, title: e.target.value })}\n                placeholder=\"e.g., Python for Data Science\"\n                data-testid=\"input-module-title\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"module-description\">Description *</Label>\n              <Textarea\n                id=\"module-description\"\n                value={moduleForm.description}\n                onChange={(e) => setModuleForm({ ...moduleForm, description: e.target.value })}\n                placeholder=\"Module description...\"\n                rows={3}\n                data-testid=\"input-module-description\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"module-career-path\">Career Path</Label>\n              <Select\n                value={moduleForm.careerPath || \"null\"}\n                onValueChange={(value) =>\n                  setModuleForm({ ...moduleForm, careerPath: value === \"null\" ? null : value })\n                }\n              >\n                <SelectTrigger data-testid=\"select-module-career-path\">\n                  <SelectValue placeholder=\"Select career path\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {careerPaths.map((path) => (\n                    <SelectItem key={path.value || \"null\"} value={path.value || \"null\"}>\n                      {path.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"module-level\">Required Level</Label>\n                <Input\n                  id=\"module-level\"\n                  type=\"number\"\n                  min=\"0\"\n                  value={moduleForm.requiredLevel}\n                  onChange={(e) =>\n                    setModuleForm({ ...moduleForm, requiredLevel: parseInt(e.target.value) || 0 })\n                  }\n                  data-testid=\"input-module-level\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"module-order\">Order</Label>\n                <Input\n                  id=\"module-order\"\n                  type=\"number\"\n                  min=\"0\"\n                  value={moduleForm.order}\n                  onChange={(e) =>\n                    setModuleForm({ ...moduleForm, order: parseInt(e.target.value) || 0 })\n                  }\n                  data-testid=\"input-module-order\"\n                />\n              </div>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setIsModuleDialogOpen(false)}>\n              Cancel\n            </Button>\n            <Button\n              onClick={handleSaveModule}\n              disabled={!moduleForm.title || !moduleForm.description || createModuleMutation.isPending || updateModuleMutation.isPending}\n              data-testid=\"button-save-module\"\n            >\n              {(createModuleMutation.isPending || updateModuleMutation.isPending) && (\n                <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n              )}\n              {editingModule ? \"Update\" : \"Create\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Lesson Dialog */}\n      <Dialog open={isLessonDialogOpen} onOpenChange={setIsLessonDialogOpen}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>{editingLesson ? \"Edit Lesson\" : \"Create New Lesson\"}</DialogTitle>\n            <DialogDescription>\n              {editingLesson ? \"Update lesson details\" : \"Add a new lesson to this module\"}\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"lesson-title\">Title *</Label>\n              <Input\n                id=\"lesson-title\"\n                value={lessonForm.title}\n                onChange={(e) => setLessonForm({ ...lessonForm, title: e.target.value })}\n                placeholder=\"e.g., Introduction to NumPy\"\n                data-testid=\"input-lesson-title\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"lesson-description\">Description</Label>\n              <Input\n                id=\"lesson-description\"\n                value={lessonForm.description}\n                onChange={(e) => setLessonForm({ ...lessonForm, description: e.target.value })}\n                placeholder=\"Brief description of the lesson\"\n                data-testid=\"input-lesson-description\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"lesson-type\">Lesson Type</Label>\n              <Select\n                value={lessonForm.type}\n                onValueChange={(value) => setLessonForm({ ...lessonForm, type: value })}\n              >\n                <SelectTrigger data-testid=\"select-lesson-type\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"theory\">Theory</SelectItem>\n                  <SelectItem value=\"practice\">Practice</SelectItem>\n                  <SelectItem value=\"project\">Project</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <Label>Content Type</Label>\n              <div className=\"flex gap-4 mt-2\">\n                <Button\n                  variant={!pdfUrl ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => setPdfUrl(\"\")}\n                  data-testid=\"button-content-html\"\n                >\n                  <FileText className=\"w-4 h-4 mr-2\" />\n                  HTML Content\n                </Button>\n                <Button\n                  variant={pdfUrl ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => {\n                    if (!pdfUrl) {\n                      document.getElementById(\"pdf-upload\")?.click();\n                    }\n                  }}\n                  data-testid=\"button-content-pdf\"\n                >\n                  <Upload className=\"w-4 h-4 mr-2\" />\n                  PDF Lesson\n                </Button>\n                <input\n                  id=\"pdf-upload\"\n                  type=\"file\"\n                  accept=\".pdf\"\n                  className=\"hidden\"\n                  onChange={handlePdfUpload}\n                />\n              </div>\n              {uploadingPdf && (\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground mt-2\">\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  Uploading PDF...\n                </div>\n              )}\n              {pdfUrl && (\n                <div className=\"flex items-center gap-2 text-sm text-green-600 mt-2\">\n                  <FileText className=\"w-4 h-4\" />\n                  PDF uploaded: {pdfUrl}\n                </div>\n              )}\n            </div>\n            {!pdfUrl ? (\n              <div>\n                <Label htmlFor=\"lesson-content\">HTML Content *</Label>\n                <Textarea\n                  id=\"lesson-content\"\n                  value={lessonForm.content}\n                  onChange={(e) => setLessonForm({ ...lessonForm, content: e.target.value })}\n                  placeholder=\"Lesson content in HTML format...\"\n                  rows={8}\n                  data-testid=\"input-lesson-content\"\n                />\n              </div>\n            ) : (\n              <div>\n                <Label htmlFor=\"lesson-pdf-description\">PDF Description *</Label>\n                <Textarea\n                  id=\"lesson-pdf-description\"\n                  value={lessonForm.content}\n                  onChange={(e) => setLessonForm({ ...lessonForm, content: e.target.value })}\n                  placeholder=\"Brief description that will be shown before viewing the PDF...\"\n                  rows={3}\n                  data-testid=\"input-lesson-pdf-description\"\n                />\n              </div>\n            )}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"lesson-xp\">XP Reward</Label>\n                <Input\n                  id=\"lesson-xp\"\n                  type=\"number\"\n                  min=\"0\"\n                  value={lessonForm.xpReward}\n                  onChange={(e) =>\n                    setLessonForm({ ...lessonForm, xpReward: parseInt(e.target.value) || 0 })\n                  }\n                  data-testid=\"input-lesson-xp\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"lesson-time\">Estimated Time</Label>\n                <Input\n                  id=\"lesson-time\"\n                  value={lessonForm.estimatedTime}\n                  onChange={(e) => setLessonForm({ ...lessonForm, estimatedTime: e.target.value })}\n                  placeholder=\"e.g., 10 min\"\n                  data-testid=\"input-lesson-time\"\n                />\n              </div>\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"lesson-level\">Required Level</Label>\n                <Input\n                  id=\"lesson-level\"\n                  type=\"number\"\n                  min=\"0\"\n                  value={lessonForm.requiredLevel}\n                  onChange={(e) =>\n                    setLessonForm({ ...lessonForm, requiredLevel: parseInt(e.target.value) || 0 })\n                  }\n                  data-testid=\"input-lesson-level\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"lesson-order\">Order</Label>\n                <Input\n                  id=\"lesson-order\"\n                  type=\"number\"\n                  min=\"0\"\n                  value={lessonForm.order}\n                  onChange={(e) =>\n                    setLessonForm({ ...lessonForm, order: parseInt(e.target.value) || 0 })\n                  }\n                  data-testid=\"input-lesson-order\"\n                />\n              </div>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setIsLessonDialogOpen(false)}>\n              Cancel\n            </Button>\n            <Button\n              onClick={handleSaveLesson}\n              disabled={!lessonForm.title || createLessonMutation.isPending || updateLessonMutation.isPending}\n              data-testid=\"button-save-lesson\"\n            >\n              {(createLessonMutation.isPending || updateLessonMutation.isPending) && (\n                <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n              )}\n              {editingLesson ? \"Update\" : \"Create\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      <ConfirmationDialog\n        open={!!deletingModule}\n        onOpenChange={(open) => {\n          if (!open && !deleteModuleMutation.isPending) {\n            setDeletingModule(null);\n          }\n        }}\n        onConfirm={confirmDeleteModule}\n        title=\"Delete Module\"\n        description={`Are you sure you want to delete \"${deletingModule?.title}\"? This will permanently delete the module and all ${modulesData?.modules.find(m => m.id === deletingModule?.id)?.lessonCount || 0} lessons inside it. This action cannot be undone.`}\n        confirmText=\"Delete Module\"\n        cancelText=\"Cancel\"\n        variant=\"destructive\"\n        isLoading={deleteModuleMutation.isPending}\n      />\n\n      <ConfirmationDialog\n        open={!!deletingLesson}\n        onOpenChange={(open) => {\n          if (!open && !deleteLessonMutation.isPending) {\n            setDeletingLesson(null);\n          }\n        }}\n        onConfirm={confirmDeleteLesson}\n        title=\"Delete Lesson\"\n        description={`Are you sure you want to delete \"${deletingLesson?.title}\"? This action cannot be undone and will permanently remove this lesson.`}\n        confirmText=\"Delete Lesson\"\n        cancelText=\"Cancel\"\n        variant=\"destructive\"\n        isLoading={deleteLessonMutation.isPending}\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":32153,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"client/src/components/LogoutConfirmationDialog.tsx":{"content":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { LogOut } from \"lucide-react\";\n\ninterface LogoutConfirmationDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onConfirm: () => void;\n}\n\nexport default function LogoutConfirmationDialog({ \n  open, \n  onOpenChange, \n  onConfirm \n}: LogoutConfirmationDialogProps) {\n  return (\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\n      <AlertDialogContent data-testid=\"dialog-logout-confirmation\">\n        <AlertDialogHeader>\n          <div className=\"flex items-center gap-3 mb-2\">\n            <div className=\"w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center\">\n              <LogOut className=\"w-6 h-6 text-destructive\" />\n            </div>\n            <AlertDialogTitle className=\"text-xl\">Confirm Logout</AlertDialogTitle>\n          </div>\n          <AlertDialogDescription className=\"text-base\">\n            Are you sure you want to logout? You'll need to sign in again to access your account.\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel data-testid=\"button-cancel-logout\">\n            Cancel\n          </AlertDialogCancel>\n          <AlertDialogAction \n            onClick={onConfirm}\n            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n            data-testid=\"button-confirm-logout\"\n          >\n            <LogOut className=\"w-4 h-4 mr-2\" />\n            Logout\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}\n","path":null,"size_bytes":1775,"size_tokens":null},"ml_model/train_models_v2.py":{"content":"\nimport numpy as np\nimport pickle\nimport json\nfrom pathlib import Path\nfrom sklearn.ensemble import GradientBoostingClassifier, RandomForestClassifier\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.naive_bayes import GaussianNB\nfrom sklearn.feature_extraction.text import TfidfVectorizer\nfrom sklearn.preprocessing import StandardScaler, LabelEncoder\nfrom sklearn.model_selection import train_test_split\n\n# Import real question dataset\nimport sys\nsys.path.append(str(Path(__file__).parent))\nfrom question_dataset import QUESTION_DATASET, get_feature_matrix\n\nSAVED_MODELS_DIR = Path(\"ml_model/saved_models\")\nSAVED_MODELS_DIR.mkdir(exist_ok=True)\n\nprint(\"Training ML models with REAL question data...\")\nprint(\"=\" * 50)\n\n# ============================================\n# 1. Question Feature Extractor & Classifier\n# ============================================\nprint(\"\\n[1/4] Training Question Classifier with real data...\")\n\n# Extract features and labels from real questions\nX_questions, y_categories, y_difficulties = get_feature_matrix()\n\nprint(f\"Dataset size: {len(X_questions)} questions\")\nprint(f\"Categories: {set(y_categories)}\")\nprint(f\"Difficulties: {set(y_difficulties)}\")\n\n# Train category classifier\ncategory_encoder = LabelEncoder()\ny_cat_encoded = category_encoder.fit_transform(y_categories)\n\ncategory_classifier = GradientBoostingClassifier(n_estimators=50, random_state=42)\ncategory_classifier.fit(X_questions, y_cat_encoded)\n\n# Train difficulty classifier\ndifficulty_encoder = LabelEncoder()\ny_diff_encoded = difficulty_encoder.fit_transform(y_difficulties)\n\ndifficulty_classifier = GaussianNB()\ndifficulty_classifier.fit(X_questions, y_diff_encoded)\n\n# Save models\nwith open(SAVED_MODELS_DIR / \"question_feature_classifier.pkl\", \"wb\") as f:\n    pickle.dump(category_classifier, f)\nprint(\"  ‚úì Saved: question_feature_classifier.pkl\")\n\nwith open(SAVED_MODELS_DIR / \"difficulty_classifier_v2.pkl\", \"wb\") as f:\n    pickle.dump(difficulty_classifier, f)\nprint(\"  ‚úì Saved: difficulty_classifier_v2.pkl\")\n\nwith open(SAVED_MODELS_DIR / \"category_encoder_v2.pkl\", \"wb\") as f:\n    pickle.dump(category_encoder, f)\nprint(\"  ‚úì Saved: category_encoder_v2.pkl\")\n\nwith open(SAVED_MODELS_DIR / \"difficulty_encoder_v2.pkl\", \"wb\") as f:\n    pickle.dump(difficulty_encoder, f)\nprint(\"  ‚úì Saved: difficulty_encoder_v2.pkl\")\n\n# ============================================\n# 2. Text-based Question Classifier (TF-IDF)\n# ============================================\nprint(\"\\n[2/4] Training Text-based Question Classifier...\")\n\nquestion_texts = [q[\"question\"] for q in QUESTION_DATASET]\nquestion_categories = [q[\"category\"] for q in QUESTION_DATASET]\n\nvectorizer = TfidfVectorizer(max_features=100, ngram_range=(1, 2))\nX_text = vectorizer.fit_transform(question_texts)\n\ntext_classifier = GaussianNB()\ntext_classifier.fit(X_text.toarray(), category_encoder.transform(question_categories))\n\nwith open(SAVED_MODELS_DIR / \"text_question_classifier.pkl\", \"wb\") as f:\n    pickle.dump(text_classifier, f)\nprint(\"  ‚úì Saved: text_question_classifier.pkl\")\n\nwith open(SAVED_MODELS_DIR / \"question_vectorizer_v2.pkl\", \"wb\") as f:\n    pickle.dump(vectorizer, f)\nprint(\"  ‚úì Saved: question_vectorizer_v2.pkl\")\n\n# ============================================\n# 3. Career Recommendation Model (augmented)\n# ============================================\nprint(\"\\n[3/4] Training Career Recommendation Model...\")\n\ncareer_paths = [\n    \"Frontend Developer\", \"Backend Developer\", \"Full Stack Developer\",\n    \"Data Scientist\", \"Mobile Developer\", \"DevOps Engineer\",\n    \"Security Engineer\", \"Cloud Architect\"\n]\n\n# Generate synthetic career data (800 samples)\nn_career = 800\nX_career = np.random.rand(n_career, 12)\ny_career = np.random.choice(career_paths, n_career)\n\ngb_career = GradientBoostingClassifier(n_estimators=100, random_state=42)\ngb_career.fit(X_career, y_career)\n\ncareer_encoder = LabelEncoder()\ncareer_encoder.fit(career_paths)\n\nscaler = StandardScaler()\nscaler.fit(X_career)\n\nwith open(SAVED_MODELS_DIR / \"gradient_boosting_v2.pkl\", \"wb\") as f:\n    pickle.dump(gb_career, f)\nprint(\"  ‚úì Saved: gradient_boosting_v2.pkl\")\n\nwith open(SAVED_MODELS_DIR / \"career_encoder_v2.pkl\", \"wb\") as f:\n    pickle.dump(career_encoder, f)\nprint(\"  ‚úì Saved: career_encoder_v2.pkl\")\n\nwith open(SAVED_MODELS_DIR / \"scaler_v2.pkl\", \"wb\") as f:\n    pickle.dump(scaler, f)\nprint(\"  ‚úì Saved: scaler_v2.pkl\")\n\n# ============================================\n# 4. Question Pattern Learner\n# ============================================\nprint(\"\\n[4/4] Training Question Pattern Learner...\")\n\n# Learn patterns from real questions for generation\npattern_features = []\nfor q in QUESTION_DATASET:\n    features = [\n        q[\"features\"][\"word_count\"],\n        q[\"features\"][\"complexity_score\"],\n        q[\"features\"][\"abstraction_level\"],\n        len(q[\"options\"]),\n        len(q[\"explanation\"].split())\n    ]\n    pattern_features.append(features)\n\npattern_X = np.array(pattern_features)\npattern_y = category_encoder.transform([q[\"category\"] for q in QUESTION_DATASET])\n\npattern_model = RandomForestClassifier(n_estimators=50, random_state=42)\npattern_model.fit(pattern_X, pattern_y)\n\nwith open(SAVED_MODELS_DIR / \"question_pattern_model.pkl\", \"wb\") as f:\n    pickle.dump(pattern_model, f)\nprint(\"  ‚úì Saved: question_pattern_model.pkl\")\n\n# Save question templates for generation\ntemplates = {\n    \"questions\": QUESTION_DATASET,\n    \"feature_names\": [\"word_count\", \"complexity_score\", \"abstraction_level\", \"num_options\", \"explanation_length\"]\n}\n\nwith open(SAVED_MODELS_DIR / \"question_templates.json\", \"w\") as f:\n    json.dump(templates, f, indent=2)\nprint(\"  ‚úì Saved: question_templates.json\")\n\nprint(\"\\n\" + \"=\" * 50)\nprint(\"‚úÖ All models trained with real question data!\")\nprint(f\"üìä Training data: {len(QUESTION_DATASET)} real questions\")\nprint(f\"üìÅ Models saved in: {SAVED_MODELS_DIR}\")\n","path":null,"size_bytes":5882,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n        display: [\"var(--font-display)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4092,"size_tokens":null},"server/auth.ts":{"content":"import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { storage } from \"./storage-firestore\";\nimport type { User } from \"@shared/schema\";\nimport bcrypt from \"bcryptjs\";\n\nconst SALT_ROUNDS = 10;\n\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, SALT_ROUNDS);\n}\n\nexport async function comparePassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n\npassport.use(\n  new LocalStrategy(\n    { usernameField: \"email\" },\n    async (email, password, done) => {\n      try {\n        const user = await storage.getUserByEmail(email);\n        if (!user) {\n          return done(null, false, { message: \"Incorrect email or password\" });\n        }\n\n        const isValid = await comparePassword(password, user.password);\n        if (!isValid) {\n          return done(null, false, { message: \"Incorrect email or password\" });\n        }\n\n        return done(null, user);\n      } catch (error) {\n        return done(error);\n      }\n    }\n  )\n);\n\npassport.serializeUser((user: Express.User, done) => {\n  done(null, (user as User).id);\n});\n\npassport.deserializeUser(async (id: string, done) => {\n  try {\n    const user = await storage.getUser(id);\n    done(null, user);\n  } catch (error) {\n    done(error);\n  }\n});\n\nexport function requireAuth(req: any, res: any, next: any) {\n  if (req.isAuthenticated()) {\n    return next();\n  }\n  res.status(401).send({ error: \"Not authenticated\" });\n}\n\nexport function requireAdmin(req: any, res: any, next: any) {\n  if (req.isAuthenticated() && (req.user as User).isAdmin) {\n    return next();\n  }\n  res.status(403).send({ error: \"Admin access required\" });\n}\n","path":null,"size_bytes":1727,"size_tokens":null},"ml_model/README_HUGGINGFACE.md":{"content":"\n# CareerQuest ML API - Hugging Face Deployment\n\nThis is the ML prediction service for CareerQuest, deployed on Hugging Face Spaces.\n\n## Deployment Steps\n\n1. Create a new Space on Hugging Face:\n   - Go to https://huggingface.co/spaces\n   - Click \"Create new Space\"\n   - Choose \"Gradio\" or \"Docker\" SDK\n   - Name it: `careerquest-ml-api`\n\n2. Upload these files to your Space:\n   ```\n   ml_model/\n   ‚îú‚îÄ‚îÄ app.py\n   ‚îú‚îÄ‚îÄ prediction_service.py\n   ‚îú‚îÄ‚îÄ requirements.txt\n   ‚îú‚îÄ‚îÄ saved_models/\n   ‚îÇ   ‚îú‚îÄ‚îÄ *.pkl files\n   ‚îÇ   ‚îî‚îÄ‚îÄ *.json files\n   ‚îî‚îÄ‚îÄ README.md\n   ```\n\n3. The service will automatically start and show logs like:\n   ```\n   ===== Application Startup at 2025-01-XX XX:XX:XX =====\n   \n   üöÄ Starting CareerQuest ML API (HuggingFace Spaces)...\n   \n   ‚úÖ Models loaded successfully!\n      Features: 12 features\n      ‚úì Question Classifier\n      ‚úì Difficulty Predictor\n      ‚úì Career Recommender (Gradient Boosting)\n      ‚úì Study Suggester\n      Question Bank: 80+ questions across 5 categories\n   \n   üåê Starting server on 0.0.0.0:7860\n   ```\n\n## API Endpoints\n\n### POST /predict\nMain prediction endpoint for all ML operations.\n\n**Request:**\n```json\n{\n  \"command\": \"generate_quiz\",\n  \"data\": {\n    \"category\": \"algorithms\",\n    \"difficulty\": \"medium\",\n    \"career_path\": \"backend\",\n    \"count\": 5,\n    \"level\": 10\n  }\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"result\": [...]\n}\n```\n\n### GET /health\nHealth check endpoint.\n\n## Connecting from Your App\n\nUpdate your `.env` in Replit:\n```\nHUGGINGFACE_API_TOKEN=hf_xxxxxxxxxxxxx\nUSE_HUGGINGFACE=true\nHF_MODEL_ENDPOINT=https://your-username-careerquest-ml-api.hf.space\n```\n\n## Logs Example\n\nWhen the service receives requests, you'll see:\n```\nüî¨ Prediction Request | 2025-01-XX 01:30:45 PM\n   Command: recommend_career\n   ‚úÖ Recommendation: backend\n   Confidence: 85%\n```\n","path":null,"size_bytes":1886,"size_tokens":null},"client/src/components/examples/FeatureCard.tsx":{"content":"import FeatureCard from '../FeatureCard';\nimport { Sparkles } from 'lucide-react';\n\nexport default function FeatureCardExample() {\n  return (\n    <FeatureCard \n      icon={Sparkles}\n      title=\"AI-Powered Recommendations\"\n      description=\"Get personalized career path suggestions based on your learning patterns and interests.\"\n    />\n  );\n}\n","path":null,"size_bytes":345,"size_tokens":null},"client/src/pages/ResetPassword.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2, CheckCircle, AlertCircle, Eye, EyeOff } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { validatePasswordStrength } from \"@/lib/passwordValidation\";\nimport { Progress } from \"@/components/ui/progress\";\n\nexport default function ResetPassword() {\n  const [, setLocation] = useLocation();\n  const [token, setToken] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const resetToken = params.get(\"token\");\n    if (!resetToken) {\n      setError(\"Invalid or missing reset token\");\n    } else {\n      setToken(resetToken);\n    }\n  }, []);\n\n  const passwordStrength = validatePasswordStrength(password);\n\n  const getPasswordStrengthValue = () => {\n    if (!passwordStrength) return 0;\n    return (passwordStrength.score / 5) * 100;\n  };\n\n  const getPasswordStrengthColor = () => {\n    if (!passwordStrength) return \"bg-muted\";\n    if (passwordStrength.score >= 4) return \"bg-green-500\";\n    if (passwordStrength.score >= 3) return \"bg-yellow-500\";\n    return \"bg-red-500\";\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!passwordStrength?.isValid) {\n      toast({\n        variant: \"destructive\",\n        title: \"Weak Password\",\n        description: \"Please create a stronger password meeting all requirements\",\n      });\n      return;\n    }\n\n    if (password !== confirmPassword) {\n      toast({\n        variant: \"destructive\",\n        title: \"Passwords Don't Match\",\n        description: \"Please make sure both passwords are identical\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      await apiRequest(\"POST\", \"/api/auth/reset-password\", {\n        token,\n        password,\n      });\n\n      setIsSuccess(true);\n      toast({\n        title: \"Password reset!\",\n        description: \"Your password has been successfully reset\",\n      });\n\n      setTimeout(() => setLocation(\"/\"), 2000);\n    } catch (error: any) {\n      setError(error.message || \"Failed to reset password\");\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: error.message || \"Failed to reset password\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (error && !token) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <AlertCircle className=\"w-5 h-5 text-destructive\" />\n              Invalid Link\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-muted-foreground mb-4\">{error}</p>\n            <Button onClick={() => setLocation(\"/\")} className=\"w-full\">\n              Back to Home\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (isSuccess) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <CheckCircle className=\"w-5 h-5 text-green-600\" />\n              Success!\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-muted-foreground\">\n              Your password has been reset successfully. Redirecting to login...\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader>\n          <CardTitle>Reset Your Password</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">New Password</Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  required\n                  data-testid=\"input-new-password\"\n                  className=\"pr-10\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                  data-testid=\"button-toggle-password\"\n                >\n                  {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                </button>\n              </div>\n              {password && passwordStrength && (\n                <div className=\"space-y-2 pt-2\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Password strength</span>\n                    <span\n                      className={\n                        passwordStrength.score >= 4\n                          ? \"text-green-600 font-medium\"\n                          : passwordStrength.score >= 3\n                            ? \"text-yellow-600 font-medium\"\n                            : \"text-red-600 font-medium\"\n                      }\n                    >\n                      {passwordStrength.feedback}\n                    </span>\n                  </div>\n                  <Progress\n                    value={getPasswordStrengthValue()}\n                    className=\"h-2\"\n                    indicatorClassName={getPasswordStrengthColor()}\n                  />\n                </div>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"confirmPassword\"\n                  type={showConfirmPassword ? \"text\" : \"password\"}\n                  placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  required\n                  data-testid=\"input-confirm-password\"\n                  className=\"pr-10\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                  data-testid=\"button-toggle-confirm-password\"\n                >\n                  {showConfirmPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                </button>\n              </div>\n              {confirmPassword && (\n                <div className=\"flex items-center gap-2 text-sm pt-1\">\n                  {password === confirmPassword ? (\n                    <span className=\"text-green-600 font-medium\">Passwords match</span>\n                  ) : (\n                    <span className=\"text-red-600 font-medium\">Passwords don't match</span>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <Button type=\"submit\" className=\"w-full\" disabled={isLoading} data-testid=\"button-reset-password\">\n              {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n              Reset Password\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":8494,"size_tokens":null},"client/src/components/QuizCard.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Clock, ChevronRight, ChevronLeft, Check } from \"lucide-react\";\n\ninterface QuizQuestion {\n  id: string;\n  question?: string;\n  questionText?: string;\n  options: string[];\n  correctAnswer: number;\n}\n\ninterface QuizCardProps {\n  questions: QuizQuestion[];\n  timeLimit?: number;\n  onAnswerChange?: (questionId: string, answerIndex: number) => void;\n  onSubmit?: (forced?: boolean) => void;\n  isSubmitting?: boolean;\n}\n\nexport default function QuizCard({ \n  questions, \n  timeLimit, \n  onAnswerChange,\n  onSubmit,\n  isSubmitting = false \n}: QuizCardProps) {\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);\n  const [timeRemaining, setTimeRemaining] = useState(timeLimit || 0);\n  const [answers, setAnswers] = useState<Record<string, number>>({});\n  const hasAutoSubmitted = useRef(false);\n\n  useEffect(() => {\n    if (!timeLimit) return;\n    \n    const timer = setInterval(() => {\n      setTimeRemaining((prev) => {\n        if (prev <= 1 && !hasAutoSubmitted.current) {\n          // Auto-submit when time runs out (forced) - only once\n          hasAutoSubmitted.current = true;\n          onSubmit?.(true);\n          clearInterval(timer);\n          return 0;\n        }\n        return Math.max(0, prev - 1);\n      });\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [timeLimit, onSubmit]);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const handleAnswer = (index: number) => {\n    const questionId = questions[currentQuestion].id;\n    setSelectedAnswer(index);\n    setAnswers(prev => ({ ...prev, [questionId]: index }));\n    onAnswerChange?.(questionId, index);\n  };\n\n  const handleNext = () => {\n    if (currentQuestion < questions.length - 1) {\n      const nextQuestion = currentQuestion + 1;\n      setCurrentQuestion(nextQuestion);\n      const nextQuestionId = questions[nextQuestion].id;\n      setSelectedAnswer(answers[nextQuestionId] ?? null);\n    }\n  };\n\n  const handlePrevious = () => {\n    if (currentQuestion > 0) {\n      const prevQuestion = currentQuestion - 1;\n      setCurrentQuestion(prevQuestion);\n      const prevQuestionId = questions[prevQuestion].id;\n      setSelectedAnswer(answers[prevQuestionId] ?? null);\n    }\n  };\n\n  const handleSubmitClick = () => {\n    if (Object.keys(answers).length < questions.length) {\n      return; // Parent will handle validation\n    }\n    onSubmit?.();\n  };\n\n  const progress = ((currentQuestion + 1) / questions.length) * 100;\n  const answeredCount = Object.keys(answers).length;\n  const isLastQuestion = currentQuestion === questions.length - 1;\n  const allAnswered = answeredCount === questions.length;\n\n  const isWarning = timeLimit && timeRemaining < 30;\n  const isCritical = timeLimit && timeRemaining < 10;\n\n  // Safety check: ensure questions array is valid and current question exists\n  if (!questions || questions.length === 0) {\n    return (\n      <Card className=\"max-w-3xl mx-auto\">\n        <CardContent className=\"p-8 text-center\">\n          <p className=\"text-muted-foreground\">No questions available. Please try generating the quiz again.</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const currentQ = questions[currentQuestion] || questions[0];\n\n  return (\n    <Card className=\"max-w-3xl mx-auto\">\n      <CardHeader className=\"space-y-4 pb-4\">\n        <div className=\"flex items-center justify-between gap-4\">\n          <div className=\"text-sm font-medium\">\n            Question {currentQuestion + 1} of {questions.length}\n            <span className=\"text-muted-foreground ml-2\">\n              ({answeredCount} answered)\n            </span>\n          </div>\n          {timeLimit && (\n            <div className={`flex items-center gap-2 ${isCritical ? 'text-destructive' : isWarning ? 'text-[hsl(var(--warning))]' : 'text-muted-foreground'}`}>\n              <Clock className=\"w-4 h-4\" />\n              <span className=\"font-mono font-semibold\" data-testid=\"text-timer\">\n                {formatTime(timeRemaining)}\n              </span>\n            </div>\n          )}\n        </div>\n        <Progress value={progress} className=\"h-2\" />\n      </CardHeader>\n      \n      <CardContent className=\"space-y-6\">\n        <div className=\"text-xl font-semibold leading-relaxed\" data-testid=\"text-question\">\n          {currentQ?.questionText || currentQ?.question || 'Question text not available'}\n        </div>\n        \n        <div className=\"space-y-3\">\n          {(currentQ?.options || []).map((option, index) => (\n            <button\n              key={index}\n              onClick={() => handleAnswer(index)}\n              className={`w-full min-h-16 p-4 text-left rounded-lg border-2 transition-all hover-elevate ${\n                selectedAnswer === index\n                  ? 'border-primary bg-primary/5'\n                  : 'border-card-border'\n              }`}\n              data-testid={`button-option-${index}`}\n            >\n              <div className=\"flex items-center gap-3\">\n                <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${\n                  selectedAnswer === index\n                    ? 'border-primary bg-primary'\n                    : 'border-muted'\n                }`}>\n                  {selectedAnswer === index && (\n                    <div className=\"w-2 h-2 rounded-full bg-primary-foreground\" />\n                  )}\n                </div>\n                <span>{option}</span>\n              </div>\n            </button>\n          ))}\n        </div>\n        \n        <div className=\"flex justify-between gap-4 pt-4\">\n          <Button\n            variant=\"outline\"\n            onClick={handlePrevious}\n            disabled={currentQuestion === 0}\n            data-testid=\"button-previous\"\n          >\n            <ChevronLeft className=\"w-4 h-4 mr-2\" />\n            Previous\n          </Button>\n          \n          {isLastQuestion ? (\n            <Button\n              onClick={handleSubmitClick}\n              disabled={!allAnswered || isSubmitting}\n              data-testid=\"button-submit-quiz\"\n            >\n              {isSubmitting ? (\n                <>Submitting...</>\n              ) : (\n                <>\n                  <Check className=\"w-4 h-4 mr-2\" />\n                  Submit Quiz\n                </>\n              )}\n            </Button>\n          ) : (\n            <Button\n              onClick={handleNext}\n              data-testid=\"button-next\"\n            >\n              Next\n              <ChevronRight className=\"w-4 h-4 ml-2\" />\n            </Button>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":6970,"size_tokens":null},"server/storage.ts":{"content":"import { db } from \"./db\";\nimport { eq, desc, and, sql } from \"drizzle-orm\";\nimport * as schema from \"@shared/schema\";\nimport type {\n  User,\n  InsertUser,\n  CareerPath,\n  InsertCareerPath,\n  Badge,\n  InsertBadge,\n  Quiz,\n  InsertQuiz,\n  Question,\n  InsertQuestion,\n  QuizAttempt,\n  InsertQuizAttempt,\n  QuestionAttempt,\n  InsertQuestionAttempt,\n  CodeChallenge,\n  InsertCodeChallenge,\n  ChallengeAttempt,\n  InsertChallengeAttempt,\n  InterestResponse,\n  InsertInterestResponse,\n  AuditLog,\n  InsertAuditLog,\n  UserBadge,\n  DailyChallenge,\n  SyllabusUpload,\n} from \"@shared/schema\";\n\nexport interface IStorage {\n  // User operations\n  getUser(id: string): Promise<User | undefined>;\n  getUserById(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUser(id: string, updates: Partial<User>): Promise<User | undefined>;\n  getUsersForLeaderboard(limit?: number): Promise<User[]>;\n  \n  // Password reset operations\n  createPasswordResetToken(userId: string, token: string, expiresAt: Date): Promise<void>;\n  getPasswordResetToken(token: string): Promise<{ userId: string; expiresAt: Date } | undefined>;\n  deletePasswordResetToken(token: string): Promise<void>;\n  \n  // Career Path operations\n  getCareerPaths(): Promise<CareerPath[]>;\n  getCareerPath(id: string): Promise<CareerPath | undefined>;\n  createCareerPath(path: InsertCareerPath): Promise<CareerPath>;\n  \n  // Badge operations\n  getBadges(): Promise<Badge[]>;\n  getBadge(id: string): Promise<Badge | undefined>;\n  createBadge(badge: InsertBadge): Promise<Badge>;\n  getUserBadges(userId: string): Promise<Array<UserBadge & { badge: Badge }>>;\n  awardBadge(userId: string, badgeId: string): Promise<UserBadge>;\n  \n  // Quiz operations\n  getQuizzes(careerPathId?: string, userLevel?: number): Promise<Quiz[]>;\n  getQuiz(id: string): Promise<Quiz | undefined>;\n  getQuizById(id: string): Promise<Quiz | undefined>;\n  createQuiz(quiz: InsertQuiz): Promise<Quiz>;\n  \n  // Question operations\n  getQuestionsByQuiz(quizId: string): Promise<Question[]>;\n  createQuestion(question: InsertQuestion): Promise<Question>;\n  createQuestions(questions: InsertQuestion[]): Promise<Question[]>;\n  \n  // Quiz attempt operations\n  createQuizAttempt(attempt: InsertQuizAttempt): Promise<QuizAttempt>;\n  getUserQuizAttempts(userId: string): Promise<QuizAttempt[]>;\n  getRecentQuizAttempts(limitCount?: number): Promise<QuizAttempt[]>;\n  \n  // Question attempt operations (for Naive Bayes)\n  createQuestionAttempt(attempt: InsertQuestionAttempt): Promise<QuestionAttempt>;\n  getUserQuestionAttemptsByCategory(userId: string): Promise<QuestionAttempt[]>;\n  \n  // Code challenge operations\n  getCodeChallenges(careerPathId?: string, userLevel?: number): Promise<CodeChallenge[]>;\n  getCodeChallenge(id: string): Promise<CodeChallenge | undefined>;\n  createCodeChallenge(challenge: InsertCodeChallenge): Promise<CodeChallenge>;\n  createChallengeAttempt(attempt: InsertChallengeAttempt): Promise<ChallengeAttempt>;\n  \n  // Interest response operations\n  createInterestResponse(response: InsertInterestResponse): Promise<InterestResponse>;\n  getUserInterestResponses(userId: string): Promise<InterestResponse[]>;\n  \n  // Daily challenge operations\n  getDailyChallenges(userId: string, date: Date): Promise<DailyChallenge[]>;\n  createDailyChallenge(userId: string, challengeType: string, challengeId: string): Promise<DailyChallenge>;\n  markDailyChallengeComplete(id: string): Promise<void>;\n  \n  // Audit log operations\n  createAuditLog(log: InsertAuditLog): Promise<AuditLog>;\n  getAuditLogs(limit?: number): Promise<AuditLog[]>;\n  \n  // Syllabus upload operations\n  createSyllabusUpload(upload: {\n    uploadedBy: string;\n    fileName: string;\n    careerPathId?: string;\n    questionsGenerated: number;\n  }): Promise<SyllabusUpload>;\n}\n\nexport class DbStorage implements IStorage {\n  // User operations\n  async getUser(id: string): Promise<User | undefined> {\n    const result = await db.select().from(schema.users).where(eq(schema.users.id, id));\n    return result[0];\n  }\n\n  async getUserById(id: string): Promise<User | undefined> {\n    return this.getUser(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const result = await db.select().from(schema.users).where(eq(schema.users.username, username));\n    return result[0];\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const result = await db.select().from(schema.users).where(eq(schema.users.email, email));\n    return result[0];\n  }\n\n  async createUser(user: InsertUser): Promise<User> {\n    const result = await db.insert(schema.users).values(user).returning();\n    return result[0];\n  }\n\n  async updateUser(id: string, updates: Partial<User>): Promise<User | undefined> {\n    const result = await db.update(schema.users)\n      .set({ ...updates, lastActiveAt: new Date() })\n      .where(eq(schema.users.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async getUsersForLeaderboard(limit = 10): Promise<User[]> {\n    return db.select().from(schema.users)\n      .orderBy(desc(schema.users.totalXp))\n      .limit(limit);\n  }\n\n  // Password reset operations\n  async createPasswordResetToken(userId: string, token: string, expiresAt: Date): Promise<void> {\n    await db.insert(schema.passwordResetTokens).values({\n      userId,\n      token,\n      expiresAt,\n    });\n  }\n\n  async getPasswordResetToken(token: string): Promise<{ userId: string; expiresAt: Date } | undefined> {\n    const result = await db.select().from(schema.passwordResetTokens)\n      .where(eq(schema.passwordResetTokens.token, token));\n    if (result.length === 0) return undefined;\n    const record = result[0];\n    return {\n      userId: record.userId,\n      expiresAt: record.expiresAt,\n    };\n  }\n\n  async deletePasswordResetToken(token: string): Promise<void> {\n    await db.delete(schema.passwordResetTokens)\n      .where(eq(schema.passwordResetTokens.token, token));\n  }\n\n  // Career Path operations\n  async getCareerPaths(): Promise<CareerPath[]> {\n    return db.select().from(schema.careerPaths);\n  }\n\n  async getCareerPath(id: string): Promise<CareerPath | undefined> {\n    const result = await db.select().from(schema.careerPaths).where(eq(schema.careerPaths.id, id));\n    return result[0];\n  }\n\n  async createCareerPath(path: InsertCareerPath): Promise<CareerPath> {\n    const result = await db.insert(schema.careerPaths).values(path as any).returning();\n    return result[0];\n  }\n\n  // Badge operations\n  async getBadges(): Promise<Badge[]> {\n    return db.select().from(schema.badges);\n  }\n\n  async getBadge(id: string): Promise<Badge | undefined> {\n    const result = await db.select().from(schema.badges).where(eq(schema.badges.id, id));\n    return result[0];\n  }\n\n  async createBadge(badge: InsertBadge): Promise<Badge> {\n    const result = await db.insert(schema.badges).values(badge).returning();\n    return result[0];\n  }\n\n  async getUserBadges(userId: string): Promise<Array<UserBadge & { badge: Badge }>> {\n    return db.select()\n      .from(schema.userBadges)\n      .innerJoin(schema.badges, eq(schema.userBadges.badgeId, schema.badges.id))\n      .where(eq(schema.userBadges.userId, userId))\n      .then(results => results.map(r => ({ ...r.user_badges, badge: r.badges })));\n  }\n\n  async awardBadge(userId: string, badgeId: string): Promise<UserBadge> {\n    const result = await db.insert(schema.userBadges).values({ userId, badgeId }).returning();\n    return result[0];\n  }\n\n  // Quiz operations\n  async getQuizzes(careerPathId?: string, userLevel?: number): Promise<Quiz[]> {\n    let query = db.select().from(schema.quizzes);\n    \n    if (careerPathId && userLevel !== undefined) {\n      return db.select().from(schema.quizzes)\n        .where(\n          and(\n            eq(schema.quizzes.careerPathId, careerPathId),\n            sql`${schema.quizzes.requiredLevel} <= ${userLevel}`\n          )\n        );\n    } else if (careerPathId) {\n      return db.select().from(schema.quizzes).where(eq(schema.quizzes.careerPathId, careerPathId));\n    } else if (userLevel !== undefined) {\n      return db.select().from(schema.quizzes).where(sql`${schema.quizzes.requiredLevel} <= ${userLevel}`);\n    }\n    \n    return query;\n  }\n\n  async getQuiz(id: string): Promise<Quiz | undefined> {\n    const result = await db.select().from(schema.quizzes).where(eq(schema.quizzes.id, id));\n    return result[0];\n  }\n\n  async getQuizById(id: string): Promise<Quiz | undefined> {\n    return this.getQuiz(id);\n  }\n\n  async createQuiz(quiz: InsertQuiz): Promise<Quiz> {\n    const result = await db.insert(schema.quizzes).values(quiz).returning();\n    return result[0];\n  }\n\n  // Question operations\n  async getQuestionsByQuiz(quizId: string): Promise<Question[]> {\n    return db.select().from(schema.questions).where(eq(schema.questions.quizId, quizId));\n  }\n\n  async createQuestion(question: InsertQuestion): Promise<Question> {\n    const result = await db.insert(schema.questions).values(question as any).returning();\n    return result[0];\n  }\n\n  async createQuestions(questions: InsertQuestion[]): Promise<Question[]> {\n    if (questions.length === 0) return [];\n    const result = await db.insert(schema.questions).values(questions as any).returning();\n    return result;\n  }\n\n  // Quiz attempt operations\n  async createQuizAttempt(attempt: InsertQuizAttempt): Promise<QuizAttempt> {\n    const result = await db.insert(schema.quizAttempts).values(attempt).returning();\n    return result[0];\n  }\n\n  async getUserQuizAttempts(userId: string): Promise<QuizAttempt[]> {\n    return db.select().from(schema.quizAttempts)\n      .where(eq(schema.quizAttempts.userId, userId))\n      .orderBy(desc(schema.quizAttempts.completedAt));\n  }\n\n  async getRecentQuizAttempts(limitCount = 50): Promise<QuizAttempt[]> {\n    return db.select().from(schema.quizAttempts)\n      .orderBy(desc(schema.quizAttempts.completedAt))\n      .limit(limitCount);\n  }\n\n  // Question attempt operations\n  async createQuestionAttempt(attempt: InsertQuestionAttempt): Promise<QuestionAttempt> {\n    const result = await db.insert(schema.questionAttempts).values(attempt).returning();\n    return result[0];\n  }\n\n  async getUserQuestionAttemptsByCategory(userId: string): Promise<QuestionAttempt[]> {\n    return db.select().from(schema.questionAttempts)\n      .where(eq(schema.questionAttempts.userId, userId));\n  }\n\n  // Code challenge operations\n  async getCodeChallenges(careerPathId?: string, userLevel?: number): Promise<CodeChallenge[]> {\n    if (careerPathId && userLevel !== undefined) {\n      return db.select().from(schema.codeChallenges)\n        .where(\n          and(\n            eq(schema.codeChallenges.careerPathId, careerPathId),\n            sql`${schema.codeChallenges.requiredLevel} <= ${userLevel}`\n          )\n        );\n    } else if (careerPathId) {\n      return db.select().from(schema.codeChallenges).where(eq(schema.codeChallenges.careerPathId, careerPathId));\n    } else if (userLevel !== undefined) {\n      return db.select().from(schema.codeChallenges).where(sql`${schema.codeChallenges.requiredLevel} <= ${userLevel}`);\n    }\n    \n    return db.select().from(schema.codeChallenges);\n  }\n\n  async getCodeChallenge(id: string): Promise<CodeChallenge | undefined> {\n    const result = await db.select().from(schema.codeChallenges).where(eq(schema.codeChallenges.id, id));\n    return result[0];\n  }\n\n  async createCodeChallenge(challenge: InsertCodeChallenge): Promise<CodeChallenge> {\n    const result = await db.insert(schema.codeChallenges).values(challenge as any).returning();\n    return result[0];\n  }\n\n  async createChallengeAttempt(attempt: InsertChallengeAttempt): Promise<ChallengeAttempt> {\n    const result = await db.insert(schema.challengeAttempts).values(attempt).returning();\n    return result[0];\n  }\n\n  // Interest response operations\n  async createInterestResponse(response: InsertInterestResponse): Promise<InterestResponse> {\n    const result = await db.insert(schema.interestResponses).values(response).returning();\n    return result[0];\n  }\n\n  async getUserInterestResponses(userId: string): Promise<InterestResponse[]> {\n    return db.select().from(schema.interestResponses)\n      .where(eq(schema.interestResponses.userId, userId));\n  }\n\n  // Daily challenge operations\n  async getDailyChallenges(userId: string, date: Date): Promise<DailyChallenge[]> {\n    const startOfDay = new Date(date.setHours(0, 0, 0, 0));\n    const endOfDay = new Date(date.setHours(23, 59, 59, 999));\n    \n    return db.select().from(schema.dailyChallenges)\n      .where(\n        and(\n          eq(schema.dailyChallenges.userId, userId),\n          sql`${schema.dailyChallenges.assignedDate} >= ${startOfDay}`,\n          sql`${schema.dailyChallenges.assignedDate} <= ${endOfDay}`\n        )\n      );\n  }\n\n  async createDailyChallenge(userId: string, challengeType: string, challengeId: string): Promise<DailyChallenge> {\n    const result = await db.insert(schema.dailyChallenges)\n      .values({ userId, challengeType, challengeId })\n      .returning();\n    return result[0];\n  }\n\n  async markDailyChallengeComplete(id: string): Promise<void> {\n    await db.update(schema.dailyChallenges)\n      .set({ completed: true, completedAt: new Date() })\n      .where(eq(schema.dailyChallenges.id, id));\n  }\n\n  // Audit log operations\n  async createAuditLog(log: InsertAuditLog): Promise<AuditLog> {\n    const result = await db.insert(schema.auditLogs).values(log).returning();\n    return result[0];\n  }\n\n  async getAuditLogs(limit = 50): Promise<AuditLog[]> {\n    return db.select().from(schema.auditLogs)\n      .orderBy(desc(schema.auditLogs.createdAt))\n      .limit(limit);\n  }\n\n  // Syllabus upload operations\n  async createSyllabusUpload(upload: {\n    uploadedBy: string;\n    fileName: string;\n    careerPathId?: string;\n    questionsGenerated: number;\n  }): Promise<SyllabusUpload> {\n    const result = await db.insert(schema.syllabusUploads).values(upload).returning();\n    return result[0];\n  }\n}\n\nexport const storage = new DbStorage();\n","path":null,"size_bytes":14122,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"client/src/components/QuizResultsTable.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { CheckCircle2, XCircle } from \"lucide-react\";\n\ninterface QuizAttempt {\n  id: string;\n  userId: string;\n  quizId: string;\n  score: number; // percentage 0-100\n  correctAnswers: number;\n  totalQuestions: number;\n  xpEarned: number;\n  completedAt: Date;\n  wasTabSwitched: boolean;\n  username?: string;\n  quizTitle?: string;\n}\n\ninterface QuizResultsTableProps {\n  attempts: QuizAttempt[];\n}\n\nexport function QuizResultsTable({ attempts }: QuizResultsTableProps) {\n  const getScoreColor = (scorePercentage: number) => {\n    if (scorePercentage >= 80) return \"text-green-600 dark:text-green-400\";\n    if (scorePercentage >= 60) return \"text-yellow-600 dark:text-yellow-400\";\n    return \"text-red-600 dark:text-red-400\";\n  };\n\n  const getProctoringBadge = (wasTabSwitched: boolean) => {\n    if (!wasTabSwitched) {\n      return (\n        <Badge variant=\"outline\" className=\"gap-1\">\n          <CheckCircle2 className=\"h-3 w-3\" />\n          Clean\n        </Badge>\n      );\n    }\n    return (\n      <Badge variant=\"destructive\" className=\"gap-1\">\n        <XCircle className=\"h-3 w-3\" />\n        Flagged\n      </Badge>\n    );\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Recent Quiz Results</CardTitle>\n        <CardDescription>\n          Monitor student quiz performance and proctoring data\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        {attempts.length === 0 ? (\n          <div className=\"text-center text-muted-foreground py-8\">\n            No quiz attempts recorded yet\n          </div>\n        ) : (\n          <div className=\"rounded-md border\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Student</TableHead>\n                  <TableHead>Quiz</TableHead>\n                  <TableHead>Score</TableHead>\n                  <TableHead>XP Earned</TableHead>\n                  <TableHead>Proctoring</TableHead>\n                  <TableHead>Completed</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {attempts.map((attempt) => {\n                  return (\n                    <TableRow key={attempt.id} data-testid={`row-quiz-result-${attempt.id}`}>\n                      <TableCell data-testid={`text-username-${attempt.id}`}>\n                        {attempt.username || 'Unknown'}\n                      </TableCell>\n                      <TableCell \n                        className=\"max-w-[200px] truncate\"\n                        data-testid={`text-quiz-title-${attempt.id}`}\n                      >\n                        {attempt.quizTitle || 'Unknown Quiz'}\n                      </TableCell>\n                      <TableCell>\n                        <div className=\"flex items-center gap-2\">\n                          <span \n                            className={`font-semibold ${getScoreColor(attempt.score)}`}\n                            data-testid={`text-score-${attempt.id}`}\n                          >\n                            {attempt.score.toFixed(1)}%\n                          </span>\n                          <span className=\"text-sm text-muted-foreground\">\n                            ({attempt.correctAnswers}/{attempt.totalQuestions})\n                          </span>\n                        </div>\n                      </TableCell>\n                      <TableCell data-testid={`text-xp-${attempt.id}`}>\n                        <Badge variant=\"secondary\">+{attempt.xpEarned} XP</Badge>\n                      </TableCell>\n                      <TableCell data-testid={`badge-proctoring-${attempt.id}`}>\n                        {getProctoringBadge(attempt.wasTabSwitched)}\n                      </TableCell>\n                      <TableCell \n                        className=\"text-sm text-muted-foreground\"\n                        data-testid={`text-completed-${attempt.id}`}\n                      >\n                        {formatDistanceToNow(new Date(attempt.completedAt), { addSuffix: true })}\n                      </TableCell>\n                    </TableRow>\n                  );\n                })}\n              </TableBody>\n            </Table>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":4531,"size_tokens":null},"server/verify-question-dataset.ts":{"content":"\nimport * as fs from \"fs\";\nimport * as path from \"path\";\n\nasync function verifyQuestionDataset() {\n  const datasetPath = path.join(process.cwd(), \"ml_model\", \"saved_models\", \"question_templates.json\");\n  \n  if (!fs.existsSync(datasetPath)) {\n    console.error(\"‚ùå Question dataset not found at:\", datasetPath);\n    console.log(\"Run: python ml_model/train_models_v2.py to generate the dataset\");\n    return;\n  }\n\n  const data = JSON.parse(fs.readFileSync(datasetPath, \"utf-8\"));\n  \n  if (!data.questions || !Array.isArray(data.questions)) {\n    console.error(\"‚ùå Invalid dataset format\");\n    return;\n  }\n\n  const questions = data.questions;\n  const categories = new Set(questions.map((q: any) => q.category));\n  const difficulties = new Set(questions.map((q: any) => q.difficulty));\n\n  console.log(\"\\nüìä Question Dataset Statistics:\");\n  console.log(\"================================\");\n  console.log(`‚úì Total Questions: ${questions.length}`);\n  console.log(`‚úì Categories: ${Array.from(categories).join(\", \")}`);\n  console.log(`‚úì Difficulties: ${Array.from(difficulties).join(\", \")}`);\n  \n  const categoryBreakdown: Record<string, number> = {};\n  questions.forEach((q: any) => {\n    categoryBreakdown[q.category] = (categoryBreakdown[q.category] || 0) + 1;\n  });\n  \n  console.log(\"\\nüìà Questions per Category:\");\n  Object.entries(categoryBreakdown).sort((a, b) => b[1] - a[1]).forEach(([cat, count]) => {\n    console.log(`  ${cat}: ${count} questions`);\n  });\n  \n  const difficultyBreakdown: Record<string, number> = {};\n  questions.forEach((q: any) => {\n    difficultyBreakdown[q.difficulty] = (difficultyBreakdown[q.difficulty] || 0) + 1;\n  });\n  \n  console.log(\"\\nüìä Questions per Difficulty:\");\n  Object.entries(difficultyBreakdown).forEach(([diff, count]) => {\n    console.log(`  ${diff}: ${count} questions`);\n  });\n  \n  // Sample a few questions\n  console.log(\"\\nüîç Sample Questions:\");\n  questions.slice(0, 3).forEach((q: any, i: number) => {\n    console.log(`\\n${i + 1}. [${q.category}] [${q.difficulty}] ${q.question}`);\n    console.log(`   Options: ${q.options?.length || 0}`);\n  });\n}\n\nverifyQuestionDataset().catch(console.error);\n","path":null,"size_bytes":2160,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"client/src/components/ProgressionRanks.tsx":{"content":"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Trophy, Target, Star, Crown } from \"lucide-react\";\n\ninterface Rank {\n  name: string;\n  minXP: number;\n  icon: string;\n}\n\nconst ranks: Rank[] = [\n  { name: \"Junior\", minXP: 0, icon: \"üå±\" },\n  { name: \"Mid-Level\", minXP: 10000, icon: \"üåø\" },\n  { name: \"Senior\", minXP: 25000, icon: \"üå≥\" },\n  { name: \"Lead\", minXP: 50000, icon: \"üèÜ\" }\n];\n\ninterface ProgressionRanksProps {\n  currentXP: number;\n  careerPath?: string;\n}\n\nexport default function ProgressionRanks({ currentXP, careerPath }: ProgressionRanksProps) {\n  const currentRankIndex = ranks.findIndex((rank, index) => {\n    const nextRank = ranks[index + 1];\n    return currentXP >= rank.minXP && (!nextRank || currentXP < nextRank.minXP);\n  });\n\n  const currentRank = ranks[currentRankIndex];\n  const nextRank = ranks[currentRankIndex + 1];\n  \n  const progressToNext = nextRank \n    ? ((currentXP - currentRank.minXP) / (nextRank.minXP - currentRank.minXP)) * 100\n    : 100;\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Trophy className=\"w-5 h-5\" />\n          Progression Rank\n        </CardTitle>\n        <CardDescription>\n          {careerPath ? `Your rank in ${careerPath}` : \"Select a career path to see your rank\"}\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-6\">\n          {/* Current Rank */}\n          <div className=\"text-center\">\n            <div className=\"text-5xl mb-2\">{currentRank.icon}</div>\n            <h3 className=\"text-2xl font-bold\">{currentRank.name}</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              {currentXP.toLocaleString()} XP\n            </p>\n          </div>\n\n          {/* Progress to Next Rank */}\n          {nextRank && (\n            <div>\n              <div className=\"flex items-center justify-between text-sm mb-2\">\n                <span className=\"text-muted-foreground\">Progress to {nextRank.name}</span>\n                <span className=\"font-medium\">{Math.round(progressToNext)}%</span>\n              </div>\n              <Progress value={progressToNext} className=\"h-2\" />\n              <p className=\"text-xs text-muted-foreground mt-1 text-center\">\n                {(nextRank.minXP - currentXP).toLocaleString()} XP to go\n              </p>\n            </div>\n          )}\n\n          {/* All Ranks */}\n          <div className=\"space-y-2\">\n            <h4 className=\"font-semibold text-sm mb-3\">Rank Progression</h4>\n            {ranks.map((rank, index) => {\n              const achieved = currentXP >= rank.minXP;\n              const isCurrent = index === currentRankIndex;\n\n              return (\n                <div\n                  key={rank.name}\n                  className={`flex items-center justify-between p-3 rounded-lg border ${\n                    isCurrent ? \"border-primary bg-primary/5\" : achieved ? \"border-green-500/50 bg-green-500/5\" : \"border-border\"\n                  }`}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <div className={`text-2xl ${achieved ? \"\" : \"opacity-30\"}`}>\n                      {rank.icon}\n                    </div>\n                    <div>\n                      <p className={`font-medium ${!achieved && \"opacity-50\"}`}>\n                        {rank.name}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {rank.minXP.toLocaleString()} XP\n                      </p>\n                    </div>\n                  </div>\n                  {isCurrent && (\n                    <Badge variant=\"default\">Current</Badge>\n                  )}\n                  {achieved && !isCurrent && (\n                    <Badge variant=\"secondary\" className=\"bg-green-500/20 text-green-700 dark:text-green-400\">\n                      Achieved\n                    </Badge>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":4229,"size_tokens":null},"client/src/pages/Leaderboard.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport LeaderboardTable from \"@/components/LeaderboardTable\";\nimport { Trophy, TrendingUp, Users, Crown, ArrowLeft } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\n\ninterface LeaderboardEntry {\n  rank: number;\n  userId: string;\n  username: string;\n  level: number;\n  totalXp: number;\n  badgeCount: number;\n}\n\ninterface CareerPath {\n  id: string;\n  name: string;\n  color: string;\n}\n\nexport default function Leaderboard() {\n  const { user } = useAuth();\n  const [, setLocation] = useLocation();\n  const [selectedPath, setSelectedPath] = useState<string | \"all\">(\"all\");\n  const [timeFilter, setTimeFilter] = useState<string>(\"allTime\");\n\n  // Fetch career paths for filter\n  const { data: careerPathsData } = useQuery<{ careerPaths: CareerPath[] }>({\n    queryKey: [\"/api/career-paths\"],\n  });\n  const careerPaths = careerPathsData?.careerPaths || [];\n\n  // Fetch leaderboard data\n  const { data: leaderboardData, isLoading } = useQuery<{ leaderboard: LeaderboardEntry[] }>({\n    queryKey: [\"/api/leaderboard\", selectedPath, timeFilter],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (selectedPath !== \"all\") params.append(\"careerPath\", selectedPath);\n      if (timeFilter !== \"allTime\") params.append(\"timeFilter\", timeFilter);\n      \n      const response = await fetch(`/api/leaderboard?${params.toString()}`, {\n        credentials: \"include\",\n      });\n      if (!response.ok) throw new Error(\"Failed to fetch leaderboard\");\n      return response.json();\n    },\n  });\n\n  const leaderboard = leaderboardData?.leaderboard || [];\n\n  // Transform data for LeaderboardTable component\n  const tableEntries = leaderboard.map(entry => ({\n    rank: entry.rank,\n    name: entry.username,\n    level: entry.level,\n    xp: entry.totalXp,\n    badges: entry.badgeCount,\n    isCurrentUser: user?.id === entry.userId,\n  }));\n\n  // Find current user's rank\n  const currentUserEntry = leaderboard.find(entry => entry.userId === user?.id);\n  const currentUserRank = currentUserEntry?.rank || null;\n\n  return (\n    <div className=\"min-h-screen bg-background p-6\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => setLocation(\"/dashboard\")}\n            className=\"mb-4 gap-2\"\n            data-testid=\"button-back-to-dashboard\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            Back to Dashboard\n          </Button>\n          <div className=\"flex items-center gap-3 mb-2\">\n            <div className=\"w-12 h-12 rounded-lg bg-primary flex items-center justify-center\">\n              <Trophy className=\"w-7 h-7 text-primary-foreground\" />\n            </div>\n            <div>\n              <h1 className=\"text-3xl font-bold\" data-testid=\"text-leaderboard-title\">Global Leaderboard</h1>\n              <p className=\"text-muted-foreground\">Compete with the best learners worldwide</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n          <Card className=\"hover-elevate\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Your Rank</p>\n                  <p className=\"text-3xl font-bold mt-1\" data-testid=\"text-current-rank\">\n                    {currentUserRank ? `#${currentUserRank}` : \"-\"}\n                  </p>\n                </div>\n                <Crown className=\"w-10 h-10 text-primary opacity-20\" />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"hover-elevate\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Total Players</p>\n                  <p className=\"text-3xl font-bold mt-1\" data-testid=\"text-total-players\">\n                    {leaderboard.length}\n                  </p>\n                </div>\n                <Users className=\"w-10 h-10 text-primary opacity-20\" />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"hover-elevate\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Top XP</p>\n                  <p className=\"text-3xl font-bold mt-1\" data-testid=\"text-top-xp\">\n                    {leaderboard[0]?.totalXp?.toLocaleString() || \"0\"}\n                  </p>\n                </div>\n                <TrendingUp className=\"w-10 h-10 text-primary opacity-20\" />\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Filters */}\n        <Card className=\"mb-6\">\n          <CardHeader>\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\n              <div>\n                <CardTitle>Leaderboard Rankings</CardTitle>\n                <CardDescription>Filter by career path or view all rankings</CardDescription>\n              </div>\n              <div className=\"flex gap-3\">\n                <Select value={selectedPath} onValueChange={setSelectedPath}>\n                  <SelectTrigger className=\"w-[200px]\" data-testid=\"select-career-path\">\n                    <SelectValue placeholder=\"All Career Paths\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Career Paths</SelectItem>\n                    {careerPaths.map(path => (\n                      <SelectItem key={path.id} value={path.id}>\n                        {path.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n\n                <Select value={timeFilter} onValueChange={setTimeFilter}>\n                  <SelectTrigger className=\"w-[150px]\" data-testid=\"select-time-filter\">\n                    <SelectValue placeholder=\"All Time\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"allTime\">All Time</SelectItem>\n                    <SelectItem value=\"thisWeek\">This Week</SelectItem>\n                    <SelectItem value=\"thisMonth\">This Month</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <div className=\"text-center\">\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n                  <p className=\"text-muted-foreground\">Loading rankings...</p>\n                </div>\n              </div>\n            ) : tableEntries.length > 0 ? (\n              <LeaderboardTable entries={tableEntries} />\n            ) : (\n              <div className=\"text-center py-12\">\n                <Trophy className=\"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-20\" />\n                <p className=\"text-muted-foreground\">No rankings available yet</p>\n                <p className=\"text-sm text-muted-foreground mt-1\">\n                  Start completing quizzes and challenges to earn your spot!\n                </p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Achievement Milestones */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Achievement Milestones</CardTitle>\n            <CardDescription>Reach these milestones to climb the leaderboard</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"p-4 rounded-lg bg-muted/50 border border-card-border\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <Trophy className=\"w-5 h-5 text-[hsl(var(--badge-legendary))]\" />\n                  <span className=\"font-semibold\">Top 10</span>\n                </div>\n                <p className=\"text-sm text-muted-foreground\">\n                  Reach Level 50+ and earn 20+ badges\n                </p>\n              </div>\n              <div className=\"p-4 rounded-lg bg-muted/50 border border-card-border\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <Trophy className=\"w-5 h-5 text-[hsl(var(--badge-epic))]\" />\n                  <span className=\"font-semibold\">Top 50</span>\n                </div>\n                <p className=\"text-sm text-muted-foreground\">\n                  Reach Level 30+ and earn 10+ badges\n                </p>\n              </div>\n              <div className=\"p-4 rounded-lg bg-muted/50 border border-card-border\">\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <Trophy className=\"w-5 h-5 text-[hsl(var(--badge-rare))]\" />\n                  <span className=\"font-semibold\">Top 100</span>\n                </div>\n                <p className=\"text-sm text-muted-foreground\">\n                  Reach Level 15+ and earn 5+ badges\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":9947,"size_tokens":null},"client/src/components/examples/BadgeCard.tsx":{"content":"import BadgeCard from '../BadgeCard';\nimport { Award } from 'lucide-react';\n\nexport default function BadgeCardExample() {\n  return (\n    <div className=\"grid grid-cols-2 gap-4 p-4\">\n      <BadgeCard \n        icon={Award}\n        title=\"First Steps\"\n        description=\"Complete your first lesson\"\n        rarity=\"common\"\n        unlocked={true}\n      />\n      <BadgeCard \n        icon={Award}\n        title=\"Code Master\"\n        description=\"Solve 100 challenges\"\n        rarity=\"legendary\"\n        unlocked={false}\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":544,"size_tokens":null},"client/src/components/ErrorBoundary.tsx":{"content":"import { Component, ErrorInfo, ReactNode } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { AlertCircle } from \"lucide-react\";\n\ninterface Props {\n  children: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error?: Error;\n}\n\nexport class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error(\"Error caught by boundary:\", error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen bg-background flex items-center justify-center p-6\">\n          <Card className=\"max-w-md w-full border-destructive\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2 text-destructive\">\n                <AlertCircle className=\"w-5 h-5\" />\n                Something Went Wrong\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <p className=\"text-muted-foreground\">\n                We encountered an unexpected error. Please try refreshing the page.\n              </p>\n              {this.state.error && (\n                <details className=\"text-sm\">\n                  <summary className=\"cursor-pointer text-muted-foreground\">\n                    Error Details\n                  </summary>\n                  <pre className=\"mt-2 p-2 bg-muted rounded text-xs overflow-auto\">\n                    {this.state.error.message}\n                  </pre>\n                </details>\n              )}\n              <Button\n                onClick={() => window.location.reload()}\n                className=\"w-full\"\n                data-testid=\"button-reload\"\n              >\n                Reload Page\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","path":null,"size_bytes":2141,"size_tokens":null},"client/src/components/CodeEditor.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { \n  Select, \n  SelectContent, \n  SelectItem, \n  SelectTrigger, \n  SelectValue \n} from \"@/components/ui/select\";\nimport { RotateCcw, Play } from \"lucide-react\";\nimport CodeMirror from \"@uiw/react-textarea-code-editor\";\n\ninterface CodeEditorProps {\n  initialCode?: string;\n  language?: string;\n  onLanguageChange?: (language: string) => void;\n  onSubmit?: (code: string) => void;\n  isSubmitting?: boolean;\n}\n\nconst languageOptions = [\n  { value: \"javascript\", label: \"JavaScript\", editorLang: \"js\" },\n  { value: \"python\", label: \"Python\", editorLang: \"python\" },\n  { value: \"java\", label: \"Java\", editorLang: \"java\" },\n  { value: \"cpp\", label: \"C++\", editorLang: \"cpp\" },\n];\n\nconst defaultCodeTemplates: Record<string, string> = {\n  javascript: \"// Write your code here\\nfunction solution() {\\n  return 'Hello, CareerQuest!';\\n}\\n\\nsolution();\",\n  python: \"# Write your code here\\ndef solution():\\n    return 'Hello, CareerQuest!'\\n\\nsolution()\",\n  java: \"// Write your code here\\npublic class Solution {\\n    public static void main(String[] args) {\\n        System.out.println(\\\"Hello, CareerQuest!\\\");\\n    }\\n}\",\n  cpp: \"// Write your code here\\n#include <iostream>\\nusing namespace std;\\n\\nint main() {\\n    cout << \\\"Hello, CareerQuest!\\\" << endl;\\n    return 0;\\n}\",\n};\n\nexport default function CodeEditor({ \n  initialCode,\n  language = \"javascript\",\n  onLanguageChange,\n  onSubmit,\n  isSubmitting = false\n}: CodeEditorProps) {\n  const [currentLanguage, setCurrentLanguage] = useState(language);\n  const [code, setCode] = useState(initialCode || defaultCodeTemplates[language]);\n\n  // Update code when initialCode or language changes\n  useEffect(() => {\n    if (initialCode) {\n      setCode(initialCode);\n    } else {\n      setCode(defaultCodeTemplates[currentLanguage] || \"\");\n    }\n  }, [initialCode, currentLanguage]);\n\n  const handleLanguageChange = (newLanguage: string) => {\n    setCurrentLanguage(newLanguage);\n    onLanguageChange?.(newLanguage);\n    \n    // Update code template if no custom code\n    if (!initialCode) {\n      setCode(defaultCodeTemplates[newLanguage] || \"\");\n    }\n  };\n\n  const handleReset = () => {\n    const resetCode = initialCode || defaultCodeTemplates[currentLanguage];\n    setCode(resetCode);\n  };\n\n  const handleSubmit = () => {\n    onSubmit?.(code);\n  };\n\n  const editorLang = languageOptions.find(l => l.value === currentLanguage)?.editorLang || \"js\";\n\n  return (\n    <div className=\"space-y-4\">\n      <Card className=\"flex flex-col\">\n        <div className=\"flex items-center justify-between p-3 border-b\">\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-sm font-medium\">Language:</span>\n            <Select value={currentLanguage} onValueChange={handleLanguageChange}>\n              <SelectTrigger className=\"w-40\" data-testid=\"select-language\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {languageOptions.map(lang => (\n                  <SelectItem key={lang.value} value={lang.value}>\n                    {lang.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button \n              size=\"sm\" \n              variant=\"outline\"\n              onClick={handleReset}\n              data-testid=\"button-reset\"\n            >\n              <RotateCcw className=\"w-4 h-4 mr-2\" />\n              Reset\n            </Button>\n          </div>\n        </div>\n        <CardContent className=\"p-0\">\n          <CodeMirror\n            value={code}\n            language={editorLang}\n            onChange={(evn) => setCode(evn.target.value)}\n            padding={16}\n            data-testid=\"input-code\"\n            style={{\n              fontSize: 14,\n              fontFamily: 'ui-monospace, SFMono-Regular, \"SF Mono\", Consolas, \"Liberation Mono\", Menlo, monospace',\n              minHeight: '500px',\n              backgroundColor: '#1e1e1e',\n            }}\n            className=\"w-full\"\n          />\n        </CardContent>\n      </Card>\n\n      <div className=\"flex justify-end gap-3\">\n        <Button \n          size=\"lg\" \n          onClick={handleSubmit}\n          disabled={isSubmitting}\n          data-testid=\"button-submit\"\n        >\n          {isSubmitting ? (\n            <>Submitting...</>\n          ) : (\n            <>\n              <Play className=\"w-5 h-5 mr-2\" />\n              Submit Solution\n            </>\n          )}\n        </Button>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":4709,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/components/AuthModal.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2, CheckCircle, XCircle, Sparkles, Shield, Eye, EyeOff, Chrome } from \"lucide-react\";\nimport { validatePasswordStrength } from \"@/lib/passwordValidation\";\nimport ForgotPasswordModal from \"./ForgotPasswordModal\";\n\ninterface AuthModalProps {\n  open: boolean;\n  onClose: () => void;\n  mode: \"login\" | \"register\";\n}\n\nexport default function AuthModal({ open, onClose, mode: initialMode }: AuthModalProps) {\n  const [activeTab, setActiveTab] = useState<\"login\" | \"register\">(initialMode);\n  const [showForgotPassword, setShowForgotPassword] = useState(false);\n  const [showLoginPassword, setShowLoginPassword] = useState(false);\n  const [showRegisterPassword, setShowRegisterPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n\n  useEffect(() => {\n    if (open) {\n      setActiveTab(initialMode);\n      // Update URL hash for deep linking\n      window.history.replaceState(null, '', `#auth=${initialMode}`);\n    }\n  }, [initialMode, open]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    email: \"\",\n    username: \"\",\n    password: \"\",\n    displayName: \"\",\n    pathSelectionMode: \"ai-guided\" as \"ai-guided\" | \"manual\",\n  });\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n\n  const { login, register } = useAuth();\n  const { toast } = useToast();\n\n  const passwordStrength = activeTab === \"register\" ? validatePasswordStrength(formData.password) : null;\n\n  const handleTabChange = (value: string) => {\n    setActiveTab(value as \"login\" | \"register\");\n    window.history.replaceState(null, '', `#auth=${value}`);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      if (activeTab === \"login\") {\n        await login(formData.email, formData.password);\n        toast({\n          title: \"Welcome back!\",\n          description: \"Successfully logged in to CareerQuest\",\n        });\n      } else {\n        if (!passwordStrength?.isValid) {\n          toast({\n            variant: \"destructive\",\n            title: \"Weak Password\",\n            description: \"Please create a stronger password meeting all requirements\",\n          });\n          setIsLoading(false);\n          return;\n        }\n        if (formData.password !== confirmPassword) {\n          toast({\n            variant: \"destructive\",\n            title: \"Passwords Don't Match\",\n            description: \"Please make sure both passwords are identical\",\n          });\n          setIsLoading(false);\n          return;\n        }\n        await register({\n          email: formData.email,\n          username: formData.username,\n          password: formData.password,\n          confirmPassword: confirmPassword,\n          displayName: formData.displayName,\n          pathSelectionMode: formData.pathSelectionMode,\n        });\n        toast({\n          title: \"Account created!\",\n          description: \"Welcome to CareerQuest - let's start your journey\",\n        });\n      }\n      onClose();\n      // Reset form\n      setFormData({\n        email: \"\",\n        username: \"\",\n        password: \"\",\n        displayName: \"\",\n        pathSelectionMode: \"ai-guided\",\n      });\n      setConfirmPassword(\"\");\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: activeTab === \"login\" ? \"Login failed\" : \"Registration failed\",\n        description: error.message || \"Please check your credentials and try again\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const getPasswordStrengthValue = () => {\n    if (!passwordStrength) return 0;\n    return (passwordStrength.score / 5) * 100;\n  };\n\n  const getPasswordStrengthColor = () => {\n    if (!passwordStrength) return \"bg-muted\";\n    if (passwordStrength.score >= 4) return \"bg-green-500\";\n    if (passwordStrength.score >= 3) return \"bg-yellow-500\";\n    return \"bg-red-500\";\n  };\n\n  return (\n    <>\n      <Dialog open={open} onOpenChange={onClose}>\n        <DialogContent className=\"sm:max-w-[480px] p-0 gap-0 max-h-[90vh] overflow-y-auto\">\n        <DialogHeader className=\"px-6 pt-6 pb-4\">\n          <DialogTitle className=\"text-2xl font-display font-bold flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center\">\n              <Sparkles className=\"w-4 h-4 text-primary\" />\n            </div>\n            Welcome to CareerQuest\n          </DialogTitle>\n          <DialogDescription>\n            {activeTab === \"login\" \n              ? \"Log in to continue your learning journey\" \n              : \"Create an account to start leveling up your career\"}\n          </DialogDescription>\n        </DialogHeader>\n\n        <Tabs value={activeTab} onValueChange={handleTabChange} className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-2 mx-6\" style={{ width: 'calc(100% - 3rem)' }}>\n            <TabsTrigger value=\"login\" data-testid=\"tab-login\">\n              Log In\n            </TabsTrigger>\n            <TabsTrigger value=\"register\" data-testid=\"tab-register\">\n              Sign Up\n            </TabsTrigger>\n          </TabsList>\n\n          <form onSubmit={handleSubmit} className=\"px-6 pb-6\">\n            <TabsContent value=\"login\" className=\"space-y-4 mt-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"login-email\">Email</Label>\n                <Input\n                  id=\"login-email\"\n                  type=\"email\"\n                  placeholder=\"you@example.com\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  required\n                  data-testid=\"input-email\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"login-password\">Password</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"login-password\"\n                    type={showLoginPassword ? \"text\" : \"password\"}\n                    placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                    value={formData.password}\n                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                    required\n                    data-testid=\"input-password\"\n                    className=\"pr-10\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowLoginPassword(!showLoginPassword)}\n                    className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                    data-testid=\"button-toggle-login-password\"\n                  >\n                    {showLoginPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                  </button>\n                </div>\n              </div>\n\n              <Button \n                type=\"submit\" \n                className=\"w-full mt-6\" \n                disabled={isLoading} \n                data-testid=\"button-submit-auth\"\n              >\n                {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                Log In to CareerQuest\n              </Button>\n\n              <div className=\"text-center text-xs text-muted-foreground pt-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowForgotPassword(true)}\n                  className=\"text-primary hover:underline font-medium\"\n                  data-testid=\"button-forgot-password\"\n                >\n                  Forgot your password?\n                </button>\n              </div>\n\n              <div className=\"flex flex-col gap-4 pt-4\">\n                <div className=\"relative\">\n                  <div className=\"absolute inset-0 flex items-center\">\n                    <div className=\"w-full border-t border-muted\"></div>\n                  </div>\n                  <div className=\"relative flex justify-center text-xs uppercase\">\n                    <span className=\"bg-background px-2 text-muted-foreground\">Or continue with</span>\n                  </div>\n                </div>\n\n                <a\n                  href=\"/api/login\"\n                  className=\"w-full inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md border border-input bg-background hover:bg-accent hover:text-accent-foreground transition-colors\"\n                  data-testid=\"button-google-login\"\n                >\n                  <Chrome className=\"w-4 h-4\" />\n                  <span>Google</span>\n                </a>\n              </div>\n\n              <div className=\"text-center text-sm text-muted-foreground pt-4\">\n                Don't have an account?{\" \"}\n                <button\n                  type=\"button\"\n                  onClick={() => handleTabChange(\"register\")}\n                  className=\"text-primary hover:underline font-medium\"\n                  data-testid=\"button-switch-register\"\n                >\n                  Sign up for free\n                </button>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"register\" className=\"space-y-4 mt-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"register-email\">Email</Label>\n                <Input\n                  id=\"register-email\"\n                  type=\"email\"\n                  placeholder=\"you@example.com\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  required\n                  data-testid=\"input-email\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"username\">Username</Label>\n                  <Input\n                    id=\"username\"\n                    type=\"text\"\n                    placeholder=\"coolcoder\"\n                    value={formData.username}\n                    onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                    required\n                    data-testid=\"input-username\"\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"displayName\">Display Name</Label>\n                  <Input\n                    id=\"displayName\"\n                    type=\"text\"\n                    placeholder=\"John Doe\"\n                    value={formData.displayName}\n                    onChange={(e) => setFormData({ ...formData, displayName: e.target.value })}\n                    required\n                    data-testid=\"input-displayName\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"register-password\">Password</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"register-password\"\n                    type={showRegisterPassword ? \"text\" : \"password\"}\n                    placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                    value={formData.password}\n                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                    required\n                    data-testid=\"input-password\"\n                    className=\"pr-10\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowRegisterPassword(!showRegisterPassword)}\n                    className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                    data-testid=\"button-toggle-register-password\"\n                  >\n                    {showRegisterPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                  </button>\n                </div>\n                {formData.password && passwordStrength && (\n                  <div className=\"space-y-2 pt-2\">\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-muted-foreground\">Password strength</span>\n                      <span className={\n                        passwordStrength.score >= 4 ? \"text-green-600 font-medium\" :\n                        passwordStrength.score >= 3 ? \"text-yellow-600 font-medium\" : \n                        \"text-red-600 font-medium\"\n                      }>\n                        {passwordStrength.feedback}\n                      </span>\n                    </div>\n                    <Progress \n                      value={getPasswordStrengthValue()} \n                      className=\"h-2\"\n                      indicatorClassName={getPasswordStrengthColor()}\n                    />\n                    <div className=\"grid grid-cols-2 gap-x-4 gap-y-1 text-xs pt-1\">\n                      {[\n                        { key: \"minLength\", label: \"8+ characters\" },\n                        { key: \"hasUppercase\", label: \"Uppercase\" },\n                        { key: \"hasLowercase\", label: \"Lowercase\" },\n                        { key: \"hasNumber\", label: \"Number\" },\n                        { key: \"hasSpecial\", label: \"Special char\" },\n                      ].map(({ key, label }) => (\n                        <div key={key} className=\"flex items-center gap-1.5\">\n                          {passwordStrength.checks[key as keyof typeof passwordStrength.checks] ? (\n                            <CheckCircle className=\"w-3 h-3 text-green-600 flex-shrink-0\" />\n                          ) : (\n                            <XCircle className=\"w-3 h-3 text-muted-foreground flex-shrink-0\" />\n                          )}\n                          <span className={\n                            passwordStrength.checks[key as keyof typeof passwordStrength.checks] \n                              ? \"text-green-600\" \n                              : \"text-muted-foreground\"\n                          }>\n                            {label}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"confirm-password\">Confirm Password</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"confirm-password\"\n                    type={showConfirmPassword ? \"text\" : \"password\"}\n                    placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    required\n                    data-testid=\"input-confirm-password\"\n                    className=\"pr-10\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                    className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                    data-testid=\"button-toggle-confirm-password\"\n                  >\n                    {showConfirmPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                  </button>\n                </div>\n                {confirmPassword && (\n                  <div className=\"flex items-center gap-2 text-sm pt-1\">\n                    {formData.password === confirmPassword ? (\n                      <>\n                        <CheckCircle className=\"w-4 h-4 text-green-600\" />\n                        <span className=\"text-green-600 font-medium\">Passwords match</span>\n                      </>\n                    ) : (\n                      <>\n                        <XCircle className=\"w-4 h-4 text-red-600\" />\n                        <span className=\"text-red-600 font-medium\">Passwords don't match</span>\n                      </>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              <div className=\"space-y-3 pt-2\">\n                <Label className=\"flex items-center gap-2\">\n                  <Shield className=\"w-4 h-4 text-primary\" />\n                  Learning Path Preference\n                </Label>\n                <RadioGroup\n                  value={formData.pathSelectionMode}\n                  onValueChange={(value) =>\n                    setFormData({ ...formData, pathSelectionMode: value as \"ai-guided\" | \"manual\" })\n                  }\n                >\n                  <div className=\"flex items-start space-x-3 rounded-lg border p-3 hover-elevate cursor-pointer transition-all\">\n                    <RadioGroupItem value=\"ai-guided\" id=\"ai-guided\" className=\"mt-0.5\" data-testid=\"radio-ai-guided\" />\n                    <div className=\"flex-1\">\n                      <Label htmlFor=\"ai-guided\" className=\"font-medium cursor-pointer flex items-center gap-2\">\n                        <Sparkles className=\"w-4 h-4 text-primary\" />\n                        AI-Guided Path\n                      </Label>\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        Let AI analyze your performance and recommend the perfect career path\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-start space-x-3 rounded-lg border p-3 hover-elevate cursor-pointer transition-all\">\n                    <RadioGroupItem value=\"manual\" id=\"manual\" className=\"mt-0.5\" data-testid=\"radio-manual\" />\n                    <div className=\"flex-1\">\n                      <Label htmlFor=\"manual\" className=\"font-medium cursor-pointer flex items-center gap-2\">\n                        <Shield className=\"w-4 h-4 text-primary\" />\n                        Choose My Own Path\n                      </Label>\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        Select your career path manually based on your goals\n                      </p>\n                    </div>\n                  </div>\n                </RadioGroup>\n              </div>\n\n              <Button \n                type=\"submit\" \n                className=\"w-full mt-6\" \n                disabled={isLoading} \n                data-testid=\"button-submit-auth\"\n              >\n                {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                Create Account\n              </Button>\n\n              <div className=\"text-center text-sm text-muted-foreground pt-4\">\n                Already have an account?{\" \"}\n                <button\n                  type=\"button\"\n                  onClick={() => handleTabChange(\"login\")}\n                  className=\"text-primary hover:underline font-medium\"\n                  data-testid=\"button-switch-login\"\n                >\n                  Log in\n                </button>\n              </div>\n            </TabsContent>\n          </form>\n        </Tabs>\n      </DialogContent>\n    </Dialog>\n\n    <ForgotPasswordModal \n      open={showForgotPassword} \n      onClose={() => setShowForgotPassword(false)}\n      onBackToLogin={() => setShowForgotPassword(false)}\n    />\n    </>\n  );\n}\n","path":null,"size_bytes":19886,"size_tokens":null},"server/judge0.ts":{"content":"/**\n * Judge0 API Integration\n * Handles code compilation and execution via Judge0 CE (Community Edition)\n */\n\nconst JUDGE0_API_KEY = process.env.JUDGE0_API_KEY;\nconst JUDGE0_HOST = \"judge0-ce.p.rapidapi.com\";\nconst JUDGE0_BASE_URL = `https://${JUDGE0_HOST}`;\n\n// Language IDs from Judge0 CE\nexport const LANGUAGE_IDS = {\n  javascript: 63,  // Node.js\n  python: 71,      // Python 3\n  java: 62,        // Java\n  cpp: 54,         // C++ (GCC)\n  c: 50,           // C (GCC)\n  typescript: 74,  // TypeScript\n  go: 60,          // Go\n  rust: 73,        // Rust\n} as const;\n\ninterface SubmissionResult {\n  stdout: string | null;\n  stderr: string | null;\n  compile_output: string | null;\n  message: string | null;\n  status: {\n    id: number;\n    description: string;\n  };\n  time: string | null;\n  memory: number | null;\n}\n\nexport class Judge0Service {\n  \n  /**\n   * Submit code for execution\n   */\n  async submitCode(params: {\n    sourceCode: string;\n    languageId: number;\n    stdin?: string;\n    expectedOutput?: string;\n  }): Promise<{ token: string }> {\n    if (!JUDGE0_API_KEY) {\n      throw new Error(\"JUDGE0_API_KEY is not configured\");\n    }\n\n    const response = await fetch(`${JUDGE0_BASE_URL}/submissions?base64_encoded=false&wait=false`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-RapidAPI-Key': JUDGE0_API_KEY,\n        'X-RapidAPI-Host': JUDGE0_HOST,\n      },\n      body: JSON.stringify({\n        source_code: params.sourceCode,\n        language_id: params.languageId,\n        stdin: params.stdin || \"\",\n        expected_output: params.expectedOutput || null,\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(`Judge0 submission failed: ${error}`);\n    }\n\n    const data = await response.json();\n    return { token: data.token };\n  }\n\n  /**\n   * Get submission result\n   */\n  async getSubmission(token: string): Promise<SubmissionResult> {\n    if (!JUDGE0_API_KEY) {\n      throw new Error(\"JUDGE0_API_KEY is not configured\");\n    }\n\n    const response = await fetch(`${JUDGE0_BASE_URL}/submissions/${token}?base64_encoded=false`, {\n      method: 'GET',\n      headers: {\n        'X-RapidAPI-Key': JUDGE0_API_KEY,\n        'X-RapidAPI-Host': JUDGE0_HOST,\n      },\n    });\n\n    if (!response.ok) {\n      const error = await response.text();\n      throw new Error(`Judge0 get submission failed: ${error}`);\n    }\n\n    return await response.json();\n  }\n\n  /**\n   * Submit and wait for result (polling)\n   */\n  async executeCode(params: {\n    sourceCode: string;\n    languageId: number;\n    stdin?: string;\n    expectedOutput?: string;\n    maxWaitTime?: number;\n  }): Promise<SubmissionResult> {\n    const { token } = await this.submitCode(params);\n    const maxWaitTime = params.maxWaitTime || 10000; // 10 seconds default\n    const startTime = Date.now();\n    const pollInterval = 500; // 500ms\n\n    while (Date.now() - startTime < maxWaitTime) {\n      const result = await this.getSubmission(token);\n      \n      // Status IDs: 1=In Queue, 2=Processing\n      // Completed: 3=Accepted, 4=Wrong Answer, 5=Time Limit Exceeded, etc.\n      if (result.status.id > 2) {\n        return result;\n      }\n\n      // Wait before next poll\n      await new Promise(resolve => setTimeout(resolve, pollInterval));\n    }\n\n    throw new Error(\"Code execution timeout\");\n  }\n\n  /**\n   * Run test cases against code\n   */\n  async runTestCases(params: {\n    sourceCode: string;\n    languageId: number;\n    testCases: Array<{ input: string; expectedOutput: string }>;\n  }): Promise<{\n    passed: number;\n    total: number;\n    results: Array<{\n      input: string;\n      expectedOutput: string;\n      actualOutput: string | null;\n      passed: boolean;\n      error: string | null;\n    }>;\n  }> {\n    const results = [];\n    \n    for (const testCase of params.testCases) {\n      try {\n        const result = await this.executeCode({\n          sourceCode: params.sourceCode,\n          languageId: params.languageId,\n          stdin: testCase.input,\n          expectedOutput: testCase.expectedOutput,\n        });\n\n        const actualOutput = result.stdout?.trim() || null;\n        const expectedOutput = testCase.expectedOutput.trim();\n        const passed = actualOutput === expectedOutput && result.status.id === 3;\n\n        results.push({\n          input: testCase.input,\n          expectedOutput: testCase.expectedOutput,\n          actualOutput,\n          passed,\n          error: result.stderr || result.compile_output || result.message || null,\n        });\n      } catch (error: any) {\n        results.push({\n          input: testCase.input,\n          expectedOutput: testCase.expectedOutput,\n          actualOutput: null,\n          passed: false,\n          error: error.message,\n        });\n      }\n    }\n\n    const passed = results.filter(r => r.passed).length;\n    \n    return {\n      passed,\n      total: results.length,\n      results,\n    };\n  }\n}\n\nexport const judge0Service = new Judge0Service();\n","path":null,"size_bytes":5000,"size_tokens":null},"client/src/components/examples/ThemeToggle.tsx":{"content":"import ThemeToggle from '../ThemeToggle';\n\nexport default function ThemeToggleExample() {\n  return <ThemeToggle />;\n}\n","path":null,"size_bytes":118,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"client/src/components/BadgeCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Lock } from \"lucide-react\";\nimport { LucideIcon } from \"lucide-react\";\n\ninterface BadgeCardProps {\n  icon: LucideIcon;\n  title: string;\n  description: string;\n  rarity: \"common\" | \"rare\" | \"epic\" | \"legendary\";\n  unlocked: boolean;\n}\n\nconst rarityColors = {\n  common: \"text-[hsl(var(--badge-common))] border-[hsl(var(--badge-common))]\",\n  rare: \"text-[hsl(var(--badge-rare))] border-[hsl(var(--badge-rare))]\",\n  epic: \"text-[hsl(var(--badge-epic))] border-[hsl(var(--badge-epic))]\",\n  legendary: \"text-[hsl(var(--badge-legendary))] border-[hsl(var(--badge-legendary))]\",\n};\n\nconst rarityGlow = {\n  common: \"\",\n  rare: \"badge-glow-rare\",\n  epic: \"badge-glow-epic\",\n  legendary: \"badge-glow-legendary\",\n};\n\nexport default function BadgeCard({ icon: Icon, title, description, rarity, unlocked }: BadgeCardProps) {\n  return (\n    <Card className={`relative hover-elevate transition-all duration-300 ${!unlocked ? 'opacity-50' : ''} ${unlocked && rarity !== 'common' ? rarityGlow[rarity] : ''}`}>\n      <CardContent className=\"p-6 text-center\">\n        <div className={`w-20 h-20 mx-auto rounded-full border-2 flex items-center justify-center mb-4 ${unlocked ? rarityColors[rarity] : 'border-muted text-muted'} ${!unlocked ? 'grayscale' : ''}`}>\n          {unlocked ? (\n            <Icon className=\"w-10 h-10\" />\n          ) : (\n            <Lock className=\"w-10 h-10\" />\n          )}\n        </div>\n        <h3 className=\"font-semibold mb-1\">{title}</h3>\n        <p className=\"text-sm text-muted-foreground mb-2\">{description}</p>\n        <span className={`text-xs font-medium ${unlocked ? rarityColors[rarity] : 'text-muted-foreground'}`}>\n          {rarity.toUpperCase()}\n        </span>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":1793,"size_tokens":null},"client/src/components/examples/CodeEditor.tsx":{"content":"import CodeEditor from '../CodeEditor';\n\nexport default function CodeEditorExample() {\n  return <CodeEditor />;\n}\n","path":null,"size_bytes":114,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { AuthProvider } from \"@/contexts/AuthContext\";\nimport ProtectedRoute from \"@/components/ProtectedRoute\";\nimport { ErrorBoundary } from \"@/components/ErrorBoundary\";\nimport { ParticleBackground } from \"@/components/ParticleBackground\";\nimport Landing from \"@/pages/Landing\";\nimport Dashboard from \"@/pages/Dashboard\";\nimport Quiz from \"@/pages/Quiz\";\nimport CodeChallenge from \"@/pages/CodeChallenge\";\nimport CareerPaths from \"@/pages/CareerPaths\";\nimport Admin from \"@/pages/Admin\";\nimport Profile from \"@/pages/Profile\";\nimport Leaderboard from \"@/pages/Leaderboard\";\nimport InterestAssessment from \"./pages/InterestAssessment\";\nimport Modules from \"./pages/Modules\";\nimport Lesson from \"./pages/Lesson\";\nimport SearchResults from \"./pages/SearchResults\";\nimport ResetPassword from \"./pages/ResetPassword\";\nimport NotFound from \"./pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Landing} />\n      <Route path=\"/dashboard\">\n        <ProtectedRoute>\n          <Dashboard />\n        </ProtectedRoute>\n      </Route>\n      <Route path=\"/quiz/:id\">\n        {(params) => (\n          <ProtectedRoute>\n            <Quiz quizId={params.id} />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/challenge/:id\">\n        {(params) => (\n          <ProtectedRoute>\n            <CodeChallenge challengeId={params.id} />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/careers\">\n        <ProtectedRoute>\n          <CareerPaths />\n        </ProtectedRoute>\n      </Route>\n      <Route path=\"/interest-assessment\" component={InterestAssessment} />\n      <Route path=\"/modules\">\n        <ProtectedRoute>\n          <Modules />\n        </ProtectedRoute>\n      </Route>\n      <Route path=\"/lesson/:lessonId\">\n        {(params) => (\n          <ProtectedRoute>\n            <Lesson />\n          </ProtectedRoute>\n        )}\n      </Route>\n      <Route path=\"/admin\">\n        <ProtectedRoute requireAdmin>\n          <Admin />\n        </ProtectedRoute>\n      </Route>\n      <Route path=\"/profile\">\n        <ProtectedRoute>\n          <Profile />\n        </ProtectedRoute>\n      </Route>\n      <Route path=\"/search\">\n        <ProtectedRoute>\n          <SearchResults />\n        </ProtectedRoute>\n      </Route>\n      <Route path=\"/leaderboard\">\n        <ProtectedRoute>\n          <Leaderboard />\n        </ProtectedRoute>\n      </Route>\n      <Route path=\"/reset-password\" component={ResetPassword} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <ErrorBoundary>\n      <QueryClientProvider client={queryClient}>\n        <AuthProvider>\n          <TooltipProvider>\n            <ParticleBackground />\n            <Toaster />\n            <Router />\n          </TooltipProvider>\n        </AuthProvider>\n      </QueryClientProvider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;","path":null,"size_bytes":3158,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"client/src/components/ProgressRing.tsx":{"content":"interface ProgressRingProps {\n  progress: number;\n  size?: number;\n  strokeWidth?: number;\n  children?: React.ReactNode;\n}\n\nexport default function ProgressRing({ \n  progress, \n  size = 120, \n  strokeWidth = 8,\n  children \n}: ProgressRingProps) {\n  const radius = (size - strokeWidth) / 2;\n  const circumference = radius * 2 * Math.PI;\n  const offset = circumference - (progress / 100) * circumference;\n\n  return (\n    <div className=\"relative inline-flex items-center justify-center\">\n      <svg width={size} height={size} className=\"transform -rotate-90\">\n        <circle\n          cx={size / 2}\n          cy={size / 2}\n          r={radius}\n          stroke=\"hsl(var(--muted))\"\n          strokeWidth={strokeWidth}\n          fill=\"none\"\n        />\n        <circle\n          cx={size / 2}\n          cy={size / 2}\n          r={radius}\n          stroke=\"hsl(var(--primary))\"\n          strokeWidth={strokeWidth}\n          fill=\"none\"\n          strokeDasharray={circumference}\n          strokeDashoffset={offset}\n          strokeLinecap=\"round\"\n          className=\"transition-all duration-500\"\n        />\n      </svg>\n      <div className=\"absolute inset-0 flex items-center justify-center\">\n        {children}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":1239,"size_tokens":null},"client/src/pages/CodeChallenge.tsx":{"content":"import { useLocation, Link } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport CodeEditor from \"@/components/CodeEditor\";\nimport ThemeToggle from \"@/components/ThemeToggle\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Trophy, CheckCircle2, Star, XCircle, Loader2, ArrowLeft, AlertTriangle } from \"lucide-react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState, useRef, useEffect } from \"react\";\nimport { useTabDetection } from \"@/hooks/useTabDetection\";\nimport ConfirmationDialog from \"@/components/ConfirmationDialog\";\nimport type { CodeChallenge as CodeChallengeType } from \"@shared/schema\";\n\ninterface TestResult {\n  input: string;\n  expectedOutput: string;\n  actualOutput: string | null;\n  passed: boolean;\n  error: string | null;\n}\n\ninterface CodeChallengeProps {\n  challengeId?: string;\n}\n\nexport default function CodeChallenge({ challengeId }: CodeChallengeProps) {\n  const id = challengeId;\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const [selectedLanguage, setSelectedLanguage] = useState(\"javascript\");\n  const [testResults, setTestResults] = useState<TestResult[] | null>(null);\n  const [hasAutoSubmitted, setHasAutoSubmitted] = useState(false);\n  const hasAutoSubmittedRef = useRef(false);\n  const [isTerminated, setIsTerminated] = useState(false);\n  const [showForfeitModal, setShowForfeitModal] = useState(false);\n  const [isForfeiting, setIsForfeiting] = useState(false);\n\n  const searchParams = new URLSearchParams(window.location.search);\n  const isDailyChallenge = searchParams.get('daily') === 'true';\n\n  // Tab detection for anti-cheat (ALWAYS enabled)\n  const { tabSwitched, switchCount, showWarning, reset: resetTabDetection, simulateTabSwitch } = useTabDetection({\n    enabled: true, // Always on, not just fullscreen\n    onTabSwitch: async () => {\n      console.log(`[CodeChallenge] Tab switch detected! Current switchCount will increment.`);\n      if (!hasAutoSubmittedRef.current) {\n        hasAutoSubmittedRef.current = true;\n        setHasAutoSubmitted(true);\n        setIsTerminated(true);\n        console.log(`[CodeChallenge] Setting isTerminated=true, showing termination screen`);\n\n        // Auto-submit if daily challenge\n        if (isDailyChallenge) {\n          try {\n            console.log('[CodeChallenge] Auto-submitting terminated daily challenge');\n            await apiRequest('POST', `/api/daily-challenges/complete`, {\n              challengeId: id,\n              challengeType: 'code',\n            });\n            await queryClient.invalidateQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n            await queryClient.refetchQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n            console.log('[CodeChallenge] Successfully auto-submitted daily challenge');\n          } catch (err) {\n            console.error('[CodeChallenge] Failed to auto-submit:', err);\n          }\n        }\n\n        toast({\n          title: \"‚ö†Ô∏è Challenge Terminated\",\n          description: \"Tab switching detected. Assessment terminated.\",\n          variant: \"destructive\",\n        });\n      }\n    },\n  });\n\n  // Debug: Log switch count changes\n  useEffect(() => {\n    console.log(`[CodeChallenge] switchCount updated: ${switchCount}, tabSwitched: ${tabSwitched}`);\n  }, [switchCount, tabSwitched]);\n\n  // Fetch challenge data\n  const { data: challengeData, isLoading, error } = useQuery<{ challenge: CodeChallengeType }>({\n    queryKey: [\"/api/challenges\", id],\n    enabled: !!id,\n  });\n\n  // Submit solution mutation\n  const submitMutation = useMutation({\n    mutationFn: async ({ code, language }: { code: string; language: string }) => {\n      const res = await apiRequest(\"POST\", `/api/challenges/${id}/submit`, { code, language });\n      return await res.json();\n    },\n    onSuccess: async (data: any) => {\n      setTestResults(data.testResults.results);\n      await queryClient.invalidateQueries({ queryKey: [\"/api/users/me\"] });\n      await queryClient.invalidateQueries({ queryKey: [\"/api/users/me/badges\"] });\n      await queryClient.refetchQueries({ queryKey: [\"/api/users/me/badges\"] });\n\n      // Check if user reached Level 20\n      if (data.reachedLevel20) {\n        toast({\n          title: \"üéâ Congratulations! Level 20!\",\n          description: \"Complete the Interest Assessment to receive your AI career recommendation!\",\n        });\n        setTimeout(() => navigate(\"/interest-assessment\"), 2500);\n        return;\n      }\n\n      // Show feedback based on results\n      if (data.passed) {\n        toast({\n          title: \"Challenge Completed!\",\n          description: `All tests passed! Earned ${data.xpEarned} XP.${data.leveledUp ? ` Level Up to ${data.newLevel}!` : ''}`,\n        });\n\n        // Mark daily challenge as complete if this is a daily challenge\n        if (isDailyChallenge && !hasAutoSubmittedRef.current) {\n          hasAutoSubmittedRef.current = true;\n          try {\n            await apiRequest('POST', `/api/daily-challenges/complete`, {\n              challengeId: id,\n              challengeType: 'code',\n            });\n            await queryClient.invalidateQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n            await queryClient.refetchQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n\n            // Navigate back to dashboard after completing daily challenge\n            setTimeout(() => navigate(\"/dashboard\"), 2000);\n          } catch (err) {\n            console.error('Failed to mark daily challenge as complete:', err);\n            toast({\n              title: \"Warning\",\n              description: \"Challenge completed but failed to update daily progress.\",\n              variant: \"destructive\",\n            });\n          }\n        } else if (!isDailyChallenge) { // Navigate back to dashboard if it's not a daily challenge\n          setTimeout(() => navigate(\"/dashboard\"), 2000);\n        }\n      } else {\n        toast({\n          title: \"Some Tests Failed\",\n          description: `${data.testResults.passed}/${data.testResults.total} tests passed. ${isDailyChallenge ? 'Keep trying!' : ''}`,\n          variant: \"destructive\",\n        });\n      }\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Submission Failed\",\n        description: error.message || \"Failed to submit solution\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (code: string) => {\n    setTestResults(null); // Clear old results before new submission\n    submitMutation.mutate({ code, language: selectedLanguage });\n  };\n\n  const handleBackClick = () => {\n    if (isDailyChallenge) {\n      setShowForfeitModal(true);\n    } else {\n      navigate(\"/dashboard\");\n    }\n  };\n\n  const handleForfeit = async () => {\n    setIsForfeiting(true);\n    try {\n      await apiRequest('POST', `/api/daily-challenges/complete`, {\n        challengeId: id,\n        challengeType: 'code',\n      });\n\n      await queryClient.invalidateQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n      await queryClient.refetchQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n\n      toast({\n        title: \"Challenge Forfeited\",\n        description: \"This coding challenge has been marked as used. Your quiz challenge is still available today.\",\n      });\n\n      navigate(\"/dashboard\");\n    } catch (err) {\n      console.error('Failed to forfeit challenge:', err);\n      toast({\n        title: \"Error\",\n        description: \"Failed to forfeit challenge. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsForfeiting(false);\n      setShowForfeitModal(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  if (error || !challengeData) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-6\">\n        <Card className=\"max-w-md border-destructive\">\n          <CardContent className=\"p-8 text-center space-y-4\">\n            <XCircle className=\"w-16 h-16 text-destructive mx-auto\" />\n            <h2 className=\"font-display font-bold text-2xl\">Challenge Not Found</h2>\n            <p className=\"text-muted-foreground\">\n              The challenge you're looking for doesn't exist or you don't have access to it.\n            </p>\n            <Link href=\"/dashboard\">\n              <Button className=\"w-full\">Return to Dashboard</Button>\n            </Link>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const { challenge } = challengeData;\n  const difficultyColors = {\n    easy: \"bg-[hsl(var(--success))] text-[hsl(var(--success-foreground))]\",\n    medium: \"bg-[hsl(var(--warning))] text-[hsl(var(--warning-foreground))]\",\n    hard: \"bg-destructive text-destructive-foreground\",\n  };\n\n  // Handle return to dashboard when challenge is terminated\n  const handleReturnFromTermination = async () => {\n    if (isDailyChallenge && !hasAutoSubmittedRef.current) {\n      hasAutoSubmittedRef.current = true;\n      try {\n        await apiRequest('POST', `/api/daily-challenges/complete`, {\n          challengeId: id,\n          challengeType: 'code',\n        });\n        queryClient.invalidateQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n      } catch (err) {\n        console.error('Failed to mark daily challenge as complete:', err);\n      }\n    }\n    navigate(\"/dashboard\");\n  };\n\n  // Show termination screen if tab switching was detected\n  if (isTerminated) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-6\">\n        <Card className=\"max-w-md border-destructive\">\n          <CardContent className=\"p-8 text-center space-y-4\">\n            <AlertTriangle className=\"w-16 h-16 text-destructive mx-auto\" />\n            <h2 className=\"font-display font-bold text-2xl\">Challenge Terminated</h2>\n            <p className=\"text-muted-foreground\">\n              Tab switching detected. This assessment has been terminated to maintain integrity.\n            </p>\n            <p className=\"text-sm text-destructive font-semibold mt-2\">\n              This was a one-time challenge. You cannot retry it.\n            </p>\n            <div className=\"pt-4 space-y-2\">\n              <Button \n                className=\"w-full\" \n                data-testid=\"button-return-dashboard\"\n                onClick={handleReturnFromTermination}\n              >\n                Return to Dashboard\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Tab detection status banner */}\n      {tabSwitched && (\n        <div className=\"bg-destructive text-destructive-foreground px-4 py-2 text-center font-semibold animate-pulse\" data-testid=\"banner-tab-detected\">\n          ‚ö†Ô∏è TAB SWITCHING DETECTED - CHALLENGE TERMINATED\n        </div>\n      )}\n      {showWarning && !tabSwitched && (\n        <div className=\"bg-warning text-warning-foreground px-4 py-2 text-center font-semibold\" data-testid=\"banner-tab-warning\">\n          ‚ö†Ô∏è Warning: Stay on this page during the challenge\n        </div>\n      )}\n      <header className=\"border-b border-border sticky top-0 z-50 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <Button variant=\"ghost\" size=\"icon\" onClick={handleBackClick} data-testid=\"button-back\">\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Button>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-lg bg-primary flex items-center justify-center\">\n                <Trophy className=\"w-5 h-5 text-primary-foreground\" />\n              </div>\n              <span className=\"font-display font-bold text-xl\">CareerQuest</span>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            <ThemeToggle />\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto px-6 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-1 space-y-6\">\n            {/* Tab Detection Warning Panel */}\n            <Card className={`${tabSwitched ? 'border-destructive bg-destructive/20' : 'border-destructive/50 bg-destructive/5'} transition-all`}>\n              <CardContent className=\"p-4\">\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <AlertTriangle className=\"w-4 h-4 text-destructive\" />\n                    <p className=\"text-sm font-bold text-destructive\">\n                      {tabSwitched ? 'CHALLENGE TERMINATED' : 'TAB DETECTION ACTIVE'}\n                    </p>\n                  </div>\n                  <p className=\"text-xs text-destructive\">\n                    {tabSwitched\n                      ? `Tab switch detected! This challenge has been terminated.`\n                      : 'Do not switch tabs or the challenge will be terminated immediately!'}\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <CardTitle data-testid=\"text-challenge-title\">{challenge.title}</CardTitle>\n                  <Badge className={difficultyColors[challenge.difficulty as keyof typeof difficultyColors]}>\n                    {challenge.difficulty.toUpperCase()}\n                  </Badge>\n                </div>\n                <div className=\"flex items-center gap-2 text-sm text-primary font-semibold\">\n                  <Star className=\"w-4 h-4 fill-primary\" />\n                  <span>+{challenge.xpReward} XP</span>\n                </div>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div>\n                  <h3 className=\"font-semibold mb-2\">Problem Description</h3>\n                  <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                    {challenge.description}\n                  </p>\n                </div>\n\n                {challenge.testCases && challenge.testCases.length > 0 && (\n                  <div>\n                    <h3 className=\"font-semibold mb-3\">Example Test Case</h3>\n                    <div className=\"bg-muted p-3 rounded-lg font-mono text-sm space-y-1\">\n                      <div><span className=\"text-muted-foreground\">Input:</span> {challenge.testCases[0].input}</div>\n                      <div><span className=\"text-muted-foreground\">Output:</span> {challenge.testCases[0].expectedOutput}</div>\n                    </div>\n                  </div>\n                )}\n\n                <div>\n                  <h3 className=\"font-semibold mb-3\">Test Cases</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Your solution will be tested against {challenge.testCases.length} test cases\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n\n            {testResults && (\n              <Card>\n                <CardHeader>\n                  <CardTitle>Test Results</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {testResults.map((result, idx) => (\n                      <div\n                        key={idx}\n                        className={`p-3 rounded-lg border ${result.passed ? 'bg-[hsl(var(--success))]/10 border-[hsl(var(--success))]' : 'bg-destructive/10 border-destructive'}`}\n                      >\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          {result.passed ? (\n                            <CheckCircle2 className=\"w-4 h-4 text-[hsl(var(--success))]\" />\n                          ) : (\n                            <XCircle className=\"w-4 h-4 text-destructive\" />\n                          )}\n                          <span className=\"font-semibold text-sm\">Test {idx + 1}</span>\n                        </div>\n                        {!result.passed && (\n                          <div className=\"text-xs space-y-1 font-mono\">\n                            <div className=\"text-muted-foreground\">Input: {result.input}</div>\n                            <div className=\"text-muted-foreground\">Expected: {result.expectedOutput}</div>\n                            <div className=\"text-destructive\">Got: {result.actualOutput || result.error}</div>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n\n          <div className=\"lg:col-span-2\">\n            <CodeEditor\n              initialCode={challenge.starterCode || `// Write your solution here\\nfunction solution() {\\n  // Your code\\n}`}\n              language={selectedLanguage}\n              onLanguageChange={setSelectedLanguage}\n              onSubmit={handleSubmit}\n              isSubmitting={submitMutation.isPending}\n            />\n          </div>\n        </div>\n      </div>\n\n      <ConfirmationDialog\n        open={showForfeitModal}\n        onOpenChange={setShowForfeitModal}\n        onConfirm={handleForfeit}\n        title=\"Forfeit Daily Challenge?\"\n        description=\"If you leave now, this coding challenge will be marked as used and you won't be able to retry it today. However, your quiz challenge will still be available.\"\n        confirmText=\"Forfeit Challenge\"\n        cancelText=\"Keep Coding\"\n        variant=\"destructive\"\n        isLoading={isForfeiting}\n      />\n    </div>\n  );\n}","path":null,"size_bytes":18078,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"client/src/pages/Quiz.tsx":{"content":"import { useEffect, useState, useRef, useMemo } from \"react\";\nimport { useLocation, Link } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport QuizCard from \"@/components/QuizCard\";\nimport ThemeToggle from \"@/components/ThemeToggle\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Trophy, AlertCircle, Loader2, ArrowLeft, Timer } from \"lucide-react\";\nimport { useTabDetection } from \"@/hooks/useTabDetection\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport ConfirmationDialog from \"@/components/ConfirmationDialog\";\nimport type { Quiz as QuizType, Question } from \"@shared/schema\";\n\ninterface QuizProps {\n  quizId?: string;\n}\n\nexport default function Quiz({ quizId }: QuizProps) {\n  const id = quizId;\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [answers, setAnswers] = useState<Record<string, number>>({});\n  const hasAutoSubmitted = useRef(false);\n  const [timeRemaining, setTimeRemaining] = useState<number | null>(null);\n  const timerRef = useRef<NodeJS.Timeout>();\n  const [showForfeitModal, setShowForfeitModal] = useState(false);\n  const [isForfeiting, setIsForfeiting] = useState(false);\n\n  // Detect if this is a daily challenge from URL query parameter\n  const isDailyChallenge = new URLSearchParams(window.location.search).get('daily') === 'true';\n\n  // Check if this is a practice quiz from session storage\n  const [practiceQuizData, setPracticeQuizData] = useState<{ quiz: QuizType; questions: Question[] } | null>(null);\n  const isPracticeQuiz = id?.startsWith('practice-');\n\n  useEffect(() => {\n    if (isPracticeQuiz && id) {\n      const storedData = sessionStorage.getItem(`practice-quiz-${id}`);\n      if (storedData) {\n        try {\n          const data = JSON.parse(storedData);\n          setPracticeQuizData(data);\n        } catch (error) {\n          console.error(\"Failed to parse practice quiz data:\", error);\n        }\n      }\n    }\n  }, [id, isPracticeQuiz]);\n\n  // Use the tab detection hook - ALWAYS enabled for anti-cheat security\n  const { tabSwitched: hasDetectedSwitch, switchCount, showWarning, simulateTabSwitch } = useTabDetection({\n    enabled: true, // Always active, not just in fullscreen\n    onTabSwitch: async () => {\n      console.log(\"Tab switch callback triggered!\");\n      // Auto-submit if daily challenge\n      if (isDailyChallenge && !hasAutoSubmitted.current) {\n        hasAutoSubmitted.current = true;\n        try {\n          console.log('[Quiz] Auto-submitting terminated daily challenge');\n          await apiRequest('POST', `/api/daily-challenges/complete`, {\n            challengeId: id,\n            challengeType: 'quiz',\n          });\n          await queryClient.invalidateQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n          await queryClient.refetchQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n          console.log('[Quiz] Successfully auto-submitted daily challenge');\n        } catch (err) {\n          console.error('[Quiz] Failed to auto-submit:', err);\n        }\n      }\n    },\n  });\n\n  // Fetch quiz data (skip for practice quizzes)\n  const { data: quizData, isLoading: quizLoading, error: quizError } = useQuery<{ quiz: QuizType; questions: Question[] }>({\n    queryKey: [\"/api/quizzes\", id],\n    enabled: !!id && !isPracticeQuiz,\n  });\n\n  // Use practice quiz data if available, otherwise use fetched data\n  const actualQuizData = isPracticeQuiz ? practiceQuizData : quizData;\n  const actualLoading = isPracticeQuiz ? !practiceQuizData : quizLoading;\n\n  // Initialize timer when quiz data loads\n  useEffect(() => {\n    if (actualQuizData?.quiz?.timeLimit && timeRemaining === null) {\n      setTimeRemaining(actualQuizData.quiz.timeLimit);\n    }\n  }, [actualQuizData]);\n\n  // Submit quiz mutation\n  const submitMutation = useMutation({\n    mutationFn: async (answers: Record<string, number>) => {\n      // Practice quizzes use different submission endpoint\n      // Server validates answers against cached quiz data to prevent XP farming\n      if (isPracticeQuiz) {\n        const res = await apiRequest(\"POST\", `/api/quizzes/practice/${id}/submit`, {\n          answers,\n        });\n        return await res.json();\n      }\n\n      // Regular quiz submission\n      const res = await apiRequest(\"POST\", `/api/quizzes/${id}/submit`, {\n        answers,\n        wasTabSwitched: hasDetectedSwitch,\n        isDailyChallenge,\n      });\n      return await res.json();\n    },\n    onSuccess: async (data: any) => {\n      // Invalidate all user-related queries to refresh XP and level\n      await queryClient.invalidateQueries({ queryKey: [\"/api/users/me\"] });\n      await queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\n      await queryClient.invalidateQueries({ queryKey: [\"/api/users/me/badges\"] });\n      await queryClient.refetchQueries({ queryKey: [\"/api/users/me/badges\"] });\n      await queryClient.invalidateQueries({ queryKey: [\"/api/leaderboard\"] });\n\n      // Invalidate daily challenges cache if this was a daily challenge\n      if (isDailyChallenge) {\n        await queryClient.invalidateQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n        await queryClient.refetchQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n      }\n\n      // Check if user reached Level 20\n      if (data.reachedLevel20) {\n        toast({\n          title: \"üéâ Congratulations! Level 20!\",\n          description: \"Complete the Interest Assessment to receive your AI career recommendation!\",\n        });\n        setTimeout(() => navigate(\"/dashboard\"), 2500);\n        return;\n      }\n\n      // Handle practice quiz retakes (no XP awarded)\n      if (data.isRetake) {\n        toast({\n          title: \"Practice Quiz Completed!\",\n          description: `You scored ${data.score}/${data.totalQuestions} (${data.percentage.toFixed(0)}%). This was a retake, so no XP was awarded. Generate a new quiz to earn more XP!`,\n        });\n        setTimeout(() => navigate(\"/dashboard\"), 2500);\n        return;\n      }\n\n      toast({\n        title: \"Quiz Completed!\",\n        description: `You scored ${data.score}/${data.totalQuestions}. Earned ${data.xpEarned} XP!${data.leveledUp ? ` Level Up to ${data.newLevel}!` : ''}`,\n      });\n      setTimeout(() => navigate(\"/dashboard\"), 2000);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Submission Failed\",\n        description: error.message || \"Failed to submit quiz\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      setIsFullscreen(!!document.fullscreenElement);\n    };\n\n    document.addEventListener(\"fullscreenchange\", handleFullscreenChange);\n\n    return () => {\n      document.removeEventListener(\"fullscreenchange\", handleFullscreenChange);\n    };\n  }, []);\n\n  const enterFullscreen = () => {\n    document.documentElement.requestFullscreen();\n  };\n\n  const handleAnswerChange = (questionId: string, answerIndex: number) => {\n    setAnswers(prev => ({ ...prev, [questionId]: answerIndex }));\n  };\n\n  const handleSubmit = (forced = false) => {\n    // Prevent duplicate submissions\n    if (hasAutoSubmitted.current) return;\n\n    // Allow forced submission on timeout or tab switch\n    if (!forced && Object.keys(answers).length < (actualQuizData?.questions.length || 0)) {\n      toast({\n        title: \"Incomplete Quiz\",\n        description: \"Please answer all questions before submitting.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Mark as submitted before mutation to prevent race conditions\n    hasAutoSubmitted.current = true;\n    submitMutation.mutate(answers);\n  };\n\n  // Auto-submit if tab switched\n  useEffect(() => {\n    if (hasDetectedSwitch && !hasAutoSubmitted.current) {\n      toast({\n        title: \"Assessment Terminated\",\n        description: \"Tab switch detected. Auto-submitting your answers.\",\n        variant: \"destructive\",\n      });\n      handleSubmit(true);\n    }\n  }, [hasDetectedSwitch]);\n\n  // Timer countdown\n  useEffect(() => {\n    if (hasAutoSubmitted.current || timeRemaining === null || timeRemaining <= 0) return;\n\n    timerRef.current = setInterval(() => {\n      setTimeRemaining((prev) => {\n        if (prev === null) return null;\n        if (prev <= 1) {\n          handleSubmit(true); // Force submit on timeout\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [hasAutoSubmitted.current, timeRemaining]); // Rerun if time remaining changes\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const handleTabSwitch = () => {\n    toast({\n      title: \"Assessment Terminated\",\n      description: \"Tab switch detected. Auto-submitting your answers.\",\n      variant: \"destructive\",\n    });\n    handleSubmit(true); // Force submit on tab switch\n  };\n\n  const handleBackClick = () => {\n    if (isDailyChallenge) {\n      setShowForfeitModal(true);\n    } else {\n      navigate(\"/dashboard\");\n    }\n  };\n\n  const handleForfeit = async () => {\n    setIsForfeiting(true);\n    try {\n      await apiRequest('POST', `/api/daily-challenges/complete`, {\n        challengeId: id,\n        challengeType: 'quiz',\n      });\n\n      await queryClient.invalidateQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n      await queryClient.refetchQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n\n      toast({\n        title: \"Challenge Forfeited\",\n        description: \"This quiz challenge has been marked as used. Your coding challenge is still available today.\",\n      });\n\n      navigate(\"/dashboard\");\n    } catch (err) {\n      console.error('Failed to forfeit challenge:', err);\n      toast({\n        title: \"Error\",\n        description: \"Failed to forfeit challenge. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsForfeiting(false);\n      setShowForfeitModal(false);\n    }\n  };\n\n  // Fisher-Yates shuffle algorithm for randomizing questions\n  const shuffleArray = <T,>(array: T[]): T[] => {\n    const shuffled = [...array];\n    for (let i = shuffled.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n    }\n    return shuffled;\n  };\n\n  // Convert correct answer from text to index and shuffle questions (memoized to prevent re-shuffling on re-render)\n  const mappedQuestions = useMemo(() => {\n    if (!actualQuizData?.questions) return [];\n    return shuffleArray(actualQuizData.questions.map(q => {\n      const correctIndex = q.options.findIndex(opt => opt === q.correctAnswer);\n      return {\n        id: q.id,\n        question: q.questionText,\n        options: q.options,\n        correctAnswer: correctIndex >= 0 ? correctIndex : 0,\n      };\n    }));\n  }, [actualQuizData?.questions]);\n\n  const handleReturnFromTermination = async () => {\n    if (isDailyChallenge && !hasAutoSubmitted.current) {\n      hasAutoSubmitted.current = true;\n      try {\n        await apiRequest('POST', `/api/daily-challenges/complete`, {\n          challengeId: id,\n          challengeType: 'quiz',\n        });\n        await queryClient.invalidateQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n        await queryClient.refetchQueries({ queryKey: [\"/api/daily-challenges/today\"] });\n      } catch (err) {\n        console.error('Failed to mark daily challenge as complete:', err);\n      }\n    }\n    navigate(\"/dashboard\");\n  };\n\n  if (hasDetectedSwitch) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-6\">\n        <Card className=\"max-w-md border-destructive\">\n          <CardContent className=\"p-8 text-center space-y-4\">\n            <AlertCircle className=\"w-16 h-16 text-destructive mx-auto\" />\n            <h2 className=\"font-display font-bold text-2xl\">Assessment Terminated</h2>\n            <p className=\"text-muted-foreground\">\n              You switched tabs during the assessment. For security reasons, your session has been ended and your current progress has been submitted.\n            </p>\n            <Button \n              className=\"w-full\" \n              data-testid=\"button-return-dashboard\"\n              onClick={handleReturnFromTermination}\n            >\n              Return to Dashboard\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (actualLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  if (quizError || !actualQuizData) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-6\">\n        <Card className=\"max-w-md border-destructive\">\n          <CardContent className=\"p-8 text-center space-y-4\">\n            <AlertCircle className=\"w-16 h-16 text-destructive mx-auto\" />\n            <h2 className=\"font-display font-bold text-2xl\">Quiz Not Found</h2>\n            <p className=\"text-muted-foreground\">\n              The quiz you're looking for doesn't exist or you don't have access to it.\n            </p>\n            <Link href=\"/dashboard\">\n              <Button className=\"w-full\" data-testid=\"button-return-dashboard\">\n                Return to Dashboard\n              </Button>\n            </Link>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const { quiz } = actualQuizData;\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"border-b border-border bg-background\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <Button variant=\"ghost\" size=\"icon\" onClick={handleBackClick} data-testid=\"button-back\">\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Button>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-lg bg-primary flex items-center justify-center\">\n                <Trophy className=\"w-5 h-5 text-primary-foreground\" />\n              </div>\n              <span className=\"font-display font-bold text-xl\">CareerQuest Assessment</span>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            {!isFullscreen && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={enterFullscreen}\n                data-testid=\"button-fullscreen\"\n              >\n                Enter Fullscreen\n              </Button>\n            )}\n            <ThemeToggle />\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto px-6 py-12\">\n        {/* Debug panel - shows tab detection status */}\n        {showWarning && (\n          <div className=\"mb-4 p-4 bg-destructive border-2 border-destructive-foreground rounded-lg animate-pulse\">\n            <p className=\"text-destructive-foreground font-bold text-center text-lg\">\n              üö® TAB SWITCH DETECTED! AUTO-SUBMITTING NOW! üö®\n            </p>\n          </div>\n        )}\n\n        <div className=\"mb-8 text-center\">\n          <h1 className=\"font-display font-bold text-3xl mb-2\" data-testid=\"text-quiz-title\">\n            {quiz.title}\n          </h1>\n          <p className=\"text-muted-foreground\">{quiz.description}</p>\n          <div className=\"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg inline-block\">\n            <p className=\"text-sm text-destructive font-bold\">\n              <AlertCircle className=\"w-4 h-4 inline mr-2\" />\n              ‚ö†Ô∏è BAWAL MAG-ALT TAB - Do not switch tabs or the assessment will be auto-submitted immediately!\n            </p>\n            <p className=\"text-xs text-destructive mt-2\">\n              This is a one-time assessment. Tab switching will result in automatic termination.\n            </p>\n          </div>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center justify-between\">\n              <span>{quiz.title}</span>\n              <div className=\"flex items-center gap-4\">\n                {quiz.timeLimit && timeRemaining !== null && (\n                  <div className={`flex items-center gap-2 ${timeRemaining < 300 ? 'text-destructive' : 'text-muted-foreground'}`}>\n                    <Timer className=\"w-4 h-4\" />\n                    <span className=\"text-sm font-mono\">{formatTime(timeRemaining)}</span>\n                  </div>\n                )}\n                <span className=\"text-sm font-normal text-muted-foreground\">\n                  {mappedQuestions.length} Questions\n                </span>\n              </div>\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <QuizCard\n              questions={mappedQuestions}\n              timeLimit={quiz.timeLimit || undefined}\n              onAnswerChange={handleAnswerChange}\n              onSubmit={handleSubmit}\n              isSubmitting={submitMutation.isPending}\n            />\n          </CardContent>\n        </Card>\n      </div>\n\n      <ConfirmationDialog\n        open={showForfeitModal}\n        onOpenChange={setShowForfeitModal}\n        onConfirm={handleForfeit}\n        title=\"Forfeit Daily Challenge?\"\n        description=\"If you leave now, this quiz challenge will be marked as used and you won't be able to retry it today. However, your coding challenge will still be available.\"\n        confirmText=\"Forfeit Challenge\"\n        cancelText=\"Continue Quiz\"\n        variant=\"destructive\"\n        isLoading={isForfeiting}\n      />\n    </div>\n  );\n}","path":null,"size_bytes":17980,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"server/seed.ts":{"content":"import { storage } from \"./storage\";\nimport { hashPassword } from \"./auth\";\n\nexport async function seedDatabase() {\n  console.log(\"üå± Seeding database...\");\n\n  // Create career paths\n  const careerPaths = await Promise.all([\n    storage.createCareerPath({\n      name: \"Full Stack Development\",\n      description: \"Master both frontend and backend technologies to build complete web applications\",\n      color: \"#10b981\",\n      icon: \"Code\",\n      progressionRanks: [\"Junior Full Stack Developer\", \"Full Stack Developer\", \"Senior Full Stack Developer\", \"Lead Full Stack Engineer\"],\n      requiredSkills: [\"React\", \"Node.js\", \"Databases\", \"REST APIs\", \"TypeScript\"],\n    }),\n    storage.createCareerPath({\n      name: \"Data Science & AI\",\n      description: \"Analyze data and build intelligent systems using machine learning and AI\",\n      color: \"#8b5cf6\",\n      icon: \"Brain\",\n      progressionRanks: [\"Junior Data Analyst\", \"Data Scientist\", \"Senior Data Scientist\", \"Principal AI Engineer\"],\n      requiredSkills: [\"Python\", \"Statistics\", \"Machine Learning\", \"Data Visualization\", \"SQL\"],\n    }),\n    storage.createCareerPath({\n      name: \"Cloud & DevOps\",\n      description: \"Build and manage scalable cloud infrastructure and deployment pipelines\",\n      color: \"#06b6d4\",\n      icon: \"Cloud\",\n      progressionRanks: [\"Junior DevOps Engineer\", \"DevOps Engineer\", \"Senior DevOps Engineer\", \"Cloud Architect\"],\n      requiredSkills: [\"AWS/Azure/GCP\", \"Docker\", \"Kubernetes\", \"CI/CD\", \"Linux\"],\n    }),\n    storage.createCareerPath({\n      name: \"Mobile Development\",\n      description: \"Create native and cross-platform mobile applications for iOS and Android\",\n      color: \"#f59e0b\",\n      icon: \"Smartphone\",\n      progressionRanks: [\"Junior Mobile Developer\", \"Mobile Developer\", \"Senior Mobile Developer\", \"Mobile Architect\"],\n      requiredSkills: [\"React Native/Flutter\", \"iOS/Android\", \"Mobile UI/UX\", \"API Integration\", \"App Store Deployment\"],\n    }),\n    storage.createCareerPath({\n      name: \"Cybersecurity\",\n      description: \"Protect systems and data from security threats and vulnerabilities\",\n      color: \"#ef4444\",\n      icon: \"Shield\",\n      progressionRanks: [\"Junior Security Analyst\", \"Security Engineer\", \"Senior Security Engineer\", \"Chief Security Officer\"],\n      requiredSkills: [\"Network Security\", \"Penetration Testing\", \"Cryptography\", \"Security Frameworks\", \"Incident Response\"],\n    }),\n  ]);\n\n  console.log(`‚úÖ Created ${careerPaths.length} career paths`);\n\n  // Create badges\n  const badges = await Promise.all([\n    storage.createBadge({\n      name: \"First Steps\",\n      description: \"Complete your first quiz\",\n      icon: \"Award\",\n      rarity: \"common\",\n      requirement: \"Complete 1 quiz\",\n    }),\n    storage.createBadge({\n      name: \"Code Warrior\",\n      description: \"Solve 10 code challenges\",\n      icon: \"Sword\",\n      rarity: \"rare\",\n      requirement: \"Complete 10 code challenges\",\n    }),\n    storage.createBadge({\n      name: \"Perfect Score\",\n      description: \"Get 100% on a quiz\",\n      icon: \"Star\",\n      rarity: \"epic\",\n      requirement: \"Score 100% on any quiz\",\n    }),\n    storage.createBadge({\n      name: \"Level 20 Legend\",\n      description: \"Reach level 20\",\n      icon: \"Crown\",\n      rarity: \"legendary\",\n      requirement: \"Reach level 20\",\n    }),\n    storage.createBadge({\n      name: \"Quick Learner\",\n      description: \"Complete 5 quizzes in one day\",\n      icon: \"Zap\",\n      rarity: \"rare\",\n      requirement: \"Complete 5 quizzes in 24 hours\",\n    }),\n  ]);\n\n  console.log(`‚úÖ Created ${badges.length} badges`);\n\n  // Create sample quizzes for Full Stack Development\n  const fullStackPath = careerPaths[0];\n  \n  const quiz1 = await storage.createQuiz({\n    title: \"JavaScript Fundamentals\",\n    description: \"Test your knowledge of core JavaScript concepts\",\n    difficulty: \"beginner\",\n    careerPathId: fullStackPath.id,\n    requiredLevel: 1,\n    xpReward: 100,\n    timeLimit: 300, // 5 minutes\n    isFinalAssessment: false,\n  });\n\n  await storage.createQuestions([\n    {\n      quizId: quiz1.id,\n      questionText: \"What is the output of: console.log(typeof null)?\",\n      questionType: \"multiple-choice\",\n      options: [\"'null'\", \"'undefined'\", \"'object'\", \"'number'\"],\n      correctAnswer: \"'object'\",\n      explanation: \"In JavaScript, typeof null returns 'object' due to a historical bug in the language.\",\n      category: \"frontend\",\n    },\n    {\n      quizId: quiz1.id,\n      questionText: \"Which method is used to add an element to the end of an array?\",\n      questionType: \"multiple-choice\",\n      options: [\"push()\", \"pop()\", \"shift()\", \"unshift()\"],\n      correctAnswer: \"push()\",\n      explanation: \"The push() method adds one or more elements to the end of an array.\",\n      category: \"frontend\",\n    },\n    {\n      quizId: quiz1.id,\n      questionText: \"What does the '===' operator do in JavaScript?\",\n      questionType: \"multiple-choice\",\n      options: [\"Assignment\", \"Comparison with type coercion\", \"Strict equality comparison\", \"Logical AND\"],\n      correctAnswer: \"Strict equality comparison\",\n      explanation: \"The === operator performs strict equality comparison without type coercion.\",\n      category: \"frontend\",\n    },\n  ]);\n\n  const quiz2 = await storage.createQuiz({\n    title: \"RESTful API Design\",\n    description: \"Learn the principles of REST API design\",\n    difficulty: \"intermediate\",\n    careerPathId: fullStackPath.id,\n    requiredLevel: 5,\n    xpReward: 200,\n    timeLimit: 600,\n    isFinalAssessment: false,\n  });\n\n  await storage.createQuestions([\n    {\n      quizId: quiz2.id,\n      questionText: \"Which HTTP method should be used to update a resource?\",\n      questionType: \"multiple-choice\",\n      options: [\"GET\", \"POST\", \"PUT\", \"DELETE\"],\n      correctAnswer: \"PUT\",\n      explanation: \"PUT is used to update an existing resource or create a new one if it doesn't exist.\",\n      category: \"backend\",\n    },\n    {\n      quizId: quiz2.id,\n      questionText: \"What status code indicates a successful resource creation?\",\n      questionType: \"multiple-choice\",\n      options: [\"200 OK\", \"201 Created\", \"204 No Content\", \"400 Bad Request\"],\n      correctAnswer: \"201 Created\",\n      explanation: \"201 Created indicates that a new resource has been successfully created.\",\n      category: \"backend\",\n    },\n  ]);\n\n  console.log(`‚úÖ Created ${2} quizzes with questions`);\n\n  // Create code challenges\n  const challenge1 = await storage.createCodeChallenge({\n    title: \"FizzBuzz Challenge\",\n    description: \"Write a function that prints numbers from 1 to 100. For multiples of 3, print 'Fizz' instead of the number. For multiples of 5, print 'Buzz'. For multiples of both 3 and 5, print 'FizzBuzz'.\",\n    difficulty: \"beginner\",\n    careerPathId: fullStackPath.id,\n    requiredLevel: 2,\n    xpReward: 150,\n    starterCode: \"function fizzBuzz(n) {\\n  // Your code here\\n}\",\n    testCases: [\n      { input: \"15\", expectedOutput: \"FizzBuzz\" },\n      { input: \"3\", expectedOutput: \"Fizz\" },\n      { input: \"5\", expectedOutput: \"Buzz\" },\n      { input: \"7\", expectedOutput: \"7\" },\n    ],\n    supportedLanguages: [\"javascript\", \"python\", \"java\"],\n  });\n\n  console.log(`‚úÖ Created code challenges`);\n\n  // Create test users\n  const testUser = await storage.createUser({\n    username: \"testuser\",\n    email: \"test@careerquest.com\",\n    password: await hashPassword(\"password123\"),\n    displayName: \"Test User\",\n    pathSelectionMode: \"ai-guided\",\n    currentCareerPathId: null,\n  });\n\n  const adminUser = await storage.createUser({\n    username: \"admin\",\n    email: \"admin@careerquest.com\",\n    password: await hashPassword(\"admin123\"),\n    displayName: \"Admin User\",\n    pathSelectionMode: \"manual\",\n    currentCareerPathId: fullStackPath.id,\n  });\n\n  // Make admin user actually an admin\n  await storage.updateUser(adminUser.id, { isAdmin: true, level: 25, totalXp: 25000, xp: 0 });\n\n  console.log(`‚úÖ Created test users:`);\n  console.log(`   - test@careerquest.com / password123`);\n  console.log(`   - admin@careerquest.com / admin123 (Admin)`);\n\n  // Award some badges to test user\n  await storage.awardBadge(testUser.id, badges[0].id);\n\n  console.log(\"üéâ Database seeding complete!\");\n}\n\n// Run seed if called directly\nseedDatabase()\n  .then(() => process.exit(0))\n  .catch((error) => {\n    console.error(\"‚ùå Seeding failed:\", error);\n    process.exit(1);\n  });\n","path":null,"size_bytes":8397,"size_tokens":null},"client/src/components/examples/SyllabusUpload.tsx":{"content":"import SyllabusUpload from '../SyllabusUpload';\n\nexport default function SyllabusUploadExample() {\n  return <SyllabusUpload />;\n}\n","path":null,"size_bytes":130,"size_tokens":null},"design_guidelines.md":{"content":"# CareerQuest Design Guidelines\n\n## Design Approach\n\n**Reference-Based Approach** drawing inspiration from:\n- **SoloLearn**: Gamified learning structure, progress visualization, achievement systems\n- **Duolingo**: Playful gamification, level progression, streak mechanics\n- **CodeCademy**: Integrated code editor experience, lesson structure\n- **Linear**: Modern, clean interface with excellent typography and spatial hierarchy\n- **Stripe**: Restrained elegance, purposeful use of space\n\n**Core Principles:**\n1. Playful Professionalism: Balance gaming aesthetics with educational credibility\n2. Achievement Visibility: Make progress and accomplishments immediately apparent\n3. Learning-First Design: Gamification enhances, never overshadows the learning experience\n4. Progressive Disclosure: Reveal complexity gradually as users advance\n\n## Typography System\n\n**Font Families:**\n- Primary: Inter (Google Fonts) - Interface text, body content, navigation\n- Display: Space Grotesk (Google Fonts) - Hero headlines, section titles, achievement announcements\n- Code: JetBrains Mono (Google Fonts) - Code editor, inline code snippets\n\n**Type Scale:**\n- Hero Display: text-6xl to text-8xl (Space Grotesk, font-bold)\n- Section Headers: text-4xl to text-5xl (Space Grotesk, font-semibold)\n- Card Titles: text-xl to text-2xl (Inter, font-semibold)\n- Body Text: text-base to text-lg (Inter, font-normal)\n- UI Labels: text-sm to text-base (Inter, font-medium)\n- Code: text-sm (JetBrains Mono, font-normal)\n\n## Layout System\n\n**Spacing Primitives:** Tailwind units of 2, 4, 6, 8, 12, 16\n- Micro-spacing (icons, badges): p-2, gap-2\n- Component padding: p-4, p-6\n- Section spacing: py-12, py-16, py-20\n- Card gaps: gap-6, gap-8\n\n**Grid Systems:**\n- Dashboard: 12-column grid (grid-cols-12)\n- Content areas: 8-column grid (grid-cols-8)\n- Leaderboards/Lists: Single column with max-w-4xl\n- Landing page features: grid-cols-1 md:grid-cols-2 lg:grid-cols-3\n\n## Component Library\n\n### Landing Page Structure\n\n**Hero Section (80vh):**\n- Full-width background with abstract code-themed illustration (geometric patterns, circuit boards, or flowing data visualizations)\n- Centered content with max-w-5xl\n- Large headline emphasizing \"Level Up Your Career\"\n- Dual CTA buttons: \"Start Your Journey\" (primary) + \"Explore Paths\" (secondary)\n- Real-time stats ticker: \"X Students Leveling Up\" with animated counter\n- Floating badge previews showing achievement examples\n\n**Feature Showcase (6 sections):**\n1. AI-Powered Pathfinding: 2-column split (illustration left, content right)\n2. Gamification Overview: Card grid showing XP, badges, levels with icons\n3. Code Editor Preview: Full-width interactive mockup with syntax highlighting\n4. Career Progression Visualization: Timeline/roadmap showing Junior ‚Üí Senior paths\n5. Leaderboard Teaser: Live preview with anonymized top performers\n6. Trust Section: Student testimonials in 3-column card layout\n\n**Footer:**\n- 4-column layout: Product, Resources, Community, Company\n- Newsletter signup with AI-generated learning tip preview\n- Social proof: \"Join 10,000+ CS students leveling up their careers\"\n\n### Main Application Interface\n\n**Dashboard Layout:**\n- **Sidebar (fixed, w-64):** Profile summary with level/XP ring progress, main navigation with icons, daily streak indicator, quick stats\n- **Main Content (flex-1):** Top bar with search, notifications bell, user avatar; Content area with max-w-7xl padding\n- **Right Panel (w-80, optional):** Leaderboard widget, achievement notifications, daily challenge card\n\n**Progress Visualization:**\n- Circular progress rings for level advancement (inspired by Apple Watch)\n- Horizontal XP bars with animated fill\n- Badge showcase grid with locked/unlocked states using grayscale + overlay\n- Level milestone markers with celebration micro-animations on achievement\n\n### Code Editor Interface\n\n**Layout:**\n- Split-pane design: Editor (60%) | Output/Console (40%)\n- Top toolbar: Language selector dropdown, Run button (prominent), Reset, Settings\n- Line numbers in sidebar\n- Syntax highlighting zones clearly differentiated\n- Resizable divider between panes\n- Bottom status bar: Line/column, language, character count\n\n**Editor Features:**\n- Monaco Editor integration styling\n- Minimal distraction: Hidden line numbers toggle, zen mode option\n- Success/error state indicators in gutter\n- Console output with expandable sections\n\n### Quiz & Assessment Interface\n\n**Question Display:**\n- Card-based layout with max-w-3xl centered\n- Progress indicator: \"Question 5 of 20\" with linear progress bar\n- Timer prominent in top-right corner with warning states (yellow <30s, red <10s)\n- Question text: text-xl, ample line-height\n- Code blocks within questions: rounded-lg, proper syntax highlighting\n- Answer options: Large touch targets (min-h-16), radio/checkbox styled cards\n- Navigation: \"Previous\" + \"Next\" buttons, question palette sidebar\n\n**Security Features:**\n- Full-screen mode toggle warning\n- Tab switch detection overlay: \"Assessment Paused - Return to Complete\"\n- Subtle background pattern indicating monitored state\n\n### Career Path Selection Interface\n\n**Path Discovery (Registration):**\n- Two-card choice layout: \"Choose My Path\" vs \"Let AI Guide Me\"\n- Each card: icon, title, description, bullet points, CTA button\n- Hover state: subtle lift effect (transform translateY(-2px))\n\n**Path Visualization (Level 20):**\n- Branching tree diagram showing career progressions\n- Interactive nodes: Junior ‚Üí Mid-Level ‚Üí Senior ‚Üí Lead/Architect\n- Each node: role title, salary range, key skills, time estimate\n- Recommended path highlighted with animated border\n\n**Interest Questionnaire (Level 20):**\n- Multi-step wizard: Progress dots at top\n- One question per screen with ample whitespace\n- Sliding scale, multiple choice, ranking interfaces\n- \"Why we ask this\" tooltips for transparency\n\n### Gamification Elements\n\n**Badges:**\n- Grid display: 3-4 columns, equal-height cards\n- Badge card: Large icon (w-24 h-24), title, description, unlock criteria\n- States: Locked (grayscale + lock icon overlay), Unlocked (full vibrancy), New (pulsing glow effect)\n- Rarity tiers: Common, Rare, Epic, Legendary (conveyed through border treatments)\n\n**Leaderboard:**\n- Table layout with sticky header\n- Columns: Rank (#), Avatar, Name, Level, XP, Badges Count\n- Top 3 podium treatment: 1st (larger, centered), 2nd/3rd (flanking)\n- Current user row: highlighted background, \"You\" indicator\n- Pagination: Load more for extended lists\n\n### Admin Dashboard\n\n**Layout:**\n- Top navigation bar: Logo, section tabs, admin profile\n- Sidebar filters: Date range, user segments, career paths\n- Main content: Cards for key metrics, data tables, action buttons\n\n**Syllabus Upload Interface:**\n- Drag-drop zone: Dashed border, large file icon, \"Drop PDF or Click to Upload\"\n- Upload progress: Linear bar with percentage, file name, cancel option\n- AI processing indicator: \"Generating questions...\" with animated dots\n- Success state: Preview of extracted content, question count, assign to paths\n\n**Audit Logs:**\n- Searchable/filterable table\n- Columns: Timestamp, User, Action, Details, Status\n- Expandable rows for detailed JSON view\n- Export functionality\n\n## Images\n\n**Hero Image:** Full-width abstract illustration combining circuit boards, code syntax elements, and upward-trending career path visualization. Style: Modern, tech-forward with geometric shapes and flowing lines. Placement: Background of hero section with gradient overlay for text readability.\n\n**Feature Section Images:**\n1. AI Pathfinding: Illustration of branching decision tree with glowing nodes\n2. Code Editor: Screenshot mockup showing syntax-highlighted code\n3. Career Progression: Timeline graphic with milestone markers\n4. Gamification: Collage of badge designs and progress visualizations\n\n**Trust Section:** User avatars (placeholder circles with initials) paired with testimonial cards\n\n## Animations (Minimal)\n\n**Micro-interactions Only:**\n- Badge unlock: Scale + fade-in (duration-300)\n- Level up: Confetti burst at progress ring\n- XP gain: Number counter animation\n- Button hovers: Slight scale (scale-105)\n- Card hovers: Shadow elevation change\n\n**Navigation:** Smooth scrolling, instant tab switches (no page transitions)\n\n## Accessibility\n\n- Minimum touch target: 44x44px for all interactive elements\n- Focus states: 2px offset ring on all focusable elements\n- Skip navigation link for keyboard users\n- ARIA labels for icon-only buttons\n- Screen reader announcements for XP gains, level ups\n- Keyboard shortcuts: \"/\" for search, \"Esc\" to close modals","path":null,"size_bytes":8586,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/components/AddUserDialog.tsx":{"content":"\nimport { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2 } from \"lucide-react\";\n\ninterface AddUserDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onUserAdded: () => void;\n}\n\nexport default function AddUserDialog({ open, onClose, onUserAdded }: AddUserDialogProps) {\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    email: \"\",\n    username: \"\",\n    displayName: \"\",\n    password: \"\",\n    isAdmin: false,\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      const response = await fetch(\"/api/admin/users\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify(formData),\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || \"Failed to create user\");\n      }\n\n      toast({\n        title: \"User Created\",\n        description: `Successfully created user ${formData.username}`,\n      });\n\n      setFormData({\n        email: \"\",\n        username: \"\",\n        displayName: \"\",\n        password: \"\",\n        isAdmin: false,\n      });\n\n      onUserAdded();\n      onClose();\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Creation Failed\",\n        description: error.message || \"Failed to create user. Please try again.\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Add New User</DialogTitle>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"email\">Email</Label>\n            <Input\n              id=\"email\"\n              type=\"email\"\n              value={formData.email}\n              onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"username\">Username</Label>\n            <Input\n              id=\"username\"\n              value={formData.username}\n              onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"displayName\">Display Name</Label>\n            <Input\n              id=\"displayName\"\n              value={formData.displayName}\n              onChange={(e) => setFormData({ ...formData, displayName: e.target.value })}\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"password\">Password</Label>\n            <Input\n              id=\"password\"\n              type=\"password\"\n              value={formData.password}\n              onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n              required\n              minLength={6}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"isAdmin\">Admin Status</Label>\n            <Switch\n              id=\"isAdmin\"\n              checked={formData.isAdmin}\n              onCheckedChange={(checked) => setFormData({ ...formData, isAdmin: checked })}\n            />\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} disabled={isLoading}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading}>\n              {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n              Create User\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":4186,"size_tokens":null},"HUGGINGFACE_DEPLOYMENT_GUIDE.md":{"content":"# Deploying CareerQuest ML Models to Hugging Face\n\nThis guide explains how to deploy your trained ML models to Hugging Face and configure the application to use them.\n\n## Overview\n\nThe system supports two modes:\n1. **Local Mode** (default) - Uses the local Python prediction service\n2. **Hugging Face Mode** - Calls your deployed models via Hugging Face Inference API\n\n## Step 1: Prepare Your Models for Hugging Face\n\n### Option A: Hugging Face Spaces (Gradio/FastAPI)\n\nCreate a new Hugging Face Space with your models:\n\n1. Go to [Hugging Face Spaces](https://huggingface.co/spaces)\n2. Create a new Space with Python SDK\n3. Upload your model files from `ml_model/saved_models/`\n4. Create an `app.py` file:\n\n```python\nimport gradio as gr\nimport pickle\nimport json\nimport numpy as np\nfrom pathlib import Path\n\nMODELS_DIR = Path(\"saved_models\")\n\ndef load_models():\n    models = {}\n    model_files = [\n        \"question_classifier.pkl\",\n        \"difficulty_predictor.pkl\",\n        \"career_label_encoder.pkl\",\n        \"study_suggester.pkl\",\n        \"gradient_boosting.pkl\",\n        \"random_forest.pkl\",\n        \"scaler.pkl\",\n    ]\n    for filename in model_files:\n        filepath = MODELS_DIR / filename\n        if filepath.exists():\n            with open(filepath, \"rb\") as f:\n                key = filename.replace(\".pkl\", \"\")\n                models[key] = pickle.load(f)\n    return models\n\nMODELS = load_models()\n\ndef generate_quiz(category, difficulty, career_path, count):\n    # Your quiz generation logic here\n    questions = [\n        {\n            \"question\": \"What is the time complexity of binary search?\",\n            \"options\": [\"O(n)\", \"O(log n)\", \"O(n^2)\", \"O(1)\"],\n            \"correctAnswer\": 1,\n            \"category\": \"algorithms\",\n            \"difficulty\": \"medium\",\n            \"explanation\": \"Binary search has O(log n) complexity.\"\n        }\n    ]\n    return {\"questions\": questions[:count]}\n\ndef recommend_career(user_data):\n    # Your career recommendation logic here\n    return {\n        \"recommended_path\": \"fullstack\",\n        \"probabilities\": {\"frontend\": 0.3, \"backend\": 0.3, \"data\": 0.2, \"cloud\": 0.1, \"mobile\": 0.1},\n        \"confidence\": 0.75\n    }\n\ndef suggest_study(user_data):\n    # Your study suggestion logic here\n    return {\n        \"suggestions\": [\n            {\"topic\": \"Algorithms\", \"reason\": \"Improve problem-solving\", \"recommendedAction\": \"Practice coding challenges\", \"priority\": \"high\"}\n        ]\n    }\n\n# Create Gradio interface\nwith gr.Blocks() as demo:\n    gr.Markdown(\"# CareerQuest ML API\")\n    \n    with gr.Tab(\"Quiz Generation\"):\n        category_input = gr.Dropdown([\"algorithms\", \"frontend\", \"backend\", \"data\", \"security\"], label=\"Category\")\n        difficulty_input = gr.Dropdown([\"easy\", \"medium\", \"hard\"], label=\"Difficulty\")\n        career_input = gr.Textbox(label=\"Career Path\")\n        count_input = gr.Number(value=5, label=\"Count\")\n        quiz_output = gr.JSON(label=\"Generated Quiz\")\n        gr.Button(\"Generate\").click(generate_quiz, [category_input, difficulty_input, career_input, count_input], quiz_output)\n    \n    with gr.Tab(\"Career Recommendation\"):\n        career_data = gr.JSON(label=\"User Data\")\n        career_output = gr.JSON(label=\"Recommendation\")\n        gr.Button(\"Recommend\").click(recommend_career, [career_data], career_output)\n    \n    with gr.Tab(\"Study Suggestions\"):\n        study_data = gr.JSON(label=\"User Performance\")\n        study_output = gr.JSON(label=\"Suggestions\")\n        gr.Button(\"Suggest\").click(suggest_study, [study_data], study_output)\n\ndemo.launch()\n```\n\n### Option B: Hugging Face Inference Endpoints (Production)\n\nFor production use, deploy as an Inference Endpoint:\n\n1. Go to [Hugging Face Inference Endpoints](https://huggingface.co/inference-endpoints)\n2. Create a new endpoint\n3. Upload your model repository with the required files:\n   - `handler.py` - Custom inference handler\n   - `requirements.txt` - Python dependencies\n   - Model files (`.pkl` files)\n\nCreate `handler.py`:\n\n```python\nimport pickle\nimport json\nimport numpy as np\nfrom pathlib import Path\n\nclass EndpointHandler:\n    def __init__(self, path=\"\"):\n        self.models = {}\n        models_dir = Path(path) / \"saved_models\"\n        \n        model_files = {\n            \"question_classifier\": \"question_classifier.pkl\",\n            \"career_label_encoder\": \"career_label_encoder.pkl\",\n            \"study_suggester\": \"study_suggester.pkl\",\n        }\n        \n        for key, filename in model_files.items():\n            filepath = models_dir / filename\n            if filepath.exists():\n                with open(filepath, \"rb\") as f:\n                    self.models[key] = pickle.load(f)\n    \n    def __call__(self, data):\n        inputs = data.get(\"inputs\", {})\n        command = inputs.get(\"command\", \"\")\n        request_data = inputs.get(\"data\", {})\n        \n        if command == \"generate_quiz\":\n            return self.generate_quiz(request_data)\n        elif command == \"recommend_career\":\n            return self.recommend_career(request_data)\n        elif command == \"suggest_study\":\n            return self.suggest_study(request_data)\n        elif command == \"health_check\":\n            return {\"status\": \"healthy\", \"models_loaded\": len(self.models)}\n        else:\n            return {\"error\": f\"Unknown command: {command}\"}\n    \n    def generate_quiz(self, data):\n        # Implement your quiz generation logic\n        return {\"questions\": []}\n    \n    def recommend_career(self, data):\n        # Implement your career recommendation logic\n        return {\"recommended_path\": \"fullstack\", \"probabilities\": {}, \"confidence\": 0.5}\n    \n    def suggest_study(self, data):\n        # Implement your study suggestion logic\n        return {\"suggestions\": []}\n```\n\nCreate `requirements.txt`:\n\n```\nnumpy==1.24.0\nscikit-learn==1.3.0\njoblib==1.3.0\n```\n\n## Step 2: Configure Environment Variables\n\nAdd these environment variables in Replit:\n\n### Required Variables\n\n| Variable | Description | Example |\n|----------|-------------|---------|\n| `HUGGINGFACE_API_TOKEN` | Your Hugging Face API token | `hf_xxxxxxxxxxxxxxxx` |\n| `USE_HUGGINGFACE` | Enable Hugging Face mode | `true` |\n\n### Optional Variables\n\n| Variable | Description | Default |\n|----------|-------------|---------|\n| `HF_MODEL_ENDPOINT` | Custom endpoint URL | Hugging Face Inference API |\n| `HF_QUIZ_MODEL` | Quiz model ID | `your-username/careerquest-quiz` |\n| `HF_CAREER_MODEL` | Career model ID | `your-username/careerquest-career` |\n| `HF_STUDY_MODEL` | Study model ID | `your-username/careerquest-study` |\n\n## Step 3: Get Your Hugging Face API Token\n\n1. Go to [Hugging Face Settings](https://huggingface.co/settings/tokens)\n2. Create a new token with `read` permissions\n3. Copy the token (starts with `hf_`)\n4. Add it as `HUGGINGFACE_API_TOKEN` in Replit Secrets\n\n## Step 4: Enable Hugging Face Mode\n\nSet `USE_HUGGINGFACE=true` in your environment variables to switch from local ML to Hugging Face.\n\n## How It Works\n\nThe system uses a **fallback architecture**:\n\n```\nRequest ‚Üí Check USE_HUGGINGFACE\n              ‚Üì\n         [true] ‚Üí Try Hugging Face API\n                      ‚Üì\n                 [success] ‚Üí Return result\n                 [error] ‚Üí Fall back to local ML\n              ‚Üì\n         [false] ‚Üí Use local ML directly\n```\n\nThis ensures the app always works, even if Hugging Face is unavailable.\n\n## API Request/Response Formats\n\n### Quiz Generation\n\n**Request:**\n```json\n{\n  \"inputs\": {\n    \"command\": \"generate_quiz\",\n    \"data\": {\n      \"category\": \"algorithms\",\n      \"difficulty\": \"medium\",\n      \"career_path\": \"backend\",\n      \"count\": 5\n    }\n  }\n}\n```\n\n**Response:**\n```json\n{\n  \"questions\": [\n    {\n      \"question\": \"What is the time complexity of binary search?\",\n      \"options\": [\"O(n)\", \"O(log n)\", \"O(n^2)\", \"O(1)\"],\n      \"correctAnswer\": 1,\n      \"category\": \"algorithms\",\n      \"difficulty\": \"medium\",\n      \"explanation\": \"Binary search has O(log n) complexity.\"\n    }\n  ]\n}\n```\n\n### Career Recommendation\n\n**Request:**\n```json\n{\n  \"inputs\": {\n    \"command\": \"recommend_career\",\n    \"data\": {\n      \"visual_design\": 4,\n      \"backend_pref\": 5,\n      \"math_stats\": 3,\n      \"web_apps\": 5,\n      \"data_interest\": 2,\n      \"cloud_interest\": 3,\n      \"mobile_interest\": 2,\n      \"security_interest\": 3,\n      \"frontend_perf\": 0.7,\n      \"backend_perf\": 0.85,\n      \"data_perf\": 0.5,\n      \"algo_perf\": 0.75\n    }\n  }\n}\n```\n\n**Response:**\n```json\n{\n  \"recommended_path\": \"backend\",\n  \"probabilities\": {\n    \"frontend\": 0.15,\n    \"backend\": 0.35,\n    \"data\": 0.1,\n    \"cloud\": 0.15,\n    \"mobile\": 0.1,\n    \"security\": 0.15\n  },\n  \"confidence\": 0.82\n}\n```\n\n### Study Suggestions\n\n**Request:**\n```json\n{\n  \"inputs\": {\n    \"command\": \"suggest_study\",\n    \"data\": {\n      \"level\": 15,\n      \"career_path\": \"frontend\",\n      \"frontend_score\": 0.6,\n      \"backend_score\": 0.4,\n      \"data_score\": 0.5,\n      \"algo_score\": 0.7,\n      \"security_score\": 0.3,\n      \"weak_categories\": [\"security\", \"backend\"]\n    }\n  }\n}\n```\n\n**Response:**\n```json\n{\n  \"suggestions\": [\n    {\n      \"topic\": \"Security Best Practices\",\n      \"reason\": \"Your security score (30%) needs improvement.\",\n      \"recommendedAction\": \"Learn about OWASP top 10 vulnerabilities.\",\n      \"priority\": \"high\"\n    }\n  ]\n}\n```\n\n## Testing Your Deployment\n\nAfter deploying to Hugging Face, test with curl:\n\n```bash\ncurl -X POST \\\n  -H \"Authorization: Bearer YOUR_HF_TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"inputs\": {\"command\": \"health_check\", \"data\": {}}}' \\\n  https://api-inference.huggingface.co/models/your-username/your-model\n```\n\n## Files to Upload to Hugging Face\n\nFrom `ml_model/saved_models/`:\n- `question_classifier.pkl`\n- `question_vectorizer.pkl`\n- `question_label_encoder.pkl`\n- `difficulty_predictor.pkl`\n- `difficulty_label_encoder.pkl`\n- `study_suggester.pkl`\n- `study_label_encoder.pkl`\n- `career_label_encoder.pkl`\n- `gradient_boosting.pkl`\n- `random_forest.pkl`\n- `scaler.pkl`\n- `features.pkl`\n- `career_features.json`\n\n## Troubleshooting\n\n### Model not responding\n- Check if the model is still loading (cold start can take 30-60 seconds)\n- Verify your API token has correct permissions\n\n### Falling back to local ML\n- Check Hugging Face API status\n- Verify `USE_HUGGINGFACE=true` is set\n- Check the model endpoint URL is correct\n\n### Type errors in responses\n- Ensure your Hugging Face model returns the exact response format expected\n- Check the API documentation for your endpoint type\n","path":null,"size_bytes":10461,"size_tokens":null},"DEPLOYMENT_GUIDE.md":{"content":"\n# CareerQuest Deployment Guide\n\n## Prerequisites\n\n1. **Firebase Account**: You need a Firebase project set up\n2. **Judge0 RapidAPI Key**: For code execution features\n3. **OpenAI API Key** (Optional): For AI study suggestions\n\n## Environment Variables\n\nCreate a `.env` file in the root directory with the following variables:\n\n```env\n# Firebase Configuration\nFIREBASE_API_KEY=your_firebase_api_key\nFIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com\nFIREBASE_PROJECT_ID=your_project_id\nFIREBASE_STORAGE_BUCKET=your_project.appspot.com\nFIREBASE_MESSAGING_SENDER_ID=your_sender_id\nFIREBASE_APP_ID=your_app_id\n\n# Judge0 RapidAPI\nRAPIDAPI_KEY=your_rapidapi_key\n\n# OpenAI (Optional)\nOPENAI_API_KEY=your_openai_key\n\n# Session Secret\nSESSION_SECRET=your_random_secret_key_here\n```\n\n## Firestore Indexes\n\nRun these commands to create required indexes:\n\n```bash\n# Deploy Firestore indexes\nfirebase deploy --only firestore:indexes\n```\n\nOr manually create indexes using the URLs provided in console errors.\n\n## Initial Setup\n\n1. **Install Dependencies**:\n```bash\nnpm install\n```\n\n2. **Seed Database**:\n```bash\n# Seed career paths and badges\nnpm run seed\n\n# Seed modules and lessons\nnpx tsx server/seed-modules.ts\n```\n\n3. **Create Admin User**:\nAfter starting the app, register a user, then manually update in Firebase Console:\n- Set `isAdmin: true` in the user document\n\n## Running Locally\n\n```bash\nnpm run dev\n```\n\nThe app will be available at `http://localhost:5000`\n\n## Deployment on Replit\n\n1. **Fork this Repl**\n2. **Add Secrets** in the Replit Secrets tool:\n   - Add all environment variables listed above\n3. **Deploy**:\n   - Click the \"Deploy\" button in Replit\n   - Follow the deployment wizard\n   - Your app will be published with a public URL\n\n## Post-Deployment Tasks\n\n1. **Create Firestore Indexes**: Click the URLs in console errors to create required indexes\n2. **Create Admin Account**: Register and manually set admin flag\n3. **Test Features**:\n   - User registration/login\n   - Quiz taking\n   - Code challenges\n   - Daily challenges\n   - Leaderboard\n\n## Common Issues\n\n### Missing Firestore Indexes\n- Click the URLs in error messages to create indexes\n- Or deploy `firestore.indexes.json` via Firebase CLI\n\n### OpenAI Quota Exceeded\n- System uses fallback suggestions when quota is exceeded\n- Add credits to your OpenAI account or implement caching\n\n### Judge0 Rate Limits\n- Free tier has rate limits\n- Upgrade to paid plan for production use\n\n## Security Checklist\n\n- [ ] Change SESSION_SECRET to a random string\n- [ ] Enable Firebase Authentication email verification\n- [ ] Set up Firestore security rules\n- [ ] Enable CORS restrictions\n- [ ] Set up rate limiting on API endpoints\n- [ ] Review and restrict admin routes\n\n## Monitoring\n\n- Check Firebase Console for:\n  - User analytics\n  - Database usage\n  - Error logs\n- Monitor Replit logs for server errors\n- Set up alerts for API quota limits\n","path":null,"size_bytes":2901,"size_tokens":null},"server/learning-intelligence.ts":{"content":"import { storage } from \"./storage-firestore\";\nimport type { Question, QuestionAttempt } from \"@shared/schema\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\n\nexport interface GeneratedQuestion {\n  question: string;\n  options: string[];\n  correctAnswer: number;\n  category: string;\n  difficulty: \"easy\" | \"medium\" | \"hard\";\n  explanation: string;\n}\n\nexport interface StudySuggestion {\n  topic: string;\n  reason: string;\n  recommendedAction: string;\n  priority: \"high\" | \"medium\" | \"low\";\n}\n\ninterface CategoryPerformance {\n  [category: string]: {\n    correct: number;\n    total: number;\n    accuracy: number;\n  };\n}\n\ninterface QuestionBank {\n  questions: GeneratedQuestion[];\n  categories: Set<string>;\n  difficulties: Set<string>;\n}\n\n// Load questions from ML model dataset (500+ questions)\nfunction loadQuestionsFromMLDataset(): GeneratedQuestion[] {\n  try {\n    const datasetPath = path.join(process.cwd(), \"ml_model\", \"saved_models\", \"question_templates.json\");\n    if (fs.existsSync(datasetPath)) {\n      const data = JSON.parse(fs.readFileSync(datasetPath, \"utf-8\"));\n      if (data.questions && Array.isArray(data.questions)) {\n        console.log(`[Learning Intelligence] Loaded ${data.questions.length} questions from ML dataset`);\n        return data.questions.map((q: any) => ({\n          question: q.question,\n          options: q.options || [],\n          correctAnswer: q.correct_answer || q.correctAnswer || 0,\n          category: q.category || \"algorithms\",\n          difficulty: q.difficulty || \"medium\",\n          explanation: q.explanation || \"No explanation provided\"\n        }));\n      }\n    }\n  } catch (error) {\n    console.warn(\"[Learning Intelligence] Could not load ML dataset, using fallback questions:\", error);\n  }\n  \n  // Fallback to hardcoded questions if ML dataset not available\n  return FALLBACK_QUESTIONS;\n}\n\nconst FALLBACK_QUESTIONS: GeneratedQuestion[] = [\n  // Frontend Questions\n  {\n    question: \"What does the 'virtual DOM' in React primarily help with?\",\n    options: [\"Database connections\", \"Performance optimization through efficient updates\", \"Server-side rendering\", \"CSS styling\"],\n    correctAnswer: 1,\n    category: \"frontend\",\n    difficulty: \"easy\",\n    explanation: \"The virtual DOM is a lightweight copy of the actual DOM that React uses to optimize rendering by only updating what has changed.\"\n  },\n  {\n    question: \"Which CSS property is used to create a flexible container in Flexbox?\",\n    options: [\"display: block\", \"display: flex\", \"display: grid\", \"display: inline\"],\n    correctAnswer: 1,\n    category: \"frontend\",\n    difficulty: \"easy\",\n    explanation: \"The 'display: flex' property creates a flex container and enables flexbox layout for its children.\"\n  },\n  {\n    question: \"What is the purpose of the useEffect hook in React?\",\n    options: [\"Managing component state\", \"Handling side effects like API calls\", \"Rendering JSX elements\", \"Styling components\"],\n    correctAnswer: 1,\n    category: \"frontend\",\n    difficulty: \"medium\",\n    explanation: \"useEffect is used to perform side effects in functional components, such as data fetching, subscriptions, or DOM manipulation.\"\n  },\n  {\n    question: \"What is the purpose of the 'key' prop when rendering lists in React?\",\n    options: [\"To style list items\", \"To help React identify which items have changed\", \"To sort the list\", \"To filter the list\"],\n    correctAnswer: 1,\n    category: \"frontend\",\n    difficulty: \"medium\",\n    explanation: \"The key prop helps React identify which items have changed, been added, or removed, enabling efficient updates.\"\n  },\n  {\n    question: \"What is tree shaking in modern JavaScript bundlers?\",\n    options: [\"A debugging technique\", \"Removing unused code from the bundle\", \"Organizing folder structure\", \"Caching dependencies\"],\n    correctAnswer: 1,\n    category: \"frontend\",\n    difficulty: \"hard\",\n    explanation: \"Tree shaking is a dead code elimination technique that removes unused exports from the final bundle to reduce size.\"\n  },\n  // Backend Questions\n  {\n    question: \"What does REST stand for?\",\n    options: [\"Remote Execution Standard Transfer\", \"Representational State Transfer\", \"Request-Response System Transfer\", \"Reliable Server Technology\"],\n    correctAnswer: 1,\n    category: \"backend\",\n    difficulty: \"easy\",\n    explanation: \"REST stands for Representational State Transfer, an architectural style for designing networked applications.\"\n  },\n  {\n    question: \"What is middleware in Express.js?\",\n    options: [\"A database connector\", \"Functions that have access to request and response objects\", \"A templating engine\", \"A testing framework\"],\n    correctAnswer: 1,\n    category: \"backend\",\n    difficulty: \"medium\",\n    explanation: \"Middleware functions in Express.js have access to the request and response objects and can modify them or end the request-response cycle.\"\n  },\n  {\n    question: \"What is the difference between SQL and NoSQL databases?\",\n    options: [\"SQL is faster than NoSQL\", \"SQL uses structured schemas while NoSQL is schema-flexible\", \"NoSQL cannot handle transactions\", \"SQL databases are always cloud-based\"],\n    correctAnswer: 1,\n    category: \"backend\",\n    difficulty: \"medium\",\n    explanation: \"SQL databases use structured schemas with tables and relationships, while NoSQL databases offer flexible schemas for various data models.\"\n  },\n  {\n    question: \"What is connection pooling in database management?\",\n    options: [\"Storing passwords securely\", \"Reusing database connections to reduce overhead\", \"Backing up data regularly\", \"Distributing data across servers\"],\n    correctAnswer: 1,\n    category: \"backend\",\n    difficulty: \"hard\",\n    explanation: \"Connection pooling maintains a cache of database connections that can be reused, reducing the overhead of creating new connections.\"\n  },\n  {\n    question: \"What is the N+1 query problem in ORMs?\",\n    options: [\"A security vulnerability\", \"Inefficient queries that fetch related data one at a time\", \"A database sizing issue\", \"A network latency problem\"],\n    correctAnswer: 1,\n    category: \"backend\",\n    difficulty: \"hard\",\n    explanation: \"The N+1 problem occurs when code fetches a collection and then makes individual queries for each item's relationships, leading to poor performance.\"\n  },\n  // Data Science Questions\n  {\n    question: \"What is the purpose of data normalization?\",\n    options: [\"To increase data size\", \"To scale features to a common range\", \"To remove all data\", \"To add random noise\"],\n    correctAnswer: 1,\n    category: \"data\",\n    difficulty: \"easy\",\n    explanation: \"Data normalization scales features to a common range (often 0-1) to ensure equal contribution to machine learning algorithms.\"\n  },\n  {\n    question: \"What is overfitting in machine learning?\",\n    options: [\"When a model is too simple\", \"When a model memorizes training data but fails on new data\", \"When data is missing\", \"When training takes too long\"],\n    correctAnswer: 1,\n    category: \"data\",\n    difficulty: \"medium\",\n    explanation: \"Overfitting occurs when a model learns the training data too well, including noise, and performs poorly on unseen data.\"\n  },\n  {\n    question: \"What is the purpose of cross-validation?\",\n    options: [\"To speed up training\", \"To reliably estimate model performance on unseen data\", \"To reduce model size\", \"To visualize data\"],\n    correctAnswer: 1,\n    category: \"data\",\n    difficulty: \"medium\",\n    explanation: \"Cross-validation splits data into multiple folds to evaluate model performance more reliably than a single train-test split.\"\n  },\n  {\n    question: \"What is the bias-variance tradeoff?\",\n    options: [\"Choosing between speed and accuracy\", \"Balancing underfitting and overfitting\", \"Selecting hardware resources\", \"Managing data storage\"],\n    correctAnswer: 1,\n    category: \"data\",\n    difficulty: \"hard\",\n    explanation: \"The bias-variance tradeoff describes the balance between underfitting (high bias) and overfitting (high variance) in model complexity.\"\n  },\n  // Security Questions\n  {\n    question: \"What is SQL injection?\",\n    options: [\"A database optimization technique\", \"An attack that inserts malicious SQL code\", \"A way to speed up queries\", \"A backup method\"],\n    correctAnswer: 1,\n    category: \"security\",\n    difficulty: \"easy\",\n    explanation: \"SQL injection is an attack where malicious SQL code is inserted into application queries to manipulate the database.\"\n  },\n  {\n    question: \"What is XSS (Cross-Site Scripting)?\",\n    options: [\"A CSS framework\", \"An attack that injects malicious scripts into web pages\", \"A browser feature\", \"A server configuration\"],\n    correctAnswer: 1,\n    category: \"security\",\n    difficulty: \"medium\",\n    explanation: \"XSS attacks inject malicious scripts into trusted websites to execute in victims' browsers and steal data.\"\n  },\n  {\n    question: \"What is HTTPS and why is it important?\",\n    options: [\"A faster version of HTTP\", \"HTTP with encryption for secure data transmission\", \"A new web protocol replacing HTTP\", \"A compression algorithm\"],\n    correctAnswer: 1,\n    category: \"security\",\n    difficulty: \"easy\",\n    explanation: \"HTTPS encrypts data between browser and server using TLS/SSL, protecting sensitive information from interception.\"\n  },\n  {\n    question: \"What is CSRF (Cross-Site Request Forgery)?\",\n    options: [\"A code review process\", \"An attack that tricks users into performing unwanted actions\", \"A testing methodology\", \"A deployment strategy\"],\n    correctAnswer: 1,\n    category: \"security\",\n    difficulty: \"hard\",\n    explanation: \"CSRF attacks trick authenticated users into submitting unwanted requests, exploiting the trust a site has in the user's browser.\"\n  },\n  // Algorithms Questions\n  {\n    question: \"What is the time complexity of binary search?\",\n    options: [\"O(n)\", \"O(log n)\", \"O(n¬≤)\", \"O(1)\"],\n    correctAnswer: 1,\n    category: \"algorithms\",\n    difficulty: \"easy\",\n    explanation: \"Binary search has O(log n) time complexity because it halves the search space with each comparison.\"\n  },\n  {\n    question: \"What data structure uses LIFO (Last In, First Out)?\",\n    options: [\"Queue\", \"Stack\", \"Array\", \"Linked List\"],\n    correctAnswer: 1,\n    category: \"algorithms\",\n    difficulty: \"easy\",\n    explanation: \"A stack uses LIFO ordering where the last element added is the first one removed.\"\n  },\n  {\n    question: \"What is the difference between BFS and DFS?\",\n    options: [\"BFS uses a stack, DFS uses a queue\", \"BFS explores level by level, DFS goes deep first\", \"They are identical\", \"BFS is faster than DFS\"],\n    correctAnswer: 1,\n    category: \"algorithms\",\n    difficulty: \"medium\",\n    explanation: \"BFS explores nodes level by level using a queue, while DFS explores as deep as possible first using a stack or recursion.\"\n  },\n  {\n    question: \"What is dynamic programming used for?\",\n    options: [\"Runtime code changes\", \"Solving problems by breaking them into overlapping subproblems\", \"Memory allocation\", \"Multi-threading\"],\n    correctAnswer: 1,\n    category: \"algorithms\",\n    difficulty: \"hard\",\n    explanation: \"Dynamic programming solves complex problems by breaking them into simpler overlapping subproblems and storing results to avoid recomputation.\"\n  },\n  // Cloud Questions\n  {\n    question: \"What is containerization in cloud computing?\",\n    options: [\"Physical server isolation\", \"Packaging applications with their dependencies\", \"Network segmentation\", \"Data compression\"],\n    correctAnswer: 1,\n    category: \"cloud\",\n    difficulty: \"medium\",\n    explanation: \"Containerization packages an application with all its dependencies into a container for consistent deployment across environments.\"\n  },\n  {\n    question: \"What is the difference between IaaS, PaaS, and SaaS?\",\n    options: [\"They are different programming languages\", \"They represent different levels of cloud service abstraction\", \"They are security protocols\", \"They are database types\"],\n    correctAnswer: 1,\n    category: \"cloud\",\n    difficulty: \"medium\",\n    explanation: \"IaaS provides infrastructure, PaaS provides platform for development, and SaaS provides complete software applications.\"\n  },\n  {\n    question: \"What is horizontal scaling vs vertical scaling?\",\n    options: [\"Horizontal means adding color, vertical means adding size\", \"Horizontal adds more machines, vertical adds more power to existing machines\", \"They are the same thing\", \"Horizontal is cheaper than vertical\"],\n    correctAnswer: 1,\n    category: \"cloud\",\n    difficulty: \"medium\",\n    explanation: \"Horizontal scaling adds more machines to handle load, while vertical scaling increases the power of existing machines.\"\n  },\n  // Mobile Questions\n  {\n    question: \"What is the purpose of React Native?\",\n    options: [\"Server-side rendering\", \"Building cross-platform mobile apps with JavaScript\", \"Database management\", \"Web scraping\"],\n    correctAnswer: 1,\n    category: \"mobile\",\n    difficulty: \"easy\",\n    explanation: \"React Native allows developers to build native mobile apps for iOS and Android using JavaScript and React.\"\n  },\n  {\n    question: \"What is the difference between native and hybrid mobile apps?\",\n    options: [\"Native apps are always faster\", \"Native apps are built for specific platforms, hybrid use web technologies\", \"Hybrid apps are more expensive\", \"There is no difference\"],\n    correctAnswer: 1,\n    category: \"mobile\",\n    difficulty: \"medium\",\n    explanation: \"Native apps are built specifically for iOS or Android platforms, while hybrid apps use web technologies wrapped in a native container.\"\n  }\n];\n\nclass LearningIntelligenceService {\n  private questionBank: QuestionBank;\n\n  constructor() {\n    // Load questions from ML dataset (500+) instead of hardcoded bank (40)\n    const allQuestions = loadQuestionsFromMLDataset();\n    \n    this.questionBank = {\n      questions: allQuestions,\n      categories: new Set(allQuestions.map(q => q.category)),\n      difficulties: new Set(allQuestions.map(q => q.difficulty))\n    };\n    \n    console.log(`[Learning Intelligence] Initialized with ${allQuestions.length} questions across ${this.questionBank.categories.size} categories`);\n  }\n\n  private shuffleArray<T>(array: T[]): T[] {\n    const shuffled = [...array];\n    for (let i = shuffled.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n    }\n    return shuffled;\n  }\n\n  private calculateCategoryPerformance(attempts: QuestionAttempt[]): CategoryPerformance {\n    const performance: CategoryPerformance = {};\n\n    for (const attempt of attempts) {\n      if (!attempt.category) continue;\n\n      if (!performance[attempt.category]) {\n        performance[attempt.category] = { correct: 0, total: 0, accuracy: 0 };\n      }\n\n      performance[attempt.category].total++;\n      if (attempt.isCorrect) {\n        performance[attempt.category].correct++;\n      }\n    }\n\n    for (const category of Object.keys(performance)) {\n      const cat = performance[category];\n      cat.accuracy = cat.total > 0 ? cat.correct / cat.total : 0;\n    }\n\n    return performance;\n  }\n\n  private selectDifficultyForLevel(level: number): \"easy\" | \"medium\" | \"hard\" {\n    if (level <= 3) return \"easy\";\n    if (level <= 7) return \"medium\";\n    return \"hard\";\n  }\n\n  private mapDifficultyLabel(difficulty?: string): \"easy\" | \"medium\" | \"hard\" {\n    if (difficulty === \"beginner\") return \"easy\";\n    if (difficulty === \"intermediate\") return \"medium\";\n    if (difficulty === \"advanced\") return \"hard\";\n    return \"medium\";\n  }\n\n  async selectQuestionsFromSyllabus(\n    syllabusText: string,\n    careerPath: string,\n    count: number = 10\n  ): Promise<GeneratedQuestion[]> {\n    const keywords = syllabusText.toLowerCase().split(/\\s+/);\n    \n    const categoryMapping: Record<string, string[]> = {\n      frontend: [\"react\", \"css\", \"html\", \"javascript\", \"ui\", \"ux\", \"dom\", \"component\", \"vue\", \"angular\"],\n      backend: [\"server\", \"api\", \"database\", \"express\", \"node\", \"rest\", \"graphql\", \"sql\", \"mongodb\"],\n      data: [\"data\", \"machine\", \"learning\", \"analytics\", \"statistics\", \"python\", \"pandas\", \"numpy\", \"model\"],\n      security: [\"security\", \"authentication\", \"encryption\", \"csrf\", \"xss\", \"sql injection\", \"https\", \"oauth\"],\n      algorithms: [\"algorithm\", \"data structure\", \"complexity\", \"sort\", \"search\", \"tree\", \"graph\", \"recursion\"],\n      cloud: [\"cloud\", \"aws\", \"azure\", \"docker\", \"kubernetes\", \"container\", \"serverless\", \"devops\"],\n      mobile: [\"mobile\", \"ios\", \"android\", \"react native\", \"flutter\", \"app\", \"swift\", \"kotlin\"]\n    };\n\n    const matchedCategories = new Set<string>();\n    \n    for (const [category, categoryKeywords] of Object.entries(categoryMapping)) {\n      for (const keyword of keywords) {\n        if (categoryKeywords.some(ck => keyword.includes(ck))) {\n          matchedCategories.add(category);\n          break;\n        }\n      }\n    }\n\n    if (matchedCategories.size === 0) {\n      matchedCategories.add(\"algorithms\");\n      matchedCategories.add(\"backend\");\n    }\n\n    let candidateQuestions = this.questionBank.questions.filter(\n      q => matchedCategories.has(q.category)\n    );\n\n    if (candidateQuestions.length < count) {\n      candidateQuestions = [...this.questionBank.questions];\n    }\n\n    const selectedQuestions: GeneratedQuestion[] = [];\n    const usedCategories = new Set<string>();\n    const shuffled = this.shuffleArray(candidateQuestions);\n\n    for (const difficulty of [\"easy\", \"medium\", \"hard\"] as const) {\n      const diffQuestions = shuffled.filter(q => q.difficulty === difficulty);\n      const targetCount = Math.ceil(count / 3);\n      \n      for (const q of diffQuestions) {\n        if (selectedQuestions.length >= count) break;\n        if (!selectedQuestions.some(sq => sq.question === q.question)) {\n          selectedQuestions.push(q);\n          usedCategories.add(q.category);\n        }\n        if (selectedQuestions.filter(sq => sq.difficulty === difficulty).length >= targetCount) break;\n      }\n    }\n\n    while (selectedQuestions.length < count && shuffled.length > selectedQuestions.length) {\n      const remaining = shuffled.filter(q => !selectedQuestions.some(sq => sq.question === q.question));\n      if (remaining.length === 0) break;\n      selectedQuestions.push(remaining[0]);\n    }\n\n    return this.shuffleArray(selectedQuestions.slice(0, count));\n  }\n\n  async generatePracticeQuiz(\n    careerPath: string,\n    userLevel: number,\n    topic?: string,\n    difficulty?: \"beginner\" | \"intermediate\" | \"advanced\",\n    userId?: string\n  ): Promise<{ questions: GeneratedQuestion[]; usedTrainedModel: boolean }> {\n    const targetDifficulty = difficulty \n      ? this.mapDifficultyLabel(difficulty) \n      : this.selectDifficultyForLevel(userLevel);\n\n    let userPerformance: CategoryPerformance = {};\n    if (userId) {\n      try {\n        const attempts = await storage.getUserQuestionAttemptsByCategory(userId);\n        userPerformance = this.calculateCategoryPerformance(attempts);\n      } catch (err) {\n        console.warn(\"Could not fetch user performance for adaptive selection:\", err);\n      }\n    }\n\n    const careerPathCategories: Record<string, string[]> = {\n      fullstack: [\"frontend\", \"backend\", \"algorithms\"],\n      datascience: [\"data\", \"algorithms\", \"backend\"],\n      cloud: [\"cloud\", \"backend\", \"security\"],\n      mobile: [\"mobile\", \"frontend\", \"algorithms\"],\n      security: [\"security\", \"backend\", \"algorithms\"],\n      default: [\"algorithms\", \"backend\", \"frontend\"]\n    };\n\n    const relevantCategories = careerPathCategories[careerPath.toLowerCase()] || careerPathCategories.default;\n\n    // Try to use ML model first\n    try {\n      const { callMLService } = await import(\"./ml-client\");\n      \n      console.log(`[AI Quiz] Requesting from trained ML model (Level ${userLevel}, ${careerPath}, ${targetDifficulty})`);\n      \n      const mlResponse = await callMLService<GeneratedQuestion[]>(\"generate_quiz\", {\n        category: topic || \"mixed\",\n        difficulty: targetDifficulty,\n        career_path: careerPath,\n        count: 5,\n        level: userLevel\n      });\n\n      if (mlResponse.success && mlResponse.result && mlResponse.result.length >= 5) {\n        console.log(`[AI Quiz] ‚úÖ Trained model generated ${mlResponse.result.length} questions successfully`);\n        return { questions: this.shuffleArray(mlResponse.result), usedTrainedModel: true };\n      } else {\n        console.warn(`\\n‚ö†Ô∏è ML model returned insufficient questions (${mlResponse.result?.length || 0}), falling back to template selection\\n`);\n      }\n    } catch (mlError) {\n      console.error(\"\\n‚ùå ML generation failed:\", mlError, \"\\n\");\n    }\n\n    // Fallback to template-based selection with scoring\n    console.log(`[Practice Quiz] Using template-based selection (fallback)`);\n    \n    let candidates = this.questionBank.questions.filter(q => {\n      const matchesTopic = !topic || q.category.toLowerCase().includes(topic.toLowerCase()) || \n                          q.question.toLowerCase().includes(topic.toLowerCase());\n      const matchesCategory = relevantCategories.includes(q.category);\n      return matchesTopic || matchesCategory;\n    });\n\n    if (candidates.length < 5) {\n      candidates = [...this.questionBank.questions];\n    }\n\n    const scored = candidates.map(q => {\n      let score = Math.random() * 10;\n\n      if (q.difficulty === targetDifficulty) {\n        score += 20;\n      } else if (\n        (q.difficulty === \"easy\" && targetDifficulty === \"medium\") ||\n        (q.difficulty === \"medium\" && targetDifficulty === \"hard\")\n      ) {\n        score += 10;\n      }\n\n      if (relevantCategories.includes(q.category)) {\n        score += 15;\n      }\n\n      const catPerf = userPerformance[q.category];\n      if (catPerf && catPerf.accuracy < 0.6) {\n        score += 10;\n      }\n\n      return { question: q, score };\n    });\n\n    scored.sort((a, b) => b.score - a.score);\n\n    const selected: GeneratedQuestion[] = [];\n    const usedCategories = new Set<string>();\n\n    for (const { question } of scored) {\n      if (selected.length >= 5) break;\n      \n      if (selected.length < 3 || !usedCategories.has(question.category)) {\n        selected.push(question);\n        usedCategories.add(question.category);\n      }\n    }\n\n    while (selected.length < 5 && scored.length > selected.length) {\n      const remaining = scored.filter(s => !selected.includes(s.question));\n      if (remaining.length === 0) break;\n      selected.push(remaining[0].question);\n    }\n\n    return { questions: this.shuffleArray(selected), usedTrainedModel: false };\n  }\n\n  async generateStudySuggestions(\n    userPerformance: {\n      level: number;\n      totalXp: number;\n      careerPath: string | null;\n      recentQuizScores: Array<{ category: string; score: number; total: number }>;\n      weakCategories: string[];\n    }\n  ): Promise<StudySuggestion[]> {\n    const suggestions: StudySuggestion[] = [];\n\n    const categoryDescriptions: Record<string, { topic: string; action: string }> = {\n      frontend: { \n        topic: \"Frontend Development\", \n        action: \"Practice React hooks, CSS layouts, and DOM manipulation\" \n      },\n      backend: { \n        topic: \"Backend Development\", \n        action: \"Study REST APIs, database queries, and server architecture\" \n      },\n      data: { \n        topic: \"Data Science Fundamentals\", \n        action: \"Review statistics, data preprocessing, and ML algorithms\" \n      },\n      security: { \n        topic: \"Cybersecurity Basics\", \n        action: \"Learn about XSS, SQL injection prevention, and HTTPS\" \n      },\n      algorithms: { \n        topic: \"Algorithms & Data Structures\", \n        action: \"Practice sorting algorithms, trees, and complexity analysis\" \n      },\n      cloud: { \n        topic: \"Cloud Infrastructure\", \n        action: \"Study containerization, cloud services, and deployment\" \n      },\n      mobile: { \n        topic: \"Mobile Development\", \n        action: \"Practice React Native or native development concepts\" \n      }\n    };\n\n    for (let i = 0; i < Math.min(userPerformance.weakCategories.length, 2); i++) {\n      const weakCat = userPerformance.weakCategories[i];\n      const catInfo = categoryDescriptions[weakCat] || { \n        topic: weakCat, \n        action: `Focus on improving your ${weakCat} skills` \n      };\n\n      const weakScore = userPerformance.recentQuizScores.find(s => s.category === weakCat);\n      const accuracy = weakScore ? Math.round((weakScore.score / weakScore.total) * 100) : 0;\n\n      suggestions.push({\n        topic: catInfo.topic,\n        reason: `Your accuracy in ${weakCat} is ${accuracy}%. This is below average and improving here will boost your overall performance.`,\n        recommendedAction: catInfo.action,\n        priority: accuracy < 40 ? \"high\" : \"medium\"\n      });\n    }\n\n    if (userPerformance.level < 5) {\n      suggestions.push({\n        topic: \"Complete Daily Challenges\",\n        reason: \"Regular practice helps build consistency and earn XP faster\",\n        recommendedAction: \"Complete both quiz and code challenges daily to maintain your streak\",\n        priority: \"high\"\n      });\n    }\n\n    if (userPerformance.careerPath) {\n      suggestions.push({\n        topic: \"Career Path Progress\",\n        reason: `Continue advancing on your ${userPerformance.careerPath} career path`,\n        recommendedAction: \"Complete the next module in your career path to unlock new content\",\n        priority: \"medium\"\n      });\n    }\n\n    if (userPerformance.level >= 5) {\n      suggestions.push({\n        topic: \"Practice Code Challenges\",\n        reason: \"At your level, hands-on coding practice is essential for growth\",\n        recommendedAction: \"Attempt more difficult code challenges to improve problem-solving skills\",\n        priority: \"medium\"\n      });\n    }\n\n    if (!userPerformance.careerPath) {\n      suggestions.push({\n        topic: \"Complete Interest Assessment\",\n        reason: \"A career path helps focus your learning and provides personalized content\",\n        recommendedAction: \"Complete the interest questionnaire to get AI-powered career recommendations\",\n        priority: \"high\"\n      });\n    }\n\n    if (suggestions.length < 3) {\n      suggestions.push({\n        topic: \"Explore New Topics\",\n        reason: \"Broadening your knowledge makes you a more versatile developer\",\n        recommendedAction: \"Try a quiz or module in a category you haven't explored yet\",\n        priority: \"low\"\n      });\n    }\n\n    return suggestions.slice(0, 5);\n  }\n\n  addQuestionsToBank(questions: GeneratedQuestion[]): void {\n    for (const q of questions) {\n      if (!this.questionBank.questions.some(existing => existing.question === q.question)) {\n        this.questionBank.questions.push(q);\n        this.questionBank.categories.add(q.category);\n        this.questionBank.difficulties.add(q.difficulty);\n      }\n    }\n  }\n\n  getQuestionBankStats(): { totalQuestions: number; categories: string[]; difficulties: string[] } {\n    return {\n      totalQuestions: this.questionBank.questions.length,\n      categories: Array.from(this.questionBank.categories),\n      difficulties: Array.from(this.questionBank.difficulties)\n    };\n  }\n}\n\nexport const learningIntelligence = new LearningIntelligenceService();\n\nexport async function generateQuestionsFromText(\n  syllabusText: string,\n  careerPath: string,\n  count: number = 10\n): Promise<GeneratedQuestion[]> {\n  return learningIntelligence.selectQuestionsFromSyllabus(syllabusText, careerPath, count);\n}\n\nexport async function generatePracticeQuiz(\n  careerPath: string,\n  userLevel: number,\n  topic?: string,\n  difficulty?: \"beginner\" | \"intermediate\" | \"advanced\",\n  userId?: string\n): Promise<GeneratedQuestion[]> {\n  return learningIntelligence.generatePracticeQuiz(careerPath, userLevel, topic, difficulty, userId);\n}\n\nexport async function generateStudySuggestions(\n  userPerformance: {\n    level: number;\n    totalXp: number;\n    careerPath: string | null;\n    recentQuizScores: Array<{ category: string; score: number; total: number }>;\n    weakCategories: string[];\n  }\n): Promise<StudySuggestion[]> {\n  return learningIntelligence.generateStudySuggestions(userPerformance);\n}\n","path":null,"size_bytes":28200,"size_tokens":null},"client/src/pages/InterestAssessment.tsx":{"content":"import InterestQuestionnaire from \"@/components/InterestQuestionnaire\";\nimport ThemeToggle from \"@/components/ThemeToggle\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Trophy, Sparkles } from \"lucide-react\";\n\nexport default function InterestAssessment() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"border-b border-border sticky top-0 z-50 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-lg bg-primary flex items-center justify-center\">\n              <Trophy className=\"w-5 h-5 text-primary-foreground\" />\n            </div>\n            <span className=\"font-display font-bold text-xl\">CareerQuest</span>\n          </div>\n          <ThemeToggle />\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto px-6 py-12\">\n        <div className=\"mb-8 text-center\">\n          <div className=\"flex items-center justify-center gap-2 mb-4\">\n            <Sparkles className=\"w-8 h-8 text-primary\" />\n          </div>\n          <h1 className=\"font-display font-bold text-4xl mb-4\">\n            You've Reached <span className=\"text-primary\">Level 20!</span>\n          </h1>\n          <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto mb-6\">\n            Complete this interest assessment to receive your personalized AI-powered career path recommendation.\n          </p>\n          <Card className=\"max-w-2xl mx-auto mb-8 border-primary/20\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                  <Sparkles className=\"w-6 h-6 text-primary\" />\n                </div>\n                <div className=\"text-left\">\n                  <h3 className=\"font-semibold mb-1\">How This Works</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Our AI will analyze your learning performance data combined with your interest responses \n                    using a Naive Bayes algorithm to recommend the perfect career path for you. This includes \n                    specific role progressions from Junior to Senior level positions.\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <InterestQuestionnaire />\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":2556,"size_tokens":null},"client/src/components/examples/AuditLogTable.tsx":{"content":"import AuditLogTable from '../AuditLogTable';\n\n//todo: remove mock functionality\nconst mockLogs = [\n  {\n    id: \"1\",\n    timestamp: \"2025-01-15 14:32:01\",\n    user: \"admin@careerquest.com\",\n    action: \"Syllabus Upload\",\n    details: \"Uploaded CS301_DataStructures.pdf - Generated 45 questions for Full Stack Development path\",\n    status: \"success\" as const\n  },\n  {\n    id: \"2\",\n    timestamp: \"2025-01-15 13:15:22\",\n    user: \"emily.davis@student.edu\",\n    action: \"Quiz Completion\",\n    details: \"Completed 'Algorithms Mastery Quiz' - Score: 85% - XP Earned: 250\",\n    status: \"success\" as const\n  },\n  {\n    id: \"3\",\n    timestamp: \"2025-01-15 12:08:45\",\n    user: \"john.smith@student.edu\",\n    action: \"Assessment Terminated\",\n    details: \"Tab switch detected during 'Final Assessment CS401' - Auto-submitted\",\n    status: \"warning\" as const\n  },\n  {\n    id: \"4\",\n    timestamp: \"2025-01-15 11:45:11\",\n    user: \"admin@careerquest.com\",\n    action: \"User Account Created\",\n    details: \"Created new student account for sarah.connor@student.edu - Assigned to AI-guided path\",\n    status: \"success\" as const\n  },\n  {\n    id: \"5\",\n    timestamp: \"2025-01-15 10:22:33\",\n    user: \"system\",\n    action: \"Career Path Assignment Failed\",\n    details: \"Unable to assign career path to user_12345 - Insufficient data collected\",\n    status: \"error\" as const\n  }\n];\n\nexport default function AuditLogTableExample() {\n  return <AuditLogTable logs={mockLogs} />;\n}\n","path":null,"size_bytes":1459,"size_tokens":null},"client/src/components/examples/ProgressRing.tsx":{"content":"import ProgressRing from '../ProgressRing';\n\nexport default function ProgressRingExample() {\n  return (\n    <ProgressRing progress={65}>\n      <div className=\"text-center\">\n        <div className=\"text-2xl font-bold\">15</div>\n        <div className=\"text-xs text-muted-foreground\">Level</div>\n      </div>\n    </ProgressRing>\n  );\n}\n","path":null,"size_bytes":333,"size_tokens":null},"client/src/components/InterestQuestionnaire.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { ChevronLeft, ChevronRight, Brain } from \"lucide-react\";\nimport CareerRecommendationModal from \"@/components/CareerRecommendationModal\";\n\ninterface Question {\n  id: number;\n  question: string;\n  type: \"scale\" | \"choice\";\n  options?: string[];\n}\n\nconst questions: Question[] = [\n  {\n    id: 1,\n    question: \"How much do you enjoy working with visual design and user interfaces?\",\n    type: \"scale\"\n  },\n  {\n    id: 2,\n    question: \"Do you prefer working on backend systems or frontend interfaces?\",\n    type: \"choice\",\n    options: [\"Backend Systems\", \"Frontend Interfaces\", \"Both Equally\", \"Not Sure\"]\n  },\n  {\n    id: 3,\n    question: \"How comfortable are you with mathematics and statistical analysis?\",\n    type: \"scale\"\n  },\n  {\n    id: 4,\n    question: \"Which area interests you most?\",\n    type: \"choice\",\n    options: [\n      \"Building web applications\",\n      \"Analyzing data and patterns\",\n      \"Managing cloud infrastructure\",\n      \"Mobile app development\",\n      \"Cybersecurity and protection\"\n    ]\n  },\n  {\n    id: 5,\n    question: \"How much do you enjoy problem-solving and debugging?\",\n    type: \"scale\"\n  },\n  {\n    id: 6,\n    question: \"How interested are you in working with machine learning and AI?\",\n    type: \"scale\"\n  },\n  {\n    id: 7,\n    question: \"Do you prefer working with established technologies or cutting-edge experimental tools?\",\n    type: \"choice\",\n    options: [\"Established & Stable\", \"Cutting-edge & Experimental\", \"Mix of Both\", \"Not Sure\"]\n  },\n  {\n    id: 8,\n    question: \"How much do you enjoy infrastructure and system administration tasks?\",\n    type: \"scale\"\n  },\n  {\n    id: 9,\n    question: \"Which development environment appeals to you most?\",\n    type: \"choice\",\n    options: [\n      \"Web browsers and servers\",\n      \"Data notebooks and analytics platforms\",\n      \"Cloud platforms and terminals\",\n      \"Mobile devices and emulators\",\n      \"Security testing environments\"\n    ]\n  },\n  {\n    id: 10,\n    question: \"How interested are you in protecting systems from security threats?\",\n    type: \"scale\"\n  },\n  {\n    id: 11,\n    question: \"Do you prefer building user-facing features or working on behind-the-scenes systems?\",\n    type: \"choice\",\n    options: [\"User-facing Features\", \"Behind-the-scenes Systems\", \"Both Equally\", \"Not Sure\"]\n  },\n  {\n    id: 12,\n    question: \"How comfortable are you with deploying and managing applications in production?\",\n    type: \"scale\"\n  }\n];\n\nexport default function InterestQuestionnaire() {\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [answers, setAnswers] = useState<(number | string | null)[]>(new Array(questions.length).fill(null));\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const { refreshUser, setPendingRecommendation } = useAuth();\n\n  const progress = ((currentQuestion + 1) / questions.length) * 100;\n\n  // Submit interest assessment mutation\n  const submitMutation = useMutation({\n    mutationFn: async (data: { responses: Array<{ questionId: number; response: string }> }) => {\n      const res = await apiRequest(\"POST\", \"/api/interest/submit\", data);\n      return await res.json();\n    },\n    onSuccess: async (data: any) => {\n      console.log(\"Assessment submission successful, data:\", data);\n      toast({\n        title: \"Assessment Complete!\",\n        description: \"Redirecting you to your dashboard...\",\n      });\n      \n      // Invalidate and refresh user data to get the new career path assignment\n      await queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\n      await refreshUser();\n      \n      // Store the recommendation in context to display on dashboard\n      if (data?.recommendedPath) {\n        setPendingRecommendation(data.recommendedPath);\n      }\n      \n      // Navigate to dashboard immediately\n      navigate(\"/dashboard\");\n    },\n    onError: () => {\n      toast({\n        title: \"Submission Failed\",\n        description: \"Failed to submit your responses. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleScaleAnswer = (value: number) => {\n    const newAnswers = [...answers];\n    newAnswers[currentQuestion] = value;\n    setAnswers(newAnswers);\n    console.log(`Question ${currentQuestion + 1} answered:`, value);\n  };\n\n  const handleChoiceAnswer = (choice: string) => {\n    const newAnswers = [...answers];\n    newAnswers[currentQuestion] = choice;\n    setAnswers(newAnswers);\n    console.log(`Question ${currentQuestion + 1} answered:`, choice);\n  };\n\n  const handleNext = () => {\n    if (currentQuestion < questions.length - 1) {\n      setCurrentQuestion(currentQuestion + 1);\n    }\n  };\n\n  const handlePrevious = () => {\n    if (currentQuestion > 0) {\n      setCurrentQuestion(currentQuestion - 1);\n    }\n  };\n\n  const handleSubmit = () => {\n    // Convert answers array to responses array format for backend\n    const responseArray = questions.map((q, index) => ({\n      questionId: q.id,\n      response: String(answers[index] || \"\"),\n    })).filter(r => r.response !== \"\");\n    \n    submitMutation.mutate({ responses: responseArray });\n  };\n\n  const question = questions[currentQuestion];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-background to-primary/5 flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-3xl\">\n      <CardHeader className=\"space-y-4 pb-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\n            <Brain className=\"w-5 h-5 text-primary\" />\n          </div>\n          <div className=\"flex-1\">\n            <CardTitle>Interest Assessment</CardTitle>\n            <p className=\"text-sm text-muted-foreground mt-1\">\n              Question {currentQuestion + 1} of {questions.length}\n            </p>\n          </div>\n        </div>\n        <Progress value={progress} className=\"h-2\" />\n      </CardHeader>\n      \n      <CardContent className=\"space-y-8\">\n        <div className=\"text-xl font-semibold leading-relaxed min-h-[60px]\">\n          {question.question}\n        </div>\n        \n        {question.type === \"scale\" && (\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between text-sm text-muted-foreground\">\n              <span>Not at all</span>\n              <span>Very much</span>\n            </div>\n            <div className=\"flex gap-2 justify-between\">\n              {[1, 2, 3, 4, 5].map((value) => (\n                <button\n                  key={value}\n                  onClick={() => handleScaleAnswer(value)}\n                  className={`w-14 h-14 rounded-full border-2 font-semibold transition-all hover-elevate ${\n                    answers[currentQuestion] === value\n                      ? 'border-primary bg-primary text-primary-foreground'\n                      : 'border-card-border hover:border-primary'\n                  }`}\n                  data-testid={`button-scale-${value}`}\n                >\n                  {value}\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n        \n        {question.type === \"choice\" && question.options && (\n          <div className=\"space-y-3\">\n            {question.options.map((option, index) => (\n              <button\n                key={index}\n                onClick={() => handleChoiceAnswer(option)}\n                className={`w-full min-h-14 p-4 text-left rounded-lg border-2 transition-all hover-elevate ${\n                  answers[currentQuestion] === option\n                    ? 'border-primary bg-primary/5'\n                    : 'border-card-border'\n                }`}\n                data-testid={`button-choice-${index}`}\n              >\n                <div className=\"flex items-center gap-3\">\n                  <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${\n                    answers[currentQuestion] === option\n                      ? 'border-primary bg-primary'\n                      : 'border-muted'\n                  }`}>\n                    {answers[currentQuestion] === option && (\n                      <div className=\"w-2 h-2 rounded-full bg-primary-foreground\" />\n                    )}\n                  </div>\n                  <span>{option}</span>\n                </div>\n              </button>\n            ))}\n          </div>\n        )}\n        \n        <div className=\"flex justify-between gap-4 pt-4\">\n          <Button\n            variant=\"outline\"\n            onClick={handlePrevious}\n            disabled={currentQuestion === 0}\n            data-testid=\"button-previous\"\n          >\n            <ChevronLeft className=\"w-4 h-4 mr-2\" />\n            Previous\n          </Button>\n          \n          {currentQuestion === questions.length - 1 ? (\n            <Button\n              onClick={handleSubmit}\n              disabled={answers[currentQuestion] === null || submitMutation.isPending}\n              data-testid=\"button-submit\"\n            >\n              {submitMutation.isPending ? \"Analyzing...\" : \"Get Recommendation\"}\n              {!submitMutation.isPending && <Brain className=\"w-4 h-4 ml-2\" />}\n            </Button>\n          ) : (\n            <Button\n              onClick={handleNext}\n              disabled={answers[currentQuestion] === null}\n              data-testid=\"button-next\"\n            >\n              Next\n              <ChevronRight className=\"w-4 h-4 ml-2\" />\n            </Button>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":10014,"size_tokens":null},"server/naiveBayes.ts":{"content":"import { storage } from \"./storage-firestore\";\nimport type { QuestionAttempt, InterestResponse } from \"@shared/schema\";\n\ninterface CategoryPerformance {\n  [category: string]: {\n    correct: number;\n    total: number;\n  };\n}\n\ninterface CareerPathProbability {\n  careerPathId: string;\n  probability: number;\n  score: number;\n}\n\n/**\n * Naive Bayes Career Path Recommender\n * \n * This algorithm analyzes:\n * 1. Quiz performance by category (frontend, backend, data, security, etc.)\n * 2. Interest questionnaire responses\n * \n * To recommend the best career path for a student.\n */\nexport class NaiveBayesRecommender {\n  \n  /**\n   * Calculate performance metrics by category from question attempts\n   */\n  private calculateCategoryPerformance(attempts: QuestionAttempt[]): CategoryPerformance {\n    const performance: CategoryPerformance = {};\n\n    for (const attempt of attempts) {\n      if (!attempt.category) continue;\n\n      if (!performance[attempt.category]) {\n        performance[attempt.category] = { correct: 0, total: 0 };\n      }\n\n      performance[attempt.category].total++;\n      if (attempt.isCorrect) {\n        performance[attempt.category].correct++;\n      }\n    }\n\n    return performance;\n  }\n\n  /**\n   * Map interest responses to career path affinities\n   */\n  private analyzeInterestResponses(responses: InterestResponse[]): Record<string, number> {\n    const affinities: Record<string, number> = {\n      frontend: 0,\n      backend: 0,\n      data: 0,\n      cloud: 0,\n      mobile: 0,\n      security: 0,\n    };\n\n    for (const response of responses) {\n      const r = response.response.toString();\n\n      // Question patterns (based on InterestQuestionnaire.tsx)\n      switch (response.questionId) {\n        case 1: // Visual design and UI\n          if (r === \"5\" || r === \"4\") {\n            affinities.frontend += 2;\n            affinities.mobile += 1;\n          }\n          break;\n\n        case 2: // Backend vs Frontend preference\n          if (r.includes(\"Backend\")) {\n            affinities.backend += 3;\n            affinities.cloud += 1;\n          } else if (r.includes(\"Frontend\")) {\n            affinities.frontend += 3;\n            affinities.mobile += 1;\n          } else if (r.includes(\"Both\")) {\n            affinities.frontend += 1;\n            affinities.backend += 1;\n          }\n          break;\n\n        case 3: // Math and statistics\n          if (r === \"5\" || r === \"4\") {\n            affinities.data += 3;\n            affinities.backend += 1;\n          }\n          break;\n\n        case 4: // Area of interest\n          if (r.includes(\"web applications\")) {\n            affinities.frontend += 2;\n            affinities.backend += 2;\n          } else if (r.includes(\"data\")) {\n            affinities.data += 3;\n          } else if (r.includes(\"cloud\")) {\n            affinities.cloud += 3;\n          } else if (r.includes(\"mobile\")) {\n            affinities.mobile += 3;\n          } else if (r.includes(\"security\")) {\n            affinities.security += 3;\n          }\n          break;\n\n        case 5: // Problem-solving enjoyment\n          if (r === \"5\" || r === \"4\") {\n            affinities.backend += 1;\n            affinities.data += 1;\n          }\n          break;\n      }\n    }\n\n    return affinities;\n  }\n\n  /**\n   * Calculate Naive Bayes probability for each career path\n   */\n  private calculateProbabilities(\n    categoryPerformance: CategoryPerformance,\n    interestAffinities: Record<string, number>\n  ): CareerPathProbability[] {\n    // Career path definitions with their category weights\n    const careerPathWeights: Record<string, Record<string, number>> = {\n      fullstack: {\n        frontend: 0.4,\n        backend: 0.4,\n        data: 0.1,\n        cloud: 0.05,\n        mobile: 0.05,\n        security: 0.0,\n      },\n      datascience: {\n        frontend: 0.05,\n        backend: 0.15,\n        data: 0.7,\n        cloud: 0.05,\n        mobile: 0.0,\n        security: 0.05,\n      },\n      cloud: {\n        frontend: 0.05,\n        backend: 0.25,\n        data: 0.1,\n        cloud: 0.55,\n        mobile: 0.0,\n        security: 0.05,\n      },\n      mobile: {\n        frontend: 0.3,\n        backend: 0.15,\n        data: 0.05,\n        cloud: 0.05,\n        mobile: 0.45,\n        security: 0.0,\n      },\n      security: {\n        frontend: 0.05,\n        backend: 0.2,\n        data: 0.1,\n        cloud: 0.1,\n        mobile: 0.0,\n        security: 0.55,\n      },\n    };\n\n    const results: CareerPathProbability[] = [];\n\n    for (const [pathKey, weights] of Object.entries(careerPathWeights)) {\n      let performanceScore = 0;\n      let interestScore = 0;\n\n      // Calculate weighted performance score\n      for (const [category, weight] of Object.entries(weights)) {\n        if (categoryPerformance[category]) {\n          const accuracy = categoryPerformance[category].correct / categoryPerformance[category].total;\n          performanceScore += accuracy * weight;\n        }\n\n        // Add interest affinity score\n        interestScore += (interestAffinities[category] || 0) * weight;\n      }\n\n      // Combine performance (60%) and interest (40%) with normalization\n      const normalizedPerformance = performanceScore * 100;\n      const normalizedInterest = Math.min(interestScore * 10, 100);\n      \n      const finalScore = (normalizedPerformance * 0.6) + (normalizedInterest * 0.4);\n\n      // Calculate probability (softmax-like normalization will be applied later)\n      results.push({\n        careerPathId: pathKey,\n        probability: 0, // Will be calculated after\n        score: finalScore,\n      });\n    }\n\n    // Normalize scores to probabilities using softmax\n    const totalExp = results.reduce((sum, r) => sum + Math.exp(r.score / 10), 0);\n    for (const result of results) {\n      result.probability = Math.exp(result.score / 10) / totalExp;\n    }\n\n    // Sort by probability descending\n    results.sort((a, b) => b.probability - a.probability);\n\n    return results;\n  }\n\n  /**\n   * Map internal career path keys to actual database IDs\n   */\n  private async mapToCareerPathIds(\n    probabilities: CareerPathProbability[]\n  ): Promise<CareerPathProbability[]> {\n    const paths = await storage.getCareerPaths();\n    \n    if (paths.length === 0) {\n      console.warn(\"No career paths found in database\");\n      return probabilities;\n    }\n    \n    const mapping: Record<string, string> = {};\n    \n    // Try multiple naming variations\n    const pathPatterns: Record<string, RegExp[]> = {\n      fullstack: [/full\\s*stack/i, /fullstack/i, /full-stack/i],\n      datascience: [/data\\s*science/i, /datascience/i, /data-science/i],\n      cloud: [/cloud/i, /cloud\\s*infrastructure/i],\n      mobile: [/mobile/i, /mobile\\s*dev/i],\n      security: [/cybersecurity/i, /security/i],\n    };\n    \n    // First pass: exact pattern matching\n    for (const [key, patterns] of Object.entries(pathPatterns)) {\n      for (const pattern of patterns) {\n        const match = paths.find(p => pattern.test(p.name));\n        if (match) {\n          mapping[key] = match.id;\n          break;\n        }\n      }\n    }\n    \n    // Fallback: if no matches found, use first path as default for each key\n    for (const key of Object.keys(pathPatterns)) {\n      if (!mapping[key] && paths.length > 0) {\n        mapping[key] = paths[0].id;\n      }\n    }\n\n    return probabilities.map(p => ({\n      ...p,\n      careerPathId: mapping[p.careerPathId] || paths[0]?.id || p.careerPathId,\n    }));\n  }\n\n  /**\n   * Main recommendation function\n   * Returns the recommended career path ID and probabilities for all paths\n   */\n  async recommendCareerPath(userId: string): Promise<{\n    recommendedPathId: string;\n    probabilities: CareerPathProbability[];\n    confidence: number;\n  }> {\n    // Get user's question attempts\n    const questionAttempts = await storage.getUserQuestionAttemptsByCategory(userId);\n    \n    // Get user's interest responses\n    const interestResponses = await storage.getUserInterestResponses(userId);\n\n    if (interestResponses.length === 0) {\n      throw new Error(\"Interest assessment not completed\");\n    }\n\n    // If no quiz data, use only interest responses for recommendation\n    let categoryPerformance: CategoryPerformance = {};\n    \n    if (questionAttempts.length > 0) {\n      // Calculate category performance if quiz data exists\n      categoryPerformance = this.calculateCategoryPerformance(questionAttempts);\n    } else {\n      // Create default performance if no quiz data\n      categoryPerformance = {\n        frontend: { correct: 1, total: 2 },\n        backend: { correct: 1, total: 2 },\n        data: { correct: 1, total: 2 },\n        cloud: { correct: 1, total: 2 },\n        mobile: { correct: 1, total: 2 },\n        security: { correct: 1, total: 2 },\n      };\n    }\n\n    // Analyze interest responses\n    const interestAffinities = this.analyzeInterestResponses(interestResponses);\n\n    // Calculate probabilities\n    let probabilities = this.calculateProbabilities(categoryPerformance, interestAffinities);\n\n    // Map to actual career path IDs\n    probabilities = await this.mapToCareerPathIds(probabilities);\n\n    // Verify we have a valid recommendation\n    if (probabilities.length === 0 || !probabilities[0].careerPathId) {\n      throw new Error(\"Unable to calculate career recommendation\");\n    }\n\n    // Get top recommendation\n    const recommended = probabilities[0];\n    const confidence = Math.min(recommended.probability * 100, 95); // Cap at 95% if no quiz data\n\n    return {\n      recommendedPathId: recommended.careerPathId,\n      probabilities,\n      confidence,\n    };\n  }\n}\n\nexport const naiveBayesRecommender = new NaiveBayesRecommender();\n","path":null,"size_bytes":9616,"size_tokens":null},"server/ml-client.ts":{"content":"const ML_BASE = process.env.ML_SERVICE_URL || \"http://127.0.0.1:5001\";\n\nexport type MLResponse<T> = {\n\tsuccess: boolean;\n\tresult?: T;\n\terror?: string;\n};\n\nexport async function callMLService<T = any>(command: string, data?: any, timeoutMs = 10_000): Promise<MLResponse<T>> {\n\tconst url = `${ML_BASE}/predict`;\n\tconst controller = new AbortController();\n\tconst id = setTimeout(() => controller.abort(), timeoutMs);\n\n\ttry {\n\t\tconst resp = await fetch(url, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify({ command, data }),\n\t\t\tsignal: controller.signal,\n\t\t});\n\n\t\tclearTimeout(id);\n\n\t\tlet payload: any;\n\t\ttry {\n\t\t\tpayload = await resp.json();\n\t\t} catch (jsonErr) {\n\t\t\treturn { success: false, error: `Invalid JSON response: ${jsonErr}` };\n\t\t}\n\n\t\tif (!resp.ok) {\n\t\t\treturn { success: false, error: `ML service error: ${resp.status} ${resp.statusText} - ${JSON.stringify(payload)}` };\n\t\t}\n\n\t\treturn { success: true, result: payload };\n\t} catch (err: any) {\n\t\tif (err.name === 'AbortError') {\n\t\t\treturn { success: false, error: `Request timed out after ${timeoutMs}ms` };\n\t\t}\n\t\treturn { success: false, error: String(err) };\n\t}\n}\n\nexport async function healthCheck(timeoutMs = 3000): Promise<boolean> {\n\tconst url = `${ML_BASE}/health`;\n\tconst controller = new AbortController();\n\tconst id = setTimeout(() => controller.abort(), timeoutMs);\n\n\ttry {\n\t\tconst resp = await fetch(url, { method: 'GET', signal: controller.signal });\n\t\tclearTimeout(id);\n\t\treturn resp.ok;\n\t} catch (_) {\n\t\treturn false;\n\t}\n}\n\nexport default callMLService;\n","path":null,"size_bytes":1576,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1383,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1080,"size_tokens":null},"client/src/components/FeatureCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { LucideIcon } from \"lucide-react\";\n\ninterface FeatureCardProps {\n  icon: LucideIcon;\n  title: string;\n  description: string;\n}\n\nexport default function FeatureCard({ icon: Icon, title, description }: FeatureCardProps) {\n  return (\n    <Card className=\"group hover-elevate transition-all duration-300 border-2 hover:border-primary/50\">\n      <CardContent className=\"p-6\">\n        <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-primary/20 to-violet-500/20 border border-primary/20 flex items-center justify-center mb-4 group-hover:scale-110 group-hover:rotate-3 transition-all duration-300\">\n          <Icon className=\"w-7 h-7 text-primary\" />\n        </div>\n        <h3 className=\"font-display font-semibold text-xl mb-2 group-hover:text-primary transition-colors\">\n          {title}\n        </h3>\n        <p className=\"text-muted-foreground leading-relaxed\">{description}</p>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":995,"size_tokens":null},"ml_model/question_dataset.py":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"client/src/components/examples/CareerPathCard.tsx":{"content":"import CareerPathCard from '../CareerPathCard';\nimport { Code2, Database } from 'lucide-react';\n\nexport default function CareerPathCardExample() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 p-4\">\n      <CareerPathCard \n        icon={Code2}\n        title=\"Full Stack Developer\"\n        description=\"Build complete web applications from front to back\"\n        skills={[\"React\", \"Node.js\", \"PostgreSQL\", \"TypeScript\"]}\n        salaryRange=\"$70k - $140k\"\n        timeEstimate=\"12-18 months\"\n        recommended={true}\n      />\n      <CareerPathCard \n        icon={Database}\n        title=\"Data Engineer\"\n        description=\"Design and maintain data infrastructure\"\n        skills={[\"Python\", \"SQL\", \"Apache Spark\", \"AWS\"]}\n        salaryRange=\"$80k - $150k\"\n        timeEstimate=\"18-24 months\"\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":844,"size_tokens":null},"server/dailyChallenges.ts":{"content":"import { storage } from \"./storage-firestore\";\n\n/**\n * Daily Challenge Generator\n * Assigns random quizzes and code challenges to users each day\n */\nexport class DailyChallengeGenerator {\n  \n  /**\n   * Get or create daily challenges for a user\n   */\n  async getDailyChallenges(userId: string): Promise<{\n    quizChallenge: any;\n    codeChallenge: any;\n    dailyChallenges: any[];\n  }> {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    \n    const existing = await storage.getDailyChallenges(userId, today);\n\n    // Check which challenge types already exist\n    const quizRecord = existing.find(c => c.challengeType === \"quiz\");\n    const codeRecord = existing.find(c => c.challengeType === \"code\");\n\n    // If both challenges exist, return them\n    if (quizRecord && codeRecord) {\n      const quizChallenge = await storage.getQuiz(quizRecord.challengeId);\n      const codeChallenge = await storage.getCodeChallenge(codeRecord.challengeId);\n\n      return {\n        quizChallenge,\n        codeChallenge,\n        dailyChallenges: existing,\n      };\n    }\n\n    // Get user to determine their level and preferences\n    const user = await storage.getUser(userId);\n    if (!user) {\n      return { quizChallenge: null, codeChallenge: null, dailyChallenges: [] };\n    }\n\n    // Difficulty mapping based on level with more variety\n    const getDifficultyOptions = (level: number): string[] => {\n      if (level < 3) return [\"beginner\", \"easy\"];\n      if (level < 7) return [\"easy\", \"beginner\", \"medium\"];\n      if (level < 12) return [\"easy\", \"medium\"];\n      if (level < 18) return [\"medium\", \"intermediate\"];\n      return [\"medium\", \"intermediate\", \"hard\", \"advanced\"];\n    };\n\n    const targetDifficulties = getDifficultyOptions(user.level);\n    \n    // Variety: Mix difficulties based on day of week\n    const dayOfWeek = today.getDay();\n    const preferEasier = dayOfWeek === 1 || dayOfWeek === 6; // Monday or Saturday\n    const preferHarder = dayOfWeek === 3 || dayOfWeek === 5; // Wednesday or Friday\n\n    // Start with existing challenges\n    const challenges = [...existing];\n    let finalQuizChallenge = null;\n    let finalCodeChallenge = null;\n\n    // Handle quiz challenge\n    if (quizRecord) {\n      // Quiz already exists, fetch its details\n      finalQuizChallenge = await storage.getQuiz(quizRecord.challengeId);\n    } else {\n      // Need to create a new quiz challenge\n      const recentQuizAttempts = await storage.getUserQuizAttempts(userId, 10);\n      const recentQuizIds = new Set(recentQuizAttempts.map(a => a.quizId));\n      \n      let allQuizzes = await storage.getQuizzes(\n        user.currentCareerPathId || undefined, \n        user.level\n      );\n      allQuizzes = allQuizzes.filter(q => !recentQuizIds.has(q.id));\n\n      const suitableQuizzes = allQuizzes.filter(q => \n        targetDifficulties.includes(q.difficulty) ||\n        (preferEasier && (q.difficulty === \"beginner\" || q.difficulty === \"easy\")) ||\n        (preferHarder && (q.difficulty === \"advanced\" || q.difficulty === \"hard\"))\n      );\n      \n      const quizzesToChoose = suitableQuizzes.length > 0 ? suitableQuizzes : allQuizzes;\n      const randomQuiz = quizzesToChoose.length > 0 \n        ? quizzesToChoose[Math.floor(Math.random() * quizzesToChoose.length)]\n        : null;\n      \n      if (randomQuiz) {\n        const quizDC = await storage.createDailyChallenge(userId, \"quiz\", randomQuiz.id);\n        challenges.push(quizDC);\n        finalQuizChallenge = randomQuiz;\n      }\n    }\n\n    // Handle code challenge\n    if (codeRecord) {\n      // Code challenge already exists, fetch its details\n      finalCodeChallenge = await storage.getCodeChallenge(codeRecord.challengeId);\n    } else {\n      // Need to create a new code challenge\n      let allCodeChallenges = await storage.getCodeChallenges(\n        user.currentCareerPathId || undefined, \n        user.level\n      );\n\n      const suitableCodeChallenges = allCodeChallenges.filter(c => \n        targetDifficulties.includes(c.difficulty) ||\n        (preferEasier && c.difficulty === \"easy\") ||\n        (preferHarder && c.difficulty === \"hard\")\n      );\n      \n      const codesToChoose = suitableCodeChallenges.length > 0 ? suitableCodeChallenges : allCodeChallenges;\n      const randomCode = codesToChoose.length > 0\n        ? codesToChoose[Math.floor(Math.random() * codesToChoose.length)]\n        : null;\n      \n      if (randomCode) {\n        const codeDC = await storage.createDailyChallenge(userId, \"code\", randomCode.id);\n        challenges.push(codeDC);\n        finalCodeChallenge = randomCode;\n      }\n    }\n\n    return {\n      quizChallenge: finalQuizChallenge,\n      codeChallenge: finalCodeChallenge,\n      dailyChallenges: challenges,\n    };\n  }\n\n  /**\n   * Get today's challenge for a user\n   */\n  async getTodayChallenge(userId: string) {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Normalize to start of day\n    const challenges = await storage.getDailyChallenges(userId, today);\n    \n    console.log(`[DailyChallenge] getTodayChallenge for user ${userId}`);\n    console.log(`[DailyChallenge] Found ${challenges.length} challenges, checking completion status...`);\n    \n    // Return first uncompleted challenge ONLY\n    const uncompleted = challenges.find(c => !c.completed);\n    if (uncompleted) {\n      console.log(`[DailyChallenge] Returning uncompleted challenge: ${uncompleted.id}`);\n      return uncompleted;\n    }\n    \n    // If all completed, return null (don't show completed challenges)\n    if (challenges.length > 0) {\n      console.log(`[DailyChallenge] All ${challenges.length} challenges completed, returning null`);\n      return null;\n    }\n    \n    // If none exist, create new ones\n    console.log(`[DailyChallenge] No challenges exist, creating new ones...`);\n    const result = await this.getDailyChallenges(userId);\n    return result.dailyChallenges[0] || null;\n  }\n\n  /**\n   * Mark a daily challenge as complete\n   */\n  async completeDailyChallenge(userId: string, challengeId: string, challengeType: \"quiz\" | \"code\"): Promise<void> {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Normalize to start of day\n    const challenges = await storage.getDailyChallenges(userId, today);\n    \n    console.log(`[DailyChallenge] Marking complete - userId: ${userId}, challengeId: ${challengeId}, type: ${challengeType}`);\n    console.log(`[DailyChallenge] Found ${challenges.length} daily challenges for today`);\n    \n    const challenge = challenges.find(\n      c => c.challengeId === challengeId && c.challengeType === challengeType\n    );\n\n    if (challenge) {\n      console.log(`[DailyChallenge] Found matching challenge record: ${challenge.id}, marking as complete`);\n      await storage.markDailyChallengeComplete(challenge.id);\n    } else {\n      console.log(`[DailyChallenge] WARNING: No matching daily challenge found!`);\n      console.log(`[DailyChallenge] Available challenges:`, challenges.map(c => ({ \n        id: c.id, \n        challengeId: c.challengeId, \n        type: c.challengeType,\n        completed: c.completed \n      })));\n    }\n  }\n}\n\nexport const dailyChallengeGenerator = new DailyChallengeGenerator();\n","path":null,"size_bytes":7157,"size_tokens":null},"server/firebase.ts":{"content":"import { initializeApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAtXt_mx217dS4KmIzQ78_KafufDwuGhm4\",\n  authDomain: \"careerquest-7a741.firebaseapp.com\",\n  projectId: \"careerquest-7a741\",\n  storageBucket: \"careerquest-7a741.firebasestorage.app\",\n  messagingSenderId: \"864822379969\",\n  appId: \"1:864822379969:web:2e86263d38376c9a219b40\"\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const db = getFirestore(app);\nexport const auth = getAuth(app);\n","path":null,"size_bytes":568,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"client/src/components/CareerPathCard.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ArrowRight, TrendingUp } from \"lucide-react\";\nimport { LucideIcon } from \"lucide-react\";\n\ninterface CareerPathCardProps {\n  pathId: string;\n  icon: LucideIcon;\n  title: string;\n  description: string;\n  skills: string[];\n  ranks: string[];\n  recommended?: boolean;\n  onSelect: (pathId: string) => void;\n  isSelecting?: boolean;\n}\n\nexport default function CareerPathCard({\n  pathId,\n  icon: Icon,\n  title,\n  description,\n  skills,\n  ranks,\n  recommended = false,\n  onSelect,\n  isSelecting = false\n}: CareerPathCardProps) {\n  return (\n    <Card className={`hover-elevate transition-all duration-300 ${recommended ? 'border-primary border-2' : ''}`}>\n      {recommended && (\n        <div className=\"bg-primary text-primary-foreground px-4 py-2 text-sm font-semibold flex items-center gap-2\">\n          <TrendingUp className=\"w-4 h-4\" />\n          AI Recommended For You\n        </div>\n      )}\n      <CardHeader>\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center\">\n            <Icon className=\"w-6 h-6 text-primary\" />\n          </div>\n        </div>\n        <CardTitle className=\"text-xl mt-4\">{title}</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <p className=\"text-muted-foreground\">{description}</p>\n        \n        <div className=\"space-y-2\">\n          <div className=\"text-sm font-medium\">Key Skills:</div>\n          <div className=\"flex flex-wrap gap-2\">\n            {skills.slice(0, 5).map((skill) => (\n              <Badge key={skill} variant=\"secondary\" className=\"text-xs\">\n                {skill}\n              </Badge>\n            ))}\n          </div>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <div className=\"text-sm font-medium\">Progression Path:</div>\n          <div className=\"text-sm text-muted-foreground\">\n            {ranks.join(\" ‚Üí \")}\n          </div>\n        </div>\n        \n        <Button \n          className=\"w-full\" \n          variant={recommended ? \"default\" : \"outline\"} \n          onClick={() => onSelect(pathId)}\n          disabled={isSelecting}\n          data-testid={`button-select-${title.toLowerCase().replace(/\\s+/g, '-')}`}\n        >\n          {isSelecting ? \"Selecting...\" : \"Select Path\"}\n          {!isSelecting && <ArrowRight className=\"w-4 h-4 ml-2\" />}\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":2614,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport {\n  pgTable,\n  text,\n  varchar,\n  integer,\n  timestamp,\n  boolean,\n  json,\n  real\n} from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Users table with gamification fields\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  email: text(\"email\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  displayName: text(\"display_name\").notNull(),\n  level: integer(\"level\").notNull().default(1),\n  xp: integer(\"xp\").notNull().default(0),\n  totalXp: integer(\"total_xp\").notNull().default(0),\n  currentCareerPathId: varchar(\"current_career_path_id\"),\n  pathSelectionMode: text(\"path_selection_mode\").notNull().default(\"ai-guided\"), // \"ai-guided\" | \"manual\"\n  hasCompletedInterestAssessment: boolean(\"has_completed_interest_assessment\").notNull().default(false),\n  isAdmin: boolean(\"is_admin\").notNull().default(false),\n  currentStreak: integer(\"current_streak\").notNull().default(0),\n  lastLoginDate: timestamp(\"last_login_date\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  lastActiveAt: timestamp(\"last_active_at\").notNull().defaultNow(),\n});\n\n// Password reset tokens\nexport const passwordResetTokens = pgTable(\"password_reset_tokens\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  token: text(\"token\").notNull().unique(),\n  expiresAt: timestamp(\"expires_at\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Career paths\nexport const careerPaths = pgTable(\"career_paths\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  description: text(\"description\").notNull(),\n  color: text(\"color\").notNull(),\n  icon: text(\"icon\").notNull(),\n  progressionRanks: json(\"progression_ranks\").notNull().$type<string[]>(), // [\"Junior Dev\", \"Mid Dev\", \"Senior Dev\"]\n  requiredSkills: json(\"required_skills\").notNull().$type<string[]>(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Badge definitions\nexport const badges = pgTable(\"badges\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  description: text(\"description\").notNull(),\n  icon: text(\"icon\").notNull(),\n  rarity: text(\"rarity\").notNull(), // \"common\" | \"rare\" | \"epic\" | \"legendary\"\n  requirement: text(\"requirement\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// User earned badges\nexport const userBadges = pgTable(\"user_badges\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  badgeId: varchar(\"badge_id\").notNull().references(() => badges.id, { onDelete: \"cascade\" }),\n  earnedAt: timestamp(\"earned_at\").notNull().defaultNow(),\n});\n\n// Quizzes\nexport const quizzes = pgTable(\"quizzes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  difficulty: text(\"difficulty\").notNull(), // \"beginner\" | \"intermediate\" | \"advanced\"\n  careerPathId: varchar(\"career_path_id\").references(() => careerPaths.id),\n  requiredLevel: integer(\"required_level\").notNull().default(1),\n  xpReward: integer(\"xp_reward\").notNull().default(100),\n  timeLimit: integer(\"time_limit\"), // in seconds, null for no limit\n  isFinalAssessment: boolean(\"is_final_assessment\").notNull().default(false),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Questions\nexport const questions = pgTable(\"questions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  quizId: varchar(\"quiz_id\").notNull().references(() => quizzes.id, { onDelete: \"cascade\" }),\n  questionText: text(\"question_text\").notNull(),\n  questionType: text(\"question_type\").notNull(), // \"multiple-choice\" | \"true-false\" | \"scenario\"\n  options: json(\"options\").notNull().$type<string[]>(),\n  correctAnswer: text(\"correct_answer\").notNull(),\n  explanation: text(\"explanation\"),\n  category: text(\"category\"), // for Naive Bayes classification (e.g., \"frontend\", \"backend\", \"data\", \"security\")\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Quiz attempts\nexport const quizAttempts = pgTable(\"quiz_attempts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  quizId: varchar(\"quiz_id\").notNull().references(() => quizzes.id, { onDelete: \"cascade\" }),\n  score: real(\"score\").notNull(), // percentage 0-100\n  correctAnswers: integer(\"correct_answers\").notNull(),\n  totalQuestions: integer(\"total_questions\").notNull(),\n  xpEarned: integer(\"xp_earned\").notNull(),\n  completedAt: timestamp(\"completed_at\").notNull().defaultNow(),\n  wasTabSwitched: boolean(\"was_tab_switched\").notNull().default(false),\n  timeSpent: integer(\"time_spent\"), // in seconds\n});\n\n// Question attempts (for Naive Bayes training data)\nexport const questionAttempts = pgTable(\"question_attempts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  questionId: varchar(\"question_id\").notNull().references(() => questions.id, { onDelete: \"cascade\" }),\n  quizAttemptId: varchar(\"quiz_attempt_id\").notNull().references(() => quizAttempts.id, { onDelete: \"cascade\" }),\n  selectedAnswer: text(\"selected_answer\").notNull(),\n  isCorrect: boolean(\"is_correct\").notNull(),\n  category: text(\"category\"), // denormalized from question for faster queries\n  answeredAt: timestamp(\"answered_at\").notNull().defaultNow(),\n});\n\n// Code challenges\nexport const codeChallenges = pgTable(\"code_challenges\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  difficulty: text(\"difficulty\").notNull(),\n  careerPathId: varchar(\"career_path_id\").references(() => careerPaths.id),\n  requiredLevel: integer(\"required_level\").notNull().default(1),\n  xpReward: integer(\"xp_reward\").notNull().default(150),\n  starterCode: text(\"starter_code\").notNull(),\n  testCases: json(\"test_cases\").notNull().$type<Array<{ input: string; expectedOutput: string }>>(),\n  supportedLanguages: json(\"supported_languages\").notNull().$type<string[]>(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Code challenge attempts\nexport const challengeAttempts = pgTable(\"challenge_attempts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  challengeId: varchar(\"challenge_id\").notNull().references(() => codeChallenges.id, { onDelete: \"cascade\" }),\n  code: text(\"code\").notNull(),\n  language: text(\"language\").notNull(),\n  passed: boolean(\"passed\").notNull(),\n  xpEarned: integer(\"xp_earned\").notNull(),\n  submittedAt: timestamp(\"submitted_at\").notNull().defaultNow(),\n});\n\n// Interest questionnaire responses\nexport const interestResponses = pgTable(\"interest_responses\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  questionId: integer(\"question_id\").notNull(),\n  response: text(\"response\").notNull(),\n  completedAt: timestamp(\"completed_at\").notNull().defaultNow(),\n});\n\n// Daily challenges\nexport const dailyChallenges = pgTable(\"daily_challenges\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  challengeType: text(\"challenge_type\").notNull(), // \"quiz\" | \"code\"\n  challengeId: varchar(\"challenge_id\").notNull(),\n  assignedDate: timestamp(\"assigned_date\").notNull().defaultNow(),\n  completed: boolean(\"completed\").notNull().default(false),\n  completedAt: timestamp(\"completed_at\"),\n});\n\n// Audit logs\nexport const auditLogs = pgTable(\"audit_logs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id, { onDelete: \"set null\" }),\n  action: text(\"action\").notNull(),\n  details: text(\"details\").notNull(),\n  status: text(\"status\").notNull(), // \"success\" | \"warning\" | \"error\"\n  ipAddress: text(\"ip_address\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Syllabus uploads\nexport const syllabusUploads = pgTable(\"syllabus_uploads\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  uploadedBy: varchar(\"uploaded_by\").notNull().references(() => users.id),\n  fileName: text(\"file_name\").notNull(),\n  careerPathId: varchar(\"career_path_id\").references(() => careerPaths.id),\n  questionsGenerated: integer(\"questions_generated\").notNull().default(0),\n  uploadedAt: timestamp(\"uploaded_at\").notNull().defaultNow(),\n});\n\n// Zod schemas\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  level: true,\n  xp: true,\n  totalXp: true,\n  hasCompletedInterestAssessment: true,\n  isAdmin: true,\n  createdAt: true,\n  lastActiveAt: true,\n});\n\nexport const registerRequestSchema = insertUserSchema\n  .extend({\n    confirmPassword: z.string().min(1, \"Please confirm your password\"),\n  })\n  .superRefine((data, ctx) => {\n    if (data.password !== data.confirmPassword) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: \"Passwords do not match\",\n        path: [\"confirmPassword\"],\n      });\n    }\n  });\n\nexport const insertCareerPathSchema = createInsertSchema(careerPaths).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertBadgeSchema = createInsertSchema(badges).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertQuizSchema = createInsertSchema(quizzes).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertQuestionSchema = createInsertSchema(questions).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertQuizAttemptSchema = createInsertSchema(quizAttempts).omit({\n  id: true,\n  completedAt: true,\n});\n\nexport const insertQuestionAttemptSchema = createInsertSchema(questionAttempts).omit({\n  id: true,\n  answeredAt: true,\n});\n\nexport const insertCodeChallengeSchema = createInsertSchema(codeChallenges).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertChallengeAttemptSchema = createInsertSchema(challengeAttempts).omit({\n  id: true,\n  submittedAt: true,\n});\n\nexport const insertInterestResponseSchema = createInsertSchema(interestResponses).omit({\n  id: true,\n  completedAt: true,\n});\n\nexport const insertAuditLogSchema = createInsertSchema(auditLogs).omit({\n  id: true,\n  createdAt: true,\n});\n\n// Types\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type RegisterRequest = z.infer<typeof registerRequestSchema>;\nexport type User = typeof users.$inferSelect;\n\nexport type InsertCareerPath = z.infer<typeof insertCareerPathSchema>;\nexport type CareerPath = typeof careerPaths.$inferSelect;\n\nexport type InsertBadge = z.infer<typeof insertBadgeSchema>;\nexport type Badge = typeof badges.$inferSelect;\n\nexport type InsertQuiz = z.infer<typeof insertQuizSchema>;\nexport type Quiz = typeof quizzes.$inferSelect;\n\nexport type InsertQuestion = z.infer<typeof insertQuestionSchema>;\nexport type Question = typeof questions.$inferSelect;\n\nexport type InsertQuizAttempt = z.infer<typeof insertQuizAttemptSchema>;\nexport type QuizAttempt = typeof quizAttempts.$inferSelect;\n\nexport type InsertQuestionAttempt = z.infer<typeof insertQuestionAttemptSchema>;\nexport type QuestionAttempt = typeof questionAttempts.$inferSelect;\n\nexport type InsertCodeChallenge = z.infer<typeof insertCodeChallengeSchema>;\nexport type CodeChallenge = typeof codeChallenges.$inferSelect;\n\nexport type InsertChallengeAttempt = z.infer<typeof insertChallengeAttemptSchema>;\nexport type ChallengeAttempt = typeof challengeAttempts.$inferSelect;\n\nexport type InsertInterestResponse = z.infer<typeof insertInterestResponseSchema>;\nexport type InterestResponse = typeof interestResponses.$inferSelect;\n\nexport type InsertAuditLog = z.infer<typeof insertAuditLogSchema>;\nexport type AuditLog = typeof auditLogs.$inferSelect;\n\nexport type UserBadge = typeof userBadges.$inferSelect;\nexport type DailyChallenge = typeof dailyChallenges.$inferSelect;\nexport type SyllabusUpload = typeof syllabusUploads.$inferSelect;\n\nexport interface Module {\n  id: string;\n  title: string;\n  description: string;\n  careerPath: string | null; // null for general modules\n  requiredLevel: number;\n  order: number;\n  lessons: Lesson[];\n}\n\nexport interface Lesson {\n  id: string;\n  moduleId: string;\n  title: string;\n  content: string;\n  pdfUrl?: string; // Optional PDF file URL for lessons\n  type: \"theory\" | \"practice\" | \"quiz\";\n  order: number;\n  xpReward: number;\n}\n\nexport interface UserProgress {\n  id: string;\n  userId: string;\n  moduleId: string;\n  lessonId: string;\n  completed: boolean;\n  completedAt?: string;\n  score?: number;\n}","path":null,"size_bytes":13201,"size_tokens":null},"main.py":{"content":"def main():\n    print(\"Hello from repl-nix-workspace!\")\n\n\nif __name__ == \"__main__\":\n    main()\n","path":null,"size_bytes":96,"size_tokens":null},"server/huggingface-client.ts":{"content":"\nimport { HfInference } from \"@huggingface/inference\";\n\n// Initialize Hugging Face client\nconst hf = new HfInference(process.env.HUGGINGFACE_API_KEY);\n\n/**\n * Classify text using Hugging Face zero-shot classification\n */\nexport async function classifyQuestionHF(questionText: string): Promise<{\n  category: string;\n  confidence: number;\n}> {\n  try {\n    const result = await hf.zeroShotClassification({\n      model: \"facebook/bart-large-mnli\",\n      inputs: questionText,\n      parameters: {\n        candidate_labels: [\"frontend\", \"backend\", \"data science\", \"algorithms\", \"security\", \"cloud\"],\n      },\n    });\n\n    return {\n      category: result.labels[0],\n      confidence: result.scores[0],\n    };\n  } catch (error) {\n    console.error(\"HF classification error:\", error);\n    throw error;\n  }\n}\n\n/**\n * Generate study suggestions using Hugging Face text generation\n */\nexport async function generateStudySuggestionsHF(userContext: string): Promise<string> {\n  try {\n    const prompt = `Based on this student's performance: ${userContext}\\n\\nProvide 3-5 personalized study suggestions:`;\n    \n    const result = await hf.textGeneration({\n      model: \"mistralai/Mistral-7B-Instruct-v0.2\",\n      inputs: prompt,\n      parameters: {\n        max_new_tokens: 300,\n        temperature: 0.7,\n      },\n    });\n\n    return result.generated_text;\n  } catch (error) {\n    console.error(\"HF text generation error:\", error);\n    throw error;\n  }\n}\n\n/**\n * Enhanced question generation using Hugging Face with ML-guided prompts\n */\nexport async function generateQuestionsHF(\n  topic: string,\n  difficulty: string,\n  careerPath?: string,\n  count: number = 5\n): Promise<any[]> {\n  try {\n    // Create context-aware prompt based on difficulty and career path\n    const difficultyContext = {\n      easy: \"beginner-friendly, foundational concepts\",\n      medium: \"intermediate-level, practical application\",\n      hard: \"advanced, in-depth technical knowledge\",\n      beginner: \"beginner-friendly, foundational concepts\",\n      intermediate: \"intermediate-level, practical application\",\n      advanced: \"advanced, in-depth technical knowledge\"\n    };\n\n    const careerContext = careerPath \n      ? `relevant to ${careerPath} career path` \n      : \"covering general computer science concepts\";\n\n    const prompt = `You are an expert computer science educator. Generate ${count} high-quality multiple-choice questions about ${topic}.\n\nRequirements:\n- Difficulty: ${difficultyContext[difficulty as keyof typeof difficultyContext] || \"intermediate-level\"}\n- Context: ${careerContext}\n- Format: Each question must be a valid JSON object\n- Quality: Questions should be clear, educational, and test real understanding\n\nOutput format (JSON array):\n[\n  {\n    \"question\": \"Clear, specific question text?\",\n    \"options\": [\"Option A\", \"Option B\", \"Option C\", \"Option D\"],\n    \"correctAnswer\": 1,\n    \"category\": \"${topic}\",\n    \"difficulty\": \"${difficulty}\",\n    \"explanation\": \"Detailed explanation of why the answer is correct\"\n  }\n]\n\nGenerate exactly ${count} questions following this format:`;\n    \n    const result = await hf.textGeneration({\n      model: \"mistralai/Mistral-7B-Instruct-v0.2\",\n      inputs: prompt,\n      parameters: {\n        max_new_tokens: 1500,\n        temperature: 0.7,\n        top_p: 0.9,\n        return_full_text: false,\n      },\n    });\n\n    // Try to extract JSON array from response\n    const generatedText = result.generated_text;\n    \n    // Multiple extraction strategies\n    let questions: any[] = [];\n    \n    // Strategy 1: Direct JSON array match\n    const jsonArrayMatch = generatedText.match(/\\[\\s*\\{[\\s\\S]*\\}\\s*\\]/);\n    if (jsonArrayMatch) {\n      try {\n        questions = JSON.parse(jsonArrayMatch[0]);\n      } catch (e) {\n        console.log(\"Strategy 1 failed, trying strategy 2\");\n      }\n    }\n    \n    // Strategy 2: Multiple JSON objects\n    if (questions.length === 0) {\n      const objectMatches = generatedText.matchAll(/\\{[\\s\\S]*?\"question\"[\\s\\S]*?\\}/g);\n      for (const match of objectMatches) {\n        try {\n          const obj = JSON.parse(match[0]);\n          if (obj.question && obj.options && obj.correctAnswer !== undefined) {\n            questions.push(obj);\n          }\n        } catch (e) {\n          continue;\n        }\n      }\n    }\n    \n    // Validate and clean questions\n    questions = questions\n      .filter(q => \n        q.question && \n        Array.isArray(q.options) && \n        q.options.length >= 4 &&\n        (typeof q.correctAnswer === 'number' || typeof q.correctAnswer === 'string') &&\n        q.explanation\n      )\n      .map(q => {\n        // Convert correctAnswer to number if it's a string\n        let correctAnswerIndex = q.correctAnswer;\n        if (typeof correctAnswerIndex === 'string') {\n          correctAnswerIndex = parseInt(correctAnswerIndex);\n        }\n        \n        return {\n          question: q.question.trim(),\n          options: q.options.slice(0, 4).map((opt: string) => String(opt).trim()),\n          correctAnswer: Math.min(Math.max(0, correctAnswerIndex), 3),\n          category: q.category || topic,\n          difficulty: q.difficulty || difficulty,\n          explanation: q.explanation.trim()\n        };\n      })\n      .slice(0, count);\n    \n    console.log(`[HF] Generated ${questions.length}/${count} valid questions for ${topic} (${difficulty})`);\n    \n    if (questions.length === 0) {\n      throw new Error(\"No valid questions generated by Hugging Face\");\n    }\n    \n    return questions;\n    \n  } catch (error) {\n    console.error(\"HF question generation error:\", error);\n    return [];\n  }\n}\n\nexport default {\n  classifyQuestionHF,\n  generateStudySuggestionsHF,\n  generateQuestionsHF,\n};\n","path":null,"size_bytes":5683,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"server/huggingface-ml.ts":{"content":"import { HfInference } from \"@huggingface/inference\";\n\nconst HF_API_TOKEN = process.env.HUGGINGFACE_API_TOKEN;\nconst HF_MODEL_ENDPOINT = process.env.HF_MODEL_ENDPOINT;\n\nlet hfClient: HfInference | null = null;\n\nfunction getHfClient(): HfInference | null {\n  if (!HF_API_TOKEN) {\n    return null;\n  }\n  if (!hfClient) {\n    hfClient = new HfInference(HF_API_TOKEN);\n  }\n  return hfClient;\n}\n\nexport interface HFQuizRequest {\n  category: string;\n  difficulty: string;\n  career_path: string;\n  count: number;\n}\n\nexport interface HFCareerRequest {\n  visual_design: number;\n  backend_pref: number;\n  math_stats: number;\n  web_apps: number;\n  data_interest: number;\n  cloud_interest: number;\n  mobile_interest: number;\n  security_interest: number;\n  frontend_perf: number;\n  backend_perf: number;\n  data_perf: number;\n  algo_perf: number;\n}\n\nexport interface HFStudyRequest {\n  level: number;\n  career_path: string;\n  frontend_score: number;\n  backend_score: number;\n  data_score: number;\n  algo_score: number;\n  security_score: number;\n  weak_categories: string[];\n}\n\nexport interface GeneratedQuestion {\n  question: string;\n  options: string[];\n  correctAnswer: number;\n  category: string;\n  difficulty: \"easy\" | \"medium\" | \"hard\";\n  explanation: string;\n}\n\nexport interface StudySuggestion {\n  topic: string;\n  reason: string;\n  recommendedAction: string;\n  priority: \"high\" | \"medium\" | \"low\";\n}\n\nexport interface CareerRecommendation {\n  recommended_path: string;\n  probabilities: Record<string, number>;\n  confidence: number;\n}\n\nexport function isHuggingFaceConfigured(): boolean {\n  return !!(HF_API_TOKEN && HF_MODEL_ENDPOINT);\n}\n\nasync function callHuggingFaceEndpoint<T>(\n  endpoint: string,\n  payload: Record<string, unknown>\n): Promise<T> {\n  if (!HF_API_TOKEN) {\n    throw new Error(\"Hugging Face API token not configured\");\n  }\n\n  const baseUrl = HF_MODEL_ENDPOINT || \"https://api-inference.huggingface.co/models\";\n  const url = `${baseUrl}/${endpoint}`;\n\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Authorization\": `Bearer ${HF_API_TOKEN}`,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ inputs: payload }),\n  });\n\n  if (!response.ok) {\n    const error = await response.text();\n    throw new Error(`Hugging Face API error: ${response.status} - ${error}`);\n  }\n\n  const result = await response.json();\n  return result as T;\n}\n\nexport async function callHuggingFaceInference<T>(\n  modelId: string,\n  command: string,\n  data: object\n): Promise<T> {\n  if (!HF_API_TOKEN) {\n    throw new Error(\"Hugging Face API token not configured\");\n  }\n\n  const baseUrl = HF_MODEL_ENDPOINT || `https://api-inference.huggingface.co/models/${modelId}`;\n  \n  const response = await fetch(baseUrl, {\n    method: \"POST\",\n    headers: {\n      \"Authorization\": `Bearer ${HF_API_TOKEN}`,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      inputs: {\n        command,\n        data,\n      },\n    }),\n  });\n\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`Hugging Face API error: ${response.status} - ${errorText}`);\n  }\n\n  const result = await response.json();\n  \n  if (Array.isArray(result) && result.length > 0) {\n    return result[0] as T;\n  }\n  \n  return result as T;\n}\n\nexport async function generateQuizFromHuggingFace(\n  request: HFQuizRequest,\n  modelId?: string\n): Promise<GeneratedQuestion[]> {\n  const model = modelId || process.env.HF_QUIZ_MODEL || \"your-username/careerquest-quiz-model\";\n  \n  console.log(`Calling Hugging Face model: ${model} for quiz generation`);\n  \n  const result = await callHuggingFaceInference<{ questions: GeneratedQuestion[] }>(\n    model,\n    \"generate_quiz\",\n    request\n  );\n  \n  return result.questions || [];\n}\n\nexport async function recommendCareerFromHuggingFace(\n  request: HFCareerRequest,\n  modelId?: string\n): Promise<CareerRecommendation> {\n  const model = modelId || process.env.HF_CAREER_MODEL || \"your-username/careerquest-career-model\";\n  \n  console.log(`Calling Hugging Face model: ${model} for career recommendation`);\n  \n  const result = await callHuggingFaceInference<CareerRecommendation>(\n    model,\n    \"recommend_career\",\n    request\n  );\n  \n  return result;\n}\n\nexport async function suggestStudyFromHuggingFace(\n  request: HFStudyRequest,\n  modelId?: string\n): Promise<StudySuggestion[]> {\n  const model = modelId || process.env.HF_STUDY_MODEL || \"your-username/careerquest-study-model\";\n  \n  console.log(`Calling Hugging Face model: ${model} for study suggestions`);\n  \n  const result = await callHuggingFaceInference<{ suggestions: StudySuggestion[] }>(\n    model,\n    \"suggest_study\",\n    request\n  );\n  \n  return result.suggestions || [];\n}\n\nexport async function healthCheckHuggingFace(): Promise<boolean> {\n  if (!isHuggingFaceConfigured()) {\n    return false;\n  }\n\n  try {\n    const client = getHfClient();\n    if (!client) return false;\n    \n    return true;\n  } catch (error) {\n    console.error(\"Hugging Face health check failed:\", error);\n    return false;\n  }\n}\n","path":null,"size_bytes":5053,"size_tokens":null},"client/src/components/ProtectedRoute.tsx":{"content":"import { useAuth } from \"@/contexts/AuthContext\";\nimport { useLocation } from \"wouter\";\nimport { useEffect } from \"react\";\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  requireAdmin?: boolean;\n}\n\nexport default function ProtectedRoute({ children, requireAdmin = false }: ProtectedRouteProps) {\n  const { user, isLoading } = useAuth();\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    if (!isLoading && !user) {\n      setLocation(\"/\");\n    }\n\n    if (!isLoading && user && requireAdmin && !user.isAdmin) {\n      setLocation(\"/dashboard\");\n    }\n    \n    // Redirect admin users to admin dashboard on login\n    if (!isLoading && user && user.isAdmin && !requireAdmin && window.location.pathname === \"/dashboard\") {\n      setLocation(\"/admin\");\n    }\n  }, [user, isLoading, requireAdmin, setLocation]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4\" />\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user || (requireAdmin && !user.isAdmin)) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n","path":null,"size_bytes":1300,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/pages/CareerPaths.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport CareerPathCard from \"@/components/CareerPathCard\";\nimport ThemeToggle from \"@/components/ThemeToggle\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Trophy, Brain, Sparkles, Loader2 } from \"lucide-react\";\nimport { Code2, Database, Cloud, Smartphone, Shield, LineChart } from \"lucide-react\";\nimport type { CareerPath } from \"@shared/schema\";\n\nconst iconMap: Record<string, any> = {\n  Code2,\n  Database,\n  Cloud,\n  Smartphone,\n  Shield,\n  LineChart,\n};\n\nexport default function CareerPaths() {\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n\n  // Fetch career paths from backend\n  const { data, isLoading } = useQuery<{ paths: CareerPath[] }>({\n    queryKey: [\"/api/career-paths\"],\n  });\n\n  const careerPaths = data?.paths || [];\n\n  // Select career path mutation\n  const selectPathMutation = useMutation({\n    mutationFn: async (pathId: string) => {\n      return apiRequest(\"POST\", `/api/career-paths/select`, { pathId });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Career Path Selected!\",\n        description: \"Your learning journey has been customized to this path.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\n      navigate(\"/dashboard\");\n    },\n    onError: () => {\n      toast({\n        title: \"Selection Failed\",\n        description: \"Failed to select career path. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSelectPath = (pathId: string) => {\n    selectPathMutation.mutate(pathId);\n  };\n\n  const handleAIGuide = () => {\n    navigate(\"/dashboard\");\n    toast({\n      title: \"AI Guidance Enabled\",\n      description: \"Complete quizzes and challenges to reach Level 20 for your personalized recommendation!\",\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"border-b border-border sticky top-0 z-50 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-lg bg-primary flex items-center justify-center\">\n              <Trophy className=\"w-5 h-5 text-primary-foreground\" />\n            </div>\n            <span className=\"font-display font-bold text-xl\">CareerQuest</span>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            <ThemeToggle />\n            <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/dashboard\")} data-testid=\"button-dashboard\">\n              Dashboard\n            </Button>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto px-6 py-12\">\n        <div className=\"text-center mb-12\">\n          <h1 className=\"font-display font-bold text-4xl md:text-5xl mb-4\">\n            Choose Your <span className=\"text-primary\">Career Path</span>\n          </h1>\n          <p className=\"text-xl text-muted-foreground max-w-3xl mx-auto\">\n            Select a path that aligns with your interests, or let our AI recommend one at Level 20\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12\">\n          <Card className=\"border-2 border-primary hover-elevate cursor-pointer\" data-testid=\"card-choose-path\">\n            <CardContent className=\"p-8 text-center space-y-4\">\n              <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto\">\n                <Code2 className=\"w-8 h-8 text-primary\" />\n              </div>\n              <h3 className=\"font-display font-bold text-2xl\">I'll Choose My Path</h3>\n              <p className=\"text-muted-foreground\">\n                Browse all career paths and select the one that excites you most. Get modules and lessons aligned to your choice.\n              </p>\n              <div className=\"text-sm text-primary font-medium\">\n                Scroll down to browse paths ‚Üì\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"hover-elevate cursor-pointer\" data-testid=\"card-ai-guide\">\n            <CardContent className=\"p-8 text-center space-y-4\">\n              <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto\">\n                <Brain className=\"w-8 h-8 text-primary\" />\n              </div>\n              <h3 className=\"font-display font-bold text-2xl\">Let AI Guide Me</h3>\n              <p className=\"text-muted-foreground\">\n                Complete general lessons and let our AI analyze your performance. Get a personalized recommendation at Level 20.\n              </p>\n              <Button size=\"lg\" variant=\"outline\" className=\"w-full\" onClick={handleAIGuide} data-testid=\"button-ai-guide\">\n                Start Learning\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"mb-8\">\n          <div className=\"flex items-center gap-2 mb-6\">\n            <Sparkles className=\"w-5 h-5 text-primary\" />\n            <h2 className=\"font-display font-bold text-2xl\">Available Career Paths</h2>\n          </div>\n\n          {isLoading ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {[1, 2, 3, 4, 5, 6].map((i) => (\n                <Card key={i}>\n                  <CardContent className=\"p-6 space-y-4\">\n                    <Skeleton className=\"h-12 w-12 rounded-lg\" />\n                    <Skeleton className=\"h-6 w-3/4\" />\n                    <Skeleton className=\"h-20 w-full\" />\n                    <Skeleton className=\"h-10 w-full\" />\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {careerPaths.map((path) => {\n                const Icon = iconMap[path.icon] || Code2;\n                return (\n                  <CareerPathCard\n                    key={path.id}\n                    pathId={path.id}\n                    icon={Icon}\n                    title={path.name}\n                    description={path.description}\n                    skills={path.requiredSkills}\n                    ranks={path.progressionRanks}\n                    onSelect={handleSelectPath}\n                    isSelecting={selectPathMutation.isPending}\n                  />\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6798,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/pages/Landing.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport HeroSection from \"@/components/HeroSection\";\nimport FeatureCard from \"@/components/FeatureCard\";\nimport ThemeToggle from \"@/components/ThemeToggle\";\nimport AuthModal from \"@/components/AuthModal\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useLocation } from \"wouter\";\nimport {\n  Sparkles,\n  Trophy,\n  Code2,\n  Brain,\n  Target,\n  Users,\n  ArrowRight,\n  CheckCircle2,\n  Star,\n  Quote,\n  Zap,\n  Shield,\n  Rocket,\n  Menu,\n  X,\n} from \"lucide-react\";\nimport aiPathImage from \"@assets/generated_images/AI_pathfinding_tree_illustration_229f6c37.png\";\nimport careerProgressImage from \"@assets/generated_images/Career_progression_timeline_graphic_6b96a5cb.png\";\n\nexport default function Landing() {\n  const [scrolled, setScrolled] = useState(false);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      setScrolled(window.scrollY > 20);\n    };\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n\n  useEffect(() => {\n    document.documentElement.style.scrollBehavior = \"smooth\";\n    return () => {\n      document.documentElement.style.scrollBehavior = \"auto\";\n    };\n  }, []);\n\n  const [authModalOpen, setAuthModalOpen] = useState(false);\n  const [authMode, setAuthMode] = useState<\"login\" | \"register\">(\"login\");\n  const { user } = useAuth();\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    if (user) {\n      setLocation(\"/dashboard\");\n    }\n  }, [user, setLocation]);\n\n  const openAuth = (mode: \"login\" | \"register\") => {\n    setAuthMode(mode);\n    setAuthModalOpen(true);\n  };\n\n  const scrollToSection = (id: string) => {\n    setMobileMenuOpen(false);\n    document.getElementById(id)?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  const navItems = [\n    { label: \"Features\", href: \"features\" },\n    { label: \"Career Paths\", href: \"careers\" },\n    { label: \"Testimonials\", href: \"testimonials\" },\n  ];\n\n  const testimonials = [\n    {\n      name: \"Ivan Bajuyo\",\n      role: \"Full Stack Developer\",\n      avatar: \"SC\",\n      content:\n        \"CareerQuest transformed my career! The AI recommendations led me to backend development, and I landed my dream job in just 6 months.\",\n      rating: 5,\n    },\n    {\n      name: \"Ian Mc Banog\",\n      role: \"Data Scientist\",\n      avatar: \"MJ\",\n      content:\n        \"The gamification made learning addictive. I went from knowing nothing about ML to getting certified as a Data Scientist.\",\n      rating: 5,\n    },\n    {\n      name: \"Villegas Custodio\",\n      role: \"Frontend Engineer\",\n      avatar: \"ER\",\n      content:\n        \"Daily challenges kept me consistent. The leaderboard competition pushed me to learn faster than I ever thought possible!\",\n      rating: 5,\n    },\n  ];\n\n  const pricingTiers = [\n    {\n      name: \"Free\",\n      price: \"$0\",\n      period: \"forever\",\n      description: \"Perfect for getting started\",\n      features: [\n        \"Access to 50+ modules\",\n        \"Daily coding challenges\",\n        \"Community leaderboard\",\n        \"Basic progress tracking\",\n        \"Email support\",\n      ],\n      cta: \"Get Started Free\",\n      highlighted: false,\n    },\n    {\n      name: \"Pro\",\n      price: \"$19\",\n      period: \"per month\",\n      description: \"For serious learners\",\n      features: [\n        \"Everything in Free\",\n        \"Access to ALL 150+ modules\",\n        \"AI-powered career recommendations\",\n        \"Advanced analytics dashboard\",\n        \"Priority support\",\n        \"Exclusive career workshops\",\n        \"Certificate of completion\",\n      ],\n      cta: \"Start Pro Trial\",\n      highlighted: true,\n    },\n    {\n      name: \"Team\",\n      price: \"$49\",\n      period: \"per user/month\",\n      description: \"For organizations\",\n      features: [\n        \"Everything in Pro\",\n        \"Team management dashboard\",\n        \"Custom learning paths\",\n        \"Advanced reporting\",\n        \"Dedicated account manager\",\n        \"SSO integration\",\n        \"Custom branding\",\n      ],\n      cta: \"Contact Sales\",\n      highlighted: false,\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen\">\n      <header\n        className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${\n          scrolled\n            ? \"bg-background/95 backdrop-blur-md border-b border-border shadow-sm\"\n            : \"bg-background/80 backdrop-blur-sm border-b border-border/50\"\n        }`}\n      >\n        <div className=\"max-w-7xl mx-auto px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <div\n                className={`rounded-lg bg-gradient-to-br from-primary to-violet-600 flex items-center justify-center transition-all duration-300 ${\n                  scrolled ? \"w-8 h-8\" : \"w-10 h-10\"\n                }`}\n              >\n                <Trophy\n                  className={`text-primary-foreground transition-all duration-300 ${\n                    scrolled ? \"w-4 h-4\" : \"w-5 h-5\"\n                  }`}\n                />\n              </div>\n              <span\n                className={`font-display font-bold transition-all duration-300 ${\n                  scrolled ? \"text-lg\" : \"text-xl\"\n                }`}\n              >\n                CareerQuest\n              </span>\n            </div>\n\n            <nav className=\"hidden md:flex items-center gap-6\">\n              {navItems.map((item) => (\n                <button\n                  key={item.href}\n                  onClick={() => scrollToSection(item.href)}\n                  className=\"text-sm font-medium text-muted-foreground hover:text-primary transition-colors cursor-pointer\"\n                  data-testid={`button-nav-${item.href}`}\n                >\n                  {item.label}\n                </button>\n              ))}\n            </nav>\n\n            <div className=\"hidden md:flex items-center gap-2\">\n              <ThemeToggle />\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => openAuth(\"login\")}\n                data-testid=\"button-login\"\n              >\n                Log In\n              </Button>\n              <Button\n                size=\"sm\"\n                onClick={() => openAuth(\"register\")}\n                data-testid=\"button-signup\"\n                className=\"shadow-lg shadow-primary/25\"\n              >\n                Sign Up Free\n              </Button>\n            </div>\n\n            <button\n              className=\"md:hidden p-2\"\n              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n              data-testid=\"button-mobile-menu\"\n            >\n              {mobileMenuOpen ? (\n                <X className=\"w-6 h-6\" />\n              ) : (\n                <Menu className=\"w-6 h-6\" />\n              )}\n            </button>\n          </div>\n\n          {mobileMenuOpen && (\n            <div className=\"md:hidden mt-4 pb-4 border-t border-border pt-4 space-y-4\">\n              {navItems.map((item) => (\n                <button\n                  key={item.href}\n                  onClick={() => scrollToSection(item.href)}\n                  className=\"block w-full text-left text-sm font-medium text-muted-foreground hover:text-primary transition-colors\"\n                  data-testid={`button-nav-mobile-${item.href}`}\n                >\n                  {item.label}\n                </button>\n              ))}\n              <div className=\"flex items-center gap-2 pt-4 border-t border-border\">\n                <ThemeToggle />\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => openAuth(\"login\")}\n                  className=\"flex-1\"\n                  data-testid=\"button-mobile-login\"\n                >\n                  Log In\n                </Button>\n                <Button\n                  size=\"sm\"\n                  onClick={() => openAuth(\"register\")}\n                  className=\"flex-1\"\n                  data-testid=\"button-mobile-signup\"\n                >\n                  Sign Up\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </header>\n\n      <AuthModal\n        open={authModalOpen}\n        onClose={() => setAuthModalOpen(false)}\n        mode={authMode}\n      />\n\n      <main className=\"pt-16\">\n        <HeroSection onGetStarted={() => openAuth(\"register\")} />\n\n        <section id=\"features\" className=\"py-24 px-6 scroll-mt-16\">\n          <div className=\"max-w-7xl mx-auto\">\n            <div className=\"text-center mb-16\">\n              <Badge className=\"mb-4\" variant=\"secondary\">\n                <Sparkles className=\"w-3 h-3 mr-1\" />\n                Features\n              </Badge>\n              <h2 className=\"font-display font-bold text-4xl md:text-5xl mb-4\">\n                Everything You Need to{\" \"}\n                <span className=\"text-primary\">Excel</span>\n              </h2>\n              <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n                A complete learning ecosystem designed to accelerate your\n                computer science career\n              </p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-24\">\n              <FeatureCard\n                icon={Sparkles}\n                title=\"AI-Powered Recommendations\"\n                description=\"Get personalized career path suggestions based on your learning patterns, interests, and performance using advanced algorithms.\"\n              />\n              <FeatureCard\n                icon={Trophy}\n                title=\"Gamified Learning\"\n                description=\"Earn XP, unlock badges, level up, and compete on global leaderboards. Make learning addictive and fun.\"\n              />\n              <FeatureCard\n                icon={Code2}\n                title=\"Integrated Code Editor\"\n                description=\"Practice coding directly in your browser with our powerful compiler supporting multiple programming languages.\"\n              />\n              <FeatureCard\n                icon={Brain}\n                title=\"Scenario-Based Quizzes\"\n                description=\"Test your knowledge with real-world scenarios. Questions are intelligently shuffled for optimal learning.\"\n              />\n              <FeatureCard\n                icon={Target}\n                title=\"Daily Challenges\"\n                description=\"Build consistency with daily coding challenges. Maintain your streak and watch your skills compound.\"\n              />\n              <FeatureCard\n                icon={Users}\n                title=\"Global Leaderboards\"\n                description=\"See how you rank against peers worldwide. Climb the leaderboard and become a top performer.\"\n              />\n            </div>\n\n            <div\n              id=\"careers\"\n              className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center scroll-mt-16\"\n            >\n              <div>\n                <Badge className=\"mb-4\" variant=\"secondary\">\n                  <Zap className=\"w-3 h-3 mr-1\" />\n                  AI-Powered Career Guidance\n                </Badge>\n                <h3 className=\"font-display font-bold text-3xl md:text-4xl mb-6\">\n                  Let AI Guide Your{\" \"}\n                  <span className=\"text-primary\">Career Journey</span>\n                </h3>\n                <p className=\"text-lg text-muted-foreground mb-6 leading-relaxed\">\n                  Not sure which path to take? Our AI analyzes your performance,\n                  interests, and learning style to recommend the perfect career\n                  path at Level 20.\n                </p>\n                <ul className=\"space-y-4\">\n                  {[\n                    \"Choose your own path or let AI guide you\",\n                    \"Interest-based questionnaire at Level 20\",\n                    \"Specific career tiers: Junior ‚Üí Mid ‚Üí Senior ‚Üí Lead\",\n                    \"Personalized module recommendations for your path\",\n                  ].map((item) => (\n                    <li key={item} className=\"flex items-start gap-3\">\n                      <CheckCircle2 className=\"w-5 h-5 text-primary mt-0.5 flex-shrink-0\" />\n                      <span>{item}</span>\n                    </li>\n                  ))}\n                </ul>\n                <Button\n                  size=\"lg\"\n                  className=\"mt-8 group\"\n                  onClick={() => openAuth(\"register\")}\n                >\n                  Start Your Journey\n                  <ArrowRight className=\"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform\" />\n                </Button>\n              </div>\n              <Card className=\"overflow-hidden border-2 hover:border-primary/50 transition-all\">\n                <img\n                  src={aiPathImage}\n                  alt=\"AI Career Pathfinding\"\n                  className=\"w-full h-auto\"\n                />\n              </Card>\n            </div>\n          </div>\n        </section>\n\n        <section\n          id=\"testimonials\"\n          className=\"py-24 px-6 bg-muted/30 scroll-mt-16\"\n        >\n          <div className=\"max-w-7xl mx-auto\">\n            <div className=\"text-center mb-16\">\n              <Badge className=\"mb-4\" variant=\"secondary\">\n                <Star className=\"w-3 h-3 mr-1\" />\n                Testimonials\n              </Badge>\n              <h2 className=\"font-display font-bold text-4xl md:text-5xl mb-4\">\n                Loved by{\" \"}\n                <span className=\"text-primary\">Students Worldwide</span>\n              </h2>\n              <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n                See what our community has to say about their learning journey\n              </p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {testimonials.map((testimonial) => (\n                <Card\n                  key={testimonial.name}\n                  className=\"hover-elevate transition-all\"\n                >\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center gap-1 mb-4\">\n                      {Array.from({ length: testimonial.rating }).map(\n                        (_, i) => (\n                          <Star\n                            key={i}\n                            className=\"w-4 h-4 fill-yellow-500 text-yellow-500\"\n                          />\n                        ),\n                      )}\n                    </div>\n                    <Quote className=\"w-8 h-8 text-primary/20 mb-3\" />\n                    <p className=\"text-muted-foreground mb-6 leading-relaxed\">\n                      \"{testimonial.content}\"\n                    </p>\n                    <div className=\"flex items-center gap-3\">\n                      <Avatar>\n                        <AvatarFallback className=\"bg-primary/10 text-primary font-semibold\">\n                          {testimonial.avatar}\n                        </AvatarFallback>\n                      </Avatar>\n                      <div>\n                        <div className=\"font-semibold\">{testimonial.name}</div>\n                        <div className=\"text-sm text-muted-foreground\">\n                          {testimonial.role}\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </section>\n\n\n        <section className=\"py-20 px-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Card className=\"border-2 border-primary shadow-xl shadow-primary/20 overflow-hidden\">\n              <CardContent className=\"p-12 text-center relative\">\n                <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-violet-500/5\" />\n                <div className=\"relative z-10\">\n                  <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-primary to-violet-600 mb-6\">\n                    <Trophy className=\"w-8 h-8 text-primary-foreground\" />\n                  </div>\n                  <h2 className=\"font-display font-bold text-3xl md:text-4xl mb-4\">\n                    Ready to Level Up Your Career?\n                  </h2>\n                  <p className=\"text-lg text-muted-foreground mb-8 max-w-2xl mx-auto\">\n                    Join 10,000+ students already transforming their tech\n                    careers with AI-powered learning\n                  </p>\n                  <Button\n                    size=\"lg\"\n                    className=\"text-lg px-8 min-h-14 group shadow-lg shadow-primary/25\"\n                    onClick={() => openAuth(\"register\")}\n                    data-testid=\"button-get-started\"\n                  >\n                    Get Started Free\n                    <ArrowRight className=\"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform\" />\n                  </Button>\n                  <p className=\"text-sm text-muted-foreground mt-4\">\n                    No credit card required ‚Ä¢ Start learning in 60 seconds\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </section>\n\n        <footer className=\"py-12 px-6 border-t border-border bg-muted/30\">\n          <div className=\"max-w-7xl mx-auto\">\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8\">\n              <div>\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-violet-600 flex items-center justify-center\">\n                    <Trophy className=\"w-4 h-4 text-primary-foreground\" />\n                  </div>\n                  <span className=\"font-display font-bold text-lg\">\n                    CareerQuest\n                  </span>\n                </div>\n                <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                  Gamified career path recommendation system helping CS students\n                  discover and achieve their dream careers.\n                </p>\n              </div>\n              <div>\n                <h4 className=\"font-semibold mb-4\">Product</h4>\n                <ul className=\"space-y-2 text-sm text-muted-foreground\">\n                  <li>\n                    <button\n                      onClick={() => scrollToSection(\"features\")}\n                      className=\"hover:text-foreground transition-colors\"\n                    >\n                      Features\n                    </button>\n                  </li>\n                  <li>\n                    <button\n                      onClick={() => scrollToSection(\"careers\")}\n                      className=\"hover:text-foreground transition-colors\"\n                    >\n                      Career Paths\n                    </button>\n                  </li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-semibold mb-4\">Resources</h4>\n                <ul className=\"space-y-2 text-sm text-muted-foreground\">\n                  <li>\n                    <a\n                      href=\"#\"\n                      className=\"hover:text-foreground transition-colors\"\n                    >\n                      Documentation\n                    </a>\n                  </li>\n                  <li>\n                    <a\n                      href=\"#\"\n                      className=\"hover:text-foreground transition-colors\"\n                    >\n                      Tutorials\n                    </a>\n                  </li>\n                  <li>\n                    <a\n                      href=\"#\"\n                      className=\"hover:text-foreground transition-colors\"\n                    >\n                      Blog\n                    </a>\n                  </li>\n                </ul>\n              </div>\n              <div>\n                <h4 className=\"font-semibold mb-4\">Company</h4>\n                <ul className=\"space-y-2 text-sm text-muted-foreground\">\n                  <li>\n                    <a\n                      href=\"#\"\n                      className=\"hover:text-foreground transition-colors\"\n                    >\n                      About\n                    </a>\n                  </li>\n                  <li>\n                    <a\n                      href=\"#\"\n                      className=\"hover:text-foreground transition-colors\"\n                    >\n                      Contact\n                    </a>\n                  </li>\n                  <li>\n                    <a\n                      href=\"#\"\n                      className=\"hover:text-foreground transition-colors\"\n                    >\n                      Privacy\n                    </a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n            <div className=\"text-center text-sm text-muted-foreground pt-8 border-t border-border\">\n              <p>\n                ¬© 2025 CareerQuest. All rights reserved. Built with passion for\n                learners worldwide.\n              </p>\n            </div>\n          </div>\n        </footer>\n      </main>\n    </div>\n  );\n}\n","path":null,"size_bytes":21606,"size_tokens":null},"client/src/components/AdminSidebar.tsx":{"content":"import { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  LayoutDashboard, \n  Users, \n  FileText, \n  History, \n  Settings,\n  Trophy,\n  BarChart3,\n  BookOpen\n} from \"lucide-react\";\n\ninterface AdminSidebarProps {\n  activeTab: string;\n  onTabChange: (tab: string) => void;\n}\n\nconst navItems = [\n  { id: \"overview\", label: \"Overview\", icon: LayoutDashboard },\n  { id: \"users\", label: \"Users\", icon: Users },\n  { id: \"modules\", label: \"Modules\", icon: BookOpen },\n  { id: \"results\", label: \"Quiz Results\", icon: BarChart3 },\n  // Audit tab removed\n  { id: \"settings\", label: \"Settings\", icon: Settings },\n];\n\nexport default function AdminSidebar({ activeTab, onTabChange }: AdminSidebarProps) {\n  return (\n    <div className=\"w-64 border-r border-border bg-card flex flex-col h-screen sticky top-0\">\n      <div className=\"p-6 border-b border-border\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 rounded-lg bg-primary flex items-center justify-center\">\n            <Trophy className=\"w-5 h-5 text-primary-foreground\" />\n          </div>\n          <div>\n            <div className=\"font-display font-bold text-lg\">CareerQuest</div>\n            <div className=\"text-xs text-muted-foreground\">Admin Panel</div>\n          </div>\n        </div>\n      </div>\n      \n      <nav className=\"flex-1 p-4 space-y-2\">\n        {navItems.map((item) => (\n          <Button\n            key={item.id}\n            variant={activeTab === item.id ? \"default\" : \"ghost\"}\n            className={cn(\n              \"w-full justify-start gap-3\",\n              activeTab === item.id && \"bg-primary text-primary-foreground\"\n            )}\n            onClick={() => onTabChange(item.id)}\n            data-testid={`button-nav-${item.id}`}\n          >\n            <item.icon className=\"w-5 h-5\" />\n            {item.label}\n          </Button>\n        ))}\n      </nav>\n    </div>\n  );\n}\n","path":null,"size_bytes":1927,"size_tokens":null},"server/seed-questions.ts":{"content":"import { storage } from \"./storage-firestore\";\nimport type { InsertQuestion } from \"@shared/schema\";\n\nasync function seedQuestions() {\n  console.log(\"üå± Seeding comprehensive quiz questions...\");\n\n  try {\n    // Get career paths\n    const careerPaths = await storage.getCareerPaths();\n    const fullStackPath = careerPaths.find((p: any) => p.name === \"Full Stack Development\");\n    const dataPath = careerPaths.find((p: any) => p.name === \"Data Science & AI\");\n    const cloudPath = careerPaths.find((p: any) => p.name === \"Cloud & DevOps\");\n    const mobilePath = careerPaths.find((p: any) => p.name === \"Mobile Development\");\n    const securityPath = careerPaths.find((p: any) => p.name === \"Cybersecurity\");\n\n    // Full Stack Development Questions\n    if (fullStackPath) {\n      const jsQuiz = await storage.createQuiz({\n        title: \"JavaScript Advanced\",\n        description: \"Advanced JavaScript concepts and patterns\",\n        difficulty: \"intermediate\",\n        careerPathId: fullStackPath.id,\n        requiredLevel: 10,\n        xpReward: 150,\n        timeLimit: 900,\n        isFinalAssessment: false,\n      });\n\n      const jsQuestions: InsertQuestion[] = [\n        {\n          quizId: jsQuiz.id,\n          questionText: \"What is a closure in JavaScript?\",\n          questionType: \"multiple-choice\",\n          options: [\"A function that has access to its outer scope\", \"A way to close browser windows\", \"A method to end loops\", \"A data structure\"],\n          correctAnswer: \"A function that has access to its outer scope\",\n          explanation: \"Closures allow functions to access variables from their outer scope\",\n          category: \"frontend\",\n        },\n        {\n          quizId: jsQuiz.id,\n          questionText: \"What does 'this' keyword refer to in JavaScript?\",\n          questionType: \"multiple-choice\",\n          options: [\"The current function\", \"The current object\", \"The global window\", \"Depends on context\"],\n          correctAnswer: \"Depends on context\",\n          explanation: \"'this' refers to different objects depending on how the function is called\",\n          category: \"frontend\",\n        },\n        {\n          quizId: jsQuiz.id,\n          questionText: \"Which array method creates a new array with results of calling a function?\",\n          questionType: \"multiple-choice\",\n          options: [\"map()\", \"filter()\", \"forEach()\", \"reduce()\"],\n          correctAnswer: \"map()\",\n          explanation: \"map() creates a new array with the results of calling a function on every element\",\n          category: \"frontend\",\n        },\n        {\n          quizId: jsQuiz.id,\n          questionText: \"What is the purpose of 'async/await' in JavaScript?\",\n          questionType: \"multiple-choice\",\n          options: [\"To handle asynchronous operations\", \"To create synchronous code\", \"To define classes\", \"To import modules\"],\n          correctAnswer: \"To handle asynchronous operations\",\n          explanation: \"async/await provides a cleaner way to work with promises\",\n          category: \"frontend\",\n        },\n        {\n          quizId: jsQuiz.id,\n          questionText: \"What does JSON.parse() do?\",\n          questionType: \"multiple-choice\",\n          options: [\"Converts JSON to JavaScript object\", \"Converts object to JSON\", \"Validates JSON\", \"Compresses JSON\"],\n          correctAnswer: \"Converts JSON to JavaScript object\",\n          explanation: \"JSON.parse() parses a JSON string and returns a JavaScript object\",\n          category: \"frontend\",\n        },\n        {\n          quizId: jsQuiz.id,\n          questionText: \"What is event bubbling in JavaScript?\",\n          questionType: \"multiple-choice\",\n          options: [\"Events propagate from child to parent\", \"Events propagate from parent to child\", \"Events are cancelled\", \"Events are cloned\"],\n          correctAnswer: \"Events propagate from child to parent\",\n          explanation: \"Event bubbling means events propagate up through the DOM tree\",\n          category: \"frontend\",\n        },\n        {\n          quizId: jsQuiz.id,\n          questionText: \"What is destructuring in JavaScript?\",\n          questionType: \"multiple-choice\",\n          options: [\"Unpacking values from arrays or objects\", \"Deleting objects\", \"Breaking code\", \"Error handling\"],\n          correctAnswer: \"Unpacking values from arrays or objects\",\n          explanation: \"Destructuring allows extracting values from arrays or properties from objects\",\n          category: \"frontend\",\n        },\n        {\n          quizId: jsQuiz.id,\n          questionText: \"What is the spread operator (...) used for?\",\n          questionType: \"multiple-choice\",\n          options: [\"Expanding iterables\", \"Mathematical operations\", \"String concatenation\", \"Type checking\"],\n          correctAnswer: \"Expanding iterables\",\n          explanation: \"The spread operator expands iterables like arrays and objects\",\n          category: \"frontend\",\n        },\n        {\n          quizId: jsQuiz.id,\n          questionText: \"What is a Promise in JavaScript?\",\n          questionType: \"multiple-choice\",\n          options: [\"An object representing eventual completion of async operation\", \"A guarantee\", \"A function\", \"A variable type\"],\n          correctAnswer: \"An object representing eventual completion of async operation\",\n          explanation: \"Promises represent the eventual completion or failure of an async operation\",\n          category: \"frontend\",\n        },\n        {\n          quizId: jsQuiz.id,\n          questionText: \"What is hoisting in JavaScript?\",\n          questionType: \"multiple-choice\",\n          options: [\"Moving declarations to the top of scope\", \"Lifting weights\", \"Raising errors\", \"Sorting arrays\"],\n          correctAnswer: \"Moving declarations to the top of scope\",\n          explanation: \"Hoisting is JavaScript's behavior of moving declarations to the top\",\n          category: \"frontend\",\n        },\n      ];\n\n      await storage.createQuestions(jsQuestions);\n      console.log(`‚úì Created ${jsQuestions.length} Advanced JavaScript questions`);\n\n      // HTML/CSS Quiz\n      const htmlCssQuiz = await storage.createQuiz({\n        title: \"HTML & CSS Mastery\",\n        description: \"Modern HTML5 and CSS3 techniques\",\n        difficulty: \"intermediate\",\n        careerPathId: fullStackPath.id,\n        requiredLevel: 5,\n        xpReward: 150,\n        timeLimit: 900,\n        isFinalAssessment: false,\n      });\n\n      const htmlCssQuestions: InsertQuestion[] = [\n        {\n          quizId: htmlCssQuiz.id,\n          questionText: \"What is semantic HTML?\",\n          questionType: \"multiple-choice\",\n          options: [\"HTML with meaningful tags\", \"Styled HTML\", \"Dynamic HTML\", \"Interactive HTML\"],\n          correctAnswer: \"HTML with meaningful tags\",\n          explanation: \"Semantic HTML uses tags that convey meaning about their content\",\n          category: \"frontend\",\n        },\n        {\n          quizId: htmlCssQuiz.id,\n          questionText: \"What is Flexbox used for?\",\n          questionType: \"multiple-choice\",\n          options: [\"One-dimensional layouts\", \"Grid layouts\", \"Animations\", \"Forms\"],\n          correctAnswer: \"One-dimensional layouts\",\n          explanation: \"Flexbox is designed for one-dimensional layouts (row or column)\",\n          category: \"frontend\",\n        },\n        {\n          quizId: htmlCssQuiz.id,\n          questionText: \"What is CSS Grid used for?\",\n          questionType: \"multiple-choice\",\n          options: [\"Two-dimensional layouts\", \"One-dimensional layouts\", \"Animations\", \"Colors\"],\n          correctAnswer: \"Two-dimensional layouts\",\n          explanation: \"CSS Grid is designed for two-dimensional layouts (rows and columns)\",\n          category: \"frontend\",\n        },\n        {\n          quizId: htmlCssQuiz.id,\n          questionText: \"What is a media query?\",\n          questionType: \"multiple-choice\",\n          options: [\"CSS technique for responsive design\", \"Database query\", \"API request\", \"Image loader\"],\n          correctAnswer: \"CSS technique for responsive design\",\n          explanation: \"Media queries allow applying styles based on device characteristics\",\n          category: \"frontend\",\n        },\n        {\n          quizId: htmlCssQuiz.id,\n          questionText: \"What does CSS specificity determine?\",\n          questionType: \"multiple-choice\",\n          options: [\"Which styles take precedence\", \"Code speed\", \"Browser compatibility\", \"File size\"],\n          correctAnswer: \"Which styles take precedence\",\n          explanation: \"Specificity determines which CSS rules are applied when conflicts occur\",\n          category: \"frontend\",\n        },\n        {\n          quizId: htmlCssQuiz.id,\n          questionText: \"What is the box model in CSS?\",\n          questionType: \"multiple-choice\",\n          options: [\"Content, padding, border, margin\", \"Width and height only\", \"Color scheme\", \"Font properties\"],\n          correctAnswer: \"Content, padding, border, margin\",\n          explanation: \"The box model describes how elements take up space on a page\",\n          category: \"frontend\",\n        },\n        {\n          quizId: htmlCssQuiz.id,\n          questionText: \"What is a CSS pseudo-class?\",\n          questionType: \"multiple-choice\",\n          options: [\"Keyword that specifies element state\", \"Fake class\", \"JavaScript class\", \"HTML class\"],\n          correctAnswer: \"Keyword that specifies element state\",\n          explanation: \"Pseudo-classes select elements based on their state (e.g., :hover)\",\n          category: \"frontend\",\n        },\n        {\n          quizId: htmlCssQuiz.id,\n          questionText: \"What is the purpose of viewport meta tag?\",\n          questionType: \"multiple-choice\",\n          options: [\"Control page dimensions on mobile\", \"Add images\", \"Define colors\", \"Create animations\"],\n          correctAnswer: \"Control page dimensions on mobile\",\n          explanation: \"Viewport meta tag controls how pages are displayed on mobile devices\",\n          category: \"frontend\",\n        },\n        {\n          quizId: htmlCssQuiz.id,\n          questionText: \"What is CSS position: absolute?\",\n          questionType: \"multiple-choice\",\n          options: [\"Position relative to nearest positioned ancestor\", \"Position in normal flow\", \"Fixed to viewport\", \"No positioning\"],\n          correctAnswer: \"Position relative to nearest positioned ancestor\",\n          explanation: \"Absolute positioning removes element from flow and positions relative to ancestor\",\n          category: \"frontend\",\n        },\n        {\n          quizId: htmlCssQuiz.id,\n          questionText: \"What are CSS variables?\",\n          questionType: \"multiple-choice\",\n          options: [\"Custom properties for reusable values\", \"JavaScript variables\", \"HTML attributes\", \"Browser settings\"],\n          correctAnswer: \"Custom properties for reusable values\",\n          explanation: \"CSS variables (custom properties) store values for reuse throughout stylesheets\",\n          category: \"frontend\",\n        },\n      ];\n\n      await storage.createQuestions(htmlCssQuestions);\n      console.log(`‚úì Created ${htmlCssQuestions.length} HTML/CSS questions`);\n\n      // Database Quiz\n      const dbQuiz = await storage.createQuiz({\n        title: \"Database Fundamentals\",\n        description: \"SQL and database design principles\",\n        difficulty: \"intermediate\",\n        careerPathId: fullStackPath.id,\n        requiredLevel: 12,\n        xpReward: 200,\n        timeLimit: 1200,\n        isFinalAssessment: false,\n      });\n\n      const dbQuestions: InsertQuestion[] = [\n        {\n          quizId: dbQuiz.id,\n          questionText: \"What does SQL stand for?\",\n          questionType: \"multiple-choice\",\n          options: [\"Structured Query Language\", \"Simple Query Language\", \"System Query Logic\", \"Standard Quality Level\"],\n          correctAnswer: \"Structured Query Language\",\n          explanation: \"SQL is the standard language for relational database management\",\n          category: \"backend\",\n        },\n        {\n          quizId: dbQuiz.id,\n          questionText: \"What is a primary key?\",\n          questionType: \"multiple-choice\",\n          options: [\"Unique identifier for a record\", \"Foreign key reference\", \"Index type\", \"Database name\"],\n          correctAnswer: \"Unique identifier for a record\",\n          explanation: \"A primary key uniquely identifies each record in a table\",\n          category: \"backend\",\n        },\n        {\n          quizId: dbQuiz.id,\n          questionText: \"What is a foreign key?\",\n          questionType: \"multiple-choice\",\n          options: [\"Reference to primary key in another table\", \"Backup key\", \"Encryption key\", \"Password\"],\n          correctAnswer: \"Reference to primary key in another table\",\n          explanation: \"Foreign keys create relationships between tables\",\n          category: \"backend\",\n        },\n        {\n          quizId: dbQuiz.id,\n          questionText: \"What is database normalization?\",\n          questionType: \"multiple-choice\",\n          options: [\"Organizing data to reduce redundancy\", \"Making data normal\", \"Backing up data\", \"Encrypting data\"],\n          correctAnswer: \"Organizing data to reduce redundancy\",\n          explanation: \"Normalization organizes tables to minimize redundancy and dependency\",\n          category: \"backend\",\n        },\n        {\n          quizId: dbQuiz.id,\n          questionText: \"What is a JOIN in SQL?\",\n          questionType: \"multiple-choice\",\n          options: [\"Combining rows from multiple tables\", \"Adding rows\", \"Deleting data\", \"Creating tables\"],\n          correctAnswer: \"Combining rows from multiple tables\",\n          explanation: \"JOINs combine data from multiple tables based on related columns\",\n          category: \"backend\",\n        },\n        {\n          quizId: dbQuiz.id,\n          questionText: \"What is an index in a database?\",\n          questionType: \"multiple-choice\",\n          options: [\"Data structure for faster queries\", \"Table of contents\", \"Primary key\", \"Backup\"],\n          correctAnswer: \"Data structure for faster queries\",\n          explanation: \"Indexes improve the speed of data retrieval operations\",\n          category: \"backend\",\n        },\n        {\n          quizId: dbQuiz.id,\n          questionText: \"What is a transaction?\",\n          questionType: \"multiple-choice\",\n          options: [\"Sequence of operations treated as single unit\", \"Database backup\", \"Table creation\", \"Data type\"],\n          correctAnswer: \"Sequence of operations treated as single unit\",\n          explanation: \"Transactions ensure data integrity by treating operations as atomic units\",\n          category: \"backend\",\n        },\n        {\n          quizId: dbQuiz.id,\n          questionText: \"What does ACID stand for in databases?\",\n          questionType: \"multiple-choice\",\n          options: [\"Atomicity, Consistency, Isolation, Durability\", \"Advanced Computing Interface Design\", \"Automatic Content Integration Database\", \"Application Control Interface Development\"],\n          correctAnswer: \"Atomicity, Consistency, Isolation, Durability\",\n          explanation: \"ACID properties ensure reliable database transactions\",\n          category: \"backend\",\n        },\n        {\n          quizId: dbQuiz.id,\n          questionText: \"What is NoSQL?\",\n          questionType: \"multiple-choice\",\n          options: [\"Non-relational database\", \"No SQL allowed\", \"New SQL version\", \"Network SQL\"],\n          correctAnswer: \"Non-relational database\",\n          explanation: \"NoSQL databases don't use traditional relational table structure\",\n          category: \"backend\",\n        },\n        {\n          quizId: dbQuiz.id,\n          questionText: \"What is database replication?\",\n          questionType: \"multiple-choice\",\n          options: [\"Copying data to multiple databases\", \"Deleting duplicates\", \"Creating backups\", \"Encrypting data\"],\n          correctAnswer: \"Copying data to multiple databases\",\n          explanation: \"Replication maintains copies of data across multiple database servers\",\n          category: \"backend\",\n        },\n      ];\n\n      await storage.createQuestions(dbQuestions);\n      console.log(`‚úì Created ${dbQuestions.length} Database questions`);\n    }\n\n    // Data Science Questions\n    if (dataPath) {\n      const mlQuiz = await storage.createQuiz({\n        title: \"Machine Learning Basics\",\n        description: \"Fundamental ML concepts and algorithms\",\n        difficulty: \"intermediate\",\n        careerPathId: dataPath.id,\n        requiredLevel: 10,\n        xpReward: 200,\n        timeLimit: 1200,\n        isFinalAssessment: false,\n      });\n\n      const mlQuestions: InsertQuestion[] = [\n        {\n          quizId: mlQuiz.id,\n          questionText: \"What is supervised learning?\",\n          questionType: \"multiple-choice\",\n          options: [\"Learning from labeled data\", \"Learning without labels\", \"Random learning\", \"Manual training\"],\n          correctAnswer: \"Learning from labeled data\",\n          explanation: \"Supervised learning uses labeled training data\",\n          category: \"data\",\n        },\n        {\n          quizId: mlQuiz.id,\n          questionText: \"What is unsupervised learning?\",\n          questionType: \"multiple-choice\",\n          options: [\"Finding patterns without labels\", \"Using labeled data\", \"Manual classification\", \"Supervised by humans\"],\n          correctAnswer: \"Finding patterns without labels\",\n          explanation: \"Unsupervised learning finds patterns in unlabeled data\",\n          category: \"data\",\n        },\n        {\n          quizId: mlQuiz.id,\n          questionText: \"What is the purpose of train-test split?\",\n          questionType: \"multiple-choice\",\n          options: [\"Evaluate model performance\", \"Clean data\", \"Visualize data\", \"Store data\"],\n          correctAnswer: \"Evaluate model performance\",\n          explanation: \"Train-test split helps evaluate how well the model generalizes\",\n          category: \"data\",\n        },\n        {\n          quizId: mlQuiz.id,\n          questionText: \"What is overfitting?\",\n          questionType: \"multiple-choice\",\n          options: [\"Model learns training data too well\", \"Model is too simple\", \"Model is fast\", \"Model is accurate\"],\n          correctAnswer: \"Model learns training data too well\",\n          explanation: \"Overfitting occurs when a model learns noise in the training data\",\n          category: \"data\",\n        },\n        {\n          quizId: mlQuiz.id,\n          questionText: \"What is cross-validation?\",\n          questionType: \"multiple-choice\",\n          options: [\"Technique to assess model generalization\", \"Data cleaning\", \"Feature selection\", \"Model deployment\"],\n          correctAnswer: \"Technique to assess model generalization\",\n          explanation: \"Cross-validation evaluates model performance on different data subsets\",\n          category: \"data\",\n        },\n        {\n          quizId: mlQuiz.id,\n          questionText: \"What is a neural network?\",\n          questionType: \"multiple-choice\",\n          options: [\"Model inspired by biological neurons\", \"Network cable\", \"Database system\", \"File system\"],\n          correctAnswer: \"Model inspired by biological neurons\",\n          explanation: \"Neural networks are computing systems inspired by biological neural networks\",\n          category: \"data\",\n        },\n        {\n          quizId: mlQuiz.id,\n          questionText: \"What is feature engineering?\",\n          questionType: \"multiple-choice\",\n          options: [\"Creating new features from existing data\", \"Removing features\", \"Storing features\", \"Visualizing features\"],\n          correctAnswer: \"Creating new features from existing data\",\n          explanation: \"Feature engineering transforms raw data into features for better model performance\",\n          category: \"data\",\n        },\n        {\n          quizId: mlQuiz.id,\n          questionText: \"What is gradient descent?\",\n          questionType: \"multiple-choice\",\n          options: [\"Optimization algorithm\", \"Data cleaning method\", \"Visualization technique\", \"Database query\"],\n          correctAnswer: \"Optimization algorithm\",\n          explanation: \"Gradient descent is an iterative optimization algorithm for finding minima\",\n          category: \"data\",\n        },\n        {\n          quizId: mlQuiz.id,\n          questionText: \"What is a confusion matrix?\",\n          questionType: \"multiple-choice\",\n          options: [\"Table showing classification results\", \"Confusing data\", \"Error log\", \"Data transformation\"],\n          correctAnswer: \"Table showing classification results\",\n          explanation: \"Confusion matrix shows true/false positives and negatives\",\n          category: \"data\",\n        },\n        {\n          quizId: mlQuiz.id,\n          questionText: \"What is regularization?\",\n          questionType: \"multiple-choice\",\n          options: [\"Technique to prevent overfitting\", \"Making data regular\", \"Cleaning data\", \"Normalizing features\"],\n          correctAnswer: \"Technique to prevent overfitting\",\n          explanation: \"Regularization adds penalty terms to prevent overfitting\",\n          category: \"data\",\n        },\n      ];\n\n      await storage.createQuestions(mlQuestions);\n      console.log(`‚úì Created ${mlQuestions.length} Machine Learning questions`);\n    }\n\n    // Cloud & DevOps Questions\n    if (cloudPath) {\n      const dockerQuiz = await storage.createQuiz({\n        title: \"Docker & Containers\",\n        description: \"Containerization fundamentals\",\n        difficulty: \"intermediate\",\n        careerPathId: cloudPath.id,\n        requiredLevel: 10,\n        xpReward: 200,\n        timeLimit: 900,\n        isFinalAssessment: false,\n      });\n\n      const dockerQuestions: InsertQuestion[] = [\n        {\n          quizId: dockerQuiz.id,\n          questionText: \"What is Docker?\",\n          questionType: \"multiple-choice\",\n          options: [\"Containerization platform\", \"Database\", \"Programming language\", \"Web server\"],\n          correctAnswer: \"Containerization platform\",\n          explanation: \"Docker packages applications into standardized containers\",\n          category: \"cloud\",\n        },\n        {\n          quizId: dockerQuiz.id,\n          questionText: \"What is a Docker image?\",\n          questionType: \"multiple-choice\",\n          options: [\"Template for creating containers\", \"Photo file\", \"Virtual machine\", \"Database backup\"],\n          correctAnswer: \"Template for creating containers\",\n          explanation: \"Docker images are read-only templates containing application code and dependencies\",\n          category: \"cloud\",\n        },\n        {\n          quizId: dockerQuiz.id,\n          questionText: \"What is a Docker container?\",\n          questionType: \"multiple-choice\",\n          options: [\"Running instance of an image\", \"Storage unit\", \"Network device\", \"Database\"],\n          correctAnswer: \"Running instance of an image\",\n          explanation: \"Containers are runnable instances of Docker images\",\n          category: \"cloud\",\n        },\n        {\n          quizId: dockerQuiz.id,\n          questionText: \"What is Kubernetes?\",\n          questionType: \"multiple-choice\",\n          options: [\"Container orchestration platform\", \"Database\", \"CI/CD tool\", \"Text editor\"],\n          correctAnswer: \"Container orchestration platform\",\n          explanation: \"Kubernetes orchestrates and manages containerized applications\",\n          category: \"cloud\",\n        },\n        {\n          quizId: dockerQuiz.id,\n          questionText: \"What is a Dockerfile?\",\n          questionType: \"multiple-choice\",\n          options: [\"Text file with image build instructions\", \"Database file\", \"Configuration file\", \"Log file\"],\n          correctAnswer: \"Text file with image build instructions\",\n          explanation: \"Dockerfile contains instructions for building Docker images\",\n          category: \"cloud\",\n        },\n        {\n          quizId: dockerQuiz.id,\n          questionText: \"What is Docker Compose?\",\n          questionType: \"multiple-choice\",\n          options: [\"Tool for multi-container applications\", \"Music software\", \"Text editor\", \"Database tool\"],\n          correctAnswer: \"Tool for multi-container applications\",\n          explanation: \"Docker Compose defines and runs multi-container applications\",\n          category: \"cloud\",\n        },\n        {\n          quizId: dockerQuiz.id,\n          questionText: \"What is a Docker volume?\",\n          questionType: \"multiple-choice\",\n          options: [\"Persistent data storage\", \"Audio control\", \"Network volume\", \"Memory size\"],\n          correctAnswer: \"Persistent data storage\",\n          explanation: \"Volumes provide persistent storage for Docker containers\",\n          category: \"cloud\",\n        },\n        {\n          quizId: dockerQuiz.id,\n          questionText: \"What is Docker Hub?\",\n          questionType: \"multiple-choice\",\n          options: [\"Container image registry\", \"Social network\", \"Code editor\", \"Database\"],\n          correctAnswer: \"Container image registry\",\n          explanation: \"Docker Hub is a cloud-based registry for Docker images\",\n          category: \"cloud\",\n        },\n        {\n          quizId: dockerQuiz.id,\n          questionText: \"What is container orchestration?\",\n          questionType: \"multiple-choice\",\n          options: [\"Managing lifecycle of containers\", \"Playing music\", \"Arranging files\", \"Sorting data\"],\n          correctAnswer: \"Managing lifecycle of containers\",\n          explanation: \"Orchestration automates deployment, scaling, and management of containers\",\n          category: \"cloud\",\n        },\n        {\n          quizId: dockerQuiz.id,\n          questionText: \"What is a microservice?\",\n          questionType: \"multiple-choice\",\n          options: [\"Small, independent service\", \"Tiny computer\", \"Database query\", \"UI component\"],\n          correctAnswer: \"Small, independent service\",\n          explanation: \"Microservices are small, loosely coupled services in an application\",\n          category: \"cloud\",\n        },\n      ];\n\n      await storage.createQuestions(dockerQuestions);\n      console.log(`‚úì Created ${dockerQuestions.length} Docker/Cloud questions`);\n    }\n\n    // Mobile Development Questions\n    if (mobilePath) {\n      const mobileQuiz = await storage.createQuiz({\n        title: \"React Native Development\",\n        description: \"Building cross-platform mobile apps\",\n        difficulty: \"intermediate\",\n        careerPathId: mobilePath.id,\n        requiredLevel: 10,\n        xpReward: 200,\n        timeLimit: 900,\n        isFinalAssessment: false,\n      });\n\n      const mobileQuestions: InsertQuestion[] = [\n        {\n          quizId: mobileQuiz.id,\n          questionText: \"What is React Native?\",\n          questionType: \"multiple-choice\",\n          options: [\"Framework for building mobile apps with React\", \"Web framework\", \"Database\", \"Testing tool\"],\n          correctAnswer: \"Framework for building mobile apps with React\",\n          explanation: \"React Native builds native mobile apps using React\",\n          category: \"mobile\",\n        },\n        {\n          quizId: mobileQuiz.id,\n          questionText: \"What is the difference between native and hybrid apps?\",\n          questionType: \"multiple-choice\",\n          options: [\"Native built for one platform, hybrid for multiple\", \"Native is slower\", \"Hybrid is more expensive\", \"No difference\"],\n          correctAnswer: \"Native built for one platform, hybrid for multiple\",\n          explanation: \"Native apps are platform-specific, hybrid apps work across platforms\",\n          category: \"mobile\",\n        },\n        {\n          quizId: mobileQuiz.id,\n          questionText: \"What is a View in React Native?\",\n          questionType: \"multiple-choice\",\n          options: [\"Container component\", \"Screen view\", \"Database view\", \"Network view\"],\n          correctAnswer: \"Container component\",\n          explanation: \"View is a container that supports layout with flexbox and styling\",\n          category: \"mobile\",\n        },\n        {\n          quizId: mobileQuiz.id,\n          questionText: \"What is Expo?\",\n          questionType: \"multiple-choice\",\n          options: [\"Platform for React Native development\", \"Conference\", \"Database\", \"Web server\"],\n          correctAnswer: \"Platform for React Native development\",\n          explanation: \"Expo provides tools and services for React Native development\",\n          category: \"mobile\",\n        },\n        {\n          quizId: mobileQuiz.id,\n          questionText: \"What is navigation in mobile apps?\",\n          questionType: \"multiple-choice\",\n          options: [\"Moving between screens\", \"GPS functionality\", \"Network requests\", \"Data storage\"],\n          correctAnswer: \"Moving between screens\",\n          explanation: \"Navigation manages movement between different screens in an app\",\n          category: \"mobile\",\n        },\n        {\n          quizId: mobileQuiz.id,\n          questionText: \"What is AsyncStorage?\",\n          questionType: \"multiple-choice\",\n          options: [\"Key-value storage system\", \"Cloud storage\", \"Image storage\", \"Cache system\"],\n          correctAnswer: \"Key-value storage system\",\n          explanation: \"AsyncStorage provides simple, asynchronous key-value storage\",\n          category: \"mobile\",\n        },\n        {\n          quizId: mobileQuiz.id,\n          questionText: \"What is a FlatList?\",\n          questionType: \"multiple-choice\",\n          options: [\"Component for rendering lists\", \"Flat design style\", \"Database table\", \"Network protocol\"],\n          correctAnswer: \"Component for rendering lists\",\n          explanation: \"FlatList efficiently renders large lists of data\",\n          category: \"mobile\",\n        },\n        {\n          quizId: mobileQuiz.id,\n          questionText: \"What is hot reloading?\",\n          questionType: \"multiple-choice\",\n          options: [\"Instant code changes without restart\", \"Server restart\", \"Database refresh\", \"Cache clearing\"],\n          correctAnswer: \"Instant code changes without restart\",\n          explanation: \"Hot reloading updates the app instantly when code changes\",\n          category: \"mobile\",\n        },\n        {\n          quizId: mobileQuiz.id,\n          questionText: \"What is a TouchableOpacity?\",\n          questionType: \"multiple-choice\",\n          options: [\"Button with opacity feedback\", \"Transparent view\", \"Image component\", \"Text input\"],\n          correctAnswer: \"Button with opacity feedback\",\n          explanation: \"TouchableOpacity provides visual feedback by reducing opacity on press\",\n          category: \"mobile\",\n        },\n        {\n          quizId: mobileQuiz.id,\n          questionText: \"What is platform-specific code?\",\n          questionType: \"multiple-choice\",\n          options: [\"Code for iOS or Android only\", \"Cross-platform code\", \"Web code\", \"Server code\"],\n          correctAnswer: \"Code for iOS or Android only\",\n          explanation: \"Platform-specific code runs only on particular platforms (iOS or Android)\",\n          category: \"mobile\",\n        },\n      ];\n\n      await storage.createQuestions(mobileQuestions);\n      console.log(`‚úì Created ${mobileQuestions.length} Mobile Development questions`);\n    }\n\n    // Cybersecurity Questions\n    if (securityPath) {\n      const securityQuiz = await storage.createQuiz({\n        title: \"Web Security Fundamentals\",\n        description: \"Essential web security concepts\",\n        difficulty: \"intermediate\",\n        careerPathId: securityPath.id,\n        requiredLevel: 10,\n        xpReward: 200,\n        timeLimit: 900,\n        isFinalAssessment: false,\n      });\n\n      const securityQuestions: InsertQuestion[] = [\n        {\n          quizId: securityQuiz.id,\n          questionText: \"What is XSS (Cross-Site Scripting)?\",\n          questionType: \"multiple-choice\",\n          options: [\"Injecting malicious scripts into web pages\", \"CSS vulnerability\", \"Server attack\", \"Database breach\"],\n          correctAnswer: \"Injecting malicious scripts into web pages\",\n          explanation: \"XSS allows attackers to inject scripts into pages viewed by other users\",\n          category: \"security\",\n        },\n        {\n          quizId: securityQuiz.id,\n          questionText: \"What is CSRF (Cross-Site Request Forgery)?\",\n          questionType: \"multiple-choice\",\n          options: [\"Tricking users into unwanted actions\", \"Password attack\", \"SQL injection\", \"DDoS attack\"],\n          correctAnswer: \"Tricking users into unwanted actions\",\n          explanation: \"CSRF tricks authenticated users into performing unintended actions\",\n          category: \"security\",\n        },\n        {\n          quizId: securityQuiz.id,\n          questionText: \"What is SQL injection?\",\n          questionType: \"multiple-choice\",\n          options: [\"Inserting malicious SQL code\", \"Database backup\", \"SQL query optimization\", \"Database design\"],\n          correctAnswer: \"Inserting malicious SQL code\",\n          explanation: \"SQL injection is a code injection technique that attacks databases\",\n          category: \"security\",\n        },\n        {\n          quizId: securityQuiz.id,\n          questionText: \"What is authentication?\",\n          questionType: \"multiple-choice\",\n          options: [\"Verifying identity\", \"Granting permissions\", \"Encrypting data\", \"Logging actions\"],\n          correctAnswer: \"Verifying identity\",\n          explanation: \"Authentication verifies who a user claims to be\",\n          category: \"security\",\n        },\n        {\n          quizId: securityQuiz.id,\n          questionText: \"What is authorization?\",\n          questionType: \"multiple-choice\",\n          options: [\"Granting access permissions\", \"Verifying identity\", \"Encrypting data\", \"Logging in\"],\n          correctAnswer: \"Granting access permissions\",\n          explanation: \"Authorization determines what an authenticated user can access\",\n          category: \"security\",\n        },\n        {\n          quizId: securityQuiz.id,\n          questionText: \"What is a salt in password hashing?\",\n          questionType: \"multiple-choice\",\n          options: [\"Random data added to passwords\", \"Seasoning\", \"Encryption key\", \"Hash function\"],\n          correctAnswer: \"Random data added to passwords\",\n          explanation: \"Salt is random data added to passwords before hashing to prevent rainbow table attacks\",\n          category: \"security\",\n        },\n        {\n          quizId: securityQuiz.id,\n          questionText: \"What is HTTPS?\",\n          questionType: \"multiple-choice\",\n          options: [\"HTTP with encryption\", \"Faster HTTP\", \"New HTTP version\", \"Mobile HTTP\"],\n          correctAnswer: \"HTTP with encryption\",\n          explanation: \"HTTPS encrypts communication between browser and server using SSL/TLS\",\n          category: \"security\",\n        },\n        {\n          quizId: securityQuiz.id,\n          questionText: \"What is a DDoS attack?\",\n          questionType: \"multiple-choice\",\n          options: [\"Overwhelming server with traffic\", \"Password attack\", \"Data breach\", \"Virus infection\"],\n          correctAnswer: \"Overwhelming server with traffic\",\n          explanation: \"DDoS attacks flood servers with traffic to make them unavailable\",\n          category: \"security\",\n        },\n        {\n          quizId: securityQuiz.id,\n          questionText: \"What is input sanitization?\",\n          questionType: \"multiple-choice\",\n          options: [\"Cleaning user input before processing\", \"Deleting input\", \"Validating passwords\", \"Encrypting data\"],\n          correctAnswer: \"Cleaning user input before processing\",\n          explanation: \"Sanitization removes or escapes dangerous characters from user input\",\n          category: \"security\",\n        },\n        {\n          quizId: securityQuiz.id,\n          questionText: \"What is OWASP?\",\n          questionType: \"multiple-choice\",\n          options: [\"Open Web Application Security Project\", \"Operating Web Access Security Protocol\", \"Online Web Application Service Provider\", \"Open Windows Application Security Platform\"],\n          correctAnswer: \"Open Web Application Security Project\",\n          explanation: \"OWASP is a nonprofit foundation focused on improving software security\",\n          category: \"security\",\n        },\n      ];\n\n      await storage.createQuestions(securityQuestions);\n      console.log(`‚úì Created ${securityQuestions.length} Cybersecurity questions`);\n    }\n\n    console.log(\"\\n‚úÖ Quiz questions seeding complete!\");\n    console.log(\"Total new questions created: 100+\");\n\n  } catch (error) {\n    console.error(\"‚ùå Error seeding questions:\", error);\n    throw error;\n  }\n}\n\n// Run the seed function\nseedQuestions()\n  .then(() => {\n    console.log(\"üéâ Seeding completed successfully\");\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error(\"Failed to seed:\", error);\n    process.exit(1);\n  });\n","path":null,"size_bytes":36781,"size_tokens":null},"client/src/hooks/useTabDetection.ts":{"content":"import { useEffect, useState, useCallback } from \"react\";\n\ninterface TabDetectionOptions {\n  enabled: boolean;\n  onTabSwitch?: () => void;\n  warningMessage?: string;\n}\n\nexport function useTabDetection({\n  enabled = false,\n  onTabSwitch,\n  warningMessage = \"Warning: Tab switching detected during assessment!\",\n}: TabDetectionOptions) {\n  const [tabSwitched, setTabSwitched] = useState(false);\n  const [switchCount, setSwitchCount] = useState(0);\n  const [showWarning, setShowWarning] = useState(false);\n\n  const handleVisibilityChange = useCallback(() => {\n    if (!enabled) return;\n\n    if (document.hidden) {\n      console.log(\"üö® TAB SWITCH DETECTED - visibilitychange\");\n      setTabSwitched(true);\n      setSwitchCount(prev => prev + 1);\n      setShowWarning(true);\n      onTabSwitch?.();\n\n      // Hide warning after 3 seconds\n      setTimeout(() => setShowWarning(false), 3000);\n    }\n  }, [enabled, onTabSwitch]);\n\n  const handleBlur = useCallback(() => {\n    if (!enabled) return;\n\n    // IMPORTANT: Filter out false positives from UI interactions\n    setTimeout(() => {\n      // Ignore if iframe has focus\n      if (document.activeElement && document.activeElement.tagName === 'IFRAME') {\n        console.log(\"Ignoring blur - focus moved to iframe\");\n        return;\n      }\n      \n      // Ignore if focus is still within the document (e.g., dropdown clicks)\n      if (document.hasFocus()) {\n        console.log(\"Ignoring blur - document still has focus (likely dropdown or button click)\");\n        return;\n      }\n      \n      console.log(\"üö® TAB SWITCH DETECTED - window blur\");\n      setTabSwitched(true);\n      setSwitchCount(prev => prev + 1);\n      setShowWarning(true);\n      onTabSwitch?.();\n\n      setTimeout(() => setShowWarning(false), 3000);\n    }, 300); // Longer delay to properly check focus state\n  }, [enabled, onTabSwitch]);\n\n  const handleFocusOut = useCallback((e: FocusEvent) => {\n    if (!enabled) return;\n    \n    // Only trigger if focus is moving completely outside the window (not just to another element)\n    // This is much more restrictive to avoid false positives from dropdowns and buttons\n    if (!e.relatedTarget) {\n      // Add delay to check if this is a real tab switch or just UI interaction\n      setTimeout(() => {\n        if (!document.hasFocus() && document.hidden === false) {\n          // Document lost focus but is still visible - likely a real issue\n          console.log(\"üö® TAB SWITCH DETECTED - focusout\");\n          setTabSwitched(true);\n          setSwitchCount(prev => prev + 1);\n          setShowWarning(true);\n          onTabSwitch?.();\n          \n          setTimeout(() => setShowWarning(false), 3000);\n        } else {\n          console.log(\"Ignoring focusout - likely dropdown or UI interaction\");\n        }\n      }, 300);\n    }\n  }, [enabled, onTabSwitch]);\n\n  // Keyboard detection for Alt+Tab\n  const handleKeyDown = useCallback((e: KeyboardEvent) => {\n    if (!enabled) return;\n    \n    // Detect Alt+Tab (or Cmd+Tab on Mac)\n    if ((e.altKey && e.key === 'Tab') || (e.metaKey && e.key === 'Tab')) {\n      console.log(\"üö® TAB SWITCH DETECTED - keyboard shortcut\");\n      setTabSwitched(true);\n      setSwitchCount(prev => prev + 1);\n      setShowWarning(true);\n      onTabSwitch?.();\n      \n      setTimeout(() => setShowWarning(false), 3000);\n    }\n  }, [enabled, onTabSwitch]);\n\n  useEffect(() => {\n    if (!enabled) {\n      console.log(\"Tab detection is DISABLED\");\n      return;\n    }\n\n    console.log(\"üîí Tab detection is NOW ACTIVE - switching tabs will terminate the assessment!\");\n    console.log(\"Listening for: visibilitychange, blur, focusout, keydown events\");\n    \n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n    window.addEventListener(\"blur\", handleBlur);\n    document.addEventListener(\"focusout\", handleFocusOut as EventListener);\n    document.addEventListener(\"keydown\", handleKeyDown as EventListener);\n\n    // Test the detection\n    console.log(\"Current document.hidden:\", document.hidden);\n    console.log(\"Current document.hasFocus():\", document.hasFocus());\n\n    return () => {\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n      window.removeEventListener(\"blur\", handleBlur);\n      document.removeEventListener(\"focusout\", handleFocusOut as EventListener);\n      document.removeEventListener(\"keydown\", handleKeyDown as EventListener);\n    };\n  }, [enabled, handleVisibilityChange, handleBlur, handleFocusOut, handleKeyDown]);\n\n  const reset = useCallback(() => {\n    setTabSwitched(false);\n    setSwitchCount(0);\n    setShowWarning(false);\n  }, []);\n\n  // Manual simulation for testing purposes\n  const simulateTabSwitch = useCallback(() => {\n    console.log(\"üß™ TEST: Manually simulating tab switch\");\n    setTabSwitched(true);\n    setSwitchCount(prev => prev + 1);\n    setShowWarning(true);\n    onTabSwitch?.();\n    \n    setTimeout(() => setShowWarning(false), 3000);\n  }, [onTabSwitch]);\n\n  return {\n    tabSwitched,\n    switchCount,\n    showWarning,\n    warningMessage,\n    reset,\n    simulateTabSwitch,\n  };\n}","path":null,"size_bytes":5088,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"client/src/pages/SearchResults.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation, useSearch } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { BookOpen, Code2, Trophy, Briefcase, Search as SearchIcon, ArrowLeft } from \"lucide-react\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\ninterface SearchResults {\n  modules: Array<{\n    id: string;\n    title: string;\n    description: string;\n    careerPath: string | null;\n    totalXP: number;\n    requiredLevel: number;\n  }>;\n  quizzes: Array<{\n    id: string;\n    title: string;\n    description: string;\n    difficulty: string;\n    xpReward: number;\n  }>;\n  challenges: Array<{\n    id: string;\n    title: string;\n    description: string;\n    difficulty: string;\n    xpReward: number;\n  }>;\n  careerPaths: Array<{\n    id: string;\n    name: string;\n    description: string;\n    skills: string[];\n  }>;\n}\n\nexport default function SearchResults() {\n  const search = useSearch();\n  const [, setLocation] = useLocation();\n  const { user } = useAuth();\n  const queryParam = new URLSearchParams(search).get(\"q\") || \"\";\n  const [activeTab, setActiveTab] = useState<\"all\" | \"modules\" | \"quizzes\" | \"challenges\" | \"paths\">(\"all\");\n\n  const { data, isLoading, error } = useQuery<{ results: SearchResults }>({\n    queryKey: [\"/api/search\", { q: queryParam }],\n    enabled: queryParam.length >= 2,\n  });\n\n  const results = data?.results;\n  const totalResults = results\n    ? results.modules.length + results.quizzes.length + results.challenges.length + results.careerPaths.length\n    : 0;\n\n  if (!user) {\n    return null;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"container mx-auto px-4 py-8 max-w-6xl\">\n        <div className=\"mb-8\">\n          <Button\n            variant=\"ghost\"\n            onClick={() => setLocation(\"/dashboard\")}\n            className=\"mb-4\"\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Back to Dashboard\n          </Button>\n          <div className=\"flex items-center gap-3 mb-2\">\n            <SearchIcon className=\"w-8 h-8 text-primary\" />\n            <h1 className=\"text-4xl font-bold\">Search Results</h1>\n          </div>\n          <p className=\"text-muted-foreground\">\n            {queryParam ? `Results for \"${queryParam}\"` : \"Enter a search query\"}\n            {totalResults > 0 && ` ‚Ä¢ ${totalResults} results found`}\n          </p>\n        </div>\n\n        {isLoading ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n              <p className=\"text-muted-foreground\">Searching...</p>\n            </div>\n          </div>\n        ) : error ? (\n          <Card>\n            <CardContent className=\"py-12 text-center\">\n              <p className=\"text-destructive\">Failed to search. Please try again.</p>\n            </CardContent>\n          </Card>\n        ) : !queryParam || queryParam.length < 2 ? (\n          <Card>\n            <CardContent className=\"py-12 text-center\">\n              <SearchIcon className=\"w-16 h-16 text-muted-foreground mx-auto mb-4\" />\n              <h3 className=\"text-xl font-semibold mb-2\">Start Searching</h3>\n              <p className=\"text-muted-foreground\">\n                Enter at least 2 characters to search across modules, quizzes, challenges, and career paths.\n              </p>\n            </CardContent>\n          </Card>\n        ) : totalResults === 0 ? (\n          <Card>\n            <CardContent className=\"py-12 text-center\">\n              <SearchIcon className=\"w-16 h-16 text-muted-foreground mx-auto mb-4\" />\n              <h3 className=\"text-xl font-semibold mb-2\">No Results Found</h3>\n              <p className=\"text-muted-foreground\">\n                No matches found for \"{queryParam}\". Try different keywords or browse our modules directly.\n              </p>\n              <Button onClick={() => setLocation(\"/modules\")} className=\"mt-4\">\n                Browse Modules\n              </Button>\n            </CardContent>\n          </Card>\n        ) : (\n          <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as typeof activeTab)}>\n            <TabsList className=\"mb-6\">\n              <TabsTrigger value=\"all\" data-testid=\"tab-all\">All ({totalResults})</TabsTrigger>\n              {results && results.modules.length > 0 && (\n                <TabsTrigger value=\"modules\" data-testid=\"tab-modules\">\n                  Modules ({results.modules.length})\n                </TabsTrigger>\n              )}\n              {results && results.quizzes.length > 0 && (\n                <TabsTrigger value=\"quizzes\" data-testid=\"tab-quizzes\">\n                  Quizzes ({results.quizzes.length})\n                </TabsTrigger>\n              )}\n              {results && results.challenges.length > 0 && (\n                <TabsTrigger value=\"challenges\" data-testid=\"tab-challenges\">\n                  Challenges ({results.challenges.length})\n                </TabsTrigger>\n              )}\n              {results && results.careerPaths.length > 0 && (\n                <TabsTrigger value=\"paths\" data-testid=\"tab-paths\">\n                  Career Paths ({results.careerPaths.length})\n                </TabsTrigger>\n              )}\n            </TabsList>\n\n            <TabsContent value=\"all\" className=\"space-y-6\">\n              {results && results.modules.length > 0 && (\n                <div>\n                  <h2 className=\"text-2xl font-bold mb-4 flex items-center gap-2\">\n                    <BookOpen className=\"w-6 h-6\" />\n                    Modules\n                  </h2>\n                  <div className=\"grid gap-4\">\n                    {results.modules.map((module) => (\n                      <Card key={module.id} className=\"hover-elevate\">\n                        <CardHeader>\n                          <div className=\"flex items-start justify-between\">\n                            <div>\n                              <CardTitle>{module.title}</CardTitle>\n                              <CardDescription className=\"mt-2\">{module.description}</CardDescription>\n                            </div>\n                            <Badge variant=\"secondary\">\n                              {module.totalXP} XP\n                            </Badge>\n                          </div>\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                              {module.requiredLevel > 0 && (\n                                <span>Level {module.requiredLevel}+</span>\n                              )}\n                              {module.careerPath && (\n                                <>\n                                  <span>‚Ä¢</span>\n                                  <span>{module.careerPath}</span>\n                                </>\n                              )}\n                            </div>\n                            <Button\n                              onClick={() => setLocation(\"/modules\")}\n                              data-testid={`button-view-module-${module.id}`}\n                            >\n                              View Module\n                            </Button>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {results && results.quizzes.length > 0 && (\n                <div>\n                  <h2 className=\"text-2xl font-bold mb-4 flex items-center gap-2\">\n                    <Trophy className=\"w-6 h-6\" />\n                    Quizzes\n                  </h2>\n                  <div className=\"grid gap-4\">\n                    {results.quizzes.map((quiz) => (\n                      <Card key={quiz.id} className=\"hover-elevate\">\n                        <CardHeader>\n                          <div className=\"flex items-start justify-between\">\n                            <div>\n                              <CardTitle>{quiz.title}</CardTitle>\n                              <CardDescription className=\"mt-2\">{quiz.description}</CardDescription>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <Badge>{quiz.difficulty}</Badge>\n                              <Badge variant=\"secondary\">{quiz.xpReward} XP</Badge>\n                            </div>\n                          </div>\n                        </CardHeader>\n                        <CardContent>\n                          <Button\n                            onClick={() => setLocation(`/quiz/${quiz.id}`)}\n                            data-testid={`button-start-quiz-${quiz.id}`}\n                          >\n                            Start Quiz\n                          </Button>\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {results && results.challenges.length > 0 && (\n                <div>\n                  <h2 className=\"text-2xl font-bold mb-4 flex items-center gap-2\">\n                    <Code2 className=\"w-6 h-6\" />\n                    Code Challenges\n                  </h2>\n                  <div className=\"grid gap-4\">\n                    {results.challenges.map((challenge) => (\n                      <Card key={challenge.id} className=\"hover-elevate\">\n                        <CardHeader>\n                          <div className=\"flex items-start justify-between\">\n                            <div>\n                              <CardTitle>{challenge.title}</CardTitle>\n                              <CardDescription className=\"mt-2\">{challenge.description}</CardDescription>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <Badge>{challenge.difficulty}</Badge>\n                              <Badge variant=\"secondary\">{challenge.xpReward} XP</Badge>\n                            </div>\n                          </div>\n                        </CardHeader>\n                        <CardContent>\n                          <Button\n                            onClick={() => setLocation(`/challenge/${challenge.id}`)}\n                            data-testid={`button-start-challenge-${challenge.id}`}\n                          >\n                            Start Challenge\n                          </Button>\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {results && results.careerPaths.length > 0 && (\n                <div>\n                  <h2 className=\"text-2xl font-bold mb-4 flex items-center gap-2\">\n                    <Briefcase className=\"w-6 h-6\" />\n                    Career Paths\n                  </h2>\n                  <div className=\"grid gap-4\">\n                    {results.careerPaths.map((path) => (\n                      <Card key={path.id} className=\"hover-elevate\">\n                        <CardHeader>\n                          <CardTitle>{path.name}</CardTitle>\n                          <CardDescription className=\"mt-2\">{path.description}</CardDescription>\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"flex items-center justify-between\">\n                            <div className=\"flex flex-wrap gap-2\">\n                              {path.skills.slice(0, 5).map((skill, idx) => (\n                                <Badge key={idx} variant=\"outline\">\n                                  {skill}\n                                </Badge>\n                              ))}\n                            </div>\n                            <Button\n                              onClick={() => setLocation(\"/careers\")}\n                              data-testid={`button-view-path-${path.id}`}\n                            >\n                              View Path\n                            </Button>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </TabsContent>\n\n            <TabsContent value=\"modules\">\n              <div className=\"grid gap-4\">\n                {results?.modules.map((module) => (\n                  <Card key={module.id} className=\"hover-elevate\">\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <CardTitle>{module.title}</CardTitle>\n                          <CardDescription className=\"mt-2\">{module.description}</CardDescription>\n                        </div>\n                        <Badge variant=\"secondary\">{module.totalXP} XP</Badge>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <Button onClick={() => setLocation(\"/modules\")}>View Module</Button>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"quizzes\">\n              <div className=\"grid gap-4\">\n                {results?.quizzes.map((quiz) => (\n                  <Card key={quiz.id} className=\"hover-elevate\">\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <CardTitle>{quiz.title}</CardTitle>\n                          <CardDescription className=\"mt-2\">{quiz.description}</CardDescription>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <Badge>{quiz.difficulty}</Badge>\n                          <Badge variant=\"secondary\">{quiz.xpReward} XP</Badge>\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <Button onClick={() => setLocation(`/quiz/${quiz.id}`)}>Start Quiz</Button>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"challenges\">\n              <div className=\"grid gap-4\">\n                {results?.challenges.map((challenge) => (\n                  <Card key={challenge.id} className=\"hover-elevate\">\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <CardTitle>{challenge.title}</CardTitle>\n                          <CardDescription className=\"mt-2\">{challenge.description}</CardDescription>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <Badge>{challenge.difficulty}</Badge>\n                          <Badge variant=\"secondary\">{challenge.xpReward} XP</Badge>\n                        </div>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <Button onClick={() => setLocation(`/challenge/${challenge.id}`)}>Start Challenge</Button>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"paths\">\n              <div className=\"grid gap-4\">\n                {results?.careerPaths.map((path) => (\n                  <Card key={path.id} className=\"hover-elevate\">\n                    <CardHeader>\n                      <CardTitle>{path.name}</CardTitle>\n                      <CardDescription className=\"mt-2\">{path.description}</CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex flex-wrap gap-2\">\n                          {path.skills.slice(0, 5).map((skill, idx) => (\n                            <Badge key={idx} variant=\"outline\">\n                              {skill}\n                            </Badge>\n                          ))}\n                        </div>\n                        <Button onClick={() => setLocation(\"/careers\")}>View Path</Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </TabsContent>\n          </Tabs>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":17153,"size_tokens":null},"client/src/components/DailyChallengeCard.tsx":{"content":"import { Link } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Trophy, Clock, Flame, AlertTriangle, CheckCircle2 } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { useState } from \"react\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\ninterface DailyChallengeCardProps {\n  title: string;\n  difficulty: \"easy\" | \"medium\" | \"hard\";\n  xpReward: number;\n  timeEstimate: string;\n  streak: number;\n  challengeId: string;\n  challengeType: \"quiz\" | \"code\";\n  completed?: boolean;\n}\n\nconst difficultyColors = {\n  easy: \"bg-[hsl(var(--success))] text-[hsl(var(--success-foreground))]\",\n  medium: \"bg-[hsl(var(--warning))] text-[hsl(var(--warning-foreground))]\",\n  hard: \"bg-destructive text-destructive-foreground\",\n};\n\nexport default function DailyChallengeCard({\n  title,\n  difficulty,\n  xpReward,\n  timeEstimate,\n  streak,\n  challengeId,\n  challengeType,\n  completed = false,\n}: DailyChallengeCardProps) {\n  const [, setLocation] = useLocation();\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n\n  const handleStartChallenge = () => {\n    // Prevent starting if already completed\n    if (completed) {\n      setShowConfirmModal(false);\n      return;\n    }\n    \n    if (challengeType === \"quiz\") {\n      setLocation(`/quiz/${challengeId}?daily=true`);\n    } else if (challengeType === \"code\") {\n      setLocation(`/challenge/${challengeId}?daily=true`);\n    }\n    setShowConfirmModal(false);\n  };\n\n  return (\n    <Card className={completed ? \"opacity-75\" : \"hover-elevate\"}>\n      <CardHeader>\n        <div className=\"flex flex-col sm:flex-row sm:items-start justify-between gap-4\">\n          <CardTitle className=\"text-lg\">{title}</CardTitle>\n          <div className=\"flex gap-2 flex-wrap\">\n            <Badge className={difficultyColors[difficulty]}>\n              {difficulty.toUpperCase()}\n            </Badge>\n            {completed && (\n              <Badge className=\"bg-[hsl(var(--success))] text-[hsl(var(--success-foreground))]\">\n                <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                Completed\n              </Badge>\n            )}\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 text-sm\">\n          <div className=\"flex items-center gap-2 text-muted-foreground\">\n            <Clock className=\"w-4 h-4\" />\n            <span>{timeEstimate}</span>\n          </div>\n          <div className=\"flex items-center gap-2 text-primary font-semibold\">\n            <Trophy className=\"w-4 h-4 fill-primary\" />\n            <span>+{xpReward} XP</span>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2 p-3 rounded-lg bg-primary/5 border border-primary/20\">\n          <Flame className=\"w-5 h-5 text-[hsl(var(--warning))]\" />\n          <div className=\"flex-1\">\n            <div className=\"text-sm font-semibold\">{streak} Day Streak!</div>\n            <div className=\"text-xs text-muted-foreground\">Keep it going</div>\n          </div>\n        </div>\n\n        <Button \n          className=\"w-full\" \n          size=\"lg\" \n          onClick={() => setShowConfirmModal(true)} \n          disabled={completed}\n          data-testid=\"button-start-challenge\"\n        >\n          {completed ? (\n            <>\n              <CheckCircle2 className=\"w-4 h-4 mr-2\" />\n              Completed Today\n            </>\n          ) : (\n            <>\n              <Trophy className=\"w-4 h-4 mr-2\" />\n              Start Challenge\n            </>\n          )}\n        </Button>\n      </CardContent>\n\n      <AlertDialog open={showConfirmModal} onOpenChange={setShowConfirmModal}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <div className=\"flex items-center gap-3 mb-2\">\n              <AlertTriangle className=\"w-6 h-6 text-destructive\" />\n              <AlertDialogTitle className=\"text-xl\">Daily Challenge Warning</AlertDialogTitle>\n            </div>\n            <AlertDialogDescription className=\"space-y-3 pt-2\">\n              <p className=\"text-base\">\n                This is a <span className=\"font-bold text-destructive\">one-time challenge</span>. Once you start:\n              </p>\n              <ul className=\"list-disc list-inside space-y-2 text-sm\">\n                <li className=\"text-destructive font-semibold\">You cannot retry if you fail</li>\n                <li className=\"text-destructive font-semibold\">Switching tabs will terminate the assessment immediately</li>\n                <li className=\"text-destructive font-semibold\">There is no pause or restart option</li>\n              </ul>\n              <p className=\"text-sm text-muted-foreground pt-2\">\n                Make sure you're ready and have enough time before proceeding.\n              </p>\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-not-now\">Not Now</AlertDialogCancel>\n            <AlertDialogAction \n              onClick={handleStartChallenge} \n              data-testid=\"button-proceed\" \n              className=\"bg-primary\"\n              disabled={completed}\n            >\n              Proceed\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </Card>\n  );\n}","path":null,"size_bytes":5674,"size_tokens":null},"client/src/components/EditUserDialog.tsx":{"content":"\nimport { useState } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2 } from \"lucide-react\";\nimport type { User } from \"@shared/schema\";\n\ninterface EditUserDialogProps {\n  open: boolean;\n  onClose: () => void;\n  user: User | null;\n  onUserUpdated: () => void;\n}\n\nexport default function EditUserDialog({ open, onClose, user, onUserUpdated }: EditUserDialogProps) {\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    displayName: user?.displayName || \"\",\n    isAdmin: user?.isAdmin || false,\n    level: user?.level || 1,\n    totalXp: user?.totalXp || 0,\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!user) return;\n\n    setIsLoading(true);\n    try {\n      const response = await fetch(`/api/admin/users/${user.id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify(formData),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to update user\");\n      }\n\n      toast({\n        title: \"User Updated\",\n        description: `Successfully updated ${user.username}`,\n      });\n\n      onUserUpdated();\n      onClose();\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Update Failed\",\n        description: \"Failed to update user. Please try again.\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (!user) return null;\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Edit User: {user.username}</DialogTitle>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"displayName\">Display Name</Label>\n            <Input\n              id=\"displayName\"\n              value={formData.displayName}\n              onChange={(e) => setFormData({ ...formData, displayName: e.target.value })}\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"level\">Level</Label>\n            <Input\n              id=\"level\"\n              type=\"number\"\n              min=\"1\"\n              value={formData.level}\n              onChange={(e) => setFormData({ ...formData, level: parseInt(e.target.value) })}\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"totalXp\">Total XP</Label>\n            <Input\n              id=\"totalXp\"\n              type=\"number\"\n              min=\"0\"\n              value={formData.totalXp}\n              onChange={(e) => setFormData({ ...formData, totalXp: parseInt(e.target.value) })}\n              required\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"isAdmin\">Admin Status</Label>\n            <Switch\n              id=\"isAdmin\"\n              checked={formData.isAdmin}\n              onCheckedChange={(checked) => setFormData({ ...formData, isAdmin: checked })}\n            />\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} disabled={isLoading}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isLoading}>\n              {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n              Save Changes\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":3886,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"ml_model/prediction_service.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nML Prediction Service for CareerQuest\nHandles quiz generation, study suggestions, career recommendations using pre-trained models\n\"\"\"\n\nimport sys\nimport json\nimport pickle\nimport numpy as np\nimport random\nfrom pathlib import Path\nfrom datetime import datetime\n\nSAVED_MODELS_DIR = Path(__file__).parent / \"saved_models\"\n\n_models_cache = None\n_models_status = {\"loaded\": False, \"errors\": []}\n\ndef log_startup():\n    \"\"\"Log application startup information\"\"\"\n    timestamp = datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\")\n    print(f\"\\n{'='*60}\", file=sys.stderr)\n    print(f\"Application Startup at {timestamp}\", file=sys.stderr)\n    print(f\"{'='*60}\\n\", file=sys.stderr)\n    print(\"üöÄ Starting CareerQuest ML Prediction Service...\\n\", file=sys.stderr)\n\ndef log_models_loaded(models):\n    \"\"\"Log successfully loaded models\"\"\"\n    print(\"‚úÖ Models loaded successfully!\", file=sys.stderr)\n    \n    ml_models = []\n    if \"question_classifier\" in models:\n        ml_models.append(\"Question Classifier\")\n    if \"difficulty_predictor\" in models:\n        ml_models.append(\"Difficulty Predictor\")\n    if \"random_forest\" in models:\n        ml_models.append(\"Career Recommender (Random Forest)\")\n    if \"study_suggester\" in models:\n        ml_models.append(\"Study Suggester\")\n    if \"scaler\" in models:\n        ml_models.append(\"Feature Scaler\")\n    if \"features\" in models:\n        feature_count = len(models[\"features\"]) if isinstance(models[\"features\"], list) else 12\n        print(f\"   Features: {feature_count} features\", file=sys.stderr)\n    \n    for model_name in ml_models:\n        print(f\"   ‚úì {model_name}\", file=sys.stderr)\n    \n    print(f\"   Question Bank: {len(QUESTION_BANK)} questions across 5 categories\\n\", file=sys.stderr)\n\ndef log_prediction_request(command, data, result=None, error=None):\n    \"\"\"Log prediction requests with results\"\"\"\n    timestamp = datetime.now().strftime(\"%Y-%m-%d %I:%M:%S %p\")\n    \n    if command == \"generate_quiz\":\n        print(f\"\\nüéØ Quiz Generation Request | {timestamp}\", file=sys.stderr)\n        print(f\"   Category: {data.get('category', 'mixed')}\", file=sys.stderr)\n        print(f\"   Difficulty: {data.get('difficulty', 'medium')}\", file=sys.stderr)\n        print(f\"   Career Path: {data.get('career_path', 'fullstack')}\", file=sys.stderr)\n        print(f\"   Count: {data.get('count', 5)} questions\", file=sys.stderr)\n        print(f\"   User Level: {data.get('level', 10)}\", file=sys.stderr)\n        if result:\n            print(f\"   ‚úÖ Generated: {len(result)} unique questions\", file=sys.stderr)\n    \n    elif command == \"recommend_career\":\n        print(f\"\\nüéì Career Recommendation Request | {timestamp}\", file=sys.stderr)\n        print(f\"   Visual Design: {data.get('visual_design', 3)}/5\", file=sys.stderr)\n        print(f\"   Backend Preference: {data.get('backend_pref', 3)}/5\", file=sys.stderr)\n        print(f\"   Data Interest: {data.get('data_interest', 3)}/5\", file=sys.stderr)\n        if result:\n            print(f\"   ‚úÖ Recommendation: {result.get('recommended_path', 'N/A')}\", file=sys.stderr)\n            print(f\"   Confidence: {int(result.get('confidence', 0) * 100)}%\", file=sys.stderr)\n    \n    elif command == \"suggest_study\":\n        print(f\"\\nüìö Study Suggestion Request | {timestamp}\", file=sys.stderr)\n        print(f\"   User Level: {data.get('level', 1)}\", file=sys.stderr)\n        print(f\"   Career Path: {data.get('career_path', 'fullstack')}\", file=sys.stderr)\n        print(f\"   Weak Categories: {data.get('weak_categories', [])}\", file=sys.stderr)\n        if result:\n            print(f\"   ‚úÖ Suggestions: {len(result)} personalized recommendations\", file=sys.stderr)\n    \n    elif command == \"classify_question\":\n        print(f\"\\nüîç Question Classification Request | {timestamp}\", file=sys.stderr)\n        print(f\"   Text: {data.get('text', '')[:50]}...\", file=sys.stderr)\n        if result:\n            print(f\"   ‚úÖ Category: {result.get('category', 'N/A')}\", file=sys.stderr)\n            print(f\"   Confidence: {int(result.get('confidence', 0) * 100)}%\", file=sys.stderr)\n    \n    elif command == \"health_check\":\n        print(f\"\\n‚ù§Ô∏è  Health Check Request | {timestamp}\", file=sys.stderr)\n        if result:\n            print(f\"   ‚úÖ Status: {result.get('status', 'N/A')}\", file=sys.stderr)\n            print(f\"   Models Loaded: {result.get('models_loaded', 0)}\", file=sys.stderr)\n    \n    if error:\n        print(f\"   ‚ùå Error: {error}\", file=sys.stderr)\n\ndef load_models():\n    \"\"\"Load all pre-trained ML models with validation\"\"\"\n    global _models_cache, _models_status\n    if _models_cache is not None:\n        return _models_cache\n    \n    # Log startup on first load\n    if _models_cache is None:\n        log_startup()\n    \n    models = {}\n    errors = []\n    \n    model_files = {\n        \"question_classifier\": \"question_classifier.pkl\",\n        \"question_vectorizer\": \"question_vectorizer.pkl\",\n        \"question_label_encoder\": \"question_label_encoder.pkl\",\n        \"difficulty_predictor\": \"difficulty_predictor.pkl\",\n        \"difficulty_label_encoder\": \"difficulty_label_encoder.pkl\",\n        \"study_suggester\": \"study_suggester.pkl\",\n        \"study_label_encoder\": \"study_label_encoder.pkl\",\n        \"career_label_encoder\": \"career_label_encoder.pkl\",\n        \"random_forest\": \"random_forest.pkl\",\n        \"scaler\": \"scaler.pkl\",\n        \"features\": \"features.pkl\",\n    }\n    \n    for key, filename in model_files.items():\n        filepath = SAVED_MODELS_DIR / filename\n        if filepath.exists():\n            try:\n                with open(filepath, \"rb\") as f:\n                    models[key] = pickle.load(f)\n            except Exception as e:\n                errors.append(f\"Failed to load {key}: {e}\")\n                print(f\"Warning: Failed to load {key}: {e}\", file=sys.stderr)\n        else:\n            errors.append(f\"Model file not found: {filename}\")\n    \n    career_features_path = SAVED_MODELS_DIR / \"career_features.json\"\n    if career_features_path.exists():\n        try:\n            with open(career_features_path, \"r\") as f:\n                models[\"career_features\"] = json.load(f)\n        except Exception as e:\n            errors.append(f\"Failed to load career_features: {e}\")\n    \n    _models_cache = models\n    _models_status = {\"loaded\": True, \"errors\": errors, \"model_count\": len(models)}\n    \n    # Log successful model loading\n    log_models_loaded(models)\n    \n    if errors:\n        print(f\"‚ö†Ô∏è  ML Models loaded with {len(errors)} warnings:\", file=sys.stderr)\n        for error in errors[:3]:  # Show first 3 errors\n            print(f\"   - {error}\", file=sys.stderr)\n    \n    return models\n\ndef get_default_level_range(difficulty):\n    \"\"\"Get default level range based on difficulty\"\"\"\n    defaults = {\n        \"easy\": [1, 10],\n        \"medium\": [5, 20],\n        \"hard\": [15, 30]\n    }\n    return defaults.get(difficulty, [1, 30])\n\nQUESTION_BANK = [\n    # =============== ALGORITHMS - EASY ===============\n    {\n        \"question\": \"What is the time complexity of binary search?\",\n        \"options\": [\"O(n)\", \"O(log n)\", \"O(n^2)\", \"O(1)\"],\n        \"correctAnswer\": 1,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"Binary search has O(log n) complexity because it halves the search space each iteration.\",\n        \"level_range\": [1, 8]\n    },\n    {\n        \"question\": \"What is an array?\",\n        \"options\": [\"A function type\", \"A collection of elements stored at contiguous memory locations\", \"A type of loop\", \"A database table\"],\n        \"correctAnswer\": 1,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"An array is a data structure that stores elements of the same type in contiguous memory locations.\",\n        \"level_range\": [1, 5]\n    },\n    {\n        \"question\": \"What does FIFO stand for in queue data structures?\",\n        \"options\": [\"First In First Out\", \"First In Final Output\", \"Fast Input Fast Output\", \"Fixed Input Fixed Output\"],\n        \"correctAnswer\": 0,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"FIFO means First In First Out - the first element added is the first one removed.\",\n        \"level_range\": [1, 6]\n    },\n    {\n        \"question\": \"What is the time complexity of accessing an element in an array by index?\",\n        \"options\": [\"O(n)\", \"O(log n)\", \"O(n^2)\", \"O(1)\"],\n        \"correctAnswer\": 3,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"Array access by index is O(1) constant time because elements are stored at contiguous memory locations.\",\n        \"level_range\": [1, 7]\n    },\n    {\n        \"question\": \"What is a stack data structure?\",\n        \"options\": [\"FIFO structure\", \"LIFO structure\", \"Random access structure\", \"Sorted structure\"],\n        \"correctAnswer\": 1,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"A stack is a LIFO (Last In First Out) data structure where the last element added is the first removed.\",\n        \"level_range\": [1, 6]\n    },\n    # =============== ALGORITHMS - MEDIUM ===============\n    {\n        \"question\": \"What is recursion?\",\n        \"options\": [\"A loop type\", \"A function that calls itself\", \"A data structure\", \"An error type\"],\n        \"correctAnswer\": 1,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Recursion is a programming technique where a function calls itself to solve smaller instances of the same problem.\",\n        \"level_range\": [6, 15]\n    },\n    {\n        \"question\": \"What is Big O notation used for?\",\n        \"options\": [\"Measuring code length\", \"Describing algorithm efficiency\", \"Formatting output\", \"Managing memory\"],\n        \"correctAnswer\": 1,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Big O notation describes the upper bound of an algorithm's time or space complexity.\",\n        \"level_range\": [5, 14]\n    },\n    {\n        \"question\": \"What is a hash table?\",\n        \"options\": [\"A type of database\", \"A data structure using key-value pairs with O(1) average lookup\", \"A sorting algorithm\", \"A file format\"],\n        \"correctAnswer\": 1,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"A hash table is a data structure that stores key-value pairs and provides O(1) average time complexity for lookups.\",\n        \"level_range\": [7, 16]\n    },\n    {\n        \"question\": \"What is the worst-case time complexity of quicksort?\",\n        \"options\": [\"O(n)\", \"O(n log n)\", \"O(n^2)\", \"O(log n)\"],\n        \"correctAnswer\": 2,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Quicksort's worst case is O(n^2) when the pivot selection consistently results in unbalanced partitions.\",\n        \"level_range\": [8, 17]\n    },\n    {\n        \"question\": \"What is a linked list?\",\n        \"options\": [\"An array variant\", \"A sequence of nodes where each node points to the next\", \"A tree structure\", \"A hash function\"],\n        \"correctAnswer\": 1,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"A linked list is a linear data structure where elements are stored in nodes that contain data and a reference to the next node.\",\n        \"level_range\": [5, 14]\n    },\n    {\n        \"question\": \"What is the time complexity of inserting at the beginning of a linked list?\",\n        \"options\": [\"O(n)\", \"O(log n)\", \"O(n^2)\", \"O(1)\"],\n        \"correctAnswer\": 3,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Inserting at the beginning of a linked list is O(1) because you only need to update the head pointer.\",\n        \"level_range\": [6, 15]\n    },\n    # =============== ALGORITHMS - HARD ===============\n    {\n        \"question\": \"What is memoization?\",\n        \"options\": [\"A memory type\", \"Caching function results to avoid redundant calculations\", \"A debugging technique\", \"A testing method\"],\n        \"correctAnswer\": 1,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"Memoization is an optimization technique that caches the results of expensive function calls to avoid redundant calculations.\",\n        \"level_range\": [15, 30]\n    },\n    {\n        \"question\": \"What is the time complexity of Dijkstra's algorithm with a binary heap?\",\n        \"options\": [\"O(V)\", \"O(E log V)\", \"O(V^2)\", \"O(E + V)\"],\n        \"correctAnswer\": 1,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"Dijkstra's algorithm with a binary heap has O(E log V) complexity where E is edges and V is vertices.\",\n        \"level_range\": [18, 30]\n    },\n    {\n        \"question\": \"What is dynamic programming?\",\n        \"options\": [\"Writing code dynamically\", \"Breaking problems into overlapping subproblems and storing their solutions\", \"Runtime code generation\", \"Automatic memory management\"],\n        \"correctAnswer\": 1,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"Dynamic programming solves complex problems by breaking them into simpler overlapping subproblems and storing results to avoid recomputation.\",\n        \"level_range\": [16, 30]\n    },\n    {\n        \"question\": \"What is the amortized time complexity of adding to a dynamic array?\",\n        \"options\": [\"O(n)\", \"O(log n)\", \"O(n^2)\", \"O(1)\"],\n        \"correctAnswer\": 3,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"While individual insertions may trigger O(n) resizing, the amortized cost across many insertions is O(1).\",\n        \"level_range\": [17, 30]\n    },\n    {\n        \"question\": \"What is a balanced binary search tree?\",\n        \"options\": [\"A tree with equal values\", \"A BST where height difference between subtrees is bounded\", \"A complete binary tree\", \"A tree with no duplicates\"],\n        \"correctAnswer\": 1,\n        \"category\": \"algorithms\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"A balanced BST maintains a bounded height difference between left and right subtrees, ensuring O(log n) operations.\",\n        \"level_range\": [16, 30]\n    },\n    \n    # =============== FRONTEND - EASY ===============\n    {\n        \"question\": \"What does CSS stand for?\",\n        \"options\": [\"Creative Style Sheets\", \"Cascading Style Sheets\", \"Computer Style Sheets\", \"Colorful Style Sheets\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"CSS stands for Cascading Style Sheets, used for styling web pages.\",\n        \"level_range\": [1, 6]\n    },\n    {\n        \"question\": \"What is the difference between let and const in JavaScript?\",\n        \"options\": [\"No difference\", \"let can be reassigned, const cannot\", \"const is faster\", \"let is deprecated\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"let allows variable reassignment while const creates a read-only reference that cannot be reassigned.\",\n        \"level_range\": [1, 7]\n    },\n    {\n        \"question\": \"What does HTML stand for?\",\n        \"options\": [\"Hyper Text Markup Language\", \"High Tech Modern Language\", \"Hyper Transfer Markup Language\", \"Home Tool Markup Language\"],\n        \"correctAnswer\": 0,\n        \"category\": \"frontend\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"HTML stands for HyperText Markup Language, the standard language for creating web pages.\",\n        \"level_range\": [1, 5]\n    },\n    {\n        \"question\": \"Which HTML tag is used for the largest heading?\",\n        \"options\": [\"<h6>\", \"<heading>\", \"<h1>\", \"<head>\"],\n        \"correctAnswer\": 2,\n        \"category\": \"frontend\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"<h1> is used for the largest heading in HTML, with <h6> being the smallest.\",\n        \"level_range\": [1, 5]\n    },\n    {\n        \"question\": \"What is the CSS property to change text color?\",\n        \"options\": [\"text-color\", \"font-color\", \"color\", \"foreground\"],\n        \"correctAnswer\": 2,\n        \"category\": \"frontend\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"The 'color' property in CSS is used to change the text color of an element.\",\n        \"level_range\": [1, 6]\n    },\n    # =============== FRONTEND - MEDIUM ===============\n    {\n        \"question\": \"What is React's virtual DOM?\",\n        \"options\": [\"A browser API\", \"An in-memory representation of the real DOM\", \"A database\", \"A server component\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"React's virtual DOM is an in-memory representation that React uses to optimize updates to the real DOM.\",\n        \"level_range\": [8, 18]\n    },\n    {\n        \"question\": \"What is a closure in JavaScript?\",\n        \"options\": [\"A way to close files\", \"A function that has access to its outer scope\", \"A type of loop\", \"An error handler\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"A closure is a function that retains access to variables from its outer (enclosing) scope even after that scope has finished executing.\",\n        \"level_range\": [7, 16]\n    },\n    {\n        \"question\": \"What is the purpose of the useEffect hook in React?\",\n        \"options\": [\"State management\", \"Performing side effects\", \"Routing\", \"Form validation\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"useEffect is a React hook for performing side effects like data fetching, subscriptions, or DOM manipulation.\",\n        \"level_range\": [9, 18]\n    },\n    {\n        \"question\": \"What is CSS Flexbox used for?\",\n        \"options\": [\"Animation\", \"One-dimensional layout\", \"Database queries\", \"Server rendering\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Flexbox is a CSS layout model designed for one-dimensional layouts, making it easy to align and distribute space among items.\",\n        \"level_range\": [6, 15]\n    },\n    {\n        \"question\": \"What is event bubbling in JavaScript?\",\n        \"options\": [\"Creating events\", \"Events propagating from child to parent elements\", \"Canceling events\", \"Event scheduling\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Event bubbling is when an event triggered on a child element propagates up through its parent elements in the DOM tree.\",\n        \"level_range\": [8, 17]\n    },\n    {\n        \"question\": \"What is the purpose of useState in React?\",\n        \"options\": [\"Routing\", \"Managing component state\", \"Making API calls\", \"Styling components\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"useState is a React hook that allows functional components to have state variables.\",\n        \"level_range\": [7, 16]\n    },\n    # =============== FRONTEND - HARD ===============\n    {\n        \"question\": \"What is React's reconciliation algorithm?\",\n        \"options\": [\"A sorting algorithm\", \"The process of comparing virtual DOM trees to update the real DOM efficiently\", \"A security feature\", \"A routing mechanism\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"Reconciliation is React's diffing algorithm that compares virtual DOM trees to determine the minimal set of changes needed for the real DOM.\",\n        \"level_range\": [17, 30]\n    },\n    {\n        \"question\": \"What is tree shaking in webpack?\",\n        \"options\": [\"Reordering code\", \"Removing unused code from bundles\", \"Code compression\", \"Syntax checking\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"Tree shaking is a technique used to eliminate dead code by analyzing import/export statements to remove unused modules.\",\n        \"level_range\": [16, 30]\n    },\n    {\n        \"question\": \"What is the purpose of React.memo?\",\n        \"options\": [\"Memory allocation\", \"Memoizing component rendering to prevent unnecessary re-renders\", \"State persistence\", \"Error logging\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"React.memo is a higher-order component that memoizes the rendered output, preventing re-renders if props haven't changed.\",\n        \"level_range\": [15, 30]\n    },\n    {\n        \"question\": \"What is hydration in server-side rendering?\",\n        \"options\": [\"Adding water to servers\", \"Attaching event handlers to server-rendered HTML\", \"Database optimization\", \"Cache warming\"],\n        \"correctAnswer\": 1,\n        \"category\": \"frontend\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"Hydration is the process where client-side JavaScript takes over server-rendered HTML by attaching event handlers and making it interactive.\",\n        \"level_range\": [18, 30]\n    },\n    \n    # =============== BACKEND - EASY ===============\n    {\n        \"question\": \"Which HTTP method is used to update a resource?\",\n        \"options\": [\"GET\", \"POST\", \"PUT\", \"DELETE\"],\n        \"correctAnswer\": 2,\n        \"category\": \"backend\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"PUT is the HTTP method used to update or replace an existing resource.\",\n        \"level_range\": [1, 7]\n    },\n    {\n        \"question\": \"What is a primary key in a database?\",\n        \"options\": [\"Any column\", \"A unique identifier for each row\", \"The first column\", \"A foreign key reference\"],\n        \"correctAnswer\": 1,\n        \"category\": \"backend\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"A primary key uniquely identifies each record in a database table.\",\n        \"level_range\": [1, 6]\n    },\n    {\n        \"question\": \"What is a REST API?\",\n        \"options\": [\"A database type\", \"An architectural style for web services\", \"A programming language\", \"A testing framework\"],\n        \"correctAnswer\": 1,\n        \"category\": \"backend\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"REST (Representational State Transfer) is an architectural style for designing networked applications using HTTP methods.\",\n        \"level_range\": [1, 8]\n    },\n    {\n        \"question\": \"What HTTP status code indicates success?\",\n        \"options\": [\"404\", \"500\", \"200\", \"301\"],\n        \"correctAnswer\": 2,\n        \"category\": \"backend\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"HTTP status code 200 indicates that the request was successful.\",\n        \"level_range\": [1, 6]\n    },\n    {\n        \"question\": \"What does JSON stand for?\",\n        \"options\": [\"JavaScript Object Notation\", \"Java Standard Object Notation\", \"JavaScript Online Notation\", \"Java Serialized Object Notation\"],\n        \"correctAnswer\": 0,\n        \"category\": \"backend\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"JSON stands for JavaScript Object Notation, a lightweight data interchange format.\",\n        \"level_range\": [1, 5]\n    },\n    # =============== BACKEND - MEDIUM ===============\n    {\n        \"question\": \"What is the purpose of middleware in Express.js?\",\n        \"options\": [\"Database connection\", \"Process requests before reaching routes\", \"Render views\", \"Manage sessions only\"],\n        \"correctAnswer\": 1,\n        \"category\": \"backend\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Middleware functions in Express.js process requests before they reach route handlers.\",\n        \"level_range\": [7, 16]\n    },\n    {\n        \"question\": \"What is a foreign key in a database?\",\n        \"options\": [\"A key from another country\", \"A column that references a primary key in another table\", \"An encryption key\", \"A backup key\"],\n        \"correctAnswer\": 1,\n        \"category\": \"backend\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"A foreign key is a column that creates a relationship between two tables by referencing the primary key of another table.\",\n        \"level_range\": [6, 15]\n    },\n    {\n        \"question\": \"What is connection pooling?\",\n        \"options\": [\"Swimming pool management\", \"Reusing database connections instead of creating new ones\", \"Network load balancing\", \"Thread management\"],\n        \"correctAnswer\": 1,\n        \"category\": \"backend\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Connection pooling maintains a cache of database connections that can be reused, improving performance.\",\n        \"level_range\": [9, 18]\n    },\n    {\n        \"question\": \"What is rate limiting?\",\n        \"options\": [\"Speed optimization\", \"Restricting the number of requests a user can make in a time period\", \"Database throttling\", \"Memory management\"],\n        \"correctAnswer\": 1,\n        \"category\": \"backend\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Rate limiting controls the rate of requests a user can make to an API to prevent abuse and ensure fair usage.\",\n        \"level_range\": [8, 17]\n    },\n    {\n        \"question\": \"What is an ORM?\",\n        \"options\": [\"Object Relational Mapping\", \"Online Resource Manager\", \"Output Render Module\", \"Object Runtime Memory\"],\n        \"correctAnswer\": 0,\n        \"category\": \"backend\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"ORM (Object Relational Mapping) is a technique that maps database tables to classes, allowing developers to interact with databases using objects.\",\n        \"level_range\": [7, 16]\n    },\n    # =============== BACKEND - HARD ===============\n    {\n        \"question\": \"What is database sharding?\",\n        \"options\": [\"Deleting old data\", \"Horizontally partitioning data across multiple databases\", \"Data encryption\", \"Backup strategy\"],\n        \"correctAnswer\": 1,\n        \"category\": \"backend\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"Sharding is a database architecture pattern that horizontally partitions data across multiple database instances for scalability.\",\n        \"level_range\": [17, 30]\n    },\n    {\n        \"question\": \"What is eventual consistency in distributed systems?\",\n        \"options\": [\"Immediate data sync\", \"Data will become consistent given enough time without new updates\", \"Data validation\", \"Error handling\"],\n        \"correctAnswer\": 1,\n        \"category\": \"backend\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"Eventual consistency guarantees that, given enough time without new updates, all replicas will converge to the same value.\",\n        \"level_range\": [18, 30]\n    },\n    {\n        \"question\": \"What is the CAP theorem?\",\n        \"options\": [\"A coding standard\", \"States that a distributed system can only guarantee two of three: Consistency, Availability, Partition tolerance\", \"A security protocol\", \"A testing methodology\"],\n        \"correctAnswer\": 1,\n        \"category\": \"backend\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"CAP theorem states that a distributed data store can only provide two of three guarantees: Consistency, Availability, and Partition tolerance.\",\n        \"level_range\": [19, 30]\n    },\n    {\n        \"question\": \"What is a message queue?\",\n        \"options\": [\"An email system\", \"A system for asynchronous communication between services using messages\", \"A database type\", \"A logging mechanism\"],\n        \"correctAnswer\": 1,\n        \"category\": \"backend\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"A message queue enables asynchronous communication between services by storing messages until they can be processed.\",\n        \"level_range\": [16, 30]\n    },\n    \n    # =============== DATA - EASY ===============\n    {\n        \"question\": \"What is SQL used for?\",\n        \"options\": [\"Styling web pages\", \"Managing and querying relational databases\", \"Creating animations\", \"Building mobile apps\"],\n        \"correctAnswer\": 1,\n        \"category\": \"data\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"SQL (Structured Query Language) is used for managing and querying data in relational database systems.\",\n        \"level_range\": [1, 7]\n    },\n    {\n        \"question\": \"What is a database table?\",\n        \"options\": [\"A furniture piece\", \"A structured collection of data organized in rows and columns\", \"A type of graph\", \"A programming function\"],\n        \"correctAnswer\": 1,\n        \"category\": \"data\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"A database table is a collection of related data organized in rows (records) and columns (fields).\",\n        \"level_range\": [1, 5]\n    },\n    {\n        \"question\": \"What does SELECT do in SQL?\",\n        \"options\": [\"Deletes data\", \"Retrieves data from a database\", \"Creates tables\", \"Updates records\"],\n        \"correctAnswer\": 1,\n        \"category\": \"data\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"The SELECT statement is used to retrieve data from one or more tables in a database.\",\n        \"level_range\": [1, 6]\n    },\n    # =============== DATA - MEDIUM ===============\n    {\n        \"question\": \"What is the difference between SQL and NoSQL databases?\",\n        \"options\": [\"SQL is faster\", \"SQL uses structured tables, NoSQL uses flexible schemas\", \"NoSQL is always better\", \"They are the same\"],\n        \"correctAnswer\": 1,\n        \"category\": \"data\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"SQL databases use structured tables with predefined schemas, while NoSQL databases offer flexible, schema-less data storage.\",\n        \"level_range\": [7, 16]\n    },\n    {\n        \"question\": \"What is the purpose of indexes in databases?\",\n        \"options\": [\"Store data\", \"Speed up data retrieval\", \"Encrypt data\", \"Delete records\"],\n        \"correctAnswer\": 1,\n        \"category\": \"data\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Indexes are data structures that speed up data retrieval operations by providing quick access paths to rows.\",\n        \"level_range\": [8, 17]\n    },\n    {\n        \"question\": \"What is a JOIN in SQL?\",\n        \"options\": [\"Connecting to a database\", \"Combining rows from two or more tables based on a related column\", \"Creating a backup\", \"Sorting data\"],\n        \"correctAnswer\": 1,\n        \"category\": \"data\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"A JOIN clause combines rows from two or more tables based on a related column between them.\",\n        \"level_range\": [6, 15]\n    },\n    {\n        \"question\": \"What is data aggregation?\",\n        \"options\": [\"Deleting data\", \"Combining multiple data points into a summary\", \"Encrypting data\", \"Backing up data\"],\n        \"correctAnswer\": 1,\n        \"category\": \"data\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Data aggregation is the process of gathering and summarizing data, often using functions like COUNT, SUM, AVG.\",\n        \"level_range\": [7, 16]\n    },\n    # =============== DATA - HARD ===============\n    {\n        \"question\": \"What is normalization in databases?\",\n        \"options\": [\"Making data smaller\", \"Organizing data to reduce redundancy\", \"Encrypting data\", \"Deleting duplicates\"],\n        \"correctAnswer\": 1,\n        \"category\": \"data\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"Normalization is the process of organizing a database to reduce data redundancy and improve data integrity.\",\n        \"level_range\": [15, 30]\n    },\n    {\n        \"question\": \"What is ACID in database transactions?\",\n        \"options\": [\"A chemical property\", \"Atomicity, Consistency, Isolation, Durability\", \"A query language\", \"A backup method\"],\n        \"correctAnswer\": 1,\n        \"category\": \"data\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"ACID (Atomicity, Consistency, Isolation, Durability) is a set of properties that guarantee reliable database transactions.\",\n        \"level_range\": [16, 30]\n    },\n    {\n        \"question\": \"What is a data warehouse?\",\n        \"options\": [\"A physical storage facility\", \"A system for reporting and analysis using data from multiple sources\", \"A backup system\", \"A type of NoSQL database\"],\n        \"correctAnswer\": 1,\n        \"category\": \"data\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"A data warehouse is a central repository that aggregates data from multiple sources for analysis and reporting.\",\n        \"level_range\": [17, 30]\n    },\n    \n    # =============== SECURITY - EASY ===============\n    {\n        \"question\": \"What is SQL injection?\",\n        \"options\": [\"A database optimization technique\", \"An attack that inserts malicious SQL code\", \"A way to speed up queries\", \"A backup method\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"SQL injection is an attack where malicious SQL code is inserted into application queries to manipulate the database.\",\n        \"level_range\": [1, 8]\n    },\n    {\n        \"question\": \"What is HTTPS?\",\n        \"options\": [\"A programming language\", \"A secure version of HTTP using encryption\", \"A database type\", \"A file format\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"HTTPS is the secure version of HTTP that encrypts communication between the browser and server using TLS/SSL.\",\n        \"level_range\": [1, 6]\n    },\n    {\n        \"question\": \"What is a password hash?\",\n        \"options\": [\"An encrypted password\", \"A one-way transformation of a password for secure storage\", \"A password hint\", \"A temporary password\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"easy\",\n        \"explanation\": \"Password hashing transforms passwords into fixed-length strings that cannot be reversed, providing secure storage.\",\n        \"level_range\": [1, 7]\n    },\n    # =============== SECURITY - MEDIUM ===============\n    {\n        \"question\": \"What is XSS (Cross-Site Scripting)?\",\n        \"options\": [\"A CSS framework\", \"An attack that injects malicious scripts into web pages\", \"A browser feature\", \"A server configuration\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"XSS is a security vulnerability that allows attackers to inject malicious scripts into web pages viewed by others.\",\n        \"level_range\": [7, 16]\n    },\n    {\n        \"question\": \"What is CORS?\",\n        \"options\": [\"A programming language\", \"Cross-Origin Resource Sharing security mechanism\", \"A database type\", \"A CSS property\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"CORS (Cross-Origin Resource Sharing) is a security mechanism that controls how web pages can request resources from different domains.\",\n        \"level_range\": [8, 17]\n    },\n    {\n        \"question\": \"What is the difference between authentication and authorization?\",\n        \"options\": [\"They are the same\", \"Authentication verifies identity, authorization grants access\", \"Authorization comes first\", \"Neither is important\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Authentication verifies who you are, while authorization determines what you're allowed to do.\",\n        \"level_range\": [6, 15]\n    },\n    {\n        \"question\": \"What is CSRF?\",\n        \"options\": [\"A file format\", \"Cross-Site Request Forgery attack\", \"A compression algorithm\", \"A caching mechanism\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"CSRF is an attack that tricks authenticated users into submitting unwanted requests to a web application.\",\n        \"level_range\": [9, 18]\n    },\n    {\n        \"question\": \"What is input validation?\",\n        \"options\": [\"User interface design\", \"Checking user input for correctness and safety before processing\", \"Database indexing\", \"Network monitoring\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"medium\",\n        \"explanation\": \"Input validation ensures that user-provided data meets expected criteria and is safe to process, preventing many attacks.\",\n        \"level_range\": [5, 14]\n    },\n    # =============== SECURITY - HARD ===============\n    {\n        \"question\": \"What is JWT token hijacking?\",\n        \"options\": [\"Creating tokens\", \"Stealing and misusing authentication tokens\", \"Token refresh\", \"Token generation\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"JWT hijacking occurs when an attacker steals a valid JWT token and uses it to impersonate the legitimate user.\",\n        \"level_range\": [16, 30]\n    },\n    {\n        \"question\": \"What is defense in depth?\",\n        \"options\": [\"Deep learning security\", \"Using multiple layers of security controls throughout a system\", \"Network depth analysis\", \"Code obfuscation\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"Defense in depth is a security strategy that uses multiple layers of controls, so if one fails, others provide protection.\",\n        \"level_range\": [17, 30]\n    },\n    {\n        \"question\": \"What is a zero-day vulnerability?\",\n        \"options\": [\"A minor bug\", \"A vulnerability unknown to software vendors and without a patch\", \"A testing technique\", \"A backup strategy\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"A zero-day vulnerability is a software flaw unknown to the vendor and has no available patch, making it highly dangerous.\",\n        \"level_range\": [18, 30]\n    },\n    {\n        \"question\": \"What is the OWASP Top 10?\",\n        \"options\": [\"A ranking of websites\", \"A list of the most critical web application security risks\", \"A testing framework\", \"A coding standard\"],\n        \"correctAnswer\": 1,\n        \"category\": \"security\",\n        \"difficulty\": \"hard\",\n        \"explanation\": \"The OWASP Top 10 is a regularly updated list of the most critical security risks to web applications.\",\n        \"level_range\": [15, 30]\n    }\n]\n\ndef calculate_question_score(question, user_level, career_path, target_difficulty=None):\n    \"\"\"Calculate a relevance score for a question based on user profile using ML models\"\"\"\n    models = load_models()\n    score = 0.0\n    \n    level_range = question.get(\"level_range\")\n    if not level_range:\n        level_range = get_default_level_range(question.get(\"difficulty\", \"medium\"))\n    if level_range[0] <= user_level <= level_range[1]:\n        score += 2.0\n        optimal_level = (level_range[0] + level_range[1]) / 2\n        level_distance = abs(user_level - optimal_level)\n        max_distance = (level_range[1] - level_range[0]) / 2\n        score += 1.0 * (1 - level_distance / max(max_distance, 1))\n    else:\n        distance = min(abs(user_level - level_range[0]), abs(user_level - level_range[1]))\n        score -= distance * 0.1\n    \n    category_weights = {\n        \"frontend\": {\"frontend\": 2.0, \"algorithms\": 1.0, \"security\": 0.5},\n        \"backend\": {\"backend\": 2.0, \"data\": 1.5, \"algorithms\": 1.0, \"security\": 1.0},\n        \"data\": {\"data\": 2.0, \"algorithms\": 1.5, \"backend\": 1.0},\n        \"cloud\": {\"backend\": 1.5, \"security\": 1.5, \"data\": 1.0},\n        \"mobile\": {\"frontend\": 1.5, \"backend\": 1.0, \"algorithms\": 1.0},\n        \"security\": {\"security\": 2.0, \"backend\": 1.0, \"algorithms\": 0.5},\n        \"fullstack\": {\"frontend\": 1.5, \"backend\": 1.5, \"algorithms\": 1.0, \"data\": 1.0, \"security\": 0.5}\n    }\n    \n    weights = category_weights.get(career_path, category_weights[\"fullstack\"])\n    category_score = weights.get(question[\"category\"], 0.3)\n    score += category_score\n    \n    if target_difficulty:\n        difficulty_map = {\"easy\": 1, \"medium\": 2, \"hard\": 3}\n        target_val = difficulty_map.get(target_difficulty, 2)\n        question_val = difficulty_map.get(question[\"difficulty\"], 2)\n        diff_match = 1.0 - abs(target_val - question_val) * 0.3\n        score += diff_match\n    \n    if models:\n        try:\n            if \"question_classifier\" in models and \"question_vectorizer\" in models:\n                vectorizer = models[\"question_vectorizer\"]\n                classifier = models[\"question_classifier\"]\n                text_vector = vectorizer.transform([question[\"question\"]])\n                prediction_proba = classifier.predict_proba(text_vector)\n                max_confidence = np.max(prediction_proba)\n                score += max_confidence * 0.5\n        except Exception:\n            pass\n    \n    score += random.uniform(0, 0.3)\n    \n    return score\n\ndef generate_quiz(data):\n    \"\"\"Generate quiz questions using ML-guided selection with randomization\"\"\"\n    models = load_models()\n    \n    category = data.get(\"category\", \"mixed\")\n    difficulty = data.get(\"difficulty\", \"medium\")\n    career_path = data.get(\"career_path\", \"fullstack\")\n    count = data.get(\"count\", 5)\n    level = data.get(\"level\", 10)\n    \n    level_to_difficulty = {\n        (1, 5): \"easy\",\n        (6, 12): \"medium\" if difficulty == \"medium\" else difficulty,\n        (13, 19): \"medium\",\n        (20, 30): \"hard\"\n    }\n    \n    if difficulty == \"medium\":\n        for range_tuple, diff in level_to_difficulty.items():\n            if range_tuple[0] <= level <= range_tuple[1]:\n                difficulty = diff\n                break\n    \n    # Filter available questions\n    available_questions = []\n    for q in QUESTION_BANK:\n        if category != \"mixed\" and q[\"category\"] != category:\n            continue\n        available_questions.append(q)\n    \n    if not available_questions:\n        available_questions = QUESTION_BANK.copy()\n    \n    # Score and sort questions\n    scored_questions = []\n    for q in available_questions:\n        score = calculate_question_score(q, level, career_path, difficulty)\n        scored_questions.append((score, q))\n    \n    scored_questions.sort(key=lambda x: x[0], reverse=True)\n    \n    # Add strong randomization to prevent repetition\n    # Take top 50% of scored questions and shuffle them\n    top_half_count = max(count * 3, len(scored_questions) // 2)\n    top_candidates = [q for score, q in scored_questions[:top_half_count]]\n    random.shuffle(top_candidates)\n    \n    selected_questions = []\n    used_questions = set()  # Track by question text to avoid exact duplicates\n    used_categories = set()\n    \n    if category == \"mixed\":\n        # Ensure diversity across categories\n        for q in top_candidates:\n            if len(selected_questions) >= count:\n                break\n            \n            # Skip if we've seen this exact question\n            if q[\"question\"] in used_questions:\n                continue\n            \n            cat = q[\"category\"]\n            if cat not in used_categories or len(used_categories) >= 4:\n                selected_questions.append(q)\n                used_questions.add(q[\"question\"])\n                used_categories.add(cat)\n        \n        # Fill remaining slots\n        while len(selected_questions) < count:\n            for q in top_candidates:\n                if q[\"question\"] not in used_questions:\n                    selected_questions.append(q)\n                    used_questions.add(q[\"question\"])\n                    if len(selected_questions) >= count:\n                        break\n            break\n    else:\n        # Single category: select from shuffled top candidates\n        for q in top_candidates[:count * 2]:  # Take 2x to ensure variety\n            if len(selected_questions) >= count:\n                break\n            if q[\"question\"] not in used_questions:\n                selected_questions.append(q)\n                used_questions.add(q[\"question\"])\n    \n    # Final shuffle\n    random.shuffle(selected_questions)\n    \n    result = []\n    for q in selected_questions[:count]:\n        result.append({\n            \"question\": q[\"question\"],\n            \"options\": q[\"options\"],\n            \"correctAnswer\": q[\"correctAnswer\"],\n            \"category\": q[\"category\"],\n            \"difficulty\": q[\"difficulty\"],\n            \"explanation\": q[\"explanation\"]\n        })\n    \n    print(f\"[ML Quiz] Generated {len(result)} unique questions from {len(available_questions)} available\", file=sys.stderr)\n    \n    return result\n\ndef suggest_study(data):\n    \"\"\"Generate study suggestions using ML model\"\"\"\n    models = load_models()\n    \n    level = data.get(\"level\", 1)\n    career_path = data.get(\"career_path\", \"fullstack\")\n    frontend_score = data.get(\"frontend_score\", 0.5)\n    backend_score = data.get(\"backend_score\", 0.5)\n    data_score = data.get(\"data_score\", 0.5)\n    algo_score = data.get(\"algo_score\", 0.5)\n    security_score = data.get(\"security_score\", 0.5)\n    weak_categories = data.get(\"weak_categories\", [])\n    \n    suggestions = []\n    \n    scores = {\n        \"frontend\": frontend_score,\n        \"backend\": backend_score,\n        \"data\": data_score,\n        \"algorithms\": algo_score,\n        \"security\": security_score\n    }\n    \n    career_focus = {\n        \"frontend\": [\"frontend\", \"algorithms\"],\n        \"backend\": [\"backend\", \"data\", \"algorithms\"],\n        \"data\": [\"data\", \"algorithms\", \"backend\"],\n        \"cloud\": [\"backend\", \"security\"],\n        \"mobile\": [\"frontend\", \"backend\"],\n        \"security\": [\"security\", \"backend\"],\n        \"fullstack\": [\"frontend\", \"backend\", \"algorithms\"]\n    }\n    \n    focus_areas = career_focus.get(career_path, [\"algorithms\"])\n    \n    if models and \"study_suggester\" in models:\n        try:\n            suggester = models[\"study_suggester\"]\n            features = np.array([[level, frontend_score, backend_score, data_score, algo_score, security_score]])\n            predictions = suggester.predict(features)\n        except Exception:\n            pass\n    \n    sorted_scores = sorted(scores.items(), key=lambda x: x[1])\n    \n    for category, score in sorted_scores[:3]:\n        priority = \"high\" if score < 0.4 else (\"medium\" if score < 0.6 else \"low\")\n        \n        if category in focus_areas or category in weak_categories:\n            priority = \"high\" if priority != \"high\" else priority\n        \n        topic_map = {\n            \"frontend\": \"Career Path Development\",\n            \"backend\": \"Backend Architecture\",\n            \"data\": \"Data Structures & Analysis\",\n            \"algorithms\": \"Algorithm Optimization\",\n            \"security\": \"Security Best Practices\"\n        }\n        \n        reason_map = {\n            \"frontend\": f\"Your frontend skills ({int(score*100)}%) could use improvement for your {career_path} career path.\",\n            \"backend\": f\"Backend knowledge ({int(score*100)}%) is essential for building robust applications.\",\n            \"data\": f\"Data skills ({int(score*100)}%) will help you make better data-driven decisions.\",\n            \"algorithms\": f\"Algorithm understanding ({int(score*100)}%) is fundamental for technical interviews.\",\n            \"security\": f\"Security knowledge ({int(score*100)}%) is critical for building safe applications.\"\n        }\n        \n        action_map = {\n            \"frontend\": \"Practice React components and CSS layouts\",\n            \"backend\": \"Build a REST API with Node.js and Express\",\n            \"data\": \"Work through SQL exercises and data modeling\",\n            \"algorithms\": \"Solve algorithm challenges on practice platforms\",\n            \"security\": \"Learn about OWASP top 10 vulnerabilities\"\n        }\n        \n        suggestions.append({\n            \"topic\": topic_map.get(category, category.title()),\n            \"reason\": reason_map.get(category, f\"Improve your {category} skills.\"),\n            \"recommendedAction\": action_map.get(category, f\"Practice {category} exercises.\"),\n            \"priority\": priority\n        })\n    \n    suggestions.sort(key=lambda x: {\"high\": 0, \"medium\": 1, \"low\": 2}[x[\"priority\"]])\n    \n    return suggestions\n\ndef recommend_career(data):\n    \"\"\"Recommend career path using ML model\"\"\"\n    models = load_models()\n    \n    visual_design = data.get(\"visual_design\", 3)\n    backend_pref = data.get(\"backend_pref\", 3)\n    math_stats = data.get(\"math_stats\", 3)\n    web_apps = data.get(\"web_apps\", 3)\n    data_interest = data.get(\"data_interest\", 3)\n    cloud_interest = data.get(\"cloud_interest\", 3)\n    mobile_interest = data.get(\"mobile_interest\", 3)\n    security_interest = data.get(\"security_interest\", 3)\n    frontend_perf = data.get(\"frontend_perf\", 0.5)\n    backend_perf = data.get(\"backend_perf\", 0.5)\n    data_perf = data.get(\"data_perf\", 0.5)\n    algo_perf = data.get(\"algo_perf\", 0.5)\n    \n    # ML gradient-boosting recommender removed; fallback heuristic used below.\n    \n    career_scores = {\n        \"frontend\": (visual_design * 0.4) + (web_apps * 0.3) + (frontend_perf * 5 * 0.3),\n        \"backend\": (backend_pref * 0.4) + (web_apps * 0.2) + (backend_perf * 5 * 0.4),\n        \"data\": (math_stats * 0.4) + (data_interest * 0.3) + (data_perf * 5 * 0.3),\n        \"cloud\": (backend_pref * 0.3) + (cloud_interest * 0.4) + (backend_perf * 5 * 0.3),\n        \"mobile\": (visual_design * 0.3) + (mobile_interest * 0.4) + (frontend_perf * 5 * 0.3),\n        \"security\": (security_interest * 0.5) + (backend_perf * 5 * 0.3) + (algo_perf * 5 * 0.2),\n    }\n    \n    fullstack_score = (career_scores[\"frontend\"] + career_scores[\"backend\"]) / 2\n    career_scores[\"fullstack\"] = fullstack_score\n    \n    total_score = sum(career_scores.values())\n    probabilities = {k: v / total_score for k, v in career_scores.items()}\n    \n    recommended = max(career_scores.items(), key=lambda x: x[1])\n    recommended_path = recommended[0]\n    \n    max_prob = max(probabilities.values())\n    confidence = min(0.95, max_prob * 1.5)\n    \n    return {\n        \"recommended_path\": recommended_path,\n        \"probabilities\": probabilities,\n        \"confidence\": confidence\n    }\n\ndef classify_question(data):\n    \"\"\"Classify a question into a category using ML model\"\"\"\n    models = load_models()\n    text = data.get(\"text\", \"\")\n    \n    if models and \"question_classifier\" in models and \"question_vectorizer\" in models:\n        try:\n            vectorizer = models[\"question_vectorizer\"]\n            classifier = models[\"question_classifier\"]\n            label_encoder = models.get(\"question_label_encoder\")\n            \n            text_vector = vectorizer.transform([text])\n            prediction = classifier.predict(text_vector)[0]\n            prediction_proba = classifier.predict_proba(text_vector)[0]\n            confidence = float(np.max(prediction_proba))\n            \n            if label_encoder:\n                category = label_encoder.inverse_transform([prediction])[0]\n            else:\n                category = str(prediction)\n            \n            return {\n                \"category\": category,\n                \"confidence\": min(0.95, confidence)\n            }\n        except Exception as e:\n            print(f\"ML classification failed: {e}\", file=sys.stderr)\n    \n    keywords = {\n        \"frontend\": [\"css\", \"html\", \"react\", \"vue\", \"angular\", \"dom\", \"ui\", \"ux\", \"style\", \"component\", \"javascript\", \"browser\"],\n        \"backend\": [\"api\", \"server\", \"database\", \"rest\", \"http\", \"node\", \"express\", \"endpoint\", \"request\", \"response\", \"middleware\"],\n        \"data\": [\"sql\", \"query\", \"table\", \"schema\", \"index\", \"normalization\", \"data\", \"analytics\", \"pandas\", \"numpy\"],\n        \"algorithms\": [\"complexity\", \"sort\", \"search\", \"tree\", \"graph\", \"recursion\", \"dynamic\", \"hash\", \"array\", \"linked\"],\n        \"security\": [\"xss\", \"sql injection\", \"csrf\", \"authentication\", \"authorization\", \"encryption\", \"https\", \"cors\", \"vulnerability\"]\n    }\n    \n    text_lower = text.lower()\n    \n    scores = {}\n    for category, words in keywords.items():\n        score = sum(1 for word in words if word in text_lower)\n        scores[category] = score\n    \n    if max(scores.values()) == 0:\n        return {\"category\": \"algorithms\", \"confidence\": 0.3}\n    \n    best_category = max(scores.items(), key=lambda x: x[1])\n    total = sum(scores.values())\n    confidence = best_category[1] / total if total > 0 else 0.3\n    \n    return {\n        \"category\": best_category[0],\n        \"confidence\": min(0.95, confidence)\n    }\n\ndef health_check(data):\n    \"\"\"Check if the ML service is healthy\"\"\"\n    models = load_models()\n    model_count = len(models)\n    \n    ml_models_available = []\n    if \"question_classifier\" in models:\n        ml_models_available.append(\"question_classifier\")\n    if \"difficulty_predictor\" in models:\n        ml_models_available.append(\"difficulty_predictor\")\n    if \"random_forest\" in models:\n        ml_models_available.append(\"random_forest\")\n    if \"study_suggester\" in models:\n        ml_models_available.append(\"study_suggester\")\n    \n    return {\n        \"status\": \"healthy\",\n        \"models_loaded\": model_count,\n        \"ml_models_available\": ml_models_available,\n        \"question_bank_size\": len(QUESTION_BANK),\n        \"using_ml\": len(ml_models_available) > 0\n    }\n\ndef main():\n    if len(sys.argv) < 2:\n        print(json.dumps({\"success\": False, \"error\": \"No command provided\"}))\n        sys.exit(1)\n    \n    try:\n        request = json.loads(sys.argv[1])\n        command = request.get(\"command\")\n        data = request.get(\"data\", {})\n        \n        handlers = {\n            \"generate_quiz\": generate_quiz,\n            \"suggest_study\": suggest_study,\n            \"recommend_career\": recommend_career,\n            \"classify_question\": classify_question,\n            \"health_check\": health_check\n        }\n        \n        if command not in handlers:\n            error_msg = f\"Unknown command: {command}\"\n            log_prediction_request(command, data, error=error_msg)\n            print(json.dumps({\"success\": False, \"error\": error_msg}))\n            sys.exit(1)\n        \n        # Execute handler\n        result = handlers[command](data)\n        \n        # Log the request with result\n        log_prediction_request(command, data, result=result)\n        \n        print(json.dumps({\"success\": True, \"result\": result}))\n        \n    except json.JSONDecodeError as e:\n        error_msg = f\"Invalid JSON: {str(e)}\"\n        log_prediction_request(\"unknown\", {}, error=error_msg)\n        print(json.dumps({\"success\": False, \"error\": error_msg}))\n        sys.exit(1)\n    except Exception as e:\n        error_msg = str(e)\n        log_prediction_request(request.get(\"command\", \"unknown\") if 'request' in locals() else \"unknown\", \n                             request.get(\"data\", {}) if 'request' in locals() else {}, \n                             error=error_msg)\n        print(json.dumps({\"success\": False, \"error\": error_msg}))\n        sys.exit(1)\n\nif __name__ == \"__main__\":\n    main()\n","path":null,"size_bytes":54653,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"FIREBASE_SETUP.md":{"content":"# Firebase Firestore Setup Guide\n\n## Step 1: Enable Firestore Database\n\n1. **Visit Firebase Console:**\n   - Go to: https://console.firebase.google.com/project/careerquest-7a741/firestore\n   - Sign in with your Google account\n\n2. **Create Firestore Database:**\n   - Click \"Create database\" button\n   - Choose **Production mode** (we'll set custom rules next)\n   - Select a location (choose closest to you):\n     - `us-central1` (Iowa, USA)\n     - `us-east1` (South Carolina, USA)\n     - `europe-west1` (Belgium)\n     - `asia-northeast1` (Tokyo, Japan)\n   - Click \"Enable\"\n\n3. **Configure Firestore Rules** (Development Mode):\n   - After database is created, go to the \"Rules\" tab\n   - Replace the rules with:\n   ```\n   rules_version = '2';\n   service cloud.firestore {\n     match /databases/{database}/documents {\n       match /{document=**} {\n         allow read, write: if true;\n       }\n     }\n   }\n   ```\n   - Click \"Publish\"\n   \n   ‚ö†Ô∏è **Important**: These permissive rules are ONLY for development. For production, implement proper authentication-based rules.\n\n## Step 2: Run Database Seeding Script\n\nAfter Firestore is enabled, run the seed script to populate initial data:\n\n```bash\ntsx server/seed-firestore.ts\n```\n\nThis will create:\n- **2 Test Users:**\n  - Student: `test@careerquest.com` / `password123`\n  - Admin: `admin@careerquest.com` / `admin123`\n  \n- **5 Career Paths:**\n  - Full Stack Development\n  - Data Science & AI\n  - Cloud & DevOps\n  - Mobile Development\n  - Cybersecurity\n\n- **5 Badges:**\n  - First Steps (Common)\n  - Code Warrior (Rare)\n  - AI Explorer (Epic)\n  - System Architect (Epic)\n  - Cyber Sentinel (Legendary)\n\n- **Sample Quizzes & Questions:**\n  - Frontend fundamentals\n  - Backend concepts\n  - Data structures\n  - Security basics\n\n- **Code Challenges:**\n  - FizzBuzz (Easy)\n  - Two Sum (Medium)\n  - Reverse String (Easy)\n\n## Step 3: Verify Setup\n\n1. **Check Firebase Console:**\n   - Go to Firestore Data tab\n   - You should see collections: `users`, `careerPaths`, `badges`, `quizzes`, `questions`, `codeChallenges`\n\n2. **Test Login:**\n   - Visit your app's landing page\n   - Click \"Sign Up\" or \"Log In\"\n   - Use test credentials: `test@careerquest.com` / `password123`\n   - You should be redirected to the dashboard\n\n## Troubleshooting\n\n**Error: \"Firestore API has not been used\"**\n- Wait 2-3 minutes after enabling Firestore for the API to fully activate\n- Try running the seed script again\n\n**Error: \"PERMISSION_DENIED\"**\n- Check that you published the development rules\n- Verify rules show `allow read, write: if true;`\n\n**No data showing after seeding:**\n- Check the seed script output for errors\n- Verify your Firebase project ID matches in `.env` or environment variables\n","path":null,"size_bytes":2717,"size_tokens":null},"ML_QUESTION_GENERATION_GUIDE.md":{"content":"\n# ML-Powered Question Generation System Guide\n\n## Overview\n\nYour learning platform uses a **hybrid approach** combining:\n1. **Custom scikit-learn ML models** (trained on real question data)\n2. **Hugging Face AI models** (for advanced question generation)\n3. **Template-based fallbacks** (for reliability)\n\nThis document explains how everything works together.\n\n---\n\n## System Architecture\n\n### 1. Real Question Dataset (`ml_model/question_dataset.py`)\n\n**Purpose**: Store real questions with extracted features for ML training.\n\n**Structure**:\n```python\n{\n  \"question\": \"What does the 'virtual DOM' in React primarily help with?\",\n  \"options\": [\"Database connections\", \"Performance optimization...\", ...],\n  \"correct_answer\": 1,\n  \"category\": \"frontend\",\n  \"difficulty\": \"easy\",\n  \"explanation\": \"The virtual DOM is a lightweight copy...\",\n  \"features\": {\n    \"word_count\": 9,\n    \"has_code_term\": 1,\n    \"complexity_score\": 0.3,\n    \"topic_keywords\": [\"react\", \"dom\", \"virtual\", \"performance\"],\n    \"requires_practical_knowledge\": 1,\n    \"abstraction_level\": 0.4\n  }\n}\n```\n\n**Current Dataset Size**: 15 real questions across 6 categories:\n- Frontend (4 questions)\n- Backend (3 questions)\n- Data Science (3 questions)\n- Algorithms (2 questions)\n- Security (2 questions)\n- Cloud (1 question)\n\n**How Features Are Extracted**:\n- `word_count`: Length of question text\n- `has_code_term`: 1 if contains programming keywords, 0 otherwise\n- `complexity_score`: 0-1 scale (easy=0.2, medium=0.5, hard=0.9)\n- `abstraction_level`: How abstract vs. concrete the question is\n- `topic_keywords`: Important words that identify the topic\n\n---\n\n### 2. ML Model Training (`ml_model/train_models_v2.py`)\n\n**4 Models Are Trained**:\n\n#### Model 1: Question Feature Classifier\n- **Algorithm**: Gradient Boosting Classifier\n- **Input**: 6 numerical features from questions\n- **Output**: Category prediction (frontend, backend, data, etc.)\n- **Training Data**: 15 real questions with extracted features\n- **Purpose**: Classify new questions into categories\n\n#### Model 2: Difficulty Classifier\n- **Algorithm**: Naive Bayes\n- **Input**: Same 6 features\n- **Output**: Difficulty level (easy, medium, hard)\n- **Training Data**: 15 real questions\n- **Purpose**: Predict question difficulty\n\n#### Model 3: Text-Based Question Classifier\n- **Algorithm**: Naive Bayes + TF-IDF\n- **Input**: Question text (converted to TF-IDF vectors)\n- **Output**: Category prediction\n- **Training Data**: 15 question texts\n- **Purpose**: Classify questions based on text content alone\n\n#### Model 4: Question Pattern Learner\n- **Algorithm**: Random Forest\n- **Input**: Question structure features (word count, complexity, etc.)\n- **Output**: Category prediction\n- **Training Data**: 15 questions\n- **Purpose**: Learn patterns in how questions are structured\n\n**Training Output**:\n```\n[1/4] Training Question Classifier with real data...\nDataset size: 15 questions\nCategories: {'frontend', 'backend', 'data', 'algorithms', 'security'}\nDifficulties: {'easy', 'medium', 'hard'}\n‚úì Saved: question_feature_classifier.pkl\n‚úì Saved: difficulty_classifier_v2.pkl\n```\n\n---\n\n### 3. Hybrid Question Generator (`ml_model/hybrid_generator.py`)\n\n**Purpose**: Bridge between ML models and AI generation.\n\n**Two Main Functions**:\n\n#### A. Generate ML-Guided Prompts\n```python\ndef generate_ml_guided_prompt(category, difficulty, career_path):\n    # 1. Load ML models\n    models = load_models()\n    \n    # 2. Find similar questions from templates (real dataset)\n    category_questions = [q for q in templates if q[\"category\"] == category]\n    difficulty_questions = [q for q in category_questions if q[\"difficulty\"] == difficulty]\n    \n    # 3. Create example-based prompt with style guide\n    return {\n        \"category\": category,\n        \"difficulty\": difficulty,\n        \"examples\": difficulty_questions[:2],  # Use 2 real examples\n        \"style_guide\": {\n            \"word_count_range\": [8, 15],\n            \"complexity\": examples[0][\"features\"][\"complexity_score\"],\n            \"requires_code\": examples[0][\"features\"][\"has_code_term\"]\n        }\n    }\n```\n\n**What This Does**:\n- Finds 2 real questions matching the requested category/difficulty\n- Extracts their style characteristics\n- Creates a prompt template for Hugging Face to follow\n\n#### B. Validate Generated Questions\n```python\ndef validate_generated_question(question, expected_category, expected_difficulty):\n    # 1. Extract features from the generated question\n    features = extract_question_features(question)\n    \n    # 2. Use ML model to predict category\n    predicted_cat = models[\"feature_classifier\"].predict([features])[0]\n    \n    # 3. Check if prediction matches expectation\n    category_match = predicted_cat == expected_category\n    \n    # 4. Check quality criteria\n    has_question = len(question.get(\"question\", \"\")) > 10\n    has_options = len(question.get(\"options\", [])) == 4\n    has_answer = \"correctAnswer\" in question\n    has_explanation = len(question.get(\"explanation\", \"\")) > 20\n    \n    return category_match and has_question and has_options and has_answer and has_explanation\n```\n\n**What This Does**:\n- Uses trained ML models to verify generated questions\n- Ensures questions match the requested category\n- Validates question structure and quality\n\n---\n\n### 4. Hugging Face AI Integration (`server/huggingface-client.ts`)\n\n**Models Used**:\n- **Question Generation**: `mistralai/Mistral-7B-Instruct-v0.2`\n- **Question Classification**: `facebook/bart-large-mnli`\n\n#### Question Generation Flow:\n\n```typescript\nexport async function generateQuestionsHF(\n  topic: string,\n  difficulty: string,\n  careerPath?: string,\n  count: number = 5\n): Promise<any[]> {\n  \n  // 1. Create context-aware prompt\n  const prompt = `You are an expert computer science educator. Generate ${count} high-quality multiple-choice questions about ${topic}.\n\nRequirements:\n- Difficulty: ${difficulty}\n- Context: relevant to ${careerPath} career path\n- Format: Each question must be a valid JSON object\n\nOutput format (JSON array):\n[\n  {\n    \"question\": \"Clear, specific question text?\",\n    \"options\": [\"Option A\", \"Option B\", \"Option C\", \"Option D\"],\n    \"correctAnswer\": 1,\n    \"category\": \"${topic}\",\n    \"difficulty\": \"${difficulty}\",\n    \"explanation\": \"Detailed explanation...\"\n  }\n]`;\n  \n  // 2. Call Hugging Face API\n  const result = await hf.textGeneration({\n    model: \"mistralai/Mistral-7B-Instruct-v0.2\",\n    inputs: prompt,\n    parameters: {\n      max_new_tokens: 1500,\n      temperature: 0.7,\n      top_p: 0.9,\n    },\n  });\n  \n  // 3. Extract and validate JSON questions\n  const questions = extractQuestionsFromText(result.generated_text);\n  \n  // 4. Clean and validate each question\n  return questions\n    .filter(q => validateQuestionStructure(q))\n    .map(q => cleanQuestion(q))\n    .slice(0, count);\n}\n```\n\n**Key Features**:\n- Uses ML-guided prompts for consistency\n- Validates generated JSON structure\n- Falls back to templates if AI fails\n\n---\n\n### 5. Practice Quiz Generation Flow (`server/routes.ts`)\n\n**Complete Flow When User Clicks \"Generate Quiz\"**:\n\n```\nUser Request\n    ‚Üì\n1. Check if AI generation requested (useAI flag)\n    ‚Üì\n2A. If useAI = true:\n    ‚îú‚îÄ‚Üí Get ML-guided prompt from hybrid_generator.py\n    ‚îú‚îÄ‚Üí Call Hugging Face with prompt + examples\n    ‚îú‚îÄ‚Üí Validate generated questions using ML models\n    ‚îî‚îÄ‚Üí Return validated AI questions\n    \n2B. If useAI = false (default):\n    ‚îú‚îÄ‚Üí Use template-based selection\n    ‚îú‚îÄ‚Üí Filter questions by category/difficulty\n    ‚îú‚îÄ‚Üí Score questions based on user performance\n    ‚îî‚îÄ‚Üí Return top 5 questions\n    ‚Üì\n3. Cache quiz server-side (prevent answer tampering)\n    ‚Üì\n4. Return quiz to frontend (without correct answers)\n    ‚Üì\n5. User submits answers\n    ‚Üì\n6. Validate answers server-side using cached data\n    ‚Üì\n7. Award XP only on first completion (prevent farming)\n```\n\n**Code Implementation**:\n```typescript\napp.post(\"/api/quizzes/generate-practice\", async (req, res) => {\n  const { careerPath, topic, difficulty, useAI } = req.body;\n  \n  let questions;\n  \n  if (useAI && topic) {\n    // AI-Powered Generation\n    const { generateQuestionsHF } = await import(\"./huggingface-client\");\n    \n    try {\n      questions = await generateQuestionsHF(\n        topic,\n        difficulty || \"medium\",\n        careerPath,\n        5\n      );\n    } catch (aiError) {\n      // Fallback to templates if AI fails\n      questions = await generatePracticeQuiz(careerPath, userLevel, topic, difficulty);\n    }\n  } else {\n    // Template-Based Selection (Default)\n    questions = await generatePracticeQuiz(careerPath, userLevel, topic, difficulty);\n  }\n  \n  // Cache quiz server-side\n  const quizId = `practice-${Date.now()}-${userId}`;\n  practiceQuizCache.set(quizId, { questions, userId, createdAt: Date.now() });\n  \n  return { quiz: { id: quizId, questions } };\n});\n```\n\n---\n\n## How It All Works Together\n\n### Example: User Generates a \"Frontend\" Quiz\n\n**Step 1: User Request**\n```\nTopic: \"React Hooks\"\nDifficulty: \"medium\"\nCareer Path: \"Frontend Developer\"\nUse AI: true\n```\n\n**Step 2: ML Model Guidance**\n```python\n# hybrid_generator.py finds similar questions\nsimilar_questions = [\n  {\n    \"question\": \"What is the purpose of the useEffect hook in React?\",\n    \"difficulty\": \"medium\",\n    \"complexity_score\": 0.5\n  }\n]\n\n# Creates style guide\nstyle_guide = {\n  \"word_count_range\": [8, 12],\n  \"complexity\": 0.5,\n  \"requires_code_terms\": true\n}\n```\n\n**Step 3: Hugging Face Generation**\n```\nPrompt: \"Generate 5 medium-difficulty questions about React Hooks for Frontend Developers.\nFollow this style: [examples from ML dataset]\"\n\nAI Response: [\n  {\n    \"question\": \"Which hook should you use to perform side effects in React functional components?\",\n    \"options\": [\"useState\", \"useEffect\", \"useContext\", \"useMemo\"],\n    \"correctAnswer\": 1,\n    \"explanation\": \"useEffect is specifically designed for side effects...\"\n  },\n  ...\n]\n```\n\n**Step 4: ML Validation**\n```python\n# Validate each generated question\nfor question in ai_questions:\n    features = extract_features(question)\n    predicted_category = ml_model.predict(features)  # Should be \"frontend\"\n    predicted_difficulty = difficulty_model.predict(features)  # Should be \"medium\"\n    \n    if predicted_category == \"frontend\" and predicted_difficulty == \"medium\":\n        validated_questions.append(question)\n```\n\n**Step 5: Return to User**\n```json\n{\n  \"quiz\": {\n    \"id\": \"practice-1234567890-user123\",\n    \"title\": \"React Hooks Practice Quiz\",\n    \"questions\": [5 validated AI-generated questions],\n    \"generatedByAI\": true\n  }\n}\n```\n\n---\n\n## Key Advantages of This System\n\n### 1. **Quality Assurance**\n- ML models validate AI-generated questions\n- Questions must match expected category and difficulty\n- Structural validation ensures proper format\n\n### 2. **Consistency**\n- Real question dataset provides templates\n- ML models learn patterns from real data\n- AI follows style guide from similar questions\n\n### 3. **Reliability**\n- Multiple fallback layers:\n  1. AI generation (Hugging Face)\n  2. Template-based selection (ML-guided)\n  3. Hardcoded question bank (last resort)\n\n### 4. **Adaptability**\n- System learns from 15 real questions\n- Can expand dataset by adding more questions\n- ML models retrain automatically with new data\n\n### 5. **Security**\n- Server-side answer validation\n- XP awarded only once per quiz\n- Cached quizzes prevent tampering\n\n---\n\n## Current Limitations & Future Improvements\n\n### Limitations:\n1. **Small Dataset**: Only 15 real questions for training\n2. **Category Coverage**: Not all topics have equal representation\n3. **AI Consistency**: Hugging Face responses can vary in quality\n\n### Recommended Improvements:\n\n#### 1. Expand Real Question Dataset\n```python\n# Add 100+ real questions across all categories\nQUESTION_DATASET = [\n  # Add more frontend questions (target: 30)\n  # Add more backend questions (target: 30)\n  # Add more data science questions (target: 30)\n  # Add more algorithms questions (target: 30)\n  # Add more security questions (target: 30)\n  # Add more cloud questions (target: 30)\n]\n```\n\n#### 2. Fine-Tune ML Models\n```python\n# Retrain with larger dataset\nn_questions = 200  # Instead of 15\nX, y = get_feature_matrix()  # Larger feature matrix\nmodel.fit(X, y)  # Better predictions\n```\n\n#### 3. Implement Question Quality Scoring\n```python\ndef score_question_quality(question):\n    scores = {\n        \"clarity\": check_clarity(question),\n        \"difficulty\": check_difficulty_match(question),\n        \"educational_value\": check_learning_objective(question),\n        \"answer_distribution\": check_option_quality(question)\n    }\n    return sum(scores.values()) / len(scores)\n```\n\n#### 4. Add User Feedback Loop\n```typescript\n// Allow users to rate generated questions\napp.post(\"/api/questions/:id/feedback\", async (req, res) => {\n  const { rating, issues } = req.body;\n  \n  // Store feedback\n  await storage.createQuestionFeedback(questionId, userId, rating, issues);\n  \n  // Use feedback to improve future generation\n  if (rating < 3) {\n    await flagQuestionForReview(questionId);\n  }\n});\n```\n\n---\n\n## Testing Your System\n\n### 1. Test ML Model Accuracy\n```bash\ncd ml_model\npython3 train_models_v2.py\n# Check console output for accuracy scores\n```\n\n### 2. Test Question Generation\n```bash\n# Start your server\nnpm run dev\n\n# Test AI generation endpoint\ncurl -X POST http://localhost:5000/api/quizzes/generate-practice \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"topic\": \"frontend\",\n    \"difficulty\": \"medium\",\n    \"useAI\": true\n  }'\n```\n\n### 3. Test Validation\n```python\n# Run hybrid generator directly\npython3 ml_model/hybrid_generator.py '{\"command\":\"validate_questions\",\"data\":{\"questions\":[...],\"category\":\"frontend\",\"difficulty\":\"medium\"}}'\n```\n\n---\n\n## Conclusion\n\nYour system combines:\n- **Real question data** (15 curated examples)\n- **ML models** (trained on real patterns)\n- **Hugging Face AI** (for generation)\n- **Validation layers** (quality assurance)\n- **Template fallbacks** (reliability)\n\nThis creates a robust, adaptive question generation system that maintains quality while scaling to user needs.\n\n**Next Steps**:\n1. Expand question dataset to 200+ real questions\n2. Retrain ML models with larger dataset\n3. Test AI generation across all categories\n4. Implement user feedback loop\n5. Monitor question quality metrics\n\n---\n\n## File Reference\n\n**Core Files**:\n- `ml_model/question_dataset.py` - Real question data\n- `ml_model/train_models_v2.py` - ML model training\n- `ml_model/hybrid_generator.py` - ML-AI bridge\n- `server/huggingface-client.ts` - AI generation\n- `server/routes.ts` - API endpoints\n\n**Saved Models** (`.pkl` files in `ml_model/saved_models/`):\n- `question_feature_classifier.pkl`\n- `difficulty_classifier_v2.pkl`\n- `category_encoder_v2.pkl`\n- `text_question_classifier.pkl`\n- `question_pattern_model.pkl`\n\n**Training Data**:\n- `question_templates.json` - Question patterns\n- `question_dataset.json` - Exported dataset\n","path":null,"size_bytes":14997,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport passport from \"passport\";\nimport multer from \"multer\";\nimport * as client from \"openid-client\";\nimport { storage } from \"./storage-firestore\";\nimport { hashPassword, requireAuth, requireAdmin } from \"./auth\";\nimport type { User } from \"@shared/schema\";\nimport { insertUserSchema, registerRequestSchema } from \"@shared/schema\";\nimport { generateQuestionsFromText, generateStudySuggestions, generatePracticeQuiz } from \"./learning-intelligence\";\nimport { db } from \"./firebase\";\nimport { collection, getDocs, updateDoc } from \"firebase/firestore\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\n\n// In-memory cache for practice quizzes (quiz ID -> quiz data with correct answers)\n// This prevents XP farming by validating answers server-side\nconst practiceQuizCache = new Map<string, {\n  quiz?: any;\n  questions: any[];\n  userId?: string;\n  createdAt: number;\n}>();\n\n// Track completed practice quizzes per user (userId -> Set of completed quiz IDs)\n// Prevents XP farming by awarding XP only once per quiz\nconst completedPracticeQuizzes = new Map<string, Set<string>>();\n\n// Clean up old practice quizzes (older than 1 hour)\nsetInterval(() => {\n  const oneHourAgo = Date.now() - (60 * 60 * 1000);\n  Array.from(practiceQuizCache.entries()).forEach(([id, data]) => {\n    if (data.createdAt < oneHourAgo) {\n      practiceQuizCache.delete(id);\n\n      // Clean up completion tracking for expired quizzes\n      Array.from(completedPracticeQuizzes.entries()).forEach(([userId, quizSet]) => {\n        quizSet.delete(id);\n        if (quizSet.size === 0) {\n          completedPracticeQuizzes.delete(userId);\n        }\n      });\n    }\n  });\n}, 15 * 60 * 1000); // Run cleanup every 15 minutes\n\n// Configure multer for file uploads (memory storage)\nconst upload = multer({\n  storage: multer.memoryStorage(),\n  limits: { fileSize: 10 * 1024 * 1024 } // 10MB limit\n});\n\n// Function to check and award badges\nasync function checkAndAwardBadges(userId: string) {\n  const user = await storage.getUser(userId);\n  if (!user) return;\n\n  const earnedBadges = await storage.getUserBadges(userId);\n  const earnedBadgeIds = new Set(earnedBadges.map(b => b.badgeId));\n  console.log(`[checkAndAwardBadges] User ${userId} (level ${user.level}) already has ${earnedBadgeIds.size} badges:`, Array.from(earnedBadgeIds));\n\n  const badgesToAward: { badgeId: string; reason: string }[] = [];\n\n  // Example badge logic:\n  // 1. First Code Challenge Completed\n  if (!earnedBadgeIds.has(\"badge_first_challenge\")) {\n    const attempts = await storage.getUserChallengeAttempts(userId, 1);\n    if (attempts.length > 0) {\n      badgesToAward.push({ badgeId: \"badge_first_challenge\", reason: \"Completed your first code challenge!\" });\n    }\n  }\n\n  // 2. Ten Code Challenges Completed\n  if (!earnedBadgeIds.has(\"badge_ten_challenges\")) {\n    const attempts = await storage.getUserChallengeAttempts(userId);\n    if (attempts.length >= 10) {\n      badgesToAward.push({ badgeId: \"badge_ten_challenges\", reason: \"Completed 10 code challenges!\" });\n    }\n  }\n\n  // 3. Perfect Score on a Challenge\n  if (!earnedBadgeIds.has(\"badge_perfect_score\")) {\n    const attempts = await storage.getUserChallengeAttempts(userId);\n    if (attempts.some((a: any) => a.passed)) {\n      badgesToAward.push({ badgeId: \"badge_perfect_score\", reason: \"Achieved a perfect score on a code challenge!\" });\n    }\n  }\n\n  // 4. Level 10 Reached\n  if (!earnedBadgeIds.has(\"badge_level_10\")) {\n    if (user.level >= 10) {\n      badgesToAward.push({ badgeId: \"badge_level_10\", reason: \"Reached Level 10!\" });\n    }\n  }\n\n  // 5. Level 20 Reached\n  if (!earnedBadgeIds.has(\"badge_level_20\")) {\n    if (user.level >= 20) {\n      badgesToAward.push({ badgeId: \"badge_level_20\", reason: \"Reached Level 20!\" });\n    }\n  }\n\n  // 6. First Quiz Completed\n  if (!earnedBadgeIds.has(\"badge_first_quiz\")) {\n    const quizAttempts = await storage.getUserQuizAttempts(userId, 1);\n    if (quizAttempts.length > 0) {\n      badgesToAward.push({ badgeId: \"badge_first_quiz\", reason: \"Completed your first quiz!\" });\n    }\n  }\n\n  // 7. Completed 5 Quizzes\n  if (!earnedBadgeIds.has(\"badge_five_quizzes\")) {\n    const quizAttempts = await storage.getUserQuizAttempts(userId);\n    if (quizAttempts.length >= 5) {\n      badgesToAward.push({ badgeId: \"badge_five_quizzes\", reason: \"Completed 5 quizzes!\" });\n    }\n  }\n\n  // 8. Consistent Learner (7-day streak)\n  if (!earnedBadgeIds.has(\"badge_streak_7\")) {\n    if (user.currentStreak >= 7) {\n      badgesToAward.push({ badgeId: \"badge_streak_7\", reason: \"Maintained a 7-day login streak!\" });\n    }\n  }\n\n  // 9. Dedicated Learner (30-day streak)\n  if (!earnedBadgeIds.has(\"badge_streak_30\")) {\n    if (user.currentStreak >= 30) {\n      badgesToAward.push({ badgeId: \"badge_streak_30\", reason: \"Maintained a 30-day login streak!\" });\n    }\n  }\n\n\n  // Award each badge\n  for (const { badgeId, reason } of badgesToAward) {\n    console.log(`[checkAndAwardBadges] Awarding badge ${badgeId} to user ${userId}`);\n    await storage.awardBadge(userId, badgeId);\n    const badge = await storage.getBadge(badgeId);\n    // Only include badgeName if badge exists, to avoid undefined values in Firebase\n    const metadata = { badgeId };\n    if (badge?.name) {\n      (metadata as any).badgeName = badge.name;\n    }\n    await storage.createNotification(\n      userId,\n      \"badge_earned\",\n      \"üèÜ New Badge Earned!\",\n      reason,\n      metadata\n    );\n    console.log(`[checkAndAwardBadges] Created notification for badge ${badgeId}: ${reason}`);\n  }\n  console.log(`[checkAndAwardBadges] Total badges awarded: ${badgesToAward.length}`);\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n\n  // Serve lesson PDFs from attached_assets directory\n  const express = await import('express');\n  app.use('/assets', express.default.static(path.join(process.cwd(), 'attached_assets')));\n\n  // ===== AUTHROUTES =====\n\n  // Register\n  app.post(\"/api/auth/register\", async (req, res, next) => {\n    try {\n      const parsed = registerRequestSchema.safeParse(req.body);\n      if (!parsed.success) {\n        return res.status(400).send({ error: \"Invalid registration data\", details: parsed.error });\n      }\n\n      const { confirmPassword, ...registrationData } = parsed.data;\n      const { email, username, password, displayName, pathSelectionMode, currentCareerPathId } = registrationData;\n\n      // Check if user exists\n      const existingUser = await storage.getUserByEmail(email);\n      if (existingUser) {\n        return res.status(400).send({ error: \"User with this email already exists\" });\n      }\n\n      const existingUsername = await storage.getUserByUsername(username);\n      if (existingUsername) {\n        return res.status(400).send({ error: \"Username already taken\" });\n      }\n\n      // Hash password and create user\n      const hashedPassword = await hashPassword(password);\n      const user = await storage.createUser({\n        email,\n        username,\n        password: hashedPassword,\n        displayName,\n        pathSelectionMode: pathSelectionMode || \"ai-guided\",\n        currentCareerPathId: currentCareerPathId || null,\n      });\n\n      // Log them in\n      req.login(user, (err) => {\n        if (err) return next(err);\n\n        // Don't send password back\n        const { password: _, ...userWithoutPassword } = user;\n        res.status(201).send({ user: userWithoutPassword });\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Login (with streak tracking)\n  app.post(\"/api/auth/login\", (req, res, next) => {\n    passport.authenticate(\"local\", async (err: any, user: User | false, info: any) => {\n      if (err) return next(err);\n      if (!user) {\n        return res.status(401).send({ error: info?.message || \"Authentication failed\" });\n      }\n\n      req.login(user, async (err) => {\n        if (err) return next(err);\n\n        // Update streak tracking\n        await storage.updateLoginStreak(user.id);\n\n        // Get updated user with new streak\n        const updatedUser = await storage.getUser(user.id);\n        if (!updatedUser) {\n          return res.status(404).send({ error: \"User not found\" });\n        }\n\n        // Create notification for streak milestones\n        const streak = updatedUser.currentStreak;\n        if (streak > 0 && [7, 30, 100, 365].includes(streak)) {\n          await storage.createNotification(\n            user.id,\n            \"streak\",\n            `${streak}-Day Streak! üî•`,\n            `Amazing! You've maintained a ${streak}-day login streak!`,\n            { streak }\n          );\n        }\n\n        const { password: _, ...userWithoutPassword } = updatedUser;\n        res.send({ user: userWithoutPassword });\n      });\n    })(req, res, next);\n  });\n\n  // Development-only session debug endpoint\n  if (app.get('env') === 'development') {\n    app.get('/api/debug/session', (req, res) => {\n      try {\n        const isAuth = typeof req.isAuthenticated === 'function' ? req.isAuthenticated() : false;\n        const sessionInfo: any = {\n          sessionID: (req as any).sessionID || null,\n          cookie: req.session && (req.session as any).cookie ? (req.session as any).cookie : null,\n          isAuthenticated: isAuth,\n          user: req.user ? { id: (req.user as any).id, username: (req.user as any).username } : null,\n          headers: {\n            cookie: req.headers.cookie || null\n          }\n        };\n        res.json({ ok: true, session: sessionInfo });\n      } catch (err) {\n        res.status(500).json({ ok: false, error: String(err) });\n      }\n    });\n  }\n\n  // Logout\n  app.post(\"/api/auth/logout\", (req, res) => {\n    req.logout(() => {\n      res.send({ success: true });\n    });\n  });\n\n  // Google OAuth routes\n  app.get(\"/api/login\", (req, res) => {\n    const redirectUri = process.env.GOOGLE_REDIRECT_URI || `${req.protocol}://${req.hostname}/api/callback`;\n    res.redirect(`https://accounts.google.com/o/oauth2/v2/auth?client_id=${process.env.GOOGLE_CLIENT_ID}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=code&scope=${encodeURIComponent(\"openid email profile\")}`);\n  });\n\n  app.get(\"/api/callback\", async (req, res) => {\n    try {\n      const { code } = req.query;\n      if (!code) {\n        return res.redirect(\"/?error=no_code\");\n      }\n\n      if (!process.env.GOOGLE_CLIENT_ID || !process.env.GOOGLE_CLIENT_SECRET) {\n        return res.redirect(\"/?error=missing_config\");\n      }\n\n      const redirectUri = process.env.GOOGLE_REDIRECT_URI || `${req.protocol}://${req.hostname}/api/callback`;\n\n      // Exchange authorization code for tokens\n      const tokenResponse = await fetch(\"https://oauth2.googleapis.com/token\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: new URLSearchParams({\n          code: code as string,\n          client_id: process.env.GOOGLE_CLIENT_ID,\n          client_secret: process.env.GOOGLE_CLIENT_SECRET,\n          redirect_uri: redirectUri,\n          grant_type: \"authorization_code\",\n        }),\n      });\n\n      if (!tokenResponse.ok) {\n        console.error(\"Token exchange failed:\", await tokenResponse.text());\n        return res.redirect(\"/?error=token_exchange_failed\");\n      }\n\n      const tokenData = await tokenResponse.json();\n      const { id_token } = tokenData;\n\n      // Decode JWT to get user info (without verification for simplicity)\n      const parts = id_token.split(\".\");\n      const payload = JSON.parse(Buffer.from(parts[1], \"base64\").toString());\n\n      const { email, name, picture, sub: googleId } = payload;\n\n      // Find or create user\n      let user = await storage.getUserByEmail(email);\n\n      if (!user) {\n        // Create new user from Google info\n        user = await storage.createUser({\n          email,\n          username: email.split(\"@\")[0] + \"_\" + googleId.substring(0, 8),\n          password: \"\", // OAuth users don't have passwords\n          displayName: name || email.split(\"@\")[0],\n          pathSelectionMode: \"ai-guided\",\n          currentCareerPathId: null,\n        });\n      }\n\n      // Log the user in\n      req.login(user, (err) => {\n        if (err) {\n          console.error(\"Login failed:\", err);\n          return res.redirect(\"/?error=login_failed\");\n        }\n        res.redirect(\"/\");\n      });\n    } catch (error) {\n      console.error(\"OAuth callback error:\", error);\n      res.redirect(\"/?error=oauth_error\");\n    }\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\"/\");\n    });\n  });\n\n  // Alias route for OAuth callback (matches Google registered URI pattern)\n  app.get(\"/auth/google/callback\", async (req, res) => {\n    try {\n      const { code } = req.query;\n      if (!code) {\n        return res.redirect(\"/?error=no_code\");\n      }\n\n      if (!process.env.GOOGLE_CLIENT_ID || !process.env.GOOGLE_CLIENT_SECRET) {\n        return res.redirect(\"/?error=missing_config\");\n      }\n\n      const redirectUri = process.env.GOOGLE_REDIRECT_URI || `${req.protocol}://${req.hostname}/api/callback`;\n\n      // Exchange authorization code for tokens\n      const tokenResponse = await fetch(\"https://oauth2.googleapis.com/token\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: new URLSearchParams({\n          code: code as string,\n          client_id: process.env.GOOGLE_CLIENT_ID,\n          client_secret: process.env.GOOGLE_CLIENT_SECRET,\n          redirect_uri: redirectUri,\n          grant_type: \"authorization_code\",\n        }),\n      });\n\n      if (!tokenResponse.ok) {\n        console.error(\"Token exchange failed:\", await tokenResponse.text());\n        return res.redirect(\"/?error=token_exchange_failed\");\n      }\n\n      const tokenData = await tokenResponse.json();\n      const { id_token } = tokenData;\n\n      // Decode JWT to get user info (without verification for simplicity)\n      const parts = id_token.split(\".\");\n      const payload = JSON.parse(Buffer.from(parts[1], \"base64\").toString());\n\n      const { email, name, picture, sub: googleId } = payload;\n\n      // Find or create user\n      let user = await storage.getUserByEmail(email);\n\n      if (!user) {\n        // Create new user from Google info\n        user = await storage.createUser({\n          email,\n          username: email.split(\"@\")[0] + \"_\" + googleId.substring(0, 8),\n          password: \"\", // OAuth users don't have passwords\n          displayName: name || email.split(\"@\")[0],\n          pathSelectionMode: \"ai-guided\",\n          currentCareerPathId: null,\n        });\n      }\n\n      // Log the user in\n      req.login(user, (err) => {\n        if (err) {\n          console.error(\"Login failed:\", err);\n          return res.redirect(\"/?error=login_failed\");\n        }\n        res.redirect(\"/\");\n      });\n    } catch (error) {\n      console.error(\"OAuth callback error:\", error);\n      res.redirect(\"/?error=oauth_error\");\n    }\n  });\n\n  // Get current user\n  app.get(\"/api/auth/me\", requireAuth, (req, res) => {\n    const user = req.user as User;\n    const { password: _, ...userWithoutPassword } = user;\n    res.send({ user: userWithoutPassword });\n  });\n\n  // Update user profile\n  app.patch(\"/api/auth/profile\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const { displayName, currentCareerPathId } = req.body;\n\n      const updated = await storage.updateUser(user.id, {\n        displayName: displayName || user.displayName,\n        currentCareerPathId: currentCareerPathId !== undefined ? currentCareerPathId : user.currentCareerPathId,\n      });\n\n      if (!updated) {\n        return res.status(404).send({ error: \"User not found\" });\n      }\n\n      const { password: _, ...userWithoutPassword } = updated;\n      res.send({ user: userWithoutPassword });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Forgot password - send reset email\n  app.post(\"/api/auth/forgot-password\", async (req, res, next) => {\n    try {\n      const { email } = req.body;\n\n      if (!email) {\n        return res.status(400).send({ error: \"Email is required\" });\n      }\n\n      const user = await storage.getUserByEmail(email);\n      if (!user) {\n        return res.status(200).send({ success: true });\n      }\n\n      const token = require(\"crypto\").randomBytes(32).toString(\"hex\");\n      const expiresAt = new Date(Date.now() + 60 * 60 * 1000);\n\n      await storage.createPasswordResetToken(user.id, token, expiresAt);\n\n      const resetLink = `${process.env.VITE_APP_URL || \"http://localhost:5000\"}/reset-password?token=${token}`;\n\n      console.log(`[Auth] Password reset link for ${email}: ${resetLink}`);\n\n      res.send({ success: true });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Reset password\n  app.post(\"/api/auth/reset-password\", async (req, res, next) => {\n    try {\n      const { token, password } = req.body;\n\n      if (!token || !password) {\n        return res.status(400).send({ error: \"Token and password are required\" });\n      }\n\n      const resetRecord = await storage.getPasswordResetToken(token);\n      if (!resetRecord) {\n        return res.status(400).send({ error: \"Invalid or expired reset token\" });\n      }\n\n      if (new Date() > resetRecord.expiresAt) {\n        await storage.deletePasswordResetToken(token);\n        return res.status(400).send({ error: \"Reset token has expired\" });\n      }\n\n      const hashedPassword = await hashPassword(password);\n      await storage.updateUser(resetRecord.userId, { password: hashedPassword });\n\n      await storage.deletePasswordResetToken(token);\n\n      res.send({ success: true });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // ===== CAREER PATH ROUTES =====\n\n  app.get(\"/api/career-paths\", async (_req, res, next) => {\n    try {\n      const paths = await storage.getCareerPaths();\n      res.send({ paths });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/career-paths/:id\", async (req, res, next) => {\n    try {\n      const path = await storage.getCareerPath(req.params.id);\n      if (!path) {\n        return res.status(404).send({ error: \"Career path not found\" });\n      }\n      res.send({ path });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Select career path for user\n  app.post(\"/api/career-paths/select\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const { pathId } = req.body;\n\n      if (!pathId) {\n        return res.status(400).send({ error: \"Career path ID is required\" });\n      }\n\n      const updated = await storage.updateUser(user.id, {\n        currentCareerPathId: pathId,\n        pathSelectionMode: \"manual\",\n      });\n\n      if (!updated) {\n        return res.status(404).send({ error: \"User not found\" });\n      }\n\n      const { password: _, ...userWithoutPassword } = updated;\n      res.send({ user: userWithoutPassword });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // ===== QUIZROUTES =====\n\n  app.get(\"/api/quizzes\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const quizzes = await storage.getQuizzes(\n        user.currentCareerPathId || undefined,\n        user.level\n      );\n      res.send({ quizzes });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Generate AI Practice Quiz (Hybrid: ML Templates + HF Generation)\n  app.post(\"/api/quizzes/generate-practice\", requireAuth, async (req, res) => {\n    try {\n      const user = req.user as User;\n      const userId = user.id;\n\n      const { careerPath, topic, difficulty, useAI } = req.body;\n\n      console.log(`[AI Quiz] Generating practice quiz for ${user.displayName} (${careerPath}, Level ${user.level}), useAI: ${useAI}`);\n\n      let questions;\n      let generatedByAI = false;\n\n      // Try Hugging Face AI generation first if API key is available\n      const hfApiKey = process.env.HUGGINGFACE_API_KEY;\n      \n      if (hfApiKey && useAI !== false) {\n        console.log(`[AI Quiz] Attempting Hugging Face AI generation for ${topic || 'mixed topics'}`);\n        const { generateQuestionsHF } = await import(\"./huggingface-client\");\n\n        try {\n          const aiQuestions = await generateQuestionsHF(\n            topic || \"computer science\",\n            difficulty || \"medium\",\n            careerPath || user.currentCareerPathId || \"fullstack\",\n            5\n          );\n\n          if (aiQuestions && aiQuestions.length >= 3) {\n            questions = aiQuestions;\n            generatedByAI = true;\n            console.log(`[AI Quiz] Successfully generated ${questions.length} AI questions via Hugging Face`);\n          } else {\n            console.warn(`[AI Quiz] HF returned insufficient questions (${aiQuestions?.length || 0}), falling back`);\n            throw new Error(\"Insufficient AI questions generated\");\n          }\n        } catch (aiError) {\n          console.error(\"[AI Quiz] Hugging Face generation failed:\", aiError);\n          // Fall through to template-based generation\n        }\n      }\n\n      // Track if trained ML model was used (from template-based generation)\n      let usedTrainedMLModel = false;\n      \n      // Fallback to template-based generation if AI failed or not requested\n      if (!questions) {\n        console.log(`[AI Quiz] Using template-based generation (fallback)`);\n        const practiceResult = await generatePracticeQuiz(\n          careerPath || user.currentCareerPathId || \"fullstack\",\n          user.level,\n          topic,\n          difficulty\n        );\n        questions = practiceResult.questions;\n        // Track if the trained ML model was used (NOT HuggingFace)\n        usedTrainedMLModel = practiceResult.usedTrainedModel;\n        generatedByAI = false; // Template-based, not HuggingFace AI\n      }\n\n      console.log(`[AI Quiz] Generated ${questions.length} questions`);\n\n      if (questions.length === 0) {\n        console.error(\"[AI Quiz] No questions were generated!\");\n        return res.status(500).json({ error: \"Failed to generate questions\" });\n      }\n\n      // Validate question structure\n      const validQuestions = questions.filter((q: any, index: number) => {\n        const isValid = q.question && Array.isArray(q.options) && q.options.length > 0;\n        if (!isValid) {\n          console.error(`[AI Quiz] Invalid question at index ${index}:`, {\n            hasQuestion: !!q.question,\n            hasOptions: Array.isArray(q.options),\n            optionsLength: q.options?.length || 0,\n            questionData: q\n          });\n        }\n        return isValid;\n      });\n\n      if (validQuestions.length === 0) {\n        console.error(\"[AI Quiz] All generated questions are invalid!\");\n        console.error(\"[AI Quiz] Original questions:\", JSON.stringify(questions, null, 2));\n        return res.status(500).json({ error: \"Invalid questions generated\" });\n      }\n\n      console.log(`[AI Quiz] ${validQuestions.length} valid questions out of ${questions.length}`);\n      console.log(`[AI Quiz] Sample question:`, validQuestions[0]);\n\n      const quizId = `practice-${Date.now()}-${userId}`;\n      const mappedQuestions = validQuestions.map((q: any, idx: number) => {\n        // ALWAYS convert correctAnswer to the actual answer text\n        let correctAnswer = q.correctAnswer;\n        \n        // If it's a number, get the text from options array\n        if (typeof correctAnswer === 'number') {\n          if (q.options && q.options[correctAnswer] !== undefined) {\n            correctAnswer = q.options[correctAnswer];\n            console.log(`[AI Quiz] Converted answer index ${q.correctAnswer} to text: \"${correctAnswer}\"`);\n          } else {\n            console.error(`[AI Quiz] Invalid correctAnswer index ${correctAnswer} for question with ${q.options?.length || 0} options`);\n            // Default to first option if invalid\n            correctAnswer = q.options && q.options[0] ? q.options[0] : \"Unknown\";\n          }\n        }\n\n        return {\n          id: `${quizId}-q${idx}`,\n          question: q.question,\n          questionText: q.question,\n          questionType: \"multiple-choice\" as const,\n          options: q.options || [],\n          correctAnswer: correctAnswer, // This is now ALWAYS a string (the answer text)\n          explanation: q.explanation || \"No explanation provided\",\n          category: q.category || \"general\",\n        };\n      });\n      \n      // Cache server-side with questions for validation\n      practiceQuizCache.set(quizId, {\n        questions: mappedQuestions,\n        userId,\n        createdAt: Date.now()\n      });\n\n      console.log(`[AI Quiz] Cached ${mappedQuestions.length} questions for quiz ${quizId}`);\n\n      // Use the tracked flag for trained ML model usage\n      const usedTrainedModel = usedTrainedMLModel;\n      \n      console.log(`\\n${\"=\".repeat(60)}`);\n      console.log(`[Practice Quiz] RESPONSE SUMMARY`);\n      console.log(`Timestamp: ${new Date().toISOString()}`);\n      console.log(`Quiz ID: ${quizId}`);\n      console.log(`Questions Generated: ${mappedQuestions.length}`);\n      console.log(`Used Trained ML Model: ${usedTrainedModel}`);\n      console.log(`Generated By External AI (HuggingFace): ${generatedByAI}`);\n      console.log(`Source: ${usedTrainedModel ? \"Trained Scikit-Learn Model (NOT OpenAI)\" : generatedByAI ? \"Hugging Face AI\" : \"Template-Based\"}`);\n      console.log(`${\"=\".repeat(60)}\\n`);\n\n      const quizResponse = {\n        quiz: {\n          id: quizId,\n          title: topic ? `${topic} Practice Quiz` : \"Practice Quiz\",\n          description: usedTrainedModel \n            ? \"Practice questions generated by trained Scikit-Learn model\" \n            : generatedByAI \n              ? \"AI-generated practice questions by Hugging Face\" \n              : \"Adaptive practice questions\",\n          timeLimit: 900, // 15 minutes\n          isPractice: true,\n          generatedByAI: generatedByAI,\n        },\n        questions: mappedQuestions,\n        usedTrainedModel,\n        modelSource: usedTrainedModel ? \"Trained Scikit-Learn Model\" : generatedByAI ? \"Hugging Face AI\" : \"Template-Based\",\n      };\n\n      res.json(quizResponse);\n    } catch (error: any) {\n      console.error(\"Practice quiz generation error:\", error);\n      res.status(500).json({ error: \"Failed to generate practice quiz\" });\n    }\n  });\n\n  // Submit practice quiz (server-side validation against cached answers)\n  app.post(\"/api/quizzes/practice/:id/submit\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const { answers } = req.body;\n      const quizId = req.params.id;\n\n      // Retrieve quiz from server-side cache\n      const cachedQuiz = practiceQuizCache.get(quizId);\n\n      if (!cachedQuiz) {\n        return res.status(404).send({\n          error: \"Practice quiz not found or expired. Please generate a new quiz.\"\n        });\n      }\n\n      const { questions } = cachedQuiz;\n\n      // Calculate score using SERVER-SIDE correct answers\n      let correctCount = 0;\n      const totalQuestions = questions.length;\n\n      for (const question of questions) {\n        const userAnswerIndex = answers[question.id];\n        \n        // Convert user's answer index to actual answer text\n        let userAnswerText = userAnswerIndex;\n        if (typeof userAnswerIndex === 'number' && question.options && question.options[userAnswerIndex]) {\n          userAnswerText = question.options[userAnswerIndex];\n        } else if (typeof userAnswerIndex === 'string' && !isNaN(parseInt(userAnswerIndex))) {\n          // If user sent a string number like \"3\", convert it\n          const index = parseInt(userAnswerIndex);\n          if (question.options && question.options[index]) {\n            userAnswerText = question.options[index];\n          }\n        }\n        \n        // The correctAnswer is always stored as text now (converted during quiz generation)\n        let expectedAnswer = question.correctAnswer;\n        \n        // Compare normalized strings\n        const userAnswerNormalized = String(userAnswerText).trim().toLowerCase();\n        const expectedAnswerNormalized = String(expectedAnswer).trim().toLowerCase();\n        \n        const isCorrect = userAnswerNormalized === expectedAnswerNormalized;\n        \n        if (isCorrect) {\n          correctCount++;\n          console.log(`[AI Quiz] Question ${question.id}: CORRECT (user index: \"${userAnswerIndex}\" ‚Üí \"${userAnswerText}\", expected: \"${expectedAnswer}\")`);\n        } else {\n          console.log(`[AI Quiz] Question ${question.id}: WRONG (user index: \"${userAnswerIndex}\" ‚Üí \"${userAnswerText}\", expected: \"${expectedAnswer}\")`);\n        }\n      }\n\n      const score = (correctCount / totalQuestions) * 100;\n\n      // Check if user has already completed this quiz\n      const userCompletedQuizzes = completedPracticeQuizzes.get(user.id) || new Set();\n      const alreadyCompleted = userCompletedQuizzes.has(quizId);\n\n      let xpEarned = 0;\n      let newLevel = user.level;\n      let finalXp = user.xp;\n      let leveledUp = false;\n\n      // Only award XP on first completion to prevent farming\n      // XP scales with score: 0% = 0 XP, 100% = 50 XP\n      if (!alreadyCompleted) {\n        xpEarned = Math.floor((score / 100) * 50);\n\n        // Award XP to user\n        const newXp = user.xp + xpEarned;\n        const newTotalXp = user.totalXp + xpEarned;\n\n        finalXp = newXp;\n\n        if (newXp >= 1000) {\n          newLevel = user.level + 1;\n          finalXp = newXp - 1000;\n          leveledUp = true;\n        }\n\n        // Update user XP and level\n        await storage.updateUser(user.id, {\n          xp: finalXp,\n          totalXp: newTotalXp,\n          level: newLevel,\n        });\n\n        // Mark quiz as completed\n        userCompletedQuizzes.add(quizId);\n        completedPracticeQuizzes.set(user.id, userCompletedQuizzes);\n\n        console.log(`[AI Quiz] Practice quiz completed (FIRST): ${user.username} scored ${score.toFixed(1)}% (${correctCount}/${totalQuestions}), earned ${xpEarned} XP (based on ${score.toFixed(0)}% score)`);\n      } else {\n        console.log(`[AI Quiz] Practice quiz retaken (NO XP): ${user.username} scored ${score.toFixed(1)}% (${correctCount}/${totalQuestions}) - no XP awarded`);\n      }\n\n      res.send({\n        score: correctCount,\n        totalQuestions,\n        xpEarned,\n        leveledUp,\n        newLevel,\n        finalXp,\n        percentage: score,\n        isRetake: alreadyCompleted,\n      });\n    } catch (error) {\n      console.error(\"[AI Quiz] Submission error:\", error);\n      next(error);\n    }\n  });\n\n  // Fisher-Yates shuffle algorithm\n  function shuffleArray<T>(array: T[]): T[] {\n    const shuffled = [...array];\n    for (let i = shuffled.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n    }\n    return shuffled;\n  }\n\n  app.get(\"/api/quizzes/:id\", requireAuth, async (req, res, next) => {\n    try {\n      const quiz = await storage.getQuiz(req.params.id);\n      if (!quiz) {\n        return res.status(404).send({ error: \"Quiz not found\" });\n      }\n\n      const questions = await storage.getQuestionsByQuiz(req.params.id);\n\n      // Randomize question order using Fisher-Yates shuffle\n      const shuffledQuestions = shuffleArray(questions);\n\n      res.send({ quiz, questions: shuffledQuestions });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Submit quiz attempt\n  app.post(\"/api/quizzes/:id/submit\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const quiz = await storage.getQuiz(req.params.id);\n\n      if (!quiz) {\n        return res.status(404).send({ error: \"Quiz not found\" });\n      }\n\n      const { answers, wasTabSwitched, timeSpent, isDailyChallenge } = req.body;\n      const questions = await storage.getQuestionsByQuiz(req.params.id);\n\n      // Calculate score\n      let correctCount = 0;\n      const questionAttempts = [];\n\n      for (const question of questions) {\n        const userAnswer = answers[question.id];\n        const isCorrect = userAnswer === question.correctAnswer;\n        if (isCorrect) correctCount++;\n\n        questionAttempts.push({\n          userId: user.id,\n          questionId: question.id,\n          selectedAnswer: userAnswer || \"\",\n          isCorrect,\n          category: question.category,\n        });\n      }\n\n      const score = (correctCount / questions.length) * 100;\n      const xpEarned = wasTabSwitched ? 0 : Math.floor((score / 100) * quiz.xpReward);\n\n      // Create quiz attempt\n      const attempt = await storage.createQuizAttempt({\n        userId: user.id,\n        quizId: quiz.id,\n        score,\n        correctAnswers: correctCount,\n        totalQuestions: questions.length,\n        xpEarned,\n        wasTabSwitched,\n        timeSpent,\n      });\n\n      // Save individual question attempts for Naive Bayes\n      for (const qa of questionAttempts) {\n        await storage.createQuestionAttempt({\n          ...qa,\n          quizAttemptId: attempt.id,\n        });\n      }\n\n      // Update user XP and level\n      const newTotalXp = user.totalXp + xpEarned;\n      const newLevel = Math.floor(newTotalXp / 1000) + 1; // 1000 XP per level\n      const newXp = newTotalXp % 1000;\n      const oldLevel = user.level;\n\n      await storage.updateUser(user.id, {\n        totalXp: newTotalXp,\n        xp: newXp,\n        level: newLevel,\n      });\n\n      // Check for level up and create notification\n      if (newLevel > oldLevel) {\n        await storage.createNotification(\n          user.id,\n          \"level_up\",\n          `Level Up! You reached Level ${newLevel}`,\n          `Congratulations! You've earned enough XP to reach Level ${newLevel}!`,\n          { level: newLevel }\n        );\n\n        // Special notification for Level 20 (AI recommendation trigger)\n        if (newLevel === 20 && user.pathSelectionMode === \"ai-guided\" && !user.hasCompletedInterestAssessment) {\n          console.log(`\\n${\"=\".repeat(60)}`);\n          console.log(`[Level 20 Milestone] TRAINED MODEL REQUEST`);\n          console.log(`Timestamp: ${new Date().toISOString()}`);\n          console.log(`User ID: ${user.id}`);\n          console.log(`New Level: ${newLevel}`);\n          console.log(`${\"=\".repeat(60)}\\n`);\n\n          // Call ML service for Level 20 milestone analysis\n          try {\n            const { callMLService } = await import(\"./ml-client\");\n            const mlResponse = await callMLService(\"level_milestone\", {\n              user_id: user.id,\n              new_level: newLevel,\n              career_path: user.currentCareerPathId || \"unknown\",\n              performance_history: {\n                total_xp: newTotalXp,\n                quizzes_completed: await storage.getUserQuizAttempts(user.id).then(a => a.length).catch(() => 0),\n              }\n            });\n\n            if (mlResponse.success) {\n              console.log(`\\n${\"=\".repeat(60)}`);\n              console.log(`TRAINED MODEL USED FOR LEVEL 20 MILESTONE`);\n              console.log(`Timestamp: ${new Date().toISOString()}`);\n              console.log(`User ID: ${user.id}`);\n              console.log(`ML Analysis Result:`, JSON.stringify(mlResponse.result, null, 2));\n              console.log(`Source: Trained Scikit-Learn Model (NOT OpenAI)`);\n              console.log(`${\"=\".repeat(60)}\\n`);\n            }\n          } catch (mlErr) {\n            console.log(`[Level 20 Milestone] ML service call failed, proceeding without ML analysis:`, mlErr);\n          }\n\n          await storage.createNotification(\n            user.id,\n            \"system\",\n            \"üéâ Level 20 Milestone!\",\n            \"Complete the Interest Assessment to receive your AI-powered career path recommendation!\",\n            { requiresAction: true, action: \"interest-assessment\" }\n          );\n        }\n      }\n\n      // Check and award badges\n      await checkAndAwardBadges(user.id);\n\n      // Mark daily challenge as complete if this is a daily challenge\n      if (isDailyChallenge) {\n        try {\n          const { dailyChallengeGenerator } = await import(\"./dailyChallenges\");\n          await dailyChallengeGenerator.completeDailyChallenge(user.id, quiz.id, \"quiz\");\n          console.log(`[Quiz] Marked daily challenge complete for user ${user.id}, quiz ${quiz.id}`);\n        } catch (err) {\n          console.error(`[Quiz] Failed to mark daily challenge complete:`, err);\n          // Don't block quiz submission if daily challenge completion fails\n        }\n      }\n\n      res.send({\n        attempt,\n        xpEarned,\n        newLevel,\n        newXp,\n        newTotalXp,\n        leveledUp: newLevel > oldLevel,\n        reachedLevel20: newLevel === 20 && user.pathSelectionMode === \"ai-guided\" && !user.hasCompletedInterestAssessment,\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // ===== CODE CHALLENGE ROUTES =====\n\n  app.get(\"/api/challenges\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const challenges = await storage.getCodeChallenges(\n        user.currentCareerPathId || undefined,\n        user.level\n      );\n      res.send({ challenges });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/challenges/:id\", requireAuth, async (req, res, next) => {\n    try {\n      const challenge = await storage.getCodeChallenge(req.params.id);\n      if (!challenge) {\n        return res.status(404).send({ error: \"Challenge not found\" });\n      }\n      res.send({ challenge });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Submit code challenge with Judge0 integration\n  app.post(\"/api/challenges/:id/submit\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const challenge = await storage.getCodeChallenge(req.params.id);\n\n      if (!challenge) {\n        return res.status(404).send({ error: \"Challenge not found\" });\n      }\n\n      const { code, language } = req.body;\n\n      // Import Judge0 service\n      const { judge0Service, LANGUAGE_IDS } = await import(\"./judge0\");\n\n      // Map language string to Judge0 language ID\n      const languageId = LANGUAGE_IDS[language as keyof typeof LANGUAGE_IDS];\n      if (!languageId) {\n        return res.status(400).send({ error: `Unsupported language: ${language}` });\n      }\n\n      // Run test cases using Judge0\n      const testResults = await judge0Service.runTestCases({\n        sourceCode: code,\n        languageId,\n        testCases: challenge.testCases,\n      });\n\n      const allPassed = testResults.passed === testResults.total;\n      const xpEarned = allPassed ? challenge.xpReward : 0;\n\n      const attempt = await storage.createChallengeAttempt({\n        userId: user.id,\n        challengeId: challenge.id,\n        code,\n        language,\n        passed: allPassed,\n        xpEarned,\n      });\n\n      // Notify user on successful completion\n      if (allPassed) {\n        await storage.createNotification(\n          user.id,\n          \"challenge_complete\",\n          \"Code Challenge Completed!\",\n          `You successfully solved \"${challenge.title}\"! Earned ${xpEarned} XP.`,\n          { challengeId: challenge.id, xpEarned }\n        );\n      }\n\n      // Update user XP if all tests passed\n      let leveledUp = false;\n      let reachedLevel20 = false;\n      let newLevel = user.level;\n      let newXp = user.xp;\n      let newTotalXp = user.totalXp;\n\n      if (allPassed) {\n        newTotalXp = user.totalXp + xpEarned;\n        newLevel = Math.floor(newTotalXp / 1000) + 1;\n        newXp = newTotalXp % 1000;\n        const oldLevel = user.level;\n\n        await storage.updateUser(user.id, {\n          totalXp: newTotalXp,\n          xp: newXp,\n          level: newLevel,\n        });\n\n        // Check for level up and create notification\n        if (newLevel > oldLevel) {\n          leveledUp = true;\n          await storage.createNotification(\n            user.id,\n            \"level_up\",\n            `Level Up! You reached Level ${newLevel}`,\n            `Congratulations! You've earned enough XP to reach Level ${newLevel}!`,\n            { level: newLevel }\n          );\n\n          // Special notification for Level 20 (AI recommendation trigger)\n          if (newLevel === 20 && user.pathSelectionMode === \"ai-guided\" && !user.hasCompletedInterestAssessment) {\n            reachedLevel20 = true;\n            await storage.createNotification(\n              user.id,\n              \"system\",\n              \"üéâ Level 20 Milestone!\",\n              \"Complete the Interest Assessment to receive your AI-powered career path recommendation!\",\n              { requiresAction: true, action: \"interest-assessment\" }\n            );\n          }\n        }\n      }\n\n      // Check and award badges\n      await checkAndAwardBadges(user.id);\n\n      res.send({\n        attempt,\n        passed: allPassed,\n        xpEarned,\n        testResults,\n        leveledUp,\n        newLevel,\n        newXp,\n        newTotalXp,\n        reachedLevel20,\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // ===== LEADERBOARDROUTES =====\n\n  app.get(\"/api/leaderboard\", async (_req, res, next) => {\n    try {\n      const users = await storage.getUsersForLeaderboard(100);\n\n      // Fetch badge counts for each user\n      const leaderboard = await Promise.all(\n        users.map(async (u, index) => {\n          const userBadges = await storage.getUserBadges(u.id);\n          return {\n            rank: index + 1,\n            userId: u.id,\n            username: u.username,\n            displayName: u.displayName,\n            level: u.level,\n            totalXp: u.totalXp,\n            badgeCount: userBadges.length,\n          };\n        })\n      );\n\n      res.send({ leaderboard });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // ===== BADGE ROUTES =====\n\n  // Get all available badges\n  app.get(\"/api/badges\", async (_req, res, next) => {\n    try {\n      res.set(\"Cache-Control\", \"no-cache, no-store, must-revalidate, private\");\n      res.set(\"Pragma\", \"no-cache\");\n      res.set(\"Expires\", \"0\");\n      const badges = await storage.getBadges();\n      console.log(`[GET /api/badges] Returning ${badges.length} badges:`, badges.map(b => ({ id: b.id, name: b.name })));\n      res.send({ badges });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Get user's earned badges\n  app.get(\"/api/users/me/badges\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      // Set cache-control headers to prevent HTTP caching (fixes stale badge data)\n      res.set(\"Cache-Control\", \"no-cache, no-store, must-revalidate, private\");\n      res.set(\"Pragma\", \"no-cache\");\n      res.set(\"Expires\", \"0\");\n      const userBadges = await storage.getUserBadges(user.id);\n      console.log(`[GET /api/users/me/badges] User ${user.id} (level ${user.level}) has ${userBadges.length} badges:`, userBadges.map((b: any) => ({ badgeId: b.badgeId, badgeName: b.badge.name })));\n      res.send({ badges: userBadges });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // ===== INTEREST QUESTIONNAIRE ROUTES =====\n\n  app.post(\"/api/interest/submit\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n\n      if (user.level < 20) {\n        return res.status(403).send({ error: \"Must be level 20 to take interest assessment\" });\n      }\n\n      const { responses } = req.body; // Array of { questionId, response }\n\n      if (!responses || responses.length === 0) {\n        return res.status(400).send({ error: \"No responses provided\" });\n      }\n\n      // Save responses\n      for (const r of responses) {\n        await storage.createInterestResponse({\n          userId: user.id,\n          questionId: r.questionId,\n          response: r.response,\n        });\n      }\n\n      // Use ML-powered career recommender (Random Forest model)\n      const { callMLService } = await import(\"./ml-client\");\n      const { naiveBayesRecommender } = await import(\"./naiveBayes\");\n      let recommendation;\n      let usedTrainedModel = false;\n\n      try {\n        // Get user's performance metrics\n        const userAttempts = await storage.getUserQuestionAttemptsByCategory(user.id);\n\n        // Calculate performance scores by category\n        const categoryScores: Record<string, { correct: number; total: number }> = {};\n        for (const attempt of userAttempts) {\n          if (!attempt.category) continue;\n          if (!categoryScores[attempt.category]) {\n            categoryScores[attempt.category] = { correct: 0, total: 0 };\n          }\n          categoryScores[attempt.category].total++;\n          if (attempt.isCorrect) {\n            categoryScores[attempt.category].correct++;\n          }\n        }\n\n        // Prepare ML input data\n        type ResponseItem = { questionId: number; response: string | number };\n        const mlInput = {\n          visual_design: parseInt(responses.find((r: ResponseItem) => r.questionId === 1)?.response?.toString() || \"3\"),\n          backend_pref: responses.find((r: ResponseItem) => r.questionId === 2)?.response?.toString().includes(\"Backend\") ? 1 : 0,\n          math_stats: parseInt(responses.find((r: ResponseItem) => r.questionId === 3)?.response?.toString() || \"3\"),\n          web_apps: responses.find((r: ResponseItem) => r.questionId === 4)?.response?.toString().includes(\"web\") ? 1 : 0,\n          data_interest: responses.find((r: ResponseItem) => r.questionId === 4)?.response?.toString().includes(\"data\") ? 1 : 0,\n          cloud_interest: responses.find((r: ResponseItem) => r.questionId === 4)?.response?.toString().includes(\"cloud\") ? 1 : 0,\n          mobile_interest: responses.find((r: ResponseItem) => r.questionId === 4)?.response?.toString().includes(\"mobile\") ? 1 : 0,\n          security_interest: responses.find((r: ResponseItem) => r.questionId === 4)?.response?.toString().includes(\"security\") ? 1 : 0,\n          frontend_perf: categoryScores['frontend'] ? categoryScores['frontend'].correct / categoryScores['frontend'].total : 0.5,\n          backend_perf: categoryScores['backend'] ? categoryScores['backend'].correct / categoryScores['backend'].total : 0.5,\n          data_perf: categoryScores['data'] ? categoryScores['data'].correct / categoryScores['data'].total : 0.5,\n          algo_perf: categoryScores['algorithms'] ? categoryScores['algorithms'].correct / categoryScores['algorithms'].total : 0.5,\n        };\n\n        console.log(`\\n${\"=\".repeat(60)}`);\n        console.log(`[Career Assessment] TRAINED MODEL REQUEST`);\n        console.log(`Timestamp: ${new Date().toISOString()}`);\n        console.log(`User ID: ${user.id}`);\n        console.log(`ML Input Features:`, JSON.stringify(mlInput, null, 2));\n        console.log(`${\"=\".repeat(60)}\\n`);\n\n        // Call ML prediction service\n        const mlResult = await callMLService(\"recommend_career\", mlInput);\n\n        if (mlResult.success && mlResult.result) {\n          // Map ML model career paths to database career path IDs\n          const allPaths = await storage.getCareerPaths();\n          const pathMapping: Record<string, string> = {\n            'frontend': allPaths.find(p => /front.*end|frontend/i.test(p.name))?.id || allPaths[0]?.id,\n            'backend': allPaths.find(p => /back.*end|backend/i.test(p.name))?.id || allPaths[0]?.id,\n            'data': allPaths.find(p => /data.*science|data/i.test(p.name))?.id || allPaths[0]?.id,\n            'cloud': allPaths.find(p => /cloud/i.test(p.name))?.id || allPaths[0]?.id,\n            'mobile': allPaths.find(p => /mobile/i.test(p.name))?.id || allPaths[0]?.id,\n            'security': allPaths.find(p => /security|cyber/i.test(p.name))?.id || allPaths[0]?.id,\n          };\n\n          const recommendedPathId = pathMapping[mlResult.result.recommended_path] || allPaths[0]?.id;\n\n          recommendation = {\n            recommendedPathId,\n            probabilities: Object.entries(mlResult.result.probabilities).map(([path, prob]) => ({\n              careerPathId: pathMapping[path] || allPaths[0]?.id,\n              probability: prob as number,\n              score: (prob as number) * 100,\n            })),\n            confidence: mlResult.result.confidence * 100,\n          };\n\n          usedTrainedModel = true;\n\n          console.log(`\\n${\"=\".repeat(60)}`);\n          console.log(`TRAINED MODEL USED FOR CAREER ASSESSMENT`);\n          console.log(`Timestamp: ${new Date().toISOString()}`);\n          console.log(`Recommended Path: ${mlResult.result.recommended_path}`);\n          console.log(`Confidence: ${(mlResult.result.confidence * 100).toFixed(2)}%`);\n          console.log(`Source: Trained Scikit-Learn Random Forest Model (NOT OpenAI)`);\n          console.log(`${\"=\".repeat(60)}\\n`);\n        } else {\n          throw new Error(\"ML service failed, using fallback\");\n        }\n      } catch (err) {\n        console.error(\"ML recommendation error, using custom Naive Bayes:\", err);\n        // Fallback to custom Naive Bayes implementation\n        try {\n          recommendation = await naiveBayesRecommender.recommendCareerPath(user.id);\n        } catch (fallbackErr) {\n          console.error(\"Fallback recommendation error:\", fallbackErr);\n          // Final fallback: assign first career path\n          const allPaths = await storage.getCareerPaths();\n          if (allPaths.length === 0) {\n            return res.status(500).send({ error: \"No career paths available\" });\n          }\n          recommendation = {\n            recommendedPathId: allPaths[0].id,\n            probabilities: allPaths.map((p, i) => ({\n              careerPathId: p.id,\n              probability: i === 0 ? 0.5 : 0.5 / (allPaths.length - 1),\n              score: i === 0 ? 50 : 25,\n            })),\n            confidence: 50,\n          };\n        }\n      }\n\n      await storage.updateUser(user.id, {\n        hasCompletedInterestAssessment: true,\n        currentCareerPathId: recommendation.recommendedPathId,\n      });\n\n      // Get the recommended path details\n      const recommendedPath = await storage.getCareerPath(recommendation.recommendedPathId);\n\n      res.send({\n        recommendedCareerPathId: recommendation.recommendedPathId,\n        recommendedPath,\n        confidence: recommendation.confidence,\n        allProbabilities: recommendation.probabilities,\n        usedTrainedModel,\n        modelSource: usedTrainedModel ? \"Trained Scikit-Learn Random Forest Model\" : \"Naive Bayes Fallback\",\n      });\n    } catch (error) {\n      console.error(\"Interest submit error:\", error);\n      next(error);\n    }\n  });\n\n  // ===== DAILY CHALLENGE ROUTES =====\n\n  app.get(\"/api/daily-challenges\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const { dailyChallengeGenerator } = await import(\"./dailyChallenges\");\n      const challenges = await dailyChallengeGenerator.getDailyChallenges(user.id);\n      res.send(challenges);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/daily-challenges/today\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const { dailyChallengeGenerator } = await import(\"./dailyChallenges\");\n\n      // Get both challenges for today\n      const result = await dailyChallengeGenerator.getDailyChallenges(user.id);\n\n      // Check if both challenges are completed or unavailable\n      const quizCompleted = result.dailyChallenges.find(c => c.challengeType === \"quiz\")?.completed || false;\n      const codeCompleted = result.dailyChallenges.find(c => c.challengeType === \"code\")?.completed || false;\n\n      // If no challenges can be generated (both null), mark as \"all completed\"\n      const noChallengesAvailable = !result.quizChallenge && !result.codeChallenge;\n      const allCompleted = noChallengesAvailable || (quizCompleted && codeCompleted);\n\n      // Prepare quiz challenge response\n      let quizChallenge = null;\n      if (result.quizChallenge) {\n        const quizRecord = result.dailyChallenges.find(c => c.challengeType === \"quiz\");\n        quizChallenge = {\n          id: result.quizChallenge.id,\n          title: result.quizChallenge.title,\n          difficulty: result.quizChallenge.difficulty,\n          xpReward: result.quizChallenge.xpReward || 100,\n          challengeType: \"quiz\",\n          completed: quizRecord?.completed || false,\n        };\n      }\n\n      // Prepare code challenge response\n      let codeChallenge = null;\n      if (result.codeChallenge) {\n        const codeRecord = result.dailyChallenges.find(c => c.challengeType === \"code\");\n        codeChallenge = {\n          id: result.codeChallenge.id,\n          title: result.codeChallenge.title,\n          difficulty: result.codeChallenge.difficulty,\n          xpReward: result.codeChallenge.xpReward || 100,\n          challengeType: \"code\",\n          completed: codeRecord?.completed || false,\n        };\n      }\n\n      // Prevent HTTP caching - always fetch fresh per user\n      res.set('Cache-Control', 'no-cache, no-store, must-revalidate, private');\n      res.set('Pragma', 'no-cache');\n      res.set('Expires', '0');\n\n      res.send({\n        quizChallenge,\n        codeChallenge,\n        allCompleted,\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/daily-challenges/complete\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const { challengeId, challengeType } = req.body;\n      const { dailyChallengeGenerator } = await import(\"./dailyChallenges\");\n      \n      console.log(`\\n${\"=\".repeat(60)}`);\n      console.log(`[Daily Task] TRAINED MODEL REQUEST`);\n      console.log(`Timestamp: ${new Date().toISOString()}`);\n      console.log(`User ID: ${user.id}`);\n      console.log(`Challenge ID: ${challengeId}`);\n      console.log(`Challenge Type: ${challengeType}`);\n      console.log(`${\"=\".repeat(60)}\\n`);\n\n      // Call ML service for daily task analysis\n      let mlAnalysis = null;\n      try {\n        const { callMLService } = await import(\"./ml-client\");\n        const mlResponse = await callMLService(\"analyze_daily_task\", {\n          user_id: user.id,\n          task_type: challengeType,\n          performance_data: {\n            challenge_id: challengeId,\n            user_level: user.level,\n            career_path: user.currentCareerPathId || \"unknown\",\n            total_xp: user.totalXp,\n          }\n        });\n\n        if (mlResponse.success && mlResponse.result) {\n          mlAnalysis = mlResponse.result;\n          console.log(`\\n${\"=\".repeat(60)}`);\n          console.log(`TRAINED MODEL USED FOR DAILY TASK ANALYSIS`);\n          console.log(`Timestamp: ${new Date().toISOString()}`);\n          console.log(`User ID: ${user.id}`);\n          console.log(`Task Type: ${challengeType}`);\n          console.log(`ML Analysis:`, JSON.stringify(mlAnalysis, null, 2));\n          console.log(`Source: Trained Scikit-Learn Model (NOT OpenAI)`);\n          console.log(`${\"=\".repeat(60)}\\n`);\n        }\n      } catch (mlErr) {\n        console.log(`[Daily Task] ML analysis failed, proceeding without ML:`, mlErr);\n      }\n\n      await dailyChallengeGenerator.completeDailyChallenge(user.id, challengeId, challengeType);\n\n      // Create notification for daily challenge completion\n      await storage.createNotification(\n        user.id,\n        \"challenge_complete\",\n        \"Daily Challenge Completed!\",\n        \"Great job! You've completed today's challenge.\",\n        { challengeId, mlAnalysis }\n      );\n\n      res.send({ \n        success: true,\n        usedTrainedModel: !!mlAnalysis,\n        mlAnalysis,\n        modelSource: mlAnalysis ? \"Trained Scikit-Learn Model\" : null,\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // ===== AI STUDY SUGGESTIONS ROUTE =====\n\n  // Cache for AI suggestions (simple in-memory cache)\n  const suggestionsCache = new Map<string, { suggestions: any; timestamp: number }>();\n  const CACHE_DURATION = 30 * 60 * 1000; // 30 minutes\n\n  app.get(\"/api/study-suggestions\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const { useHF } = req.query; // Optional: use Hugging Face\n      const cacheKey = `${user.id}-${user.level}-${useHF ? 'hf' : 'ml'}`;\n\n      // Check cache first\n      const cached = suggestionsCache.get(cacheKey);\n      if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {\n        return res.json({ suggestions: cached.suggestions, cached: true });\n      }\n\n      // Get user's recent quiz performance\n      const recentAttempts = await storage.getUserQuizAttempts(user.id, 10);\n      const questionAttempts = await storage.getUserQuestionAttempts(user.id, 50);\n\n      // Calculate category performance\n      const categoryScores: Record<string, { correct: number; total: number }> = {};\n      for (const qa of questionAttempts) {\n        if (qa.category) {\n          if (!categoryScores[qa.category]) {\n            categoryScores[qa.category] = { correct: 0, total: 0 };\n          }\n          categoryScores[qa.category].total++;\n          if (qa.isCorrect) {\n            categoryScores[qa.category].correct++;\n          }\n        }\n      }\n\n      // Find weak categories (< 60% accuracy)\n      const weakCategories = Object.entries(categoryScores)\n        .filter(([_, stats]) => (stats.correct / stats.total) < 0.6)\n        .map(([category]) => category);\n\n      const recentQuizScores = recentAttempts.map(attempt => ({\n        category: \"general\",\n        score: attempt.correctAnswers,\n        total: attempt.totalQuestions,\n      }));\n\n      // Generate smart fallback based on actual data\n      const generateSmartFallback = () => {\n        const suggestions = [];\n\n        if (weakCategories.length > 0) {\n          suggestions.push(`Focus on improving in: ${weakCategories.join(\", \")}`);\n        }\n\n        if (user.level < 20) {\n          suggestions.push(`Continue learning to reach Level 20 for AI career recommendation`);\n        }\n\n        if (recentAttempts.length > 0) {\n          const avgScore = recentAttempts.reduce((sum, a) => sum + a.score, 0) / recentAttempts.length;\n          if (avgScore < 60) {\n            suggestions.push(`Review fundamentals - your recent average is ${avgScore.toFixed(0)}%`);\n          }\n        }\n\n        suggestions.push(`Complete daily challenges for bonus XP`);\n        suggestions.push(`Try code challenges to reinforce practical skills`);\n\n        return suggestions.join(\"\\n- \");\n      };\n\n      try {\n        const suggestions = await generateStudySuggestions({\n          level: user.level,\n          totalXp: user.totalXp,\n          careerPath: user.currentCareerPathId,\n          recentQuizScores,\n          weakCategories,\n        });\n\n        // Cache successful result\n        suggestionsCache.set(cacheKey, { suggestions, timestamp: Date.now() });\n        res.json({ suggestions, cached: false });\n      } catch (aiError) {\n        console.error(\"AI study suggestions failed, using smart fallback:\", aiError);\n        const fallback = generateSmartFallback();\n        res.json({ suggestions: fallback, cached: false, fallback: true });\n      }\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Get available modules for user\n  app.get(\"/api/modules\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const modules = await storage.getModulesForUser(user);\n\n      // Populate lessons for each module\n      const modulesWithLessons = await Promise.all(\n        modules.map(async (module: any) => {\n          const lessons = await storage.getModuleLessons(module.id);\n          console.log(`[/api/modules] Module \"${module.title}\" (${module.id}): ${lessons.length} lessons`);\n          return { ...module, lessons };\n        })\n      );\n\n      console.log(`[/api/modules] Returning ${modulesWithLessons.length} modules for user ${user.id}`);\n\n      // Prevent HTTP caching - always fetch fresh\n      res.set('Cache-Control', 'no-cache, no-store, must-revalidate');\n      res.set('Pragma', 'no-cache');\n      res.set('Expires', '0');\n\n      res.json({ modules: modulesWithLessons });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Get module lessons\n  app.get(\"/api/modules/:moduleId/lessons\", requireAuth, async (req, res, next) => {\n    try {\n      const lessons = await storage.getModuleLessons(req.params.moduleId);\n      res.json({ lessons });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Get single lesson with module details\n  app.get(\"/api/lessons/:lessonId\", requireAuth, async (req, res, next) => {\n    try {\n      const lesson = await storage.getLesson(req.params.lessonId) as any;\n      if (!lesson) {\n        return res.status(404).send({ error: \"Lesson not found\" });\n      }\n      const module = lesson.moduleId ? await storage.getModule(lesson.moduleId) : null;\n      res.send({ lesson, module });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Complete a lesson\n  app.post(\"/api/lessons/:lessonId/complete\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const { score } = req.body;\n      await storage.completeLesson(user.id, req.params.lessonId, score);\n      res.json({ success: true });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Get user progress statistics\n  app.get(\"/api/users/me/progress\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n\n      // Get all modules available to user\n      const allModules = await storage.getModulesForUser(user);\n\n      // Get user's completed lessons\n      const userProgress = await storage.getUserProgress(user.id);\n      const completedLessons = userProgress.completedLessons || [];\n\n      // Calculate total lessons and completed count\n      let totalLessons = 0;\n      for (const module of allModules) {\n        const lessons = await storage.getModuleLessons(module.id);\n        totalLessons += lessons.length;\n      }\n\n      const completedCount = completedLessons.length;\n      const progressPercentage = totalLessons > 0 ? Math.round((completedCount / totalLessons) * 100) : 0;\n\n      // Prevent HTTP caching - always fetch fresh per user\n      res.set('Cache-Control', 'no-cache, no-store, must-revalidate, private');\n      res.set('Pragma', 'no-cache');\n      res.set('Expires', '0');\n\n      res.json({\n        totalModules: allModules.length,\n        totalLessons,\n        completedLessons: completedCount,\n        progressPercentage,\n        modules: allModules.map(m => ({ id: m.id, title: m.title })),\n        // Include full progress data for Modules page\n        progress: {\n          completedLessons,\n          completedModules: userProgress.completedModules || []\n        }\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // ===== NOTIFICATION ROUTES =====\n\n  app.get(\"/api/notifications\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const notifications = await storage.getUserNotifications(user.id);\n      res.send({ notifications });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/notifications/:id/read\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      await storage.markNotificationRead(user.id, req.params.id);\n      res.send({ success: true });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/notifications/mark-all-read\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      await storage.markAllNotificationsRead(user.id);\n      res.send({ success: true });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // ===== AI STUDY SUGGESTIONS ROUTE =====\n\n  app.get(\"/api/ai/study-suggestions\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n\n      // Get user's recent quiz performance\n      const recentAttempts = await storage.getUserQuizAttempts(user.id, 10);\n      const questionAttempts = await storage.getUserQuestionAttempts(user.id, 50);\n\n      // Calculate category performance\n      const categoryScores: Record<string, { correct: number; total: number }> = {};\n      for (const qa of questionAttempts) {\n        if (qa.category) {\n          if (!categoryScores[qa.category]) {\n            categoryScores[qa.category] = { correct: 0, total: 0 };\n          }\n\n  // ===== SEARCH ROUTES =====\n\n  app.get(\"/api/search\", requireAuth, async (req, res, next) => {\n    try {\n      const { q, type } = req.query;\n      const query = (q as string || \"\").toLowerCase();\n\n      if (!query || query.length < 2) {\n        return res.json({ results: [] });\n      }\n\n      const results: any = {\n        modules: [],\n        quizzes: [],\n        challenges: [],\n        careerPaths: [],\n      };\n\n      // Search modules\n      if (!type || type === \"modules\") {\n        const user = req.user as User;\n        const modules = await storage.getModulesForUser(user);\n        results.modules = modules.filter(m =>\n          m.title.toLowerCase().includes(query) ||\n          m.description.toLowerCase().includes(query)\n        );\n      }\n\n      // Search quizzes\n      if (!type || type === \"quizzes\") {\n        const quizzes = await storage.getQuizzes();\n        results.quizzes = quizzes.filter(q =>\n          q.title.toLowerCase().includes(query) ||\n          q.description.toLowerCase().includes(query)\n        );\n      }\n\n      // Search code challenges\n      if (!type || type === \"challenges\") {\n        const challenges = await storage.getCodeChallenges();\n        results.challenges = challenges.filter(c =>\n          c.title.toLowerCase().includes(query) ||\n          c.description.toLowerCase().includes(query)\n        );\n      }\n\n      // Search career paths\n      if (!type || type === \"paths\") {\n        const paths = await storage.getCareerPaths();\n        results.careerPaths = paths.filter(p =>\n          p.name.toLowerCase().includes(query) ||\n          p.description.toLowerCase().includes(query)\n        );\n      }\n\n      res.json({ results });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n          categoryScores[qa.category].total++;\n          if (qa.isCorrect) {\n            categoryScores[qa.category].correct++;\n          }\n        }\n      }\n\n      // Find weak categories (< 60% accuracy)\n      const weakCategories = Object.entries(categoryScores)\n        .filter(([_, stats]) => (stats.correct / stats.total) < 0.6)\n        .map(([category]) => category);\n\n      const recentQuizScores = recentAttempts.map(attempt => ({\n        category: \"general\",\n        score: attempt.correctAnswers,\n        total: attempt.totalQuestions,\n      }));\n\n      // Generate AI suggestions\n      const suggestions = await generateStudySuggestions({\n        level: user.level,\n        totalXp: user.totalXp,\n        careerPath: user.currentCareerPathId,\n        recentQuizScores,\n        weakCategories,\n      });\n\n      res.send({ suggestions });\n    } catch (error) {\n      console.error(\"Study suggestions error:\", error);\n      next(error);\n    }\n  });\n\n  // ===== ADMINROUTES =====\n\n  app.get(\"/api/admin/users\", requireAdmin, async (_req, res, next) => {\n    try {\n      const users = await storage.getUsersForLeaderboard(1000);\n      res.send({ users });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/admin/users\", requireAdmin, async (req, res, next) => {\n    try {\n      const { email, username, password, displayName, isAdmin } = req.body;\n\n      // Check if user exists\n      const existingUser = await storage.getUserByEmail(email);\n      if (existingUser) {\n        return res.status(400).send({ error: \"User with this email already exists\" });\n      }\n\n      const existingUsername = await storage.getUserByUsername(username);\n      if (existingUsername) {\n        return res.status(400).send({ error: \"Username already taken\" });\n      }\n\n      // Hash password and create user\n      const hashedPassword = await hashPassword(password);\n      let user = await storage.createUser({\n        email,\n        username,\n        password: hashedPassword,\n        displayName,\n        pathSelectionMode: \"ai-guided\",\n        currentCareerPathId: null,\n      });\n\n      // Update isAdmin separately if needed\n      if (isAdmin) {\n        user = (await storage.updateUser(user.id, { isAdmin: true }))!;\n      }\n\n      const { password: _, ...userWithoutPassword } = user;\n      res.status(201).send({ user: userWithoutPassword });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.patch(\"/api/admin/users/:id\", requireAdmin, async (req, res, next) => {\n    try {\n      const { displayName, isAdmin, level, totalXp } = req.body;\n      const updates: any = {};\n\n      if (displayName !== undefined) updates.displayName = displayName;\n      if (isAdmin !== undefined) updates.isAdmin = isAdmin;\n      if (level !== undefined) updates.level = level;\n      if (totalXp !== undefined) updates.totalXp = totalXp;\n\n      const user = await storage.updateUser(req.params.id, updates);\n      if (!user) {\n        return res.status(404).send({ error: \"User not found\" });\n      }\n\n      // Award badges if level was updated (e.g., reaching level 20 unlocks badge)\n      if (level !== undefined) {\n        await checkAndAwardBadges(req.params.id);\n      }\n\n      const { password: _, ...userWithoutPassword } = user;\n      res.send({ user: userWithoutPassword });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.delete(\"/api/admin/users/:id\", requireAdmin, async (req, res, next) => {\n    try {\n      await storage.deleteUser(req.params.id);\n      res.send({ success: true });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/admin/audit-logs\", requireAdmin, async (_req, res, next) => {\n    try {\n      const logs = await storage.getAuditLogs(100);\n      res.send({ logs });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/admin/quiz-results\", requireAdmin, async (_req, res, next) => {\n    try {\n      const attempts = await storage.getRecentQuizAttempts(100);\n\n      // Enrich attempts with username and quiz title\n      const enrichedAttempts = await Promise.all(\n        attempts.map(async (attempt) => {\n          const user = await storage.getUserById(attempt.userId);\n          const quiz = await storage.getQuizById(attempt.quizId);\n          return {\n            ...attempt,\n            username: user?.username || 'Unknown',\n            quizTitle: quiz?.title || 'Unknown Quiz',\n          };\n        })\n      );\n\n      res.send({\n        attempts: enrichedAttempts,\n        totalAttempts: enrichedAttempts.length\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Syllabus upload with PDF parsing and AI question generation\n  app.post(\"/api/admin/syllabus\", requireAdmin, upload.single('file'), async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const { careerPathId } = req.body;\n      const file = req.file;\n\n      if (!file || !careerPathId) {\n        return res.status(400).send({ error: \"PDF file and career path ID required\" });\n      }\n\n      // Parse PDF - dynamic import for CommonJS module\n      const pdfBuffer = file.buffer;\n      const pdfParseModule = await import('pdf-parse') as any;\n      const pdfParse = pdfParseModule.default || pdfParseModule;\n      const pdfData = await pdfParse(pdfBuffer);\n      const syllabusText = pdfData.text;\n\n      // Get career path name\n      const careerPath = await storage.getCareerPath(careerPathId);\n      if (!careerPath) {\n        return res.status(404).send({ error: \"Career path not found\" });\n      }\n\n      // Generate questions using AI\n      const generatedQuestions = await generateQuestionsFromText(\n        syllabusText,\n        careerPath.name,\n        15 // Generate 15 questions per syllabus\n      );\n\n      // Create a quiz from generated questions\n      const quiz = await storage.createQuiz({\n        title: `${careerPath.name} - ${file.originalname} Quiz`,\n        description: `Auto-generated quiz from ${file.originalname} syllabus`,\n        difficulty: \"intermediate\",\n        careerPathId,\n        requiredLevel: 5,\n        xpReward: 200,\n        timeLimit: 1800, // 30 minutes\n        isFinalAssessment: false,\n      });\n\n      // Create questions in the database\n      for (const q of generatedQuestions) {\n        await storage.createQuestion({\n          quizId: quiz.id,\n          questionText: q.question,\n          questionType: \"multiple-choice\",\n          options: q.options,\n          correctAnswer: String(q.correctAnswer),\n          explanation: q.explanation,\n          category: q.category,\n        });\n      }\n\n      const uploadRecord = await storage.createSyllabusUpload({\n        uploadedBy: user.id,\n        fileName: file.originalname || \"syllabus.pdf\",\n        careerPathId,\n        questionsGenerated: generatedQuestions.length,\n      });\n\n      // Create audit log\n      await storage.createAuditLog({\n        userId: user.id,\n        action: \"Syllabus Upload\",\n        details: `Uploaded ${file.originalname} - Generated ${generatedQuestions.length} questions for ${careerPath.name}`,\n        status: \"success\",\n      });\n\n      res.send({\n        upload: uploadRecord,\n        quiz,\n        questionsGenerated: generatedQuestions.length\n      });\n    } catch (error) {\n      console.error(\"Syllabus upload error:\", error);\n      next(error);\n    }\n  });\n\n  // Configure multer specifically for PDF uploads with strict validation\n  const pdfUpload = multer({\n    storage: multer.memoryStorage(),\n    limits: { fileSize: 10 * 1024 * 1024 }, // 10MB limit\n    fileFilter: (_req, file, cb) => {\n      // Only accept PDF files\n      if (file.mimetype === 'application/pdf' && file.originalname.toLowerCase().endsWith('.pdf')) {\n        cb(null, true);\n      } else {\n        cb(new Error('Only PDF files are allowed'));\n      }\n    }\n  });\n\n  // Upload lesson PDF\n  app.post(\"/api/admin/lesson-pdf\", requireAdmin, pdfUpload.single('file'), async (req, res, next) => {\n    try {\n      const file = req.file;\n\n      if (!file) {\n        return res.status(400).send({ error: \"PDF file required\" });\n      }\n\n      // Create lesson_pdfs directory if it doesn't exist\n      const uploadDir = path.join(process.cwd(), 'attached_assets', 'lesson_pdfs');\n      if (!fs.existsSync(uploadDir)) {\n        fs.mkdirSync(uploadDir, { recursive: true });\n      }\n\n      // Generate unique filename\n      const timestamp = Date.now();\n      const sanitizedFilename = file.originalname.replace(/[^a-zA-Z0-9.-]/g, '_');\n      const filename = `${timestamp}_${sanitizedFilename}`;\n      const filepath = path.join(uploadDir, filename);\n\n      // Save file\n      fs.writeFileSync(filepath, file.buffer);\n\n      // Return URL path (will be served by Express static middleware)\n      const pdfUrl = `/assets/lesson_pdfs/${filename}`;\n\n      res.send({\n        success: true,\n        pdfUrl,\n        filename,\n        originalName: file.originalname\n      });\n    } catch (error) {\n      console.error(\"Lesson PDF upload error:\", error);\n      next(error);\n    }\n  });\n\n  // ===== MODULE MANAGEMENT ROUTES =====\n\n  // Get all modules (admin view - no filtering)\n  app.get(\"/api/admin/modules\", requireAdmin, async (_req, res, next) => {\n    try {\n      const modulesRef = collection(db, \"modules\");\n      const snapshot = await getDocs(modulesRef);\n      const modules = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n\n      // Get lesson counts for each module\n      const modulesWithCounts = await Promise.all(\n        modules.map(async (module: any) => {\n          const lessons = await storage.getModuleLessons(module.id);\n          return {\n            ...module,\n            lessonCount: lessons.length,\n            totalXP: lessons.reduce((sum: number, lesson: any) => sum + (lesson.xpReward || 0), 0)\n          };\n        })\n      );\n\n      res.send({ modules: modulesWithCounts });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Create module\n  app.post(\"/api/admin/modules\", requireAdmin, async (req, res, next) => {\n    try {\n      const { title, description, careerPath, requiredLevel, order } = req.body;\n\n      if (!title || !description) {\n        return res.status(400).send({ error: \"Title and description are required\" });\n      }\n\n      const module = await storage.createModule({\n        title,\n        description,\n        careerPath: careerPath || null,\n        requiredLevel: requiredLevel || 0,\n        order: order || 0\n      });\n\n      res.send({ module });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Update module\n  app.patch(\"/api/admin/modules/:id\", requireAdmin, async (req, res, next) => {\n    try {\n      const { id } = req.params;\n      const updates = req.body;\n\n      await storage.updateModule(id, updates);\n\n      res.send({ success: true });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Delete module\n  app.delete(\"/api/admin/modules/:id\", requireAdmin, async (req, res, next) => {\n    try {\n      const { id } = req.params;\n\n      await storage.deleteModule(id);\n\n      res.send({ success: true });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Get lessons for a module\n  app.get(\"/api/admin/modules/:id/lessons\", requireAdmin, async (req, res, next) => {\n    try {\n      const { id } = req.params;\n      const lessons = await storage.getModuleLessons(id);\n\n      res.send({ lessons });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Create lesson\n  app.post(\"/api/admin/lessons\", requireAdmin, async (req, res, next) => {\n    try {\n      const { moduleId, title, content, description, type, order, xpReward, requiredLevel, estimatedTime, pdfUrl } = req.body;\n\n      if (!moduleId || !title) {\n        return res.status(400).send({ error: \"Module ID and title are required\" });\n      }\n\n      const lesson = await storage.createLesson({\n        moduleId,\n        title,\n        content: content || \"\",\n        description: description || \"\",\n        type: type || \"theory\",\n        order: order || 0,\n        xpReward: xpReward || 50,\n        requiredLevel: requiredLevel || 0,\n        estimatedTime: estimatedTime || \"10 min\",\n        pdfUrl\n      });\n\n      res.send({ lesson });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Update lesson\n  app.patch(\"/api/admin/lessons/:id\", requireAdmin, async (req, res, next) => {\n    try {\n      const { id } = req.params;\n      const updates = req.body;\n\n      await storage.updateLesson(id, updates);\n\n      res.send({ success: true });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Delete lesson\n  app.delete(\"/api/admin/lessons/:id\", requireAdmin, async (req, res, next) => {\n    try {\n      const { id } = req.params;\n\n      await storage.deleteLesson(id);\n\n      res.send({ success: true });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // ===== DEBUG ENDPOINTS =====\n\n  // Show hidden modules for current user (debug)\n  app.get(\"/api/debug/hidden-modules\", requireAuth, async (req, res, next) => {\n    try {\n      const user = req.user as User;\n      const modulesRef = collection(db, \"modules\");\n      const snapshot = await getDocs(modulesRef);\n      const allModules = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n\n      const hiddenModules = allModules.filter((m: any) => {\n        // Check if user meets level requirement\n        if ((m.requiredLevel || 0) > user.level) {\n          return true;\n        }\n\n        // If user has a career path, check if module is accessible\n        if (user.currentCareerPathId) {\n          return !(m.careerPath === user.currentCareerPathId || m.careerPath === null);\n        }\n\n        return false;\n      });\n\n      const hiddenWithReasons = hiddenModules.map((m: any) => ({\n        id: m.id,\n        title: m.title,\n        requiredLevel: m.requiredLevel || 0,\n        careerPath: m.careerPath || null,\n        reason: (m.requiredLevel || 0) > user.level\n          ? `Level requirement ${m.requiredLevel} > your level ${user.level}`\n          : user.currentCareerPathId && m.careerPath !== user.currentCareerPathId && m.careerPath !== null\n          ? `Career path mismatch: module is for \"${m.careerPath}\", you are in \"${user.currentCareerPathId}\"`\n          : 'Unknown'\n      }));\n\n      res.json({\n        userLevel: user.level,\n        userCareerPath: user.currentCareerPathId || 'None',\n        totalModules: allModules.length,\n        hiddenModules: hiddenWithReasons,\n        hiddenCount: hiddenWithReasons.length\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Fix: Unlock all modules for all users (make them accessible)\n  app.post(\"/api/admin/unlock-all-modules\", requireAdmin, async (req, res, next) => {\n    try {\n      const modulesRef = collection(db, \"modules\");\n      const snapshot = await getDocs(modulesRef);\n\n      let updated = 0;\n      for (const doc of snapshot.docs) {\n        const data = doc.data();\n        if ((data.requiredLevel || 0) !== 0 || data.careerPath !== null) {\n          await updateDoc(doc.ref, {\n            requiredLevel: 0,\n            careerPath: null\n          });\n          console.log(`[unlock-all-modules] Updated module \"${data.title}\" (${doc.id})`);\n          updated++;\n        }\n      }\n\n      res.json({\n        success: true,\n        message: `Updated ${updated} modules to be accessible to all users`,\n        updated\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}","path":null,"size_bytes":81385,"size_tokens":null},"client/src/components/SyllabusUpload.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { CareerPath } from \"@shared/schema\";\nimport { \n  Upload, \n  FileText, \n  CheckCircle2, \n  Loader2,\n  X,\n  AlertCircle\n} from \"lucide-react\";\n\nexport default function SyllabusUpload() {\n  const [file, setFile] = useState<File | null>(null);\n  const [selectedCareerPathId, setSelectedCareerPathId] = useState<string>(\"\");\n  const [result, setResult] = useState<{ questionsGenerated: number; careerPath: string } | null>(null);\n  const { toast } = useToast();\n\n  // Fetch career paths for selection\n  const { data: careerPathsData } = useQuery<{ paths: CareerPath[] }>({\n    queryKey: [\"/api/career-paths\"],\n  });\n  const careerPaths = careerPathsData?.paths || [];\n\n  // Mutation for uploading syllabus\n  const uploadMutation = useMutation({\n    mutationFn: async ({ file, careerPathId }: { file: File; careerPathId: string }) => {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      formData.append(\"careerPathId\", careerPathId);\n      \n      const response = await fetch(\"/api/admin/syllabus\", {\n        method: \"POST\",\n        body: formData,\n        credentials: \"include\",\n      });\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || \"Upload failed\");\n      }\n      return response.json();\n    },\n    onSuccess: (data: any) => {\n      const careerPath = careerPaths.find(cp => cp.id === selectedCareerPathId);\n      setResult({\n        questionsGenerated: data.questionsGenerated || 0,\n        careerPath: careerPath?.name || \"Unknown\"\n      });\n      toast({\n        title: \"Success!\",\n        description: `Generated ${data.questionsGenerated} questions from syllabus`,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Upload Failed\",\n        description: error.message || \"Failed to process syllabus PDF\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const selectedFile = e.target.files[0];\n      if (selectedFile.type !== \"application/pdf\") {\n        toast({\n          title: \"Invalid File Type\",\n          description: \"Please upload a PDF file\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      setFile(selectedFile);\n      setResult(null);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!file || !selectedCareerPathId) {\n      toast({\n        title: \"Missing Information\",\n        description: \"Please select both a PDF file and a career path\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    uploadMutation.mutate({ file, careerPathId: selectedCareerPathId });\n  };\n\n  const handleRemove = () => {\n    setFile(null);\n    setResult(null);\n    setSelectedCareerPathId(\"\");\n  };\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Upload Syllabus PDF</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {!file && !result && (\n          <label className=\"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-border rounded-lg cursor-pointer hover-elevate transition-all\">\n            <div className=\"flex flex-col items-center justify-center p-6 text-center\">\n              <Upload className=\"w-12 h-12 text-muted-foreground mb-4\" />\n              <p className=\"mb-2 text-sm font-medium\">\n                Drop PDF here or click to upload\n              </p>\n              <p className=\"text-xs text-muted-foreground\">\n                AI will automatically generate questions from the syllabus\n              </p>\n            </div>\n            <input \n              type=\"file\" \n              className=\"hidden\" \n              accept=\".pdf\"\n              onChange={handleFileChange}\n              data-testid=\"input-file-upload\"\n            />\n          </label>\n        )}\n\n        {file && !result && (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center gap-4 p-4 border border-card-border rounded-lg\">\n              <FileText className=\"w-10 h-10 text-primary flex-shrink-0\" />\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"font-medium truncate\">{file.name}</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  {(file.size / 1024 / 1024).toFixed(2)} MB\n                </p>\n              </div>\n              <Button \n                variant=\"ghost\" \n                size=\"icon\"\n                onClick={handleRemove}\n                disabled={uploadMutation.isPending}\n                data-testid=\"button-remove-file\"\n              >\n                <X className=\"w-4 h-4\" />\n              </Button>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Select Career Path</label>\n              <Select \n                value={selectedCareerPathId} \n                onValueChange={setSelectedCareerPathId}\n                disabled={uploadMutation.isPending}\n              >\n                <SelectTrigger data-testid=\"select-career-path\">\n                  <SelectValue placeholder=\"Choose a career path\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {careerPaths.map((path) => (\n                    <SelectItem key={path.id} value={path.id}>\n                      {path.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              {!selectedCareerPathId && (\n                <p className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                  <AlertCircle className=\"w-3 h-3\" />\n                  Questions will be assigned to this career path\n                </p>\n              )}\n            </div>\n\n            {uploadMutation.isPending && (\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"font-medium\">AI Processing...</span>\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Extracting content and generating questions with OpenAI...\n                </p>\n              </div>\n            )}\n\n            {!uploadMutation.isPending && (\n              <Button \n                onClick={handleUpload} \n                className=\"w-full\"\n                disabled={!selectedCareerPathId}\n                data-testid=\"button-upload\"\n              >\n                <Upload className=\"w-4 h-4 mr-2\" />\n                Upload and Process with AI\n              </Button>\n            )}\n          </div>\n        )}\n\n        {result && (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center gap-3 p-4 bg-[hsl(var(--success))]/10 border border-[hsl(var(--success))]/20 rounded-lg\">\n              <CheckCircle2 className=\"w-6 h-6 text-[hsl(var(--success))]\" />\n              <div className=\"flex-1\">\n                <p className=\"font-semibold\">Processing Complete!</p>\n                <p className=\"text-sm text-muted-foreground\">\n                  AI successfully generated {result.questionsGenerated} questions\n                </p>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"p-4 border border-card-border rounded-lg\">\n                <div className=\"text-sm text-muted-foreground mb-1\">Questions Generated</div>\n                <div className=\"text-2xl font-bold\">{result.questionsGenerated}</div>\n              </div>\n              <div className=\"p-4 border border-card-border rounded-lg\">\n                <div className=\"text-sm text-muted-foreground mb-1\">Assigned to Path</div>\n                <Badge className=\"mt-1\">{result.careerPath}</Badge>\n              </div>\n            </div>\n\n            <div className=\"flex gap-3\">\n              <Button variant=\"outline\" onClick={handleRemove} className=\"flex-1\" data-testid=\"button-upload-another\">\n                Upload Another\n              </Button>\n              <Button className=\"flex-1\" data-testid=\"button-review\">\n                Review Questions\n              </Button>\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":8868,"size_tokens":null},"client/src/components/AuditLogTable.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { ChevronDown, Search, Filter, Calendar, User, AlertCircle, CheckCircle2, AlertTriangle } from \"lucide-react\";\nimport { useState, useMemo } from \"react\";\nimport React from \"react\";\nimport type { AuditLog } from \"@shared/schema\";\n\ninterface AuditLogTableProps {\n  logs: AuditLog[];\n}\n\nconst statusColors = {\n  success: \"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20\",\n  warning: \"bg-yellow-500/10 text-yellow-700 dark:text-yellow-400 border-yellow-500/20\",\n  error: \"bg-red-500/10 text-red-700 dark:text-red-400 border-red-500/20\",\n};\n\nconst statusIcons = {\n  success: CheckCircle2,\n  warning: AlertTriangle,\n  error: AlertCircle,\n};\n\nexport default function AuditLogTable({ logs }: AuditLogTableProps) {\n  const [expandedRow, setExpandedRow] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 25;\n\n  const toggleRow = (id: string) => {\n    setExpandedRow(expandedRow === id ? null : id);\n  };\n\n  const filteredLogs = useMemo(() => {\n    return logs.filter(log => {\n      const matchesSearch = searchQuery === '' ||\n        log.action.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        (log.userId && log.userId.toLowerCase().includes(searchQuery.toLowerCase())) ||\n        log.details.toLowerCase().includes(searchQuery.toLowerCase());\n      \n      const matchesStatus = statusFilter === \"all\" || log.status === statusFilter;\n      \n      return matchesSearch && matchesStatus;\n    });\n  }, [logs, searchQuery, statusFilter]);\n\n  const paginatedLogs = useMemo(() => {\n    const startIndex = (currentPage - 1) * itemsPerPage;\n    return filteredLogs.slice(startIndex, startIndex + itemsPerPage);\n  }, [filteredLogs, currentPage]);\n\n  const totalPages = Math.ceil(filteredLogs.length / itemsPerPage);\n\n  const statusCounts = useMemo(() => {\n    return {\n      all: logs.length,\n      success: logs.filter(l => l.status === 'success').length,\n      warning: logs.filter(l => l.status === 'warning').length,\n      error: logs.filter(l => l.status === 'error').length,\n    };\n  }, [logs]);\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex flex-wrap items-center gap-4 p-4 border-b\">\n        <div className=\"relative flex-1 min-w-[250px] max-w-md\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n          <Input \n            placeholder=\"Search logs by action, user, or details...\" \n            className=\"pl-10\"\n            value={searchQuery}\n            onChange={(e) => {\n              setSearchQuery(e.target.value);\n              setCurrentPage(1);\n            }}\n            data-testid=\"input-search-logs\"\n          />\n        </div>\n        \n        <Select value={statusFilter} onValueChange={(value) => {\n          setStatusFilter(value);\n          setCurrentPage(1);\n        }}>\n          <SelectTrigger className=\"w-[180px]\" data-testid=\"select-status-filter\">\n            <Filter className=\"w-4 h-4 mr-2\" />\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Status ({statusCounts.all})</SelectItem>\n            <SelectItem value=\"success\">Success ({statusCounts.success})</SelectItem>\n            <SelectItem value=\"warning\">Warning ({statusCounts.warning})</SelectItem>\n            <SelectItem value=\"error\">Error ({statusCounts.error})</SelectItem>\n          </SelectContent>\n        </Select>\n\n        <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n          <span>{filteredLogs.length} logs</span>\n        </div>\n      </div>\n\n      {filteredLogs.length === 0 ? (\n        <div className=\"text-center py-16 text-muted-foreground\">\n          <AlertCircle className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n          <p className=\"font-medium\">No audit logs found</p>\n          <p className=\"text-sm\">Try adjusting your search or filters</p>\n        </div>\n      ) : (\n        <>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-muted/50 border-b\">\n                <tr className=\"text-left\">\n                  <th className=\"p-4 font-semibold text-sm\">\n                    <div className=\"flex items-center gap-2\">\n                      <Calendar className=\"w-4 h-4\" />\n                      Timestamp\n                    </div>\n                  </th>\n                  <th className=\"p-4 font-semibold text-sm\">\n                    <div className=\"flex items-center gap-2\">\n                      <User className=\"w-4 h-4\" />\n                      User\n                    </div>\n                  </th>\n                  <th className=\"p-4 font-semibold text-sm\">Action</th>\n                  <th className=\"p-4 font-semibold text-sm\">Status</th>\n                  <th className=\"p-4 font-semibold text-sm w-12\"></th>\n                </tr>\n              </thead>\n              <tbody>\n                {paginatedLogs.map((log) => {\n                  const StatusIcon = statusIcons[log.status as keyof typeof statusIcons] || AlertCircle;\n                  return (\n                    <React.Fragment key={log.id}>\n                      <tr \n                        key={log.id}\n                        className=\"border-b hover-elevate cursor-pointer transition-colors\"\n                        onClick={() => toggleRow(log.id)}\n                        data-testid={`row-log-${log.id}`}\n                      >\n                        <td className=\"p-4\">\n                          <div className=\"text-sm font-medium\">\n                            {new Date(log.createdAt).toLocaleDateString()}\n                          </div>\n                          <div className=\"text-xs text-muted-foreground font-mono\">\n                            {new Date(log.createdAt).toLocaleTimeString()}\n                          </div>\n                        </td>\n                        <td className=\"p-4\">\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center\">\n                              <User className=\"w-4 h-4 text-primary\" />\n                            </div>\n                            <span className=\"font-medium text-sm\">{log.userId || 'System'}</span>\n                          </div>\n                        </td>\n                        <td className=\"p-4\">\n                          <div className=\"text-sm font-medium\">{log.action}</div>\n                        </td>\n                        <td className=\"p-4\">\n                          <Badge variant=\"outline\" className={statusColors[log.status as keyof typeof statusColors]}>\n                            <StatusIcon className=\"w-3 h-3 mr-1\" />\n                            {log.status.charAt(0).toUpperCase() + log.status.slice(1)}\n                          </Badge>\n                        </td>\n                        <td className=\"p-4\">\n                          <Button \n                            variant=\"ghost\" \n                            size=\"icon\"\n                            className={`transition-transform ${expandedRow === log.id ? \"rotate-180\" : \"\"}`}\n                          >\n                            <ChevronDown className=\"w-4 h-4\" />\n                          </Button>\n                        </td>\n                      </tr>\n                      {expandedRow === log.id && (\n                        <tr className=\"bg-muted/30\">\n                          <td colSpan={5} className=\"p-6\">\n                            <div className=\"space-y-3\">\n                              <div className=\"flex items-center gap-2 text-sm font-semibold\">\n                                <AlertCircle className=\"w-4 h-4\" />\n                                Event Details\n                              </div>\n                              <div className=\"bg-background p-4 rounded-lg border font-mono text-sm\">\n                                {log.details}\n                              </div>\n                              <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                                <div>\n                                  <span className=\"text-muted-foreground\">Log ID:</span>\n                                  <div className=\"font-mono text-xs mt-1\">{log.id}</div>\n                                </div>\n                                <div>\n                                  <span className=\"text-muted-foreground\">User ID:</span>\n                                  <div className=\"font-mono text-xs mt-1\">{log.userId || 'N/A'}</div>\n                                </div>\n                                <div>\n                                  <span className=\"text-muted-foreground\">Timestamp:</span>\n                                  <div className=\"font-mono text-xs mt-1\">\n                                    {new Date(log.createdAt).toISOString()}\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </td>\n                        </tr>\n                      )}\n                    </React.Fragment>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"flex items-center justify-between p-4 border-t\">\n              <div className=\"text-sm text-muted-foreground\">\n                Showing {((currentPage - 1) * itemsPerPage) + 1} to {Math.min(currentPage * itemsPerPage, filteredLogs.length)} of {filteredLogs.length} logs\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setCurrentPage(p => Math.max(1, p - 1))}\n                  disabled={currentPage === 1}\n                  data-testid=\"button-prev-page\"\n                >\n                  Previous\n                </Button>\n                <div className=\"text-sm font-medium\">\n                  Page {currentPage} of {totalPages}\n                </div>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}\n                  disabled={currentPage === totalPages}\n                  data-testid=\"button-next-page\"\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":10980,"size_tokens":null},"client/src/lib/firebase.ts":{"content":"import { initializeApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAtXt_mx217dS4KmIzQ78_KafufDwuGhm4\",\n  authDomain: \"careerquest-7a741.firebaseapp.com\",\n  projectId: \"careerquest-7a741\",\n  storageBucket: \"careerquest-7a741.firebasestorage.app\",\n  messagingSenderId: \"864822379969\",\n  appId: \"1:864822379969:web:2e86263d38376c9a219b40\"\n};\n\nconst app = initializeApp(firebaseConfig);\nexport const db = getFirestore(app);\nexport const auth = getAuth(app);\n","path":null,"size_bytes":568,"size_tokens":null},"client/src/pages/Lesson.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useLocation, useRoute } from \"wouter\";\nimport { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { CheckCircle2, ChevronLeft, FileText, BookOpen } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport type { Lesson as LessonType, Module } from \"@shared/schema\";\n\nexport default function Lesson() {\n  const [, params] = useRoute(\"/lesson/:lessonId\");\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const lessonId = params?.lessonId;\n  const [showPdfModal, setShowPdfModal] = useState(false);\n\n  const { data: lessonData, isLoading } = useQuery<{ lesson: LessonType; module: Module }>({\n    queryKey: [`/api/lessons/${lessonId}`],\n    enabled: !!lessonId,\n  });\n\n  const completeMutation = useMutation({\n    mutationFn: async () => {\n      return apiRequest(\"POST\", `/api/lessons/${lessonId}/complete`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/modules\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/users/me\"] });\n      toast({\n        title: \"Lesson Complete!\",\n        description: `You earned ${lessonData?.lesson.xpReward || 0} XP!`,\n      });\n      navigate(\"/modules\");\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to mark lesson as complete\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-muted-foreground\">Loading...</div>\n      </div>\n    );\n  }\n\n  if (!lessonData) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"font-bold text-2xl mb-2\">Lesson Not Found</h2>\n          <Button onClick={() => navigate(\"/modules\")} data-testid=\"button-back-modules\">\n            Back to Modules\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  const { lesson, module } = lessonData;\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"max-w-4xl mx-auto px-6 py-8\">\n        <Button\n          variant=\"ghost\"\n          onClick={() => navigate(\"/modules\")}\n          className=\"mb-6\"\n          data-testid=\"button-back\"\n        >\n          <ChevronLeft className=\"w-4 h-4 mr-2\" />\n          Back to Modules\n        </Button>\n\n        <Card>\n          <CardHeader>\n            <div className=\"mb-2\">\n              <div className=\"text-sm text-muted-foreground flex items-center gap-2\">\n                <BookOpen className=\"w-4 h-4\" />\n                {module.title}\n              </div>\n            </div>\n            <CardTitle className=\"text-3xl\">{lesson.title}</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {lesson.pdfUrl ? (\n              <div className=\"text-center space-y-4 py-8\">\n                <FileText className=\"w-16 h-16 mx-auto text-primary\" />\n                <p className=\"text-muted-foreground\">\n                  {lesson.content}\n                </p>\n                <Button\n                  onClick={() => setShowPdfModal(true)}\n                  size=\"lg\"\n                  data-testid=\"button-view-pdf\"\n                >\n                  <FileText className=\"w-4 h-4 mr-2\" />\n                  View Lesson PDF\n                </Button>\n              </div>\n            ) : (\n              <div className=\"prose dark:prose-invert max-w-none\">\n                <div dangerouslySetInnerHTML={{ __html: lesson.content }} />\n              </div>\n            )}\n\n            <div className=\"flex items-center justify-between pt-6 border-t\">\n              <div className=\"text-sm text-muted-foreground\">\n                Lesson {lesson.order} ‚Ä¢ {lesson.xpReward} XP\n              </div>\n              <Button\n                onClick={() => completeMutation.mutate()}\n                disabled={completeMutation.isPending}\n                data-testid=\"button-complete\"\n              >\n                {completeMutation.isPending ? \"Completing...\" : (\n                  <>\n                    <CheckCircle2 className=\"w-4 h-4 mr-2\" />\n                    Mark as Complete\n                  </>\n                )}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* PDF Modal */}\n        <Dialog open={showPdfModal} onOpenChange={setShowPdfModal}>\n          <DialogContent className=\"max-w-6xl h-[90vh] flex flex-col\">\n            <DialogHeader>\n              <DialogTitle>{lesson.title}</DialogTitle>\n            </DialogHeader>\n            <div className=\"flex-1 overflow-hidden\">\n              {lesson.pdfUrl && (\n                <iframe\n                  src={lesson.pdfUrl}\n                  className=\"w-full h-full border-0 rounded\"\n                  title={lesson.title}\n                />\n              )}\n            </div>\n            <div className=\"flex items-center justify-between pt-4 border-t\">\n              <div className=\"text-sm text-muted-foreground\">\n                {lesson.xpReward} XP\n              </div>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setShowPdfModal(false)}\n                  data-testid=\"button-close-pdf\"\n                >\n                  Close\n                </Button>\n                <Button\n                  onClick={() => {\n                    completeMutation.mutate();\n                    setShowPdfModal(false);\n                  }}\n                  disabled={completeMutation.isPending}\n                  data-testid=\"button-complete-pdf\"\n                >\n                  {completeMutation.isPending ? \"Completing...\" : (\n                    <>\n                      <CheckCircle2 className=\"w-4 h-4 mr-2\" />\n                      Mark as Complete\n                    </>\n                  )}\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":6389,"size_tokens":null},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":2263,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"server/seed-modules.ts":{"content":"import { storage } from \"./storage-firestore\";\n\nasync function seedModules() {\n  console.log(\"Seeding comprehensive modules and lessons...\");\n\n  // Get career paths\n  const paths = await storage.getCareerPaths();\n  const fullStackPath = paths.find(p => p.name.includes(\"Full Stack\"));\n  const dataSciencePath = paths.find(p => p.name.includes(\"Data Science\"));\n  const cloudPath = paths.find(p => p.name.includes(\"Cloud\"));\n  const mobilePath = paths.find(p => p.name.includes(\"Mobile\"));\n  const securityPath = paths.find(p => p.name.includes(\"Cybersecurity\"));\n\n  // Create general modules (for AI-guided users before Level 20)\n  const generalModules = [\n    {\n      title: \"Programming Fundamentals\",\n      description: \"Master the basics of programming logic and problem-solving\",\n      careerPath: null,\n      requiredLevel: 1,\n      order: 1,\n    },\n    {\n      title: \"Data Structures Basics\",\n      description: \"Learn essential data structures: arrays, lists, and maps\",\n      careerPath: null,\n      requiredLevel: 5,\n      order: 2,\n    },\n    {\n      title: \"Algorithm Thinking\",\n      description: \"Develop algorithmic thinking and problem-solving skills\",\n      careerPath: null,\n      requiredLevel: 10,\n      order: 3,\n    },\n    {\n      title: \"Version Control with Git\",\n      description: \"Learn Git and GitHub for collaborative development\",\n      careerPath: null,\n      requiredLevel: 3,\n      order: 4,\n    },\n  ];\n\n  for (const moduleData of generalModules) {\n    const module = await storage.createModule(moduleData);\n    console.log(`Created module: ${module.title}`);\n\n    const lessons = getGeneralLessons(moduleData.title);\n    for (const lessonData of lessons) {\n      const lesson = await storage.createLesson({\n        ...lessonData,\n        moduleId: module.id,\n      });\n      console.log(`  - Created lesson: ${lesson.title}`);\n    }\n  }\n\n  // Full Stack Developer modules\n  if (fullStackPath) {\n    const fullStackModules = [\n      {\n        title: \"HTML & CSS Mastery\",\n        description: \"Build beautiful and responsive web layouts\",\n        careerPath: fullStackPath.id,\n        requiredLevel: 1,\n        order: 1,\n      },\n      {\n        title: \"JavaScript Essentials\",\n        description: \"Master JavaScript fundamentals and ES6+ features\",\n        careerPath: fullStackPath.id,\n        requiredLevel: 8,\n        order: 2,\n      },\n      {\n        title: \"React Development\",\n        description: \"Build modern web apps with React and hooks\",\n        careerPath: fullStackPath.id,\n        requiredLevel: 15,\n        order: 3,\n      },\n      {\n        title: \"Node.js Backend\",\n        description: \"Create server-side applications with Node.js\",\n        careerPath: fullStackPath.id,\n        requiredLevel: 20,\n        order: 4,\n      },\n      {\n        title: \"Database Integration\",\n        description: \"Connect your applications to databases\",\n        careerPath: fullStackPath.id,\n        requiredLevel: 25,\n        order: 5,\n      },\n    ];\n\n    for (const moduleData of fullStackModules) {\n      const module = await storage.createModule(moduleData);\n      console.log(`Created Full Stack module: ${module.title}`);\n\n      const lessons = getFullStackLessons(moduleData.title);\n      for (const lessonData of lessons) {\n        const lesson = await storage.createLesson({\n          ...lessonData,\n          moduleId: module.id,\n        });\n        console.log(`  - Created lesson: ${lesson.title}`);\n      }\n    }\n  }\n\n  // Data Science modules\n  if (dataSciencePath) {\n    const dataScienceModules = [\n      {\n        title: \"Python for Data Science\",\n        description: \"Learn Python programming for data analysis\",\n        careerPath: dataSciencePath.id,\n        requiredLevel: 1,\n        order: 1,\n      },\n      {\n        title: \"Statistics and Probability\",\n        description: \"Master statistical concepts for data analysis\",\n        careerPath: dataSciencePath.id,\n        requiredLevel: 10,\n        order: 2,\n      },\n      {\n        title: \"Data Visualization\",\n        description: \"Create compelling data visualizations\",\n        careerPath: dataSciencePath.id,\n        requiredLevel: 15,\n        order: 3,\n      },\n      {\n        title: \"Machine Learning Basics\",\n        description: \"Introduction to ML algorithms and models\",\n        careerPath: dataSciencePath.id,\n        requiredLevel: 20,\n        order: 4,\n      },\n    ];\n\n    for (const moduleData of dataScienceModules) {\n      const module = await storage.createModule(moduleData);\n      console.log(`Created Data Science module: ${module.title}`);\n\n      const lessons = getDataScienceLessons(moduleData.title);\n      for (const lessonData of lessons) {\n        const lesson = await storage.createLesson({\n          ...lessonData,\n          moduleId: module.id,\n        });\n        console.log(`  - Created lesson: ${lesson.title}`);\n      }\n    }\n  }\n\n  // Cloud Engineering modules\n  if (cloudPath) {\n    const cloudModules = [\n      {\n        title: \"Cloud Computing Fundamentals\",\n        description: \"Understand cloud infrastructure and services\",\n        careerPath: cloudPath.id,\n        requiredLevel: 1,\n        order: 1,\n      },\n      {\n        title: \"AWS Services\",\n        description: \"Master Amazon Web Services core offerings\",\n        careerPath: cloudPath.id,\n        requiredLevel: 10,\n        order: 2,\n      },\n      {\n        title: \"Docker and Containers\",\n        description: \"Containerize applications with Docker\",\n        careerPath: cloudPath.id,\n        requiredLevel: 15,\n        order: 3,\n      },\n      {\n        title: \"Kubernetes Orchestration\",\n        description: \"Deploy and manage containerized applications\",\n        careerPath: cloudPath.id,\n        requiredLevel: 25,\n        order: 4,\n      },\n    ];\n\n    for (const moduleData of cloudModules) {\n      const module = await storage.createModule(moduleData);\n      console.log(`Created Cloud module: ${module.title}`);\n\n      const lessons = getCloudLessons(moduleData.title);\n      for (const lessonData of lessons) {\n        const lesson = await storage.createLesson({\n          ...lessonData,\n          moduleId: module.id,\n        });\n        console.log(`  - Created lesson: ${lesson.title}`);\n      }\n    }\n  }\n\n  // Mobile Development modules\n  if (mobilePath) {\n    const mobileModules = [\n      {\n        title: \"Mobile UI/UX Principles\",\n        description: \"Design mobile-first user experiences\",\n        careerPath: mobilePath.id,\n        requiredLevel: 1,\n        order: 1,\n      },\n      {\n        title: \"React Native Basics\",\n        description: \"Build cross-platform mobile apps\",\n        careerPath: mobilePath.id,\n        requiredLevel: 10,\n        order: 2,\n      },\n      {\n        title: \"Native Mobile Features\",\n        description: \"Access device capabilities and sensors\",\n        careerPath: mobilePath.id,\n        requiredLevel: 20,\n        order: 3,\n      },\n    ];\n\n    for (const moduleData of mobileModules) {\n      const module = await storage.createModule(moduleData);\n      console.log(`Created Mobile module: ${module.title}`);\n\n      const lessons = getMobileLessons(moduleData.title);\n      for (const lessonData of lessons) {\n        const lesson = await storage.createLesson({\n          ...lessonData,\n          moduleId: module.id,\n        });\n        console.log(`  - Created lesson: ${lesson.title}`);\n      }\n    }\n  }\n\n  // Cybersecurity modules\n  if (securityPath) {\n    const securityModules = [\n      {\n        title: \"Security Fundamentals\",\n        description: \"Core concepts of cybersecurity\",\n        careerPath: securityPath.id,\n        requiredLevel: 1,\n        order: 1,\n      },\n      {\n        title: \"Network Security\",\n        description: \"Protect networks from threats\",\n        careerPath: securityPath.id,\n        requiredLevel: 10,\n        order: 2,\n      },\n      {\n        title: \"Web Application Security\",\n        description: \"Secure web applications from vulnerabilities\",\n        careerPath: securityPath.id,\n        requiredLevel: 15,\n        order: 3,\n      },\n      {\n        title: \"Ethical Hacking\",\n        description: \"Penetration testing and vulnerability assessment\",\n        careerPath: securityPath.id,\n        requiredLevel: 25,\n        order: 4,\n      },\n    ];\n\n    for (const moduleData of securityModules) {\n      const module = await storage.createModule(moduleData);\n      console.log(`Created Security module: ${module.title}`);\n\n      const lessons = getSecurityLessons(moduleData.title);\n      for (const lessonData of lessons) {\n        const lesson = await storage.createLesson({\n          ...lessonData,\n          moduleId: module.id,\n        });\n        console.log(`  - Created lesson: ${lesson.title}`);\n      }\n    }\n  }\n\n  console.log(\"Module seeding complete!\");\n  process.exit(0);\n}\n\nfunction getGeneralLessons(moduleTitle: string) {\n  const lessonsMap: Record<string, any[]> = {\n    \"Programming Fundamentals\": [\n      {\n        title: \"Variables and Data Types\",\n        content: \"Learn about different data types and how to store values in variables. Understanding types is fundamental to all programming languages.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 50,\n      },\n      {\n        title: \"Control Flow: If Statements\",\n        content: \"Master conditional logic with if-else statements. Learn to make decisions in your code based on conditions.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 50,\n      },\n      {\n        title: \"Loops and Iteration\",\n        content: \"Learn how to repeat code efficiently with for, while, and do-while loops. Master iteration patterns.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 50,\n      },\n      {\n        title: \"Functions and Modularity\",\n        content: \"Organize code into reusable functions. Learn about parameters, return values, and function scope.\",\n        type: \"theory\",\n        order: 4,\n        xpReward: 75,\n      },\n    ],\n    \"Data Structures Basics\": [\n      {\n        title: \"Arrays and Lists\",\n        content: \"Understand how to work with ordered collections of data. Learn array operations and methods.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 75,\n      },\n      {\n        title: \"Hash Maps and Dictionaries\",\n        content: \"Learn key-value pair data structures for fast data lookup and storage.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 75,\n      },\n      {\n        title: \"Stacks and Queues\",\n        content: \"Master LIFO and FIFO data structures and their applications.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 100,\n      },\n    ],\n    \"Algorithm Thinking\": [\n      {\n        title: \"Big O Notation\",\n        content: \"Understand algorithm efficiency and time complexity. Learn to analyze algorithm performance.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 100,\n      },\n      {\n        title: \"Search Algorithms\",\n        content: \"Master linear and binary search techniques for finding data efficiently.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 100,\n      },\n      {\n        title: \"Sorting Algorithms\",\n        content: \"Learn bubble sort, merge sort, and quick sort. Understand when to use each algorithm.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 125,\n      },\n    ],\n    \"Version Control with Git\": [\n      {\n        title: \"Git Basics\",\n        content: \"Learn to track changes in your code with Git. Master commit, push, and pull operations.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 75,\n      },\n      {\n        title: \"Branching and Merging\",\n        content: \"Work on multiple features simultaneously using Git branches.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 100,\n      },\n      {\n        title: \"Collaboration with GitHub\",\n        content: \"Use GitHub for team collaboration. Learn pull requests and code reviews.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 100,\n      },\n    ],\n  };\n\n  return lessonsMap[moduleTitle] || [];\n}\n\nfunction getFullStackLessons(moduleTitle: string) {\n  const lessonsMap: Record<string, any[]> = {\n    \"HTML & CSS Mastery\": [\n      {\n        title: \"HTML Structure and Semantics\",\n        content: \"Learn proper HTML structure and semantic elements for better accessibility and SEO.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 50,\n      },\n      {\n        title: \"CSS Flexbox Layout\",\n        content: \"Master flexible box layouts for responsive design. Create adaptive page layouts.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 75,\n      },\n      {\n        title: \"CSS Grid System\",\n        content: \"Build complex two-dimensional layouts with CSS Grid.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 75,\n      },\n      {\n        title: \"Responsive Design\",\n        content: \"Create websites that work on all device sizes using media queries.\",\n        type: \"theory\",\n        order: 4,\n        xpReward: 100,\n      },\n    ],\n    \"JavaScript Essentials\": [\n      {\n        title: \"Functions and Scope\",\n        content: \"Understand function declarations, expressions, arrow functions, and closures.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 100,\n      },\n      {\n        title: \"Array Methods\",\n        content: \"Master map, filter, reduce, and other functional array methods.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 100,\n      },\n      {\n        title: \"Async JavaScript\",\n        content: \"Learn promises, async/await, and handling asynchronous operations.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 125,\n      },\n      {\n        title: \"DOM Manipulation\",\n        content: \"Interact with HTML elements dynamically using JavaScript.\",\n        type: \"theory\",\n        order: 4,\n        xpReward: 100,\n      },\n    ],\n    \"React Development\": [\n      {\n        title: \"React Components\",\n        content: \"Learn to build reusable React components using JSX.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 150,\n      },\n      {\n        title: \"State and Props\",\n        content: \"Manage component state and pass data with props.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 150,\n      },\n      {\n        title: \"React Hooks\",\n        content: \"Master useState, useEffect, and custom hooks.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 175,\n      },\n    ],\n    \"Node.js Backend\": [\n      {\n        title: \"HTTP Fundamentals\",\n        content: \"Understand HTTP methods, status codes, and headers.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 100,\n      },\n      {\n        title: \"Express.js Basics\",\n        content: \"Build web servers with Express.js framework.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 125,\n      },\n      {\n        title: \"Middleware and Routing\",\n        content: \"Organize your Express application with middleware and routes.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 125,\n      },\n    ],\n    \"Database Integration\": [\n      {\n        title: \"SQL Queries\",\n        content: \"Master SELECT, JOIN, and aggregate functions.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 150,\n      },\n      {\n        title: \"Database Design\",\n        content: \"Design normalized database schemas.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 150,\n      },\n      {\n        title: \"ORMs and Prisma\",\n        content: \"Use Object-Relational Mapping tools for database operations.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 175,\n      },\n    ],\n  };\n\n  return lessonsMap[moduleTitle] || [];\n}\n\nfunction getDataScienceLessons(moduleTitle: string) {\n  const lessonsMap: Record<string, any[]> = {\n    \"Python for Data Science\": [\n      {\n        title: \"Python Basics\",\n        content: \"Learn Python syntax, variables, and data types for data science.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 75,\n      },\n      {\n        title: \"NumPy Arrays\",\n        content: \"Work with numerical arrays using NumPy library.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 100,\n      },\n      {\n        title: \"Pandas DataFrames\",\n        content: \"Manipulate tabular data with Pandas.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 100,\n      },\n    ],\n    \"Statistics and Probability\": [\n      {\n        title: \"Descriptive Statistics\",\n        content: \"Calculate mean, median, mode, and standard deviation.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 100,\n      },\n      {\n        title: \"Probability Distributions\",\n        content: \"Understand normal, binomial, and Poisson distributions.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 125,\n      },\n      {\n        title: \"Hypothesis Testing\",\n        content: \"Conduct statistical tests and interpret results.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 150,\n      },\n    ],\n    \"Data Visualization\": [\n      {\n        title: \"Matplotlib Basics\",\n        content: \"Create charts and graphs with Matplotlib.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 100,\n      },\n      {\n        title: \"Seaborn for Statistics\",\n        content: \"Build statistical visualizations with Seaborn.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 125,\n      },\n    ],\n    \"Machine Learning Basics\": [\n      {\n        title: \"Supervised Learning\",\n        content: \"Understand classification and regression algorithms.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 150,\n      },\n      {\n        title: \"Model Evaluation\",\n        content: \"Evaluate model performance with metrics and cross-validation.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 150,\n      },\n    ],\n  };\n\n  return lessonsMap[moduleTitle] || [];\n}\n\nfunction getCloudLessons(moduleTitle: string) {\n  const lessonsMap: Record<string, any[]> = {\n    \"Cloud Computing Fundamentals\": [\n      {\n        title: \"IaaS, PaaS, SaaS\",\n        content: \"Understand different cloud service models.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 100,\n      },\n      {\n        title: \"Cloud Deployment Models\",\n        content: \"Learn about public, private, and hybrid clouds.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 100,\n      },\n    ],\n    \"AWS Services\": [\n      {\n        title: \"EC2 Compute Instances\",\n        content: \"Launch and manage virtual servers on AWS.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 125,\n      },\n      {\n        title: \"S3 Object Storage\",\n        content: \"Store and retrieve files with Amazon S3.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 125,\n      },\n      {\n        title: \"AWS Lambda\",\n        content: \"Run serverless functions with AWS Lambda.\",\n        type: \"theory\",\n        order: 3,\n        xpReward: 150,\n      },\n    ],\n    \"Docker and Containers\": [\n      {\n        title: \"Docker Basics\",\n        content: \"Create and run Docker containers.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 125,\n      },\n      {\n        title: \"Dockerfile Best Practices\",\n        content: \"Build efficient Docker images.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 150,\n      },\n    ],\n    \"Kubernetes Orchestration\": [\n      {\n        title: \"Kubernetes Architecture\",\n        content: \"Understand pods, nodes, and clusters.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 175,\n      },\n      {\n        title: \"Deployments and Services\",\n        content: \"Deploy applications and expose them with services.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 175,\n      },\n    ],\n  };\n\n  return lessonsMap[moduleTitle] || [];\n}\n\nfunction getMobileLessons(moduleTitle: string) {\n  const lessonsMap: Record<string, any[]> = {\n    \"Mobile UI/UX Principles\": [\n      {\n        title: \"Mobile Design Patterns\",\n        content: \"Learn common mobile UI patterns and best practices.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 100,\n      },\n      {\n        title: \"Touch Interactions\",\n        content: \"Design for touch gestures and mobile interactions.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 100,\n      },\n    ],\n    \"React Native Basics\": [\n      {\n        title: \"React Native Components\",\n        content: \"Build UI with native mobile components.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 125,\n      },\n      {\n        title: \"Navigation\",\n        content: \"Implement stack and tab navigation.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 150,\n      },\n    ],\n    \"Native Mobile Features\": [\n      {\n        title: \"Camera and Photos\",\n        content: \"Access device camera and photo library.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 150,\n      },\n      {\n        title: \"Geolocation\",\n        content: \"Use GPS and location services.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 150,\n      },\n    ],\n  };\n\n  return lessonsMap[moduleTitle] || [];\n}\n\nfunction getSecurityLessons(moduleTitle: string) {\n  const lessonsMap: Record<string, any[]> = {\n    \"Security Fundamentals\": [\n      {\n        title: \"CIA Triad\",\n        content: \"Understand Confidentiality, Integrity, and Availability.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 100,\n      },\n      {\n        title: \"Cryptography Basics\",\n        content: \"Learn encryption, hashing, and digital signatures.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 125,\n      },\n    ],\n    \"Network Security\": [\n      {\n        title: \"Firewalls and IDS\",\n        content: \"Implement network perimeter security.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 125,\n      },\n      {\n        title: \"VPNs and Tunneling\",\n        content: \"Secure network communications.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 150,\n      },\n    ],\n    \"Web Application Security\": [\n      {\n        title: \"OWASP Top 10\",\n        content: \"Learn the most critical web security risks.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 150,\n      },\n      {\n        title: \"SQL Injection Prevention\",\n        content: \"Protect against SQL injection attacks.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 150,\n      },\n    ],\n    \"Ethical Hacking\": [\n      {\n        title: \"Reconnaissance\",\n        content: \"Gather information about target systems.\",\n        type: \"theory\",\n        order: 1,\n        xpReward: 175,\n      },\n      {\n        title: \"Vulnerability Scanning\",\n        content: \"Identify security weaknesses.\",\n        type: \"theory\",\n        order: 2,\n        xpReward: 175,\n      },\n    ],\n  };\n\n  return lessonsMap[moduleTitle] || [];\n}\n\nseedModules().catch(console.error);\n","path":null,"size_bytes":22975,"size_tokens":null},"client/src/pages/Dashboard.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport ProgressRing from \"@/components/ProgressRing\";\nimport BadgeCard from \"@/components/BadgeCard\";\nimport LeaderboardTable from \"@/components/LeaderboardTable\";\nimport DailyChallengeCard from \"@/components/DailyChallengeCard\";\nimport ThemeToggle from \"@/components/ThemeToggle\";\nimport NotificationBell from \"@/components/NotificationBell\";\nimport SearchInput from \"@/components/SearchInput\";\nimport CareerRecommendationModal from \"@/components/CareerRecommendationModal\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport {\n  Trophy,\n  Target,\n  Flame,\n  Star,\n  Award,\n  Zap,\n  BookOpen,\n  Code2,\n  Shield,\n  Rocket,\n  LogOut,\n  Loader2,\n  Lightbulb,\n  TrendingUp,\n  User as UserIcon,\n} from \"lucide-react\";\nimport type { User, Badge, DailyChallenge, Quiz } from \"@shared/schema\";\nimport { useLocation } from \"wouter\";\n\ninterface LeaderboardEntry {\n  rank: number;\n  userId: string;\n  username: string;\n  level: number;\n  totalXp: number;\n  badgeCount: number;\n}\n\n// Define UserBadge type to match the expected response from the API\ninterface UserBadge {\n  badgeId: string;\n  badge: Badge;\n}\n\nexport default function Dashboard() {\n  const [activeTab, setActiveTab] = useState<\"overview\" | \"badges\" | \"leaderboard\">(\"overview\");\n  const { user, logout, refreshUser, pendingRecommendation, setPendingRecommendation } = useAuth();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  // Fetch user badges (declared early so it can be used in useEffects)\n  const { data: userBadgesData, isLoading: badgesLoading, refetch: refetchUserBadges } = useQuery<{ badges: UserBadge[] }>({\n    queryKey: [\"/api/users/me/badges\"],\n    refetchOnMount: 'always', // Ensure badges are refreshed after login\n    staleTime: 0, // Always fetch fresh data when needed\n    refetchInterval: false, // Disable aggressive polling to avoid spamming the API\n  });\n\n  // Refresh user data when Dashboard mounts to ensure XP is up-to-date\n  useEffect(() => {\n    refreshUser();\n    // Only run on mount, not on every refreshUser reference change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Auto-close recommendation modal after 60 seconds\n  useEffect(() => {\n    if (pendingRecommendation) {\n      const timer = setTimeout(() => {\n        setPendingRecommendation(null);\n      }, 60000);\n      return () => clearTimeout(timer);\n    }\n  }, [pendingRecommendation, setPendingRecommendation]);\n\n  // Also invalidate cache when tab becomes visible (browser refocus)\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'visible') {\n        queryClient.invalidateQueries({ queryKey: [\"/api/users/me/badges\"] });\n      }\n    };\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    return () => document.removeEventListener('visibilitychange', handleVisibilityChange);\n  }, []);\n  const userBadges = Array.isArray(userBadgesData?.badges) ? userBadgesData.badges : []; // Ensure it's always an array\n\n  // Fetch all badges\n  const { data: allBadgesData } = useQuery<{ badges: Badge[] }>({\n    queryKey: [\"/api/badges\"],\n    refetchOnMount: 'always',\n    staleTime: 0,\n  });\n  const allBadges = Array.isArray(allBadgesData?.badges) ? allBadgesData.badges : [];\n\n  // Fetch leaderboard\n  const { data: leaderboardData, isLoading: leaderboardLoading } = useQuery<{ leaderboard: LeaderboardEntry[] }>({\n    queryKey: [\"/api/leaderboard\"],\n  });\n  const leaderboard = leaderboardData?.leaderboard || [];\n\n  // Fetch daily challenges (both quiz and code)\n  const { data: dailyChallengeData, isLoading: dailyChallengeLoading, error: dailyChallengeError } = useQuery<{\n    quizChallenge: {\n      id: string;\n      title: string;\n      difficulty: string;\n      xpReward: number;\n      challengeType: \"quiz\";\n      completed: boolean;\n    } | null;\n    codeChallenge: {\n      id: string;\n      title: string;\n      difficulty: string;\n      xpReward: number;\n      challengeType: \"code\";\n      completed: boolean;\n    } | null;\n    allCompleted: boolean;\n  }>({\n    queryKey: [\"/api/daily-challenges/today\"],\n    retry: 2,\n    retryDelay: 1000,\n    staleTime: 0, // Always fetch fresh - prevents cache collision between users\n    refetchOnMount: 'always', // Force refresh on component mount\n  });\n\n  // Extract individual challenges\n  const quizChallenge = dailyChallengeData?.quizChallenge || null;\n  const codeChallenge = dailyChallengeData?.codeChallenge || null;\n  const allChallengesCompleted = dailyChallengeData?.allCompleted === true;\n\n  // Fetch AI study suggestions\n  const { data: studySuggestionsData, isLoading: suggestionsLoading } = useQuery<{ suggestions: string }>({\n    queryKey: [\"/api/study-suggestions\"],\n    staleTime: 1000 * 60 * 30, // Cache for 30 minutes to avoid excessive OpenAI calls\n  });\n\n  // Fetch career path details if user has one assigned\n  const { data: careerPathResponse } = useQuery<{ path: any }>({\n    queryKey: [\"/api/career-paths\", user?.currentCareerPathId],\n    enabled: !!user?.currentCareerPathId,\n  });\n  const careerPathData = careerPathResponse?.path;\n\n  // Fetch user progress data\n  const { data: progressData, isLoading: progressLoading } = useQuery<{\n    totalModules: number;\n    totalLessons: number;\n    completedLessons: number;\n    progressPercentage: number;\n    modules: Array<{ id: string; title: string }>;\n  }>({\n    queryKey: [\"/api/users/me/progress\"],\n  });\n\n  // AI-generated practice quiz state\n  const [generatingQuiz, setGeneratingQuiz] = useState(false);\n\n  // Function to generate AI practice quiz\n  const generatePracticeQuiz = async (topic?: string, difficulty?: string) => {\n    setGeneratingQuiz(true);\n    try {\n      const response = await fetch(\"/api/quizzes/generate-practice\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({\n          careerPath: user?.currentCareerPathId || \"fullstack\",\n          topic: topic,\n          difficulty: difficulty,\n          useAI: true, // Enable AI generation by default\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: \"Unknown error\" }));\n        throw new Error(errorData.error || \"Failed to generate quiz\");\n      }\n\n      const data = await response.json();\n\n      // Validate the response has questions\n      if (!data.questions || data.questions.length === 0) {\n        console.error(\"[Practice Quiz] No questions in response:\", data);\n        throw new Error(\"No questions were generated\");\n      }\n\n      console.log(`[Practice Quiz] Generated ${data.questions.length} questions`);\n      console.log(`[Practice Quiz] Used Trained Model: ${data.usedTrainedModel || false}`);\n\n      // Store the generated quiz in session storage for the Quiz page\n      sessionStorage.setItem(`practice-quiz-${data.quiz.id}`, JSON.stringify(data));\n\n      toast({\n        title: data.usedTrainedModel ? \"Quiz Generated (Trained ML Model)\" : \"Quiz Generated!\",\n        description: data.usedTrainedModel \n          ? \"Your personalized practice quiz was generated using our trained Scikit-Learn model. Good luck!\"\n          : \"Your personalized practice quiz is ready. Good luck!\",\n      });\n\n      // Navigate to the generated quiz\n      setTimeout(() => setLocation(`/quiz/${data.quiz.id}`), 500);\n    } catch (error: any) {\n      console.error(\"[Practice Quiz] Generation error:\", error);\n      toast({\n        title: \"Generation Failed\",\n        description: error.message || \"Could not generate practice quiz. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setGeneratingQuiz(false);\n    }\n  };\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  // Calculate level progress\n  const xpForCurrentLevel = user.level * 1000;\n  const xpForNextLevel = (user.level + 1) * 1000;\n  const xpIntoCurrentLevel = user.totalXp - ((user.level - 1) * 1000);\n  const levelProgress = (xpIntoCurrentLevel / 1000) * 100;\n  const xpNeededForNextLevel = xpForNextLevel - user.totalXp;\n\n  // Map badges to badge cards\n  const userBadgeIds = new Set(userBadges.map(b => b.badgeId));\n\n  const badgeCards = allBadges.slice(0, 8).map(badge => {\n    const iconMap: Record<string, any> = {\n      Award, Flame, Code2, Trophy, Shield, Rocket, Star, Zap\n    };\n    const isUnlocked = userBadgeIds.has(badge.id);\n\n    return {\n      id: badge.id,\n      icon: iconMap[badge.icon] || Award,\n      title: badge.name,\n      description: badge.description,\n      rarity: badge.rarity as \"common\" | \"rare\" | \"epic\" | \"legendary\",\n      unlocked: isUnlocked,\n    };\n  });\n\n  // Use actual streak from user data\n  const currentStreak = user.currentStreak || 0;\n\n  return (\n    <>\n      {pendingRecommendation && (\n        <CareerRecommendationModal\n          open={true}\n          onClose={() => setPendingRecommendation(null)}\n          careerPath={pendingRecommendation}\n        />\n      )}\n      <div className=\"min-h-screen\">\n      <header className=\"border-b border-border sticky top-0 z-50 bg-background/95 backdrop-blur-sm\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-lg bg-primary flex items-center justify-center\">\n              <Trophy className=\"w-5 h-5 text-primary-foreground\" />\n            </div>\n            <span className=\"font-display font-bold text-xl\">CareerQuest</span>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            <SearchInput />\n            <ThemeToggle />\n            <NotificationBell />\n            <Button variant=\"outline\" size=\"icon\" onClick={() => setLocation(\"/profile\")} data-testid=\"button-profile\">\n              <UserIcon className=\"w-4 h-4\" />\n            </Button>\n            <Button variant=\"outline\" size=\"icon\" onClick={logout} data-testid=\"button-logout\">\n              <LogOut className=\"w-4 h-4\" />\n            </Button>\n            <div className=\"w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-foreground font-semibold text-sm\">\n              {user.username.substring(0, 2).toUpperCase()}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto px-6 py-8 relative\">\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 className=\"font-display font-bold text-3xl mb-2\" data-testid=\"text-welcome\">\n              Welcome back, {user.username}!\n            </h1>\n            <p className=\"text-muted-foreground\">\n              {currentStreak > 0\n                ? `Keep up the great work. You're on a ${currentStreak}-day streak!`\n                : \"Start your learning journey today!\"}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n          <Card className=\"hover-elevate\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"text-sm font-medium text-muted-foreground\">Your Level</div>\n                <Target className=\"w-5 h-5 text-primary\" />\n              </div>\n              <div className=\"flex items-center gap-4\">\n                <ProgressRing progress={levelProgress} size={80}>\n                  <div className=\"text-center\">\n                    <div className=\"text-xl font-bold\" data-testid=\"text-user-level\">{user.level}</div>\n                  </div>\n                </ProgressRing>\n                <div className=\"flex-1\">\n                  <div className=\"text-xs text-muted-foreground mb-1\">\n                    {xpIntoCurrentLevel.toLocaleString()} / {(1000).toLocaleString()} XP\n                  </div>\n                  <Progress value={levelProgress} className=\"h-2\" />\n                  <div className=\"text-xs text-muted-foreground mt-1\">\n                    {xpNeededForNextLevel.toLocaleString()} XP to Level {user.level + 1}\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"hover-elevate\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"text-sm font-medium text-muted-foreground\">Streak</div>\n                <Flame className=\"w-5 h-5 text-[hsl(var(--warning))]\" />\n              </div>\n              <div className=\"text-4xl font-display font-bold mb-2\" data-testid=\"text-streak\">\n                {currentStreak} Days\n              </div>\n              <div className=\"text-sm text-muted-foreground\">\n                {currentStreak > 0 ? \"Keep it going!\" : \"Start today!\"}\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"hover-elevate\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"text-sm font-medium text-muted-foreground\">Badges Earned</div>\n                <Trophy className=\"w-5 h-5 text-primary\" />\n              </div>\n              <div className=\"text-4xl font-display font-bold mb-2\" data-testid=\"text-badges\">\n                {userBadges.length} / {allBadges.length}\n              </div>\n              <div className=\"text-sm text-muted-foreground\">\n                {allBadges.length > 0\n                  ? `${Math.round((userBadges.length / allBadges.length) * 100)}% collected`\n                  : \"No badges available yet\"}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\">\n          <div className=\"lg:col-span-2\">\n            <Card>\n              <CardHeader className=\"flex flex-col items-start gap-4 pb-4 sm:flex-row sm:items-center sm:justify-between\">\n                <CardTitle>Your Progress</CardTitle>\n                <div className=\"flex gap-2 overflow-x-auto\">\n                  <Button\n                    variant={activeTab === \"overview\" ? \"default\" : \"ghost\"}\n                    size=\"sm\"\n                    onClick={() => setActiveTab(\"overview\")}\n                    data-testid=\"button-tab-overview\"\n                    className=\"whitespace-nowrap\"\n                  >\n                    Overview\n                  </Button>\n                  <Button\n                    variant={activeTab === \"badges\" ? \"default\" : \"ghost\"}\n                    size=\"sm\"\n                    onClick={() => setActiveTab(\"badges\")}\n                    data-testid=\"button-tab-badges\"\n                    className=\"whitespace-nowrap\"\n                  >\n                    Badges\n                  </Button>\n                  <Button\n                    variant={activeTab === \"leaderboard\" ? \"default\" : \"ghost\"}\n                    size=\"sm\"\n                    onClick={() => setActiveTab(\"leaderboard\")}\n                    data-testid=\"button-tab-leaderboard\"\n                    className=\"whitespace-nowrap\"\n                  >\n                    Leaderboard\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent>\n                {activeTab === \"overview\" && (\n                  <div className=\"space-y-6\">\n                    {progressLoading ? (\n                      <div className=\"flex items-center justify-center py-8\">\n                        <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\n                      </div>\n                    ) : progressData && progressData.totalLessons > 0 ? (\n                      <div className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <h3 className=\"font-semibold text-lg\">Learning Progress</h3>\n                            <p className=\"text-sm text-muted-foreground\">\n                              {progressData.completedLessons} of {progressData.totalLessons} lessons completed\n                            </p>\n                          </div>\n                          <div className=\"text-2xl font-bold text-primary\" data-testid=\"text-progress-percentage\">\n                            {progressData.progressPercentage}%\n                          </div>\n                        </div>\n                        <Progress value={progressData.progressPercentage} className=\"h-3\" />\n                        <div className=\"grid grid-cols-2 gap-4 pt-2\">\n                          <div className=\"p-4 rounded-lg bg-muted/50\">\n                            <div className=\"text-sm font-medium text-muted-foreground mb-1\">Modules Available</div>\n                            <div className=\"text-2xl font-bold\" data-testid=\"text-total-modules\">{progressData.totalModules}</div>\n                          </div>\n                          <div className=\"p-4 rounded-lg bg-muted/50\">\n                            <div className=\"text-sm font-medium text-muted-foreground mb-1\">Lessons Completed</div>\n                            <div className=\"text-2xl font-bold\" data-testid=\"text-completed-lessons\">{progressData.completedLessons}</div>\n                          </div>\n                        </div>\n                        <Button\n                          onClick={() => setLocation(\"/modules\")}\n                          className=\"w-full mt-4\"\n                          data-testid=\"button-view-modules\"\n                        >\n                          <BookOpen className=\"w-4 h-4 mr-2\" />\n                          View All Modules\n                        </Button>\n                      </div>\n                    ) : (\n                      <div className=\"text-center py-8\">\n                        <BookOpen className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground opacity-50\" />\n                        <p className=\"text-muted-foreground mb-4\">\n                          No modules available yet. Check back later!\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                )}\n                {activeTab === \"badges\" && (\n                  <>\n                    {badgesLoading ? (\n                      <div className=\"flex items-center justify-center py-8\">\n                        <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\n                      </div>\n                    ) : badgeCards.length > 0 ? (\n                      <div className=\"grid grid-cols-2 gap-4\">\n                        {badgeCards.map((badge) => (\n                          <BadgeCard key={badge.id} {...badge} />\n                        ))}\n                      </div>\n                    ) : (\n                      <div className=\"text-center py-8 text-muted-foreground\">\n                        <Trophy className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                        <p>No badges available yet</p>\n                      </div>\n                    )}\n                  </>\n                )}\n                {activeTab === \"leaderboard\" && (\n                  <>\n                    {leaderboardLoading ? (\n                      <div className=\"flex items-center justify-center py-8\">\n                        <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\n                      </div>\n                    ) : (\n                      <LeaderboardTable\n                        entries={leaderboard.map(entry => ({\n                          rank: entry.rank,\n                          name: entry.username,\n                          level: entry.level,\n                          xp: entry.totalXp,\n                          badges: entry.badgeCount,\n                          isCurrentUser: entry.userId === user.id,\n                        }))}\n                      />\n                    )}\n                  </>\n                )}\n              </CardContent>\n            </Card>\n\n            {dailyChallengeLoading ? (\n              <Card className=\"mt-6\">\n                <CardContent className=\"p-6 flex items-center justify-center\">\n                  <Loader2 className=\"w-8 h-8 animate-spin text-muted-foreground\" />\n                </CardContent>\n              </Card>\n            ) : dailyChallengeError ? (\n              <Card className=\"mt-6 border-destructive\">\n                <CardContent className=\"p-6 text-center\">\n                  <Code2 className=\"w-12 h-12 mx-auto mb-4 text-destructive opacity-50\" />\n                  <p className=\"text-sm text-muted-foreground\">Failed to load daily challenges</p>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"mt-4\"\n                    onClick={() => queryClient.invalidateQueries({ queryKey: [\"/api/daily-challenges/today\"] })}\n                    data-testid=\"button-retry-challenges\"\n                  >\n                    Retry\n                  </Button>\n                </CardContent>\n              </Card>\n            ) : (\n              <div className=\"mt-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {quizChallenge && (\n                    <DailyChallengeCard\n                      title={quizChallenge.title}\n                      difficulty={quizChallenge.difficulty as \"easy\" | \"medium\" | \"hard\"}\n                      xpReward={quizChallenge.xpReward}\n                      timeEstimate=\"15 min\"\n                      streak={currentStreak}\n                      challengeId={quizChallenge.id}\n                      challengeType=\"quiz\"\n                      completed={quizChallenge.completed}\n                    />\n                  )}\n                  {codeChallenge && (\n                    <DailyChallengeCard\n                      title={codeChallenge.title}\n                      difficulty={codeChallenge.difficulty as \"easy\" | \"medium\" | \"hard\"}\n                      xpReward={codeChallenge.xpReward}\n                      timeEstimate=\"20 min\"\n                      streak={currentStreak}\n                      challengeId={codeChallenge.id}\n                      challengeType=\"code\"\n                      completed={codeChallenge.completed}\n                    />\n                  )}\n                </div>\n                {allChallengesCompleted && (\n                  <Card className=\"mt-4 border-[hsl(var(--success))]\">\n                    <CardContent className=\"p-6 text-center\">\n                      <Trophy className=\"w-12 h-12 mx-auto mb-4 text-[hsl(var(--success))]\" />\n                      <p className=\"font-semibold\">All Challenges Completed!</p>\n                      <p className=\"text-sm text-muted-foreground mt-2\">Come back tomorrow for new challenges</p>\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n            )}\n\n            <Card className=\"mt-6\">\n              <CardHeader>\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Lightbulb className=\"w-5 h-5 text-primary\" />\n                      AI Practice Quizzes\n                    </CardTitle>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      Generate unlimited AI-powered practice quizzes tailored to your level\n                    </p>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div className=\"p-4 rounded-lg border bg-gradient-to-br from-primary/5 to-primary/10\">\n                    <div className=\"flex items-start gap-3 mb-3\">\n                      <div className=\"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0\">\n                        <Zap className=\"w-5 h-5 text-primary\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-semibold mb-1\">Quick Practice</h4>\n                        <p className=\"text-sm text-muted-foreground\">\n                          Generate a random quiz based on your career path and level\n                        </p>\n                      </div>\n                    </div>\n                    <Button\n                      className=\"w-full\"\n                      onClick={() => generatePracticeQuiz()}\n                      disabled={generatingQuiz}\n                      data-testid=\"button-generate-quick-quiz\"\n                    >\n                      {generatingQuiz ? (\n                        <>\n                          <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                          Generating Quiz...\n                        </>\n                      ) : (\n                        <>\n                          <Lightbulb className=\"w-4 h-4 mr-2\" />\n                          Generate Quiz\n                        </>\n                      )}\n                    </Button>\n                  </div>\n\n                  <div className=\"grid grid-cols-3 gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => generatePracticeQuiz(undefined, \"beginner\")}\n                      disabled={generatingQuiz}\n                      className=\"flex flex-col h-auto py-3\"\n                      data-testid=\"button-generate-beginner-quiz\"\n                    >\n                      <span className=\"text-green-600 dark:text-green-400 font-semibold text-sm\">Easy Level</span>\n                      <span className=\"text-xs text-muted-foreground mt-1\">Beginner questions</span>\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => generatePracticeQuiz(undefined, \"intermediate\")}\n                      disabled={generatingQuiz}\n                      className=\"flex flex-col h-auto py-3\"\n                      data-testid=\"button-generate-intermediate-quiz\"\n                    >\n                      <span className=\"text-yellow-600 dark:text-yellow-400 font-semibold text-sm\">Medium Level</span>\n                      <span className=\"text-xs text-muted-foreground mt-1\">Intermediate questions</span>\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => generatePracticeQuiz(undefined, \"advanced\")}\n                      disabled={generatingQuiz}\n                      className=\"flex flex-col h-auto py-3\"\n                      data-testid=\"button-generate-advanced-quiz\"\n                    >\n                      <span className=\"text-red-600 dark:text-red-400 font-semibold text-sm\">Hard Level</span>\n                      <span className=\"text-xs text-muted-foreground mt-1\">Advanced questions</span>\n                    </Button>\n                  </div>\n\n                  <div className=\"pt-2 text-center\">\n                    <p className=\"text-xs text-muted-foreground\">\n                      ‚ú® Each quiz is uniquely generated ‚Ä¢ Take unlimited times ‚Ä¢ Earn {user?.level && user.level >= 10 ? '50' : '50'} XP per quiz\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          <div className=\"space-y-4 sm:space-y-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg flex items-center gap-2\">\n                  <Lightbulb className=\"w-5 h-5 text-primary\" />\n                  AI Study Suggestions\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {suggestionsLoading ? (\n                  <div className=\"flex items-center justify-center py-4\">\n                    <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n                  </div>\n                ) : studySuggestionsData?.suggestions && Array.isArray(studySuggestionsData.suggestions) && studySuggestionsData.suggestions.length > 0 ? (\n                  <div className=\"space-y-3 text-sm\">\n                    {studySuggestionsData.suggestions.map((suggestion: any, idx: number) => (\n                      <div key={idx} className=\"flex items-start gap-2\">\n                        <TrendingUp className=\"w-4 h-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <p className=\"font-medium text-sm\">{suggestion.topic}</p>\n                          <p className=\"text-xs text-muted-foreground mt-1\">{suggestion.reason}</p>\n                          <p className=\"text-xs text-primary mt-1\">‚Üí {suggestion.recommendedAction}</p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-4 text-muted-foreground\">\n                    <Lightbulb className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n                    <p className=\"text-sm\">Complete more quizzes to get personalized study suggestions</p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg\">Next Milestone</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {user.level >= 20 && user.pathSelectionMode === \"ai-guided\" && !user.hasCompletedInterestAssessment ? (\n                  <>\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-12 h-12 rounded-full border-2 border-primary flex items-center justify-center\">\n                        <Target className=\"w-6 h-6 text-primary\" />\n                      </div>\n                      <div>\n                        <div className=\"font-semibold\">Complete Interest Assessment</div>\n                        <div className=\"text-sm text-muted-foreground\">Get AI-powered career recommendation</div>\n                      </div>\n                    </div>\n                    <Button onClick={() => setLocation(\"/interest-assessment\")} className=\"w-full\" data-testid=\"button-interest-assessment\">\n                      Start Assessment\n                    </Button>\n                  </>\n                ) : user.currentCareerPathId ? (\n                  <>\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-12 h-12 rounded-full border-2 border-primary/50 bg-primary/10 flex items-center justify-center\">\n                        <Rocket className=\"w-6 h-6 text-primary\" />\n                      </div>\n                      <div>\n                        <div className=\"font-semibold\">Career Path Selected</div>\n                        <div className=\"text-sm text-muted-foreground\">Your personalized learning journey has begun</div>\n                      </div>\n                    </div>\n                    {careerPathData?.name && (\n                      <div className=\"space-y-2\">\n                        <div className=\"p-3 bg-primary/5 rounded-lg border border-primary/20\">\n                          <div className=\"text-xs font-medium text-primary/70 mb-1\">Your Recommended Path</div>\n                          <div className=\"font-semibold text-base text-primary\">{careerPathData.name}</div>\n                          <div className=\"text-sm text-muted-foreground mt-1\">{careerPathData.description}</div>\n                        </div>\n                      </div>\n                    )}\n                    <div className=\"flex items-center gap-2 p-3 bg-primary/5 rounded-lg border border-primary/20\">\n                      <Award className=\"w-5 h-5 text-primary\" />\n                      <span className=\"text-sm font-medium text-primary\">Path assigned ‚Ä¢ Ready to learn</span>\n                    </div>\n                  </>\n                ) : !user.currentCareerPathId && user.pathSelectionMode !== \"ai-guided\" ? (\n                  <>\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-12 h-12 rounded-full border-2 border-primary flex items-center justify-center\">\n                        <Shield className=\"w-6 h-6 text-primary\" />\n                      </div>\n                      <div>\n                        <div className=\"font-semibold\">Choose Career Path</div>\n                        <div className=\"text-sm text-muted-foreground\">Start your specialized learning journey</div>\n                      </div>\n                    </div>\n                    <Button onClick={() => setLocation(\"/careers\")} className=\"w-full\" data-testid=\"button-choose-career\">\n                      Explore Paths\n                    </Button>\n                  </>\n                ) : (\n                  <>\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-12 h-12 rounded-full border-2 border-primary flex items-center justify-center\">\n                        <Zap className=\"w-6 h-6 text-primary\" />\n                      </div>\n                      <div>\n                        <div className=\"font-semibold\">Level {user.level + 1}</div>\n                        <div className=\"text-sm text-muted-foreground\">\n                          Earn {xpNeededForNextLevel} XP to level up\n                        </div>\n                      </div>\n                    </div>\n                    <Progress value={levelProgress} className=\"h-2\" />\n                    <div className=\"text-xs text-muted-foreground text-center\">\n                      {xpIntoCurrentLevel} / 1000 XP\n                    </div>\n                  </>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n    </>\n  );\n}","path":null,"size_bytes":34575,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"ml_model/README.md":{"content":"\n# ML Model Training Datasets\n\nThis directory contains the machine learning models and training data for the CareerQuest platform.\n\n## Dataset Files\n\n### `synthetic_data_2000.csv` (2000 samples)\nMain training dataset containing user profiles and career paths:\n- **Rows**: 2000 training samples\n- **Columns**: 19 features + 1 target (career_path)\n- **Features**:\n  - User metrics: level, xp, badges, study_time\n  - Quiz performance: quiz_score, code_challenge_score\n  - Interest scores (1-5): visual_design, backend, math, web_apps, data, cloud, mobile, security\n  - Performance metrics: frontend_perf, backend_perf, data_perf, algo_perf\n- **Target**: career_path (frontend, backend, data, cloud, mobile, security, fullstack)\n\n### Distribution Breakdown:\n- **Career Recommendation**: 800 samples (40%)\n- **Study Suggestions**: 500 samples (25%)\n- **Question Classification**: 500 samples (25%)\n- **Difficulty Prediction**: 200 samples (10%)\n\n## Trained Models\n\nAll models are saved in `saved_models/` directory as `.pkl` files:\n\n1. **gradient_boosting.pkl** - Career path recommendation (primary)\n2. **random_forest.pkl** - Career path recommendation (secondary)\n3. **question_classifier.pkl** - Question category classification\n4. **difficulty_predictor.pkl** - Question difficulty prediction\n5. **study_suggester.pkl** - Personalized study recommendations\n\n## Model Performance\n\n- Career Recommendation: ~85% accuracy\n- Question Classification: ~78% accuracy\n- Study Suggestions: Personalized based on user patterns\n- Difficulty Prediction: Adaptive to user level\n\n## Visualization\n\nRun `visualize_datasets.py` to generate SVG visualizations:\n```bash\npython ml_model/visualize_datasets.py\n```\n\nThis creates:\n- `dataset_visualization.svg` - Visual breakdown of all datasets\n- `dataset_visualization.html` - Interactive HTML viewer\n\n## Training\n\nTo retrain models with updated data:\n```bash\npython ml_model/train_models_v2.py\n```\n\n## Usage\n\nThe ML service is called via `prediction_service.py`:\n- Quiz generation\n- Career recommendations\n- Study suggestions\n- Question classification\n\nSee `server/ml-client.ts` for integration examples.\n","path":null,"size_bytes":2136,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"client/src/components/HeroSection.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Trophy, Sparkles, Code2, ArrowRight, Target } from \"lucide-react\";\n\ninterface HeroSectionProps {\n  onGetStarted: () => void;\n}\n\nexport default function HeroSection({ onGetStarted }: HeroSectionProps) {\n  return (\n    <section className=\"relative min-h-[90vh] flex items-center justify-center overflow-hidden\">\n      <div \n        className=\"absolute inset-0 z-0\"\n        style={{\n          background: `\n            linear-gradient(135deg, \n              hsl(var(--primary) / 0.15) 0%, \n              transparent 50%,\n              hsl(var(--primary) / 0.1) 100%\n            ),\n            linear-gradient(to bottom, \n              hsl(var(--background)) 0%, \n              hsl(var(--background) / 0.95) 100%\n            )\n          `,\n        }}\n      />\n      \n      <div className=\"absolute inset-0 z-0 opacity-60\">\n        <div className=\"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/40 rounded-full blur-3xl animate-pulse\" />\n        <div className=\"absolute bottom-1/4 right-1/4 w-96 h-96 bg-violet-500/40 rounded-full blur-3xl animate-pulse\" style={{ animationDelay: '1s' }} />\n      </div>\n      \n      <div className=\"relative z-10 max-w-6xl mx-auto px-6 py-20 text-center\">\n        <div className=\"inline-flex items-center gap-2 bg-primary/10 backdrop-blur-sm border border-primary/20 rounded-full px-5 py-2 mb-8 hover-elevate\">\n          <Sparkles className=\"w-4 h-4 text-primary\" />\n          <span className=\"text-sm font-medium text-primary\">Join 10,000+ Students Leveling Up</span>\n        </div>\n        \n        <h1 className=\"font-display font-bold text-5xl md:text-6xl lg:text-7xl xl:text-8xl mb-6 bg-gradient-to-br from-foreground via-foreground to-primary bg-clip-text text-transparent leading-tight\">\n          Transform Your Career with\n          <br />\n          <span className=\"bg-gradient-to-r from-primary via-violet-500 to-primary bg-clip-text text-transparent\">\n            Gamified Learning\n          </span>\n        </h1>\n        \n        <p className=\"text-lg md:text-xl lg:text-2xl mb-10 text-muted-foreground max-w-3xl mx-auto leading-relaxed\">\n          Master computer science through AI-powered recommendations, earn badges, compete on leaderboards, and discover your perfect tech career path.\n        </p>\n        \n        <div className=\"flex flex-wrap justify-center gap-4 mb-16\">\n          <Button \n            size=\"lg\" \n            onClick={onGetStarted}\n            className=\"text-lg px-8 min-h-14 group shadow-lg shadow-primary/25 hover:shadow-xl hover:shadow-primary/30 transition-all\"\n            data-testid=\"button-start-journey\"\n          >\n            <Trophy className=\"w-5 h-5 mr-2 group-hover:rotate-12 transition-transform\" />\n            Start Your Journey Free\n            <ArrowRight className=\"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform\" />\n          </Button>\n          <Button \n            size=\"lg\" \n            variant=\"outline\" \n            className=\"text-lg px-8 min-h-14 group border-2\"\n            data-testid=\"button-explore-paths\"\n            onClick={() => {\n              document.getElementById('features')?.scrollIntoView({ behavior: 'smooth' });\n            }}\n          >\n            <Code2 className=\"w-5 h-5 mr-2 group-hover:scale-110 transition-transform\" />\n            Explore Features\n          </Button>\n        </div>\n        \n        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-8 md:gap-12 max-w-4xl mx-auto\">\n          {[\n            { label: \"Active Learners\", value: \"10K+\", icon: Trophy },\n            { label: \"Career Paths\", value: \"15+\", icon: Target },\n            { label: \"Code Challenges\", value: \"500+\", icon: Code2 },\n          ].map((stat) => (\n            <div key={stat.label} className=\"group cursor-default\">\n              <div className=\"flex justify-center mb-3\">\n                <div className=\"w-12 h-12 rounded-xl bg-primary/10 border border-primary/20 flex items-center justify-center group-hover:bg-primary/20 group-hover:scale-110 transition-all\">\n                  <stat.icon className=\"w-6 h-6 text-primary\" />\n                </div>\n              </div>\n              <div className=\"text-3xl md:text-4xl font-display font-bold bg-gradient-to-br from-foreground to-primary bg-clip-text text-transparent mb-2\">\n                {stat.value}\n              </div>\n              <div className=\"text-sm text-muted-foreground font-medium\">{stat.label}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":4536,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"client/src/lib/passwordValidation.ts":{"content":"export interface PasswordStrength {\n  score: number; // 0-4\n  feedback: string;\n  isValid: boolean;\n  checks: {\n    minLength: boolean;\n    hasUppercase: boolean;\n    hasLowercase: boolean;\n    hasNumber: boolean;\n    hasSpecial: boolean;\n  };\n}\n\nexport function validatePasswordStrength(password: string): PasswordStrength {\n  const checks = {\n    minLength: password.length >= 8,\n    hasUppercase: /[A-Z]/.test(password),\n    hasLowercase: /[a-z]/.test(password),\n    hasNumber: /\\d/.test(password),\n    hasSpecial: /[!@#$%^&*(),.?\":{}|<>]/.test(password),\n  };\n\n  const score = Object.values(checks).filter(Boolean).length;\n  const isValid = score >= 4; // At least 4 out of 5 criteria\n\n  let feedback = \"\";\n  if (score === 0) {\n    feedback = \"Very Weak\";\n  } else if (score === 1 || score === 2) {\n    feedback = \"Weak\";\n  } else if (score === 3) {\n    feedback = \"Fair\";\n  } else if (score === 4) {\n    feedback = \"Good\";\n  } else {\n    feedback = \"Strong\";\n  }\n\n  return {\n    score,\n    feedback,\n    isValid,\n    checks,\n  };\n}\n\nexport function getPasswordRequirements(): string[] {\n  return [\n    \"At least 8 characters long\",\n    \"Contains uppercase letter (A-Z)\",\n    \"Contains lowercase letter (a-z)\",\n    \"Contains number (0-9)\",\n    \"Contains special character (!@#$%^&*)\",\n  ];\n}\n","path":null,"size_bytes":1296,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/examples/HeroSection.tsx":{"content":"import HeroSection from '../HeroSection';\n\nexport default function HeroSectionExample() {\n  return <HeroSection />;\n}\n","path":null,"size_bytes":118,"size_tokens":null},"client/src/pages/Profile.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { LogOut, User, Mail, Trophy, Target, ArrowLeft } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Badge } from \"@/components/ui/badge\";\nimport type { Badge as BadgeType } from \"@shared/schema\";\nimport ProgressionRanks from \"@/components/ProgressionRanks\";\nimport { useLocation } from \"wouter\";\nimport LogoutConfirmationDialog from \"@/components/LogoutConfirmationDialog\";\n\nexport default function Profile() {\n  const { user, logout, refreshUser } = useAuth();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const [isEditing, setIsEditing] = useState(false);\n  const [showLogoutDialog, setShowLogoutDialog] = useState(false);\n  const [formData, setFormData] = useState({\n    displayName: user?.displayName || \"\",\n    email: user?.email || \"\",\n  });\n\n  const { data: badgesData } = useQuery<{ badges: BadgeType[] }>({\n    queryKey: [\"/api/users/me/badges\"],\n    refetchOnMount: 'always',\n    staleTime: 0,\n  });\n\n  const handleSaveProfile = async () => {\n    try {\n      const response = await fetch(\"/api/auth/profile\", {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({\n          displayName: formData.displayName,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to update profile\");\n      }\n\n      await refreshUser();\n      setIsEditing(false);\n      toast({\n        title: \"Profile Updated\",\n        description: \"Your profile has been successfully updated.\",\n      });\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Update Failed\",\n        description: \"Failed to update profile. Please try again.\",\n      });\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      toast({\n        title: \"Logged Out\",\n        description: \"You have been successfully logged out.\",\n      });\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Logout Failed\",\n        description: \"Failed to logout. Please try again.\",\n      });\n    }\n  };\n\n  if (!user) return null;\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"container mx-auto py-8 px-4 max-w-4xl\">\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => setLocation(\"/dashboard\")}\n          className=\"mb-4 gap-2\"\n          data-testid=\"button-back-to-dashboard\"\n        >\n          <ArrowLeft className=\"w-4 h-4\" />\n          Back to Dashboard\n        </Button>\n        <div className=\"flex items-center justify-between mb-8\">\n          <h1 className=\"font-display font-bold text-3xl\">My Profile</h1>\n          <Button \n            variant=\"outline\" \n            onClick={() => setShowLogoutDialog(true)} \n            className=\"gap-2\" \n            data-testid=\"button-logout\"\n          >\n            <LogOut className=\"w-4 h-4\" />\n            Logout\n          </Button>\n        </div>\n\n        <div className=\"grid gap-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Profile Information</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center gap-4 mb-6\">\n                <div className=\"w-20 h-20 rounded-full bg-primary flex items-center justify-center text-primary-foreground font-bold text-2xl\">\n                  {user.displayName.charAt(0).toUpperCase()}\n                </div>\n                <div>\n                  <h2 className=\"font-bold text-xl\">{user.displayName}</h2>\n                  <p className=\"text-muted-foreground\">@{user.username}</p>\n                </div>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"displayName\">Display Name</Label>\n                  <Input\n                    id=\"displayName\"\n                    value={formData.displayName}\n                    onChange={(e) => setFormData({ ...formData, displayName: e.target.value })}\n                    disabled={!isEditing}\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"email\">Email</Label>\n                  <Input\n                    id=\"email\"\n                    value={formData.email}\n                    disabled\n                    className=\"bg-muted\"\n                  />\n                  <p className=\"text-xs text-muted-foreground mt-1\">Email cannot be changed</p>\n                </div>\n\n                <div>\n                  <Label>Username</Label>\n                  <Input\n                    value={user.username}\n                    disabled\n                    className=\"bg-muted\"\n                  />\n                  <p className=\"text-xs text-muted-foreground mt-1\">Username cannot be changed</p>\n                </div>\n\n                <div className=\"flex gap-2 pt-4\">\n                  {!isEditing ? (\n                    <Button onClick={() => setIsEditing(true)}>Edit Profile</Button>\n                  ) : (\n                    <>\n                      <Button onClick={handleSaveProfile}>Save Changes</Button>\n                      <Button\n                        variant=\"outline\"\n                        onClick={() => {\n                          setIsEditing(false);\n                          setFormData({\n                            displayName: user.displayName,\n                            email: user.email,\n                          });\n                        }}\n                      >\n                        Cancel\n                      </Button>\n                    </>\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Statistics</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div className=\"text-center p-4 border rounded-lg\">\n                  <Trophy className=\"w-8 h-8 mx-auto mb-2 text-primary\" />\n                  <div className=\"font-bold text-2xl\">{user.level}</div>\n                  <div className=\"text-sm text-muted-foreground\">Level</div>\n                </div>\n                <div className=\"text-center p-4 border rounded-lg\">\n                  <Target className=\"w-8 h-8 mx-auto mb-2 text-primary\" />\n                  <div className=\"font-bold text-2xl\">{user.totalXp}</div>\n                  <div className=\"text-sm text-muted-foreground\">Total XP</div>\n                </div>\n                <div className=\"text-center p-4 border rounded-lg\">\n                  <Trophy className=\"w-8 h-8 mx-auto mb-2 text-primary\" />\n                  <div className=\"font-bold text-2xl\">{user.currentStreak}</div>\n                  <div className=\"text-sm text-muted-foreground\">Day Streak</div>\n                </div>\n                <div className=\"text-center p-4 border rounded-lg\">\n                  <Trophy className=\"w-8 h-8 mx-auto mb-2 text-primary\" />\n                  <div className=\"font-bold text-2xl\">{badgesData?.badges.length || 0}</div>\n                  <div className=\"text-sm text-muted-foreground\">Badges</div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Level Progress</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className=\"text-sm font-medium\">Level {user.level}</span>\n                  <span className=\"text-sm text-muted-foreground\">{user.xp} / 1000 XP</span>\n                </div>\n                <div className=\"w-full bg-secondary rounded-full h-3\">\n                  <div\n                    className=\"bg-primary h-3 rounded-full transition-all duration-500\"\n                    style={{ width: `${(user.xp / 1000) * 100}%` }}\n                  />\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-2\">\n                  {1000 - user.xp} XP needed to reach Level {user.level + 1}\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n\n          {badgesData?.badges && badgesData.badges.length > 0 && (\n            <Card>\n              <CardHeader>\n                <CardTitle>My Badges</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {badgesData.badges.map((badge) => (\n                    <div key={badge.id} className=\"flex items-center gap-4 p-4 border rounded-lg\">\n                      <div className=\"text-4xl\">{badge.icon}</div>\n                      <div>\n                        <h3 className=\"font-semibold\">{badge.name}</h3>\n                        <p className=\"text-sm text-muted-foreground\">{badge.description}</p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Progression Ranks */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Career Progression</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ProgressionRanks currentXP={user?.totalXp || 0} careerPath={user?.currentCareerPathId || undefined} />\n            </CardContent>\n          </Card>\n        </div>\n\n        <LogoutConfirmationDialog\n          open={showLogoutDialog}\n          onOpenChange={setShowLogoutDialog}\n          onConfirm={handleLogout}\n        />\n      </div>\n    </div>\n  );\n}","path":null,"size_bytes":10095,"size_tokens":null},"client/src/components/examples/LeaderboardTable.tsx":{"content":"import LeaderboardTable from '../LeaderboardTable';\n\n//todo: remove mock functionality\nconst mockEntries = [\n  { rank: 1, name: \"Alex Chen\", level: 42, xp: 125000, badges: 87 },\n  { rank: 2, name: \"Sarah Johnson\", level: 40, xp: 118500, badges: 82 },\n  { rank: 3, name: \"Mike Rodriguez\", level: 38, xp: 112000, badges: 75 },\n  { rank: 4, name: \"Emily Davis\", level: 35, xp: 98500, badges: 68, isCurrentUser: true },\n  { rank: 5, name: \"John Smith\", level: 34, xp: 95000, badges: 65 },\n];\n\nexport default function LeaderboardTableExample() {\n  return <LeaderboardTable entries={mockEntries} />;\n}\n","path":null,"size_bytes":596,"size_tokens":null},"ml_model/hybrid_generator.py":{"content":"\n#!/usr/bin/env python3\nimport sys\nimport json\nimport pickle\nimport numpy as np\nfrom pathlib import Path\n\nSAVED_MODELS_DIR = Path(\"ml_model/saved_models\")\n\ndef load_models():\n    \"\"\"Load all ML models\"\"\"\n    models = {}\n    try:\n        with open(SAVED_MODELS_DIR / \"question_feature_classifier.pkl\", \"rb\") as f:\n            models[\"feature_classifier\"] = pickle.load(f)\n        with open(SAVED_MODELS_DIR / \"category_encoder_v2.pkl\", \"rb\") as f:\n            models[\"category_encoder\"] = pickle.load(f)\n        with open(SAVED_MODELS_DIR / \"difficulty_encoder_v2.pkl\", \"rb\") as f:\n            models[\"difficulty_encoder\"] = pickle.load(f)\n        with open(SAVED_MODELS_DIR / \"question_templates.json\", \"r\") as f:\n            models[\"templates\"] = json.load(f)\n        return models\n    except Exception as e:\n        print(f\"Error loading models: {e}\", file=sys.stderr)\n        return None\n\ndef extract_question_features(question_data):\n    \"\"\"Extract features from a question for classification\"\"\"\n    return [\n        len(question_data.get(\"question\", \"\").split()),  # word_count\n        1 if any(term in question_data.get(\"question\", \"\").lower() \n                 for term in [\"api\", \"function\", \"method\", \"class\", \"code\"]) else 0,  # has_code_term\n        question_data.get(\"complexity_score\", 0.5),  # complexity_score\n        1,  # requires_practical_knowledge\n        question_data.get(\"abstraction_level\", 0.5),  # abstraction_level\n        len(question_data.get(\"topic_keywords\", []))  # num_keywords\n    ]\n\ndef generate_ml_guided_prompt(category, difficulty, career_path=None):\n    \"\"\"Generate prompt based on ML model predictions\"\"\"\n    models = load_models()\n    if not models:\n        return None\n    \n    # Find similar questions from templates\n    templates = models[\"templates\"][\"questions\"]\n    category_questions = [q for q in templates if q[\"category\"] == category]\n    difficulty_questions = [q for q in category_questions if q[\"difficulty\"] == difficulty]\n    \n    if not difficulty_questions:\n        difficulty_questions = category_questions[:3] if category_questions else templates[:3]\n    \n    # Create example-based prompt\n    examples = difficulty_questions[:2]\n    \n    return {\n        \"category\": category,\n        \"difficulty\": difficulty,\n        \"examples\": examples,\n        \"style_guide\": {\n            \"word_count_range\": [8, 15],\n            \"complexity\": examples[0][\"features\"][\"complexity_score\"] if examples else 0.5,\n            \"requires_code\": examples[0][\"features\"][\"has_code_term\"] if examples else 1\n        }\n    }\n\ndef validate_generated_question(question, expected_category, expected_difficulty):\n    \"\"\"Validate a generated question against learned patterns\"\"\"\n    models = load_models()\n    if not models:\n        return True  # Allow if models not loaded\n    \n    try:\n        features = extract_question_features(question)\n        X = np.array([features])\n        \n        # Predict category\n        predicted_cat = models[\"category_encoder\"].inverse_transform(\n            models[\"feature_classifier\"].predict(X)\n        )[0]\n        \n        # Check if category matches\n        category_match = predicted_cat == expected_category\n        \n        # Check basic quality criteria\n        has_question = len(question.get(\"question\", \"\")) > 10\n        has_options = len(question.get(\"options\", [])) == 4\n        has_answer = \"correctAnswer\" in question\n        has_explanation = len(question.get(\"explanation\", \"\")) > 20\n        \n        is_valid = category_match and has_question and has_options and has_answer and has_explanation\n        \n        return is_valid\n        \n    except Exception as e:\n        print(f\"Validation error: {e}\", file=sys.stderr)\n        return True  # Allow on error\n\ndef main():\n    if len(sys.argv) < 2:\n        print(json.dumps({\"error\": \"No command provided\"}))\n        sys.exit(1)\n    \n    try:\n        request = json.loads(sys.argv[1])\n        command = request.get(\"command\")\n        data = request.get(\"data\", {})\n        \n        if command == \"get_prompt_guidance\":\n            category = data.get(\"category\", \"algorithms\")\n            difficulty = data.get(\"difficulty\", \"medium\")\n            career_path = data.get(\"career_path\")\n            \n            guidance = generate_ml_guided_prompt(category, difficulty, career_path)\n            print(json.dumps({\"success\": True, \"result\": guidance}))\n            \n        elif command == \"validate_questions\":\n            questions = data.get(\"questions\", [])\n            category = data.get(\"category\")\n            difficulty = data.get(\"difficulty\")\n            \n            validated = []\n            for q in questions:\n                if validate_generated_question(q, category, difficulty):\n                    validated.append(q)\n            \n            print(json.dumps({\n                \"success\": True,\n                \"result\": {\n                    \"validated_count\": len(validated),\n                    \"total_count\": len(questions),\n                    \"questions\": validated\n                }\n            }))\n            \n        else:\n            print(json.dumps({\"success\": False, \"error\": f\"Unknown command: {command}\"}))\n            \n    except Exception as e:\n        print(json.dumps({\"success\": False, \"error\": str(e)}))\n        sys.exit(1)\n\nif __name__ == \"__main__\":\n    main()\n","path":null,"size_bytes":5344,"size_tokens":null},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","path":null,"size_bytes":483,"size_tokens":null},"server/migrate-lessons.ts":{"content":"import { db } from \"./firebase\";\nimport { collection, getDocs, updateDoc, doc } from \"firebase/firestore\";\n\n/**\n * Migration script to add missing fields to existing lessons\n * Run this once to backfill description, requiredLevel, and estimatedTime\n */\nasync function migrateLessons() {\n  console.log(\"Starting lesson migration...\");\n  \n  try {\n    const lessonsRef = collection(db, \"lessons\");\n    const snapshot = await getDocs(lessonsRef);\n    \n    console.log(`Found ${snapshot.size} lessons to migrate`);\n    \n    let updated = 0;\n    const promises = snapshot.docs.map(async (lessonDoc) => {\n      const lessonData = lessonDoc.data();\n      const updates: any = {};\n      \n      // Add description if missing\n      if (lessonData.description === undefined) {\n        updates.description = \"\";\n      }\n      \n      // Add requiredLevel if missing\n      if (lessonData.requiredLevel === undefined) {\n        updates.requiredLevel = 0;\n      }\n      \n      // Add estimatedTime if missing\n      if (lessonData.estimatedTime === undefined) {\n        updates.estimatedTime = \"10 min\";\n      }\n      \n      // Only update if there are missing fields\n      if (Object.keys(updates).length > 0) {\n        await updateDoc(doc(db, \"lessons\", lessonDoc.id), updates);\n        updated++;\n        console.log(`Updated lesson: ${lessonData.title} (${lessonDoc.id})`);\n      }\n    });\n    \n    await Promise.all(promises);\n    \n    console.log(`\\n‚úÖ Migration complete! Updated ${updated} lessons.`);\n  } catch (error) {\n    console.error(\"‚ùå Migration failed:\", error);\n    throw error;\n  }\n}\n\n// Run migration if called directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  migrateLessons()\n    .then(() => process.exit(0))\n    .catch((error) => {\n      console.error(error);\n      process.exit(1);\n    });\n}\n\nexport { migrateLessons };\n","path":null,"size_bytes":1844,"size_tokens":null},"server/seed-challenges.ts":{"content":"import { storage } from \"./storage-firestore\";\nimport type { InsertCodeChallenge } from \"@shared/schema\";\n\nasync function seedCodeChallenges() {\n  console.log(\"üå± Seeding comprehensive code challenges...\");\n\n  try {\n    const careerPaths = await storage.getCareerPaths();\n    const fullStackPath = careerPaths.find((p: any) => p.name === \"Full Stack Development\");\n    const dataPath = careerPaths.find((p: any) => p.name === \"Data Science & AI\");\n    const cloudPath = careerPaths.find((p: any) => p.name === \"Cloud & DevOps\");\n    const mobilePath = careerPaths.find((p: any) => p.name === \"Mobile Development\");\n    const securityPath = careerPaths.find((p: any) => p.name === \"Cybersecurity\");\n\n    // Full Stack Development Challenges\n    if (fullStackPath) {\n      const fullStackChallenges: InsertCodeChallenge[] = [\n        {\n          title: \"Reverse a String\",\n          description: \"Write a function that takes a string as input and returns it reversed.\",\n          difficulty: \"easy\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 1,\n          xpReward: 50,\n          starterCode: {\n            javascript: \"function reverseString(str) {\\n  // Your code here\\n}\",\n            python: \"def reverse_string(s):\\n    # Your code here\\n    pass\",\n            java: \"public class Solution {\\n    public static String reverseString(String s) {\\n        // Your code here\\n    }\\n}\",\n            cpp: \"#include <string>\\nusing namespace std;\\n\\nstring reverseString(string s) {\\n    // Your code here\\n}\"\n          },\n          testCases: [\n            { input: \"hello\", expectedOutput: \"olleh\" },\n            { input: \"world\", expectedOutput: \"dlrow\" },\n            { input: \"CareerQuest\", expectedOutput: \"tseuQreeraC\" },\n            { input: \"a\", expectedOutput: \"a\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\", \"java\", \"cpp\"],\n        },\n        {\n          title: \"FizzBuzz\",\n          description: \"Print numbers from 1 to n. For multiples of 3 print 'Fizz', for multiples of 5 print 'Buzz', and for multiples of both print 'FizzBuzz'.\",\n          difficulty: \"easy\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 2,\n          xpReward: 75,\n          starterCode: {\n            javascript: \"function fizzBuzz(n) {\\n  // Return an array of results\\n}\",\n            python: \"def fizz_buzz(n):\\n    # Return a list of results\\n    pass\",\n          },\n          testCases: [\n            { input: \"15\", expectedOutput: \"[1,2,Fizz,4,Buzz,Fizz,7,8,Fizz,Buzz,11,Fizz,13,14,FizzBuzz]\" },\n            { input: \"5\", expectedOutput: \"[1,2,Fizz,4,Buzz]\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\"],\n        },\n        {\n          title: \"Find Maximum in Array\",\n          description: \"Write a function that finds the maximum number in an array.\",\n          difficulty: \"easy\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 3,\n          xpReward: 60,\n          starterCode: {\n            javascript: \"function findMax(arr) {\\n  // Your code here\\n}\",\n            python: \"def find_max(arr):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[1, 5, 3, 9, 2]\", expectedOutput: \"9\" },\n            { input: \"[-1, -5, -3]\", expectedOutput: \"-1\" },\n            { input: \"[42]\", expectedOutput: \"42\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\", \"java\", \"cpp\"],\n        },\n        {\n          title: \"Count Vowels\",\n          description: \"Write a function that counts the number of vowels (a, e, i, o, u) in a string.\",\n          difficulty: \"easy\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 4,\n          xpReward: 70,\n          starterCode: {\n            javascript: \"function countVowels(str) {\\n  // Your code here\\n}\",\n            python: \"def count_vowels(s):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"hello\", expectedOutput: \"2\" },\n            { input: \"programming\", expectedOutput: \"3\" },\n            { input: \"aeiou\", expectedOutput: \"5\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\"],\n        },\n        {\n          title: \"Array Sum\",\n          description: \"Calculate the sum of all numbers in an array.\",\n          difficulty: \"easy\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 5,\n          xpReward: 65,\n          starterCode: {\n            javascript: \"function arraySum(arr) {\\n  // Your code here\\n}\",\n            python: \"def array_sum(arr):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[1, 2, 3, 4, 5]\", expectedOutput: \"15\" },\n            { input: \"[10, -5, 3]\", expectedOutput: \"8\" },\n            { input: \"[0]\", expectedOutput: \"0\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\", \"java\", \"cpp\"],\n        },\n        {\n          title: \"Remove Duplicates\",\n          description: \"Remove duplicate elements from an array and return the unique elements.\",\n          difficulty: \"medium\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 8,\n          xpReward: 100,\n          starterCode: {\n            javascript: \"function removeDuplicates(arr) {\\n  // Your code here\\n}\",\n            python: \"def remove_duplicates(arr):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[1, 2, 2, 3, 4, 4, 5]\", expectedOutput: \"[1,2,3,4,5]\" },\n            { input: \"[1, 1, 1, 1]\", expectedOutput: \"[1]\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\"],\n        },\n        {\n          title: \"Fibonacci Sequence\",\n          description: \"Generate the first n numbers of the Fibonacci sequence.\",\n          difficulty: \"medium\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 10,\n          xpReward: 120,\n          starterCode: {\n            javascript: \"function fibonacci(n) {\\n  // Your code here\\n}\",\n            python: \"def fibonacci(n):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"5\", expectedOutput: \"[0,1,1,2,3]\" },\n            { input: \"8\", expectedOutput: \"[0,1,1,2,3,5,8,13]\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\", \"java\", \"cpp\"],\n        },\n        {\n          title: \"Prime Number Checker\",\n          description: \"Check if a given number is prime.\",\n          difficulty: \"medium\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 12,\n          xpReward: 110,\n          starterCode: {\n            javascript: \"function isPrime(n) {\\n  // Your code here\\n}\",\n            python: \"def is_prime(n):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"7\", expectedOutput: \"true\" },\n            { input: \"10\", expectedOutput: \"false\" },\n            { input: \"2\", expectedOutput: \"true\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\"],\n        },\n        {\n          title: \"Binary Search\",\n          description: \"Implement binary search algorithm to find an element in a sorted array.\",\n          difficulty: \"medium\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 15,\n          xpReward: 150,\n          starterCode: {\n            javascript: \"function binarySearch(arr, target) {\\n  // Return index or -1\\n}\",\n            python: \"def binary_search(arr, target):\\n    # Return index or -1\\n    pass\",\n          },\n          testCases: [\n            { input: \"[1,2,3,4,5,6,7,8,9],5\", expectedOutput: \"4\" },\n            { input: \"[1,2,3,4,5],10\", expectedOutput: \"-1\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\", \"java\", \"cpp\"],\n        },\n        {\n          title: \"Merge Sorted Arrays\",\n          description: \"Merge two sorted arrays into one sorted array.\",\n          difficulty: \"hard\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 18,\n          xpReward: 200,\n          starterCode: {\n            javascript: \"function mergeSorted(arr1, arr2) {\\n  // Your code here\\n}\",\n            python: \"def merge_sorted(arr1, arr2):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[1,3,5],[2,4,6]\", expectedOutput: \"[1,2,3,4,5,6]\" },\n            { input: \"[1,2],[3,4]\", expectedOutput: \"[1,2,3,4]\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\"],\n        },\n      ];\n\n      for (const challenge of fullStackChallenges) {\n        await storage.createCodeChallenge(challenge);\n        console.log(`‚úì Created Full Stack challenge: ${challenge.title}`);\n      }\n    }\n\n    // Data Science & AI Challenges\n    if (dataPath) {\n      const dataChallenges: InsertCodeChallenge[] = [\n        {\n          title: \"Calculate Mean\",\n          description: \"Calculate the mean (average) of a list of numbers.\",\n          difficulty: \"easy\",\n          careerPathId: dataPath.id,\n          requiredLevel: 1,\n          xpReward: 60,\n          starterCode: {\n            python: \"def calculate_mean(numbers):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[1, 2, 3, 4, 5]\", expectedOutput: \"3.0\" },\n            { input: \"[10, 20, 30]\", expectedOutput: \"20.0\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n        {\n          title: \"Calculate Median\",\n          description: \"Calculate the median of a list of numbers.\",\n          difficulty: \"easy\",\n          careerPathId: dataPath.id,\n          requiredLevel: 3,\n          xpReward: 70,\n          starterCode: {\n            python: \"def calculate_median(numbers):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[1, 2, 3, 4, 5]\", expectedOutput: \"3\" },\n            { input: \"[1, 2, 3, 4]\", expectedOutput: \"2.5\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n        {\n          title: \"Standard Deviation\",\n          description: \"Calculate the standard deviation of a dataset.\",\n          difficulty: \"medium\",\n          careerPathId: dataPath.id,\n          requiredLevel: 8,\n          xpReward: 120,\n          starterCode: {\n            python: \"import math\\n\\ndef standard_deviation(numbers):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[2, 4, 4, 4, 5, 5, 7, 9]\", expectedOutput: \"2.0\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n        {\n          title: \"Linear Regression\",\n          description: \"Implement simple linear regression to find the line of best fit.\",\n          difficulty: \"hard\",\n          careerPathId: dataPath.id,\n          requiredLevel: 15,\n          xpReward: 200,\n          starterCode: {\n            python: \"def linear_regression(x, y):\\n    # Return slope and intercept\\n    pass\",\n          },\n          testCases: [\n            { input: \"[1,2,3,4,5],[2,4,6,8,10]\", expectedOutput: \"(2.0,0.0)\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n        {\n          title: \"Data Normalization\",\n          description: \"Normalize a dataset to have values between 0 and 1.\",\n          difficulty: \"medium\",\n          careerPathId: dataPath.id,\n          requiredLevel: 10,\n          xpReward: 130,\n          starterCode: {\n            python: \"def normalize_data(data):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[1, 2, 3, 4, 5]\", expectedOutput: \"[0.0,0.25,0.5,0.75,1.0]\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n        {\n          title: \"Missing Values\",\n          description: \"Count the number of missing values (None or NaN) in a dataset.\",\n          difficulty: \"easy\",\n          careerPathId: dataPath.id,\n          requiredLevel: 5,\n          xpReward: 80,\n          starterCode: {\n            python: \"def count_missing(data):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[1, 2, None, 4, None]\", expectedOutput: \"2\" },\n            { input: \"[1, 2, 3]\", expectedOutput: \"0\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n        {\n          title: \"Correlation Coefficient\",\n          description: \"Calculate the Pearson correlation coefficient between two datasets.\",\n          difficulty: \"hard\",\n          careerPathId: dataPath.id,\n          requiredLevel: 18,\n          xpReward: 220,\n          starterCode: {\n            python: \"def correlation(x, y):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[1,2,3,4,5],[2,4,6,8,10]\", expectedOutput: \"1.0\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n        {\n          title: \"K-Means Initialization\",\n          description: \"Initialize K centroids for K-means clustering.\",\n          difficulty: \"medium\",\n          careerPathId: dataPath.id,\n          requiredLevel: 12,\n          xpReward: 150,\n          starterCode: {\n            python: \"import random\\n\\ndef initialize_centroids(data, k):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[[1,2],[3,4],[5,6]],2\", expectedOutput: \"2\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n        {\n          title: \"Euclidean Distance\",\n          description: \"Calculate the Euclidean distance between two points.\",\n          difficulty: \"easy\",\n          careerPathId: dataPath.id,\n          requiredLevel: 6,\n          xpReward: 90,\n          starterCode: {\n            python: \"import math\\n\\ndef euclidean_distance(point1, point2):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"[0,0],[3,4]\", expectedOutput: \"5.0\" },\n            { input: \"[1,1],[4,5]\", expectedOutput: \"5.0\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n        {\n          title: \"One-Hot Encoding\",\n          description: \"Implement one-hot encoding for categorical data.\",\n          difficulty: \"medium\",\n          careerPathId: dataPath.id,\n          requiredLevel: 14,\n          xpReward: 140,\n          starterCode: {\n            python: \"def one_hot_encode(categories):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"['red','blue','red']\", expectedOutput: \"[[1,0],[0,1],[1,0]]\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n      ];\n\n      for (const challenge of dataChallenges) {\n        await storage.createCodeChallenge(challenge);\n        console.log(`‚úì Created Data Science challenge: ${challenge.title}`);\n      }\n    }\n\n    // Cloud & DevOps Challenges\n    if (cloudPath) {\n      const cloudChallenges: InsertCodeChallenge[] = [\n        {\n          title: \"Parse Environment Variables\",\n          description: \"Parse a string of environment variables (KEY=VALUE format) into a dictionary.\",\n          difficulty: \"easy\",\n          careerPathId: cloudPath.id,\n          requiredLevel: 1,\n          xpReward: 60,\n          starterCode: {\n            python: \"def parse_env_vars(env_string):\\n    # Your code here\\n    pass\",\n            javascript: \"function parseEnvVars(envString) {\\n  // Your code here\\n}\",\n          },\n          testCases: [\n            { input: \"PORT=3000\\nHOST=localhost\", expectedOutput: \"{PORT:3000,HOST:localhost}\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n        {\n          title: \"Docker Image Tag Validator\",\n          description: \"Validate a Docker image tag format (must be lowercase, alphanumeric, dots, dashes).\",\n          difficulty: \"easy\",\n          careerPathId: cloudPath.id,\n          requiredLevel: 5,\n          xpReward: 80,\n          starterCode: {\n            python: \"def validate_docker_tag(tag):\\n    # Return True or False\\n    pass\",\n          },\n          testCases: [\n            { input: \"my-app-1.0\", expectedOutput: \"true\" },\n            { input: \"My-App\", expectedOutput: \"false\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n        {\n          title: \"Log Parser\",\n          description: \"Parse log lines to extract timestamp, level, and message.\",\n          difficulty: \"medium\",\n          careerPathId: cloudPath.id,\n          requiredLevel: 10,\n          xpReward: 120,\n          starterCode: {\n            python: \"def parse_log_line(log):\\n    # Return dict with timestamp, level, message\\n    pass\",\n          },\n          testCases: [\n            { input: \"2024-01-01 ERROR Failed to connect\", expectedOutput: \"{timestamp:2024-01-01,level:ERROR,message:Failed to connect}\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n        {\n          title: \"Health Check Endpoint\",\n          description: \"Implement a health check function that returns status based on system metrics.\",\n          difficulty: \"medium\",\n          careerPathId: cloudPath.id,\n          requiredLevel: 12,\n          xpReward: 130,\n          starterCode: {\n            javascript: \"function healthCheck(cpuUsage, memoryUsage) {\\n  // Return 'healthy' or 'unhealthy'\\n}\",\n          },\n          testCases: [\n            { input: \"50,60\", expectedOutput: \"healthy\" },\n            { input: \"95,90\", expectedOutput: \"unhealthy\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\"],\n        },\n        {\n          title: \"Load Balancer Algorithm\",\n          description: \"Implement round-robin load balancing algorithm.\",\n          difficulty: \"hard\",\n          careerPathId: cloudPath.id,\n          requiredLevel: 18,\n          xpReward: 200,\n          starterCode: {\n            python: \"class LoadBalancer:\\n    def __init__(self, servers):\\n        pass\\n    \\n    def get_next_server(self):\\n        pass\",\n          },\n          testCases: [\n            { input: \"['server1','server2','server3']\", expectedOutput: \"server1\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n        {\n          title: \"Config Merger\",\n          description: \"Merge two configuration dictionaries, with second overriding first.\",\n          difficulty: \"medium\",\n          careerPathId: cloudPath.id,\n          requiredLevel: 8,\n          xpReward: 110,\n          starterCode: {\n            python: \"def merge_configs(config1, config2):\\n    # Your code here\\n    pass\",\n          },\n          testCases: [\n            { input: \"{port:3000,host:localhost},{port:8080}\", expectedOutput: \"{port:8080,host:localhost}\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n        {\n          title: \"Uptime Calculator\",\n          description: \"Calculate service uptime percentage from downtime minutes in a month.\",\n          difficulty: \"easy\",\n          careerPathId: cloudPath.id,\n          requiredLevel: 3,\n          xpReward: 70,\n          starterCode: {\n            python: \"def calculate_uptime(downtime_minutes):\\n    # Return uptime percentage\\n    pass\",\n          },\n          testCases: [\n            { input: \"0\", expectedOutput: \"100.0\" },\n            { input: \"43200\", expectedOutput: \"0.0\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n        {\n          title: \"Resource Scaling Decision\",\n          description: \"Decide whether to scale up/down based on CPU and memory metrics.\",\n          difficulty: \"medium\",\n          careerPathId: cloudPath.id,\n          requiredLevel: 15,\n          xpReward: 140,\n          starterCode: {\n            javascript: \"function scalingDecision(cpu, memory) {\\n  // Return 'scale_up', 'scale_down', or 'no_change'\\n}\",\n          },\n          testCases: [\n            { input: \"85,90\", expectedOutput: \"scale_up\" },\n            { input: \"20,15\", expectedOutput: \"scale_down\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\"],\n        },\n        {\n          title: \"Secret Rotation Check\",\n          description: \"Check if a secret is older than N days and needs rotation.\",\n          difficulty: \"easy\",\n          careerPathId: cloudPath.id,\n          requiredLevel: 6,\n          xpReward: 85,\n          starterCode: {\n            python: \"from datetime import datetime\\n\\ndef needs_rotation(created_date, max_days):\\n    # Return True or False\\n    pass\",\n          },\n          testCases: [\n            { input: \"2024-01-01,30\", expectedOutput: \"true\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n        {\n          title: \"Container Port Validator\",\n          description: \"Validate if a port number is valid for container deployment (1-65535).\",\n          difficulty: \"easy\",\n          careerPathId: cloudPath.id,\n          requiredLevel: 2,\n          xpReward: 50,\n          starterCode: {\n            python: \"def validate_port(port):\\n    # Return True or False\\n    pass\",\n          },\n          testCases: [\n            { input: \"8080\", expectedOutput: \"true\" },\n            { input: \"70000\", expectedOutput: \"false\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n      ];\n\n      for (const challenge of cloudChallenges) {\n        await storage.createCodeChallenge(challenge);\n        console.log(`‚úì Created Cloud/DevOps challenge: ${challenge.title}`);\n      }\n    }\n\n    // Mobile Development Challenges\n    if (mobilePath) {\n      const mobileChallenges: InsertCodeChallenge[] = [\n        {\n          title: \"Validate Email Input\",\n          description: \"Validate an email address format for mobile form input.\",\n          difficulty: \"easy\",\n          careerPathId: mobilePath.id,\n          requiredLevel: 1,\n          xpReward: 60,\n          starterCode: {\n            javascript: \"function validateEmail(email) {\\n  // Return true or false\\n}\",\n          },\n          testCases: [\n            { input: \"user@example.com\", expectedOutput: \"true\" },\n            { input: \"invalid.email\", expectedOutput: \"false\" },\n          ],\n          supportedLanguages: [\"javascript\"],\n        },\n        {\n          title: \"Format Phone Number\",\n          description: \"Format a 10-digit phone number as (XXX) XXX-XXXX.\",\n          difficulty: \"easy\",\n          careerPathId: mobilePath.id,\n          requiredLevel: 3,\n          xpReward: 70,\n          starterCode: {\n            javascript: \"function formatPhoneNumber(digits) {\\n  // Your code here\\n}\",\n          },\n          testCases: [\n            { input: \"1234567890\", expectedOutput: \"(123) 456-7890\" },\n          ],\n          supportedLanguages: [\"javascript\"],\n        },\n        {\n          title: \"Touch Gesture Detector\",\n          description: \"Determine swipe direction from start and end coordinates.\",\n          difficulty: \"medium\",\n          careerPathId: mobilePath.id,\n          requiredLevel: 8,\n          xpReward: 110,\n          starterCode: {\n            javascript: \"function detectSwipe(startX, startY, endX, endY) {\\n  // Return 'up', 'down', 'left', or 'right'\\n}\",\n          },\n          testCases: [\n            { input: \"100,100,200,100\", expectedOutput: \"right\" },\n            { input: \"100,100,100,200\", expectedOutput: \"down\" },\n          ],\n          supportedLanguages: [\"javascript\"],\n        },\n        {\n          title: \"Device Orientation Handler\",\n          description: \"Determine orientation (portrait/landscape) from screen dimensions.\",\n          difficulty: \"easy\",\n          careerPathId: mobilePath.id,\n          requiredLevel: 5,\n          xpReward: 75,\n          starterCode: {\n            javascript: \"function getOrientation(width, height) {\\n  // Return 'portrait' or 'landscape'\\n}\",\n          },\n          testCases: [\n            { input: \"375,667\", expectedOutput: \"portrait\" },\n            { input: \"667,375\", expectedOutput: \"landscape\" },\n          ],\n          supportedLanguages: [\"javascript\"],\n        },\n        {\n          title: \"Debounce Search Input\",\n          description: \"Implement debounce function to delay API calls during typing.\",\n          difficulty: \"medium\",\n          careerPathId: mobilePath.id,\n          requiredLevel: 12,\n          xpReward: 130,\n          starterCode: {\n            javascript: \"function debounce(func, delay) {\\n  // Your code here\\n}\",\n          },\n          testCases: [\n            { input: \"function,300\", expectedOutput: \"function\" },\n          ],\n          supportedLanguages: [\"javascript\"],\n        },\n        {\n          title: \"Image URL Validator\",\n          description: \"Validate if a URL is a valid image URL (ends with image extension).\",\n          difficulty: \"easy\",\n          careerPathId: mobilePath.id,\n          requiredLevel: 4,\n          xpReward: 65,\n          starterCode: {\n            javascript: \"function isImageUrl(url) {\\n  // Return true or false\\n}\",\n          },\n          testCases: [\n            { input: \"https://example.com/image.jpg\", expectedOutput: \"true\" },\n            { input: \"https://example.com/page.html\", expectedOutput: \"false\" },\n          ],\n          supportedLanguages: [\"javascript\"],\n        },\n        {\n          title: \"Calculate Distance Scrolled\",\n          description: \"Calculate percentage scrolled given scroll position and content height.\",\n          difficulty: \"easy\",\n          careerPathId: mobilePath.id,\n          requiredLevel: 6,\n          xpReward: 80,\n          starterCode: {\n            javascript: \"function scrollPercentage(scrollTop, scrollHeight, clientHeight) {\\n  // Return percentage\\n}\",\n          },\n          testCases: [\n            { input: \"50,200,100\", expectedOutput: \"50\" },\n            { input: \"100,200,100\", expectedOutput: \"100\" },\n          ],\n          supportedLanguages: [\"javascript\"],\n        },\n        {\n          title: \"Deep Link Parser\",\n          description: \"Parse a deep link URL to extract scheme, host, and parameters.\",\n          difficulty: \"medium\",\n          careerPathId: mobilePath.id,\n          requiredLevel: 10,\n          xpReward: 120,\n          starterCode: {\n            javascript: \"function parseDeepLink(url) {\\n  // Return object with scheme, host, params\\n}\",\n          },\n          testCases: [\n            { input: \"myapp://profile?id=123\", expectedOutput: \"{scheme:myapp,host:profile,params:{id:123}}\" },\n          ],\n          supportedLanguages: [\"javascript\"],\n        },\n        {\n          title: \"Responsive Font Size\",\n          description: \"Calculate responsive font size based on screen width.\",\n          difficulty: \"easy\",\n          careerPathId: mobilePath.id,\n          requiredLevel: 2,\n          xpReward: 55,\n          starterCode: {\n            javascript: \"function responsiveFontSize(screenWidth, baseFontSize) {\\n  // Return scaled font size\\n}\",\n          },\n          testCases: [\n            { input: \"375,16\", expectedOutput: \"16\" },\n            { input: \"750,16\", expectedOutput: \"32\" },\n          ],\n          supportedLanguages: [\"javascript\"],\n        },\n        {\n          title: \"Battery Level Warning\",\n          description: \"Determine if battery level warning should be shown.\",\n          difficulty: \"easy\",\n          careerPathId: mobilePath.id,\n          requiredLevel: 7,\n          xpReward: 70,\n          starterCode: {\n            javascript: \"function shouldShowBatteryWarning(batteryLevel) {\\n  // Return true if below 20%\\n}\",\n          },\n          testCases: [\n            { input: \"15\", expectedOutput: \"true\" },\n            { input: \"50\", expectedOutput: \"false\" },\n          ],\n          supportedLanguages: [\"javascript\"],\n        },\n      ];\n\n      for (const challenge of mobileChallenges) {\n        await storage.createCodeChallenge(challenge);\n        console.log(`‚úì Created Mobile challenge: ${challenge.title}`);\n      }\n    }\n\n    // Cybersecurity Challenges\n    if (securityPath) {\n      const securityChallenges: InsertCodeChallenge[] = [\n        {\n          title: \"Password Strength Checker\",\n          description: \"Check if a password meets security requirements (min 8 chars, has uppercase, lowercase, digit, special char).\",\n          difficulty: \"easy\",\n          careerPathId: securityPath.id,\n          requiredLevel: 1,\n          xpReward: 70,\n          starterCode: {\n            python: \"def check_password_strength(password):\\n    # Return True or False\\n    pass\",\n            javascript: \"function checkPasswordStrength(password) {\\n  // Return true or false\\n}\",\n          },\n          testCases: [\n            { input: \"Passw0rd!\", expectedOutput: \"true\" },\n            { input: \"weak\", expectedOutput: \"false\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n        {\n          title: \"Input Sanitizer\",\n          description: \"Remove potentially dangerous characters from user input.\",\n          difficulty: \"medium\",\n          careerPathId: securityPath.id,\n          requiredLevel: 8,\n          xpReward: 120,\n          starterCode: {\n            javascript: \"function sanitizeInput(input) {\\n  // Remove <, >, &, quotes\\n}\",\n          },\n          testCases: [\n            { input: \"<script>alert('xss')</script>\", expectedOutput: \"scriptalert('xss')script\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\"],\n        },\n        {\n          title: \"JWT Token Validator\",\n          description: \"Validate JWT token structure (header.payload.signature).\",\n          difficulty: \"medium\",\n          careerPathId: securityPath.id,\n          requiredLevel: 12,\n          xpReward: 140,\n          starterCode: {\n            javascript: \"function validateJWT(token) {\\n  // Return true if valid structure\\n}\",\n          },\n          testCases: [\n            { input: \"eyJhbGc.eyJzdWI.signature\", expectedOutput: \"true\" },\n            { input: \"invalid\", expectedOutput: \"false\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\"],\n        },\n        {\n          title: \"Rate Limit Tracker\",\n          description: \"Track API requests and determine if rate limit is exceeded.\",\n          difficulty: \"hard\",\n          careerPathId: securityPath.id,\n          requiredLevel: 18,\n          xpReward: 200,\n          starterCode: {\n            python: \"class RateLimiter:\\n    def __init__(self, max_requests, time_window):\\n        pass\\n    \\n    def allow_request(self):\\n        pass\",\n          },\n          testCases: [\n            { input: \"5,60\", expectedOutput: \"true\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n        {\n          title: \"SQL Injection Detector\",\n          description: \"Detect potential SQL injection attempts in user input.\",\n          difficulty: \"medium\",\n          careerPathId: securityPath.id,\n          requiredLevel: 10,\n          xpReward: 130,\n          starterCode: {\n            python: \"def detect_sql_injection(query):\\n    # Return True if suspicious\\n    pass\",\n          },\n          testCases: [\n            { input: \"SELECT * FROM users WHERE id = 1\", expectedOutput: \"false\" },\n            { input: \"'; DROP TABLE users; --\", expectedOutput: \"true\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n        {\n          title: \"Hash Password\",\n          description: \"Hash a password using a simple hashing algorithm simulation.\",\n          difficulty: \"easy\",\n          careerPathId: securityPath.id,\n          requiredLevel: 3,\n          xpReward: 75,\n          starterCode: {\n            python: \"def hash_password(password, salt):\\n    # Simple hash simulation\\n    pass\",\n          },\n          testCases: [\n            { input: \"password123,salt123\", expectedOutput: \"hashed_value\" },\n          ],\n          supportedLanguages: [\"python\"],\n        },\n        {\n          title: \"XSS Attack Detector\",\n          description: \"Detect potential XSS attack vectors in HTML input.\",\n          difficulty: \"medium\",\n          careerPathId: securityPath.id,\n          requiredLevel: 15,\n          xpReward: 150,\n          starterCode: {\n            javascript: \"function detectXSS(html) {\\n  // Return true if suspicious\\n}\",\n          },\n          testCases: [\n            { input: \"<p>Hello World</p>\", expectedOutput: \"false\" },\n            { input: \"<script>alert('XSS')</script>\", expectedOutput: \"true\" },\n          ],\n          supportedLanguages: [\"javascript\", \"python\"],\n        },\n        {\n          title: \"IP Address Validator\",\n          description: \"Validate if a string is a valid IPv4 address.\",\n          difficulty: \"easy\",\n          careerPathId: securityPath.id,\n          requiredLevel: 5,\n          xpReward: 80,\n          starterCode: {\n            python: \"def validate_ipv4(ip):\\n    # Return True or False\\n    pass\",\n          },\n          testCases: [\n            { input: \"192.168.1.1\", expectedOutput: \"true\" },\n            { input: \"256.1.1.1\", expectedOutput: \"false\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n        {\n          title: \"CSRF Token Generator\",\n          description: \"Generate a random CSRF token of specified length.\",\n          difficulty: \"easy\",\n          careerPathId: securityPath.id,\n          requiredLevel: 6,\n          xpReward: 85,\n          starterCode: {\n            python: \"import random\\nimport string\\n\\ndef generate_csrf_token(length):\\n    # Generate random token\\n    pass\",\n          },\n          testCases: [\n            { input: \"32\", expectedOutput: \"32\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n        {\n          title: \"Secure Session ID\",\n          description: \"Validate that a session ID meets security requirements (length, randomness).\",\n          difficulty: \"medium\",\n          careerPathId: securityPath.id,\n          requiredLevel: 14,\n          xpReward: 135,\n          starterCode: {\n            python: \"def validate_session_id(session_id):\\n    # Check length and format\\n    pass\",\n          },\n          testCases: [\n            { input: \"a1b2c3d4e5f6g7h8\", expectedOutput: \"true\" },\n            { input: \"short\", expectedOutput: \"false\" },\n          ],\n          supportedLanguages: [\"python\", \"javascript\"],\n        },\n      ];\n\n      for (const challenge of securityChallenges) {\n        await storage.createCodeChallenge(challenge);\n        console.log(`‚úì Created Cybersecurity challenge: ${challenge.title}`);\n      }\n    }\n\n    console.log(\"\\n‚úÖ Code challenges seeding complete!\");\n    console.log(\"Total new challenges created: 60+\");\n\n  } catch (error) {\n    console.error(\"‚ùå Error seeding challenges:\", error);\n    throw error;\n  }\n}\n\n// Run the seed function\nseedCodeChallenges()\n  .then(() => {\n    console.log(\"üéâ Seeding completed successfully\");\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error(\"Failed to seed:\", error);\n    process.exit(1);\n  });\n","path":null,"size_bytes":34695,"size_tokens":null},"client/src/components/examples/DailyChallengeCard.tsx":{"content":"import DailyChallengeCard from '../DailyChallengeCard';\n\nexport default function DailyChallengeCardExample() {\n  return (\n    <DailyChallengeCard \n      title=\"Reverse a Linked List\"\n      difficulty=\"medium\"\n      xpReward={150}\n      timeEstimate=\"15 min\"\n      streak={7}\n    />\n  );\n}\n","path":null,"size_bytes":289,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"client/src/components/examples/AdminSidebar.tsx":{"content":"import { useState } from 'react';\nimport AdminSidebar from '../AdminSidebar';\n\nexport default function AdminSidebarExample() {\n  const [activeTab, setActiveTab] = useState(\"overview\");\n  \n  return <AdminSidebar activeTab={activeTab} onTabChange={setActiveTab} />;\n}\n","path":null,"size_bytes":266,"size_tokens":null},"client/src/components/examples/InterestQuestionnaire.tsx":{"content":"import InterestQuestionnaire from '../InterestQuestionnaire';\n\nexport default function InterestQuestionnaireExample() {\n  return <InterestQuestionnaire />;\n}\n","path":null,"size_bytes":158,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/components/LeaderboardTable.tsx":{"content":"import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Trophy, Medal, Award } from \"lucide-react\";\n\ninterface LeaderboardEntry {\n  rank: number;\n  name: string;\n  level: number;\n  xp: number;\n  badges: number;\n  isCurrentUser?: boolean;\n}\n\ninterface LeaderboardTableProps {\n  entries: LeaderboardEntry[];\n}\n\nexport default function LeaderboardTable({ entries }: LeaderboardTableProps) {\n  const getRankIcon = (rank: number) => {\n    if (rank === 1) return <Trophy className=\"w-5 h-5 text-[hsl(var(--badge-legendary))]\" />;\n    if (rank === 2) return <Medal className=\"w-5 h-5 text-[hsl(var(--badge-rare))]\" />;\n    if (rank === 3) return <Award className=\"w-5 h-5 text-[hsl(var(--badge-epic))]\" />;\n    return null;\n  };\n\n  return (\n    <div className=\"overflow-x-auto\">\n      <table className=\"w-full\">\n        <thead className=\"sticky top-0 bg-card border-b border-card-border\">\n          <tr className=\"text-left\">\n            <th className=\"p-4 font-semibold text-sm\">Rank</th>\n            <th className=\"p-4 font-semibold text-sm\">Player</th>\n            <th className=\"p-4 font-semibold text-sm\">Level</th>\n            <th className=\"p-4 font-semibold text-sm\">XP</th>\n            <th className=\"p-4 font-semibold text-sm\">Badges</th>\n          </tr>\n        </thead>\n        <tbody>\n          {entries.map((entry) => (\n            <tr \n              key={entry.rank}\n              className={`border-b border-card-border hover-elevate ${entry.isCurrentUser ? 'bg-primary/5' : ''}`}\n              data-testid={`row-user-${entry.rank}`}\n            >\n              <td className=\"p-4\">\n                <div className=\"flex items-center gap-2\">\n                  {getRankIcon(entry.rank)}\n                  <span className=\"font-semibold\">{entry.rank}</span>\n                </div>\n              </td>\n              <td className=\"p-4\">\n                <div className=\"flex items-center gap-3\">\n                  <Avatar className=\"w-8 h-8\">\n                    <AvatarFallback className=\"text-xs\">\n                      {entry.name.split(' ').map(n => n[0]).join('')}\n                    </AvatarFallback>\n                  </Avatar>\n                  <span className=\"font-medium\">\n                    {entry.name}\n                    {entry.isCurrentUser && <span className=\"ml-2 text-xs text-primary\">(You)</span>}\n                  </span>\n                </div>\n              </td>\n              <td className=\"p-4 font-semibold text-primary\">{entry.level}</td>\n              <td className=\"p-4\">{entry.xp.toLocaleString()}</td>\n              <td className=\"p-4\">{entry.badges}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","path":null,"size_bytes":2694,"size_tokens":null},"ml_model/app.py":{"content":"#!/usr/bin/env python3\n\"\"\"Flask ML service wrapper.\n\nProvides a `/predict` endpoint that accepts JSON: {\"command\": string, \"data\": {...}}\nLogs incoming requests and prediction completions in the requested format.\n\nRun:\n  python3 ml_model\\app.py\n\"\"\"\nfrom datetime import datetime\nfrom flask import Flask, request, jsonify\n\napp = Flask(__name__)\n\ntry:\n\tfrom prediction_service import (\n\t\thealth_check,\n\t\tgenerate_quiz,\n\t\tsuggest_study,\n\t\trecommend_career,\n\t\tclassify_question,\n\t\tload_models,\n\t)\nexcept Exception as e:\n\traise RuntimeError(f\"Failed to import prediction_service: {e}\")\n\n\ndef now_ts():\n\treturn datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\")\n\n\ndef log_request(command, data):\n\tprint(f\"[{now_ts()}] ML Service Request\")\n\tprint(f\"  Command: {command}\")\n\t# show some common fields when present\n\tif isinstance(data, dict):\n\t\tif \"career_path\" in data:\n\t\t\tprint(f\"  Career Path: {data.get('career_path')}\")\n\t\tif \"difficulty\" in data:\n\t\t\tprint(f\"  Difficulty: {data.get('difficulty')}\")\n\t\tif \"level\" in data:\n\t\t\tprint(f\"  Level: {data.get('level')}\")\n\n\ndef log_complete(command, result, model_name=\"Trained Scikit-Learn\"):\n\tprint(f\"[{now_ts()}] ML Prediction Complete\")\n\t# payload-specific summary lines\n\tif command == \"generate_quiz\" and isinstance(result, list):\n\t\tprint(f\"  ‚úì Generated {len(result)} questions\")\n\telif command == \"health_check\":\n\t\tprint(\"  ‚úì Health check returned\")\n\telse:\n\t\tprint(\"  ‚úì Prediction complete\")\n\tprint(f\"  Model: {model_name}\")\n\n\ndef log_trained_used(command):\n\t\"\"\"Print explicit terminal confirmation when a trained model was used.\"\"\"\n\ttry:\n\t\tmodels = load_models()\n\texcept Exception:\n\t\tprint(\"‚ö†Ô∏è  Could not load models to verify trained-model usage\")\n\t\treturn\n\n\t# Map commands to model checks and messages\n\tif command == \"generate_quiz\":\n\t\tif \"question_classifier\" in models or \"random_forest\" in models:\n\t\t\tprint(\"‚úÖ Trained model used for AI Quiz prediction\")\n\t\t\treturn\n\tif command == \"recommend_career\":\n\t\tif \"random_forest\" in models:\n\t\t\tprint(\"‚úÖ Trained model used for Career Assessment\")\n\t\t\treturn\n\tif command == \"suggest_study\":\n\t\tif \"study_suggester\" in models:\n\t\t\tprint(\"‚úÖ Trained model used for Study Suggestion\")\n\t\t\treturn\n\t# Generic daily-task or other analyses\n\tif command in (\"daily_task\", \"process_daily_task\"):\n\t\tif any(k in models for k in (\"random_forest\", \"study_suggester\")):\n\t\t\tprint(\"‚úÖ Trained model used for Daily Task analysis\")\n\t\t\treturn\n\n\t# Fallback notice\n\tprint(\"‚ö†Ô∏è  No trained model was detected for this command; heuristics used instead\")\n\n\n@app.route(\"/health\", methods=[\"GET\"])\ndef health():\n\tres = health_check({})\n\treturn jsonify({\"success\": True, \"result\": res})\n\n\n@app.route(\"/predict\", methods=[\"POST\"])\ndef predict():\n\tpayload = request.get_json(force=True)\n\tcommand = payload.get(\"command\")\n\tdata = payload.get(\"data\", {})\n\n\thandlers = {\n\t\t\"generate_quiz\": generate_quiz,\n\t\t\"suggest_study\": suggest_study,\n\t\t\"recommend_career\": recommend_career,\n\t\t\"classify_question\": classify_question,\n\t\t\"health_check\": health_check,\n\t}\n\n\tlog_request(command, data)\n\n\tif command not in handlers:\n\t\treturn jsonify({\"success\": False, \"error\": f\"Unknown command: {command}\"}), 400\n\n\ttry:\n\t\tresult = handlers[command](data)\n\texcept Exception as e:\n\t\treturn jsonify({\"success\": False, \"error\": str(e)}), 500\n\n\t# Log completion summary\n\tif command == \"generate_quiz\":\n\t\t# result is a list of questions\n\t\tlog_complete(command, result, model_name=\"Trained Scikit-Learn\")\n\telse:\n\t\tlog_complete(command, result)\n\n\t# Explicit trained-model usage log for thesis validation\n\ttry:\n\t\tlog_trained_used(command)\n\texcept Exception:\n\t\tprint(\"‚ö†Ô∏è  Error while logging trained-model usage\")\n\n\treturn jsonify({\"success\": True, \"result\": result})\n\n\nif __name__ == \"__main__\":\n\t# Bind to localhost:5001 as requested\n\tapp.run(host=\"127.0.0.1\", port=5001)\n\n\n","path":null,"size_bytes":3816,"size_tokens":null},"client/src/contexts/AuthContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, useCallback } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport type { User } from \"@shared/schema\";\n\ninterface AuthContextType {\n  user: Omit<User, \"password\"> | null;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  register: (data: {\n    email: string;\n    username: string;\n    password: string;\n    confirmPassword: string;\n    displayName: string;\n    pathSelectionMode?: string;\n    currentCareerPathId?: string | null;\n  }) => Promise<void>;\n  logout: () => Promise<void>;\n  refreshUser: () => Promise<void>;\n  pendingRecommendation: any | null;\n  setPendingRecommendation: (recommendation: any) => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<Omit<User, \"password\"> | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [pendingRecommendation, setPendingRecommendation] = useState<any>(null);\n  const [, setLocation] = useLocation();\n\n  // Check if user is logged in on mount\n  useEffect(() => {\n    checkAuth();\n  }, []);\n\n  async function checkAuth() {\n    try {\n      const response = await fetch(\"/api/auth/me\", {\n        credentials: \"include\",\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setUser(data.user);\n      } else if (response.status === 429) {\n        // Rate limited ‚Äî transient. Don't log the user out immediately.\n        // Retry after a short backoff so temporary rate limits don't cause logout.\n        console.warn('Auth check rate-limited (429). Retrying in 5s.');\n        setTimeout(checkAuth, 5000);\n        return;\n      } else {\n        setUser(null);\n      }\n    } catch (error) {\n      console.error(\"Auth check failed:\", error);\n      setUser(null);\n    } finally {\n      setIsLoading(false);\n    }\n  }\n\n  async function login(email: string, password: string) {\n    const response = await apiRequest(\"POST\", \"/api/auth/login\", { email, password });\n    const data = await response.json();\n\n    setUser(data.user);\n    \n    // Redirect admin users to admin dashboard\n    if (data.user.isAdmin) {\n      setLocation(\"/admin\");\n    } else {\n      setLocation(\"/dashboard\");\n    }\n  }\n\n  async function register(data: {\n    email: string;\n    username: string;\n    password: string;\n    confirmPassword: string;\n    displayName: string;\n    pathSelectionMode?: string;\n    currentCareerPathId?: string | null;\n  }) {\n    const response = await apiRequest(\"POST\", \"/api/auth/register\", data);\n    const json = await response.json();\n\n    setUser(json.user);\n    \n    // Redirect admin users to admin dashboard\n    if (json.user.isAdmin) {\n      setLocation(\"/admin\");\n    } else {\n      setLocation(\"/dashboard\");\n    }\n  }\n\n  async function logout() {\n    await apiRequest(\"POST\", \"/api/auth/logout\");\n\n    setUser(null);\n    setLocation(\"/\");\n  }\n\n  const refreshUser = useCallback(async () => {\n    await checkAuth();\n  }, []);\n\n  return (\n    <AuthContext.Provider value={{ user, isLoading, login, register, logout, refreshUser, pendingRecommendation, setPendingRecommendation }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":3531,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"ToBeAdded.md":{"content":"# CareerQuest - Implementation Status Report (Updated Nov 4, 2025)\n\n## ‚úÖ Fully Implemented & Working Features\n\n### Core Gamification\n- ‚úÖ XP-based leveling system (1000 XP per level)\n- ‚úÖ Badge system with rarities (common, rare, epic, legendary)\n- ‚úÖ User progress tracking with totalXp and level\n- ‚úÖ Leaderboard functionality (global rankings)\n- ‚úÖ Daily challenges system (auto-assignment)\n- ‚úÖ Streak tracking (login-based)\n- ‚úÖ Notification system with triggers (level up, badge earned, challenge completed)\n\n### Authentication & Security\n- ‚úÖ Email/password registration and login\n- ‚úÖ Session-based authentication with Passport.js\n- ‚úÖ Protected routes (admin and user)\n- ‚úÖ **Password strength validation with real-time feedback UI** (NEW)\n- ‚úÖ Password hashing with bcrypt\n- ‚úÖ Rate limiting on sensitive endpoints\n- ‚úÖ Global Error Boundary in React app\n\n### Backend Infrastructure\n- ‚úÖ Firebase Firestore database (fully migrated)\n- ‚úÖ Express API routes with comprehensive error handling\n- ‚úÖ RESTful API design\n- ‚úÖ Admin audit logging system\n- ‚úÖ Judge0 API integration for code execution\n- ‚úÖ OpenAI integration with smart fallbacks\n\n### Learning Content System\n- ‚úÖ **20+ comprehensive modules with lessons seeded** (NEW)\n  - Programming Fundamentals (5 modules)\n  - Data Structures & Algorithms (3 modules)\n  - Object-Oriented Programming (2 modules)\n  - Git & Version Control (2 modules)\n  - Path-specific content for all 5 career paths\n- ‚úÖ **70+ quiz questions across all career paths** (NEW)\n  - Frontend, Backend, Data Science, Cloud, Mobile, Security categories\n  - Multiple difficulty levels\n  - Career path alignment\n- ‚úÖ **60+ code challenges with test cases** (NEW)\n  - 10+ challenges per career path\n  - Algorithms, data structures, path-specific problems\n  - Judge0 integration for execution\n\n### Quiz System (Fully Functional)\n- ‚úÖ **Fisher-Yates shuffle for question randomization** (NEW)\n- ‚úÖ **Working countdown timer with auto-submit** (NEW)\n- ‚úÖ **Tab detection anti-cheat system** (NEW)\n  - Tracks tab switches during quizzes\n  - Auto-fails on excessive violations\n  - Warning system implemented\n- ‚úÖ Quiz scoring and XP rewards\n- ‚úÖ Quiz results display\n- ‚úÖ Category-based quiz organization\n\n### Code Editor & Compiler\n- ‚úÖ **Monaco Editor fully integrated** (NEW)\n- ‚úÖ **Judge0 API connected** (NEW)\n- ‚úÖ Multi-language support (Python, JavaScript, C++, Java)\n- ‚úÖ Syntax highlighting\n- ‚úÖ Test case execution and display\n- ‚úÖ Compilation error handling\n- ‚úÖ Code templates per language\n- ‚úÖ XP rewards for successful solutions\n\n### AI-Powered Features\n- ‚úÖ Naive Bayes career recommendation algorithm\n- ‚úÖ **Interest Assessment triggered at Level 20** (NEW)\n- ‚úÖ Career path recommendation based on quiz performance\n- ‚úÖ AI study suggestions with smart fallbacks\n- ‚úÖ Performance analysis by category\n\n### UI/UX Foundation\n- ‚úÖ Landing page with hero section\n- ‚úÖ Dark/light theme toggle\n- ‚úÖ Responsive design (Tailwind CSS)\n- ‚úÖ Modern UI components (shadcn/ui)\n- ‚úÖ Navigation between pages\n- ‚úÖ Career path selection page\n- ‚úÖ User dashboard with progress tracking\n- ‚úÖ Profile page with stats\n\n---\n\n## ‚ö†Ô∏è Implemented But Needs Enhancement\n\n### 1. **Badge Auto-Award System**\n**Status**: Manual badge awards work, but automatic triggers need implementation\n**Location**: `server/routes.ts`\n**Current State**:\n- ‚úÖ Badge schema and database\n- ‚úÖ Manual badge assignment works\n- ‚úÖ Badge display in UI\n- ‚ö†Ô∏è Automatic triggers not fully implemented\n\n**What's Missing**:\n- Auto-award \"First Steps\" on registration\n- Auto-award \"Quiz Master\" after X quizzes\n- Auto-award \"Code Warrior\" after X challenges\n- Auto-award \"Speed Demon\" for fast quiz completion\n- Auto-award \"Perfect Score\" for 100% quiz scores\n\n---\n\n### 2. **Search Functionality**\n**Status**: Backend endpoint exists but NO UI\n**Location**: `server/routes.ts` (`/api/search`)\n**Current State**:\n- ‚úÖ Search API endpoint exists\n- ‚úÖ Searches modules, quizzes, challenges, career paths\n- ‚ùå No search input in UI\n- ‚ùå No search results page\n\n**What's Missing**:\n- Add search input to header\n- Create search results page\n- Implement search UI component\n- Add search filters\n- Display search results\n\n---\n\n### 3. **Progression Ranks Display**\n**Status**: Data exists but not prominently displayed\n**Location**: Career paths have `progressionRanks` field\n**Current State**:\n- ‚úÖ Database has progression ranks (Junior ‚Üí Mid ‚Üí Senior ‚Üí Lead)\n- ‚úÖ ProgressionRanks component exists\n- ‚ö†Ô∏è Not prominently displayed in user profile\n- ‚ö†Ô∏è Could be more prominent in career path pages\n\n**What Needs Enhancement**:\n- Enhance display in user profile\n- Add rank progression visualization\n- Show rank requirements clearly\n- Add rank-up celebrations\n\n---\n\n### 4. **Daily Challenges Variety**\n**Status**: System works but needs more variety\n**Location**: `server/dailyChallenges.ts`\n**Current State**:\n- ‚úÖ Challenge generation works\n- ‚úÖ Daily assignment works\n- ‚úÖ Completion tracking works\n- ‚ö†Ô∏è Limited variety in challenge types\n\n**What Needs Enhancement**:\n- More challenge variety\n- Better difficulty progression\n- Bonus XP rewards\n- Weekly challenges\n\n---\n\n### 5. **Security Enhancements**\n**Status**: Basic security implemented, could be enhanced\n**Current State**:\n- ‚úÖ Password hashing (bcrypt)\n- ‚úÖ Session-based auth\n- ‚úÖ Rate limiting\n- ‚úÖ Password strength validation\n- ‚ö†Ô∏è Could add CSRF protection\n- ‚ö†Ô∏è Could add input sanitization\n- ‚ö†Ô∏è Could add email verification\n\n**What Could Be Added**:\n- CSRF tokens for forms\n- Comprehensive input sanitization\n- Email verification system\n- Two-factor authentication (optional)\n\n---\n\n### 6. **PDF Syllabus Upload & AI Question Generation**\n**Status**: Partially implemented, needs OpenAI quota\n**Location**: `client/src/components/SyllabusUpload.tsx`, `server/routes.ts`\n**Current State**:\n- ‚úÖ SyllabusUpload component exists\n- ‚úÖ Backend endpoint exists\n- ‚úÖ PDF parsing library integrated\n- ‚ö†Ô∏è Depends on OpenAI API quota\n\n**What Needs Work**:\n- Test with OpenAI credits\n- Admin approval workflow\n- Better error handling\n\n---\n\n## ‚ùå Not Yet Implemented\n\n### 7. **Pagination for Large Data Sets**\n**Status**: Not implemented\n**Needed For**:\n- Leaderboard (when > 100 users)\n- Quiz history\n- Challenge history\n- Notifications list\n\n**What's Missing**:\n- Implement pagination in API endpoints\n- Add pagination UI components\n- Optimize queries for large datasets\n\n---\n\n### 8. **Advanced Analytics Dashboard**\n**Status**: Not implemented\n**Potential Features**:\n- Admin analytics dashboard\n- User progress charts\n- Platform statistics\n- Engagement metrics\n\n---\n\n### 9. **Testing Suite**\n**Status**: Not implemented\n**What's Missing**:\n- Unit tests\n- Integration tests\n- E2E tests\n- Test coverage reporting\n\n---\n\n### 10. **Performance Optimizations**\n**Status**: Basic performance, could be optimized\n**Potential Improvements**:\n- Lazy loading of components\n- Image optimization\n- Service worker/PWA features\n- Advanced caching strategies\n\n---\n\n## üîß Known Issues & Technical Debt\n\n### OpenAI API\n- ‚ö†Ô∏è AI study suggestions use fallback (quota dependent)\n- ‚ö†Ô∏è PDF question generation depends on API quota\n\n### Database\n- ‚ö†Ô∏è Firestore indexes might be needed for very large datasets\n- ‚ö†Ô∏è Pagination not implemented for large queries\n\n### Documentation\n- ‚ö†Ô∏è Could use more inline code comments\n- ‚ö†Ô∏è No API documentation (Swagger/OpenAPI)\n- ‚ö†Ô∏è No comprehensive user guide\n\n---\n\n## üìä Current Status Summary\n\n**Total Major Features**: ~20 major features\n- ‚úÖ **Fully Working**: 15 features (~75%)\n- ‚ö†Ô∏è **Partially Working**: 5 features (~25%)\n- ‚ùå **Not Implemented**: 0 critical features (~0%)\n\n**Core Functionality Status**:\n- ‚úÖ Authentication & User Management\n- ‚úÖ Gamification (XP, Levels, Badges, Leaderboard)\n- ‚úÖ Learning Content (20+ modules, 70+ quizzes, 60+ challenges)\n- ‚úÖ Quiz System with Anti-Cheat\n- ‚úÖ Code Editor with Judge0 Integration\n- ‚úÖ AI Career Recommendations\n- ‚úÖ Interest Assessment at Level 20\n- ‚úÖ Notification System\n- ‚ö†Ô∏è Badge Auto-Award (needs triggers)\n- ‚ö†Ô∏è Search UI (backend ready)\n- ‚ö†Ô∏è Advanced Security Features (optional enhancements)\n\n---\n\n## üéØ Remaining Priority Tasks\n\n### üî¥ High Priority\n1. **Implement Badge Auto-Award Triggers** - Complete automatic badge awarding\n2. **Build Search UI** - Add search input and results page\n3. **Test Level 20 Flow End-to-End** - Verify interest assessment ‚Üí AI recommendation ‚Üí path selection\n4. **Add Pagination** - For leaderboard and large data queries\n\n### üü° Medium Priority\n5. **Enhance Progression Rank Display** - Make ranks more prominent in UI\n6. **Add More Daily Challenge Variety** - Expand challenge types\n7. **Implement CSRF Protection** - Enhanced security\n8. **Add Input Sanitization** - Comprehensive validation\n\n### üü¢ Low Priority\n9. **Performance Optimizations** - Lazy loading, caching\n10. **Testing Suite** - Unit and integration tests\n11. **API Documentation** - Swagger/OpenAPI docs\n12. **Admin Analytics Dashboard** - Advanced statistics\n\n---\n\n## ‚ú® Recent Accomplishments (Nov 4, 2025)\n\n1. ‚úÖ Seeded 20+ comprehensive learning modules with lessons\n2. ‚úÖ Created 70+ quiz questions across all career paths\n3. ‚úÖ Created 60+ code challenges with Judge0 integration\n4. ‚úÖ Implemented Fisher-Yates shuffle for quiz randomization\n5. ‚úÖ Verified tab detection anti-cheat system is working\n6. ‚úÖ Confirmed Monaco Code Editor integration is functional\n7. ‚úÖ Verified notification triggers are working correctly\n8. ‚úÖ Implemented password strength validation with real-time feedback UI\n9. ‚úÖ Confirmed Error Boundary is working correctly\n\n---\n\n## üìù Notes\n\n**Platform Stability**: The core platform is fully functional and ready for use. Users can:\n- Register and login with secure authentication\n- Take the Level 20 interest assessment\n- Receive AI-powered career recommendations\n- Access 20+ learning modules with comprehensive content\n- Complete 70+ quizzes with anti-cheat protection\n- Solve 60+ code challenges with real-time execution\n- Track their progress through XP, levels, and badges\n- View leaderboard and compete with others\n- Receive notifications for achievements\n\n**Remaining Work**: Primarily consists of enhancements, additional features, and polish rather than critical functionality gaps. The platform delivers on its core promise of being a comprehensive gamified learning platform for Computer Science students.\n","path":null,"size_bytes":10561,"size_tokens":null},"server/storage-firestore.ts":{"content":"import { db } from \"./firebase\";\nimport {\n  collection,\n  doc,\n  getDoc,\n  getDocs,\n  setDoc,\n  updateDoc,\n  deleteDoc,\n  query,\n  where,\n  orderBy,\n  limit as firestoreLimit,\n  addDoc,\n  Timestamp,\n  QueryConstraint,\n  increment,\n  writeBatch\n} from \"firebase/firestore\";\nimport type {\n  User,\n  InsertUser,\n  CareerPath,\n  InsertCareerPath,\n  Badge,\n  InsertBadge,\n  Quiz,\n  InsertQuiz,\n  Question,\n  InsertQuestion,\n  QuizAttempt,\n  InsertQuizAttempt,\n  QuestionAttempt,\n  InsertQuestionAttempt,\n  CodeChallenge,\n  InsertCodeChallenge,\n  ChallengeAttempt,\n  InsertChallengeAttempt,\n  InterestResponse,\n  InsertInterestResponse,\n  AuditLog,\n  InsertAuditLog,\n  UserBadge,\n  DailyChallenge,\n  SyllabusUpload,\n} from \"@shared/schema\";\n\nfunction generateId(): string {\n  return doc(collection(db, \"temp\")).id;\n}\n\n/**\n * Convert Firestore Timestamp objects to JavaScript Date objects\n * This ensures proper JSON serialization in API responses\n */\nfunction serializeTimestamps<T>(data: any): T {\n  if (!data) return data;\n\n  const serialized = { ...data };\n\n  for (const key in serialized) {\n    const value = serialized[key];\n\n    // Convert Firestore Timestamp to Date\n    if (value && typeof value === 'object' && 'seconds' in value && 'nanoseconds' in value) {\n      serialized[key] = new Date(value.seconds * 1000);\n    }\n    // Recursively handle nested objects\n    else if (value && typeof value === 'object' && !Array.isArray(value)) {\n      serialized[key] = serializeTimestamps(value);\n    }\n    // Handle arrays\n    else if (Array.isArray(value)) {\n      serialized[key] = value.map(item => \n        typeof item === 'object' ? serializeTimestamps(item) : item\n      );\n    }\n  }\n\n  return serialized as T;\n}\n\nexport class FirestoreStorage {\n  // Simple in-memory cache for user badges to reduce Firestore load\n  private badgesCache: Map<string, { badges: Array<UserBadge & { badge: Badge }>; expiresAt: number }> = new Map();\n  private BADGE_CACHE_TTL = 30 * 1000; // 30 seconds\n\n  // User operations\n  async getUser(id: string): Promise<User | undefined> {\n    const docRef = doc(db, \"users\", id);\n    const docSnap = await getDoc(docRef);\n    if (!docSnap.exists()) return undefined;\n    return serializeTimestamps<User>({ id: docSnap.id, ...docSnap.data() });\n  }\n\n  async getUserById(id: string): Promise<User | undefined> {\n    return this.getUser(id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const q = query(collection(db, \"users\"), where(\"username\", \"==\", username), firestoreLimit(1));\n    const snapshot = await getDocs(q);\n    if (snapshot.empty) return undefined;\n    const doc = snapshot.docs[0];\n    return serializeTimestamps<User>({ id: doc.id, ...doc.data() });\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const q = query(collection(db, \"users\"), where(\"email\", \"==\", email), firestoreLimit(1));\n    const snapshot = await getDocs(q);\n    if (snapshot.empty) return undefined;\n    const docData = snapshot.docs[0];\n    return serializeTimestamps<User>({ id: docData.id, ...docData.data() });\n  }\n\n  async createUser(user: InsertUser): Promise<User> {\n    const id = generateId();\n    const newUser: User = {\n      id,\n      ...user,\n      level: 1,\n      xp: 0,\n      totalXp: 0,\n      currentCareerPathId: user.currentCareerPathId || null,\n      pathSelectionMode: user.pathSelectionMode || \"ai-guided\",\n      hasCompletedInterestAssessment: false,\n      isAdmin: false,\n      currentStreak: 0,\n      lastLoginDate: null,\n      createdAt: new Date(),\n      lastActiveAt: new Date(),\n    };\n    await setDoc(doc(db, \"users\", id), newUser);\n    return newUser;\n  }\n\n  async updateUser(id: string, updates: Partial<User>): Promise<User | undefined> {\n    const docRef = doc(db, \"users\", id);\n    await updateDoc(docRef, { ...updates, lastActiveAt: new Date() });\n    return this.getUser(id);\n  }\n\n  async deleteUser(id: string): Promise<void> {\n    await deleteDoc(doc(db, \"users\", id));\n  }\n\n  async updateLoginStreak(userId: string): Promise<void> {\n    const user = await this.getUser(userId);\n    if (!user) return;\n\n    const userRef = doc(db, \"users\", userId);\n    const now = new Date();\n    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n\n    // Get last login date from Firestore (stored as Timestamp)\n    const userDoc = await getDoc(userRef);\n    const userData = userDoc.data();\n    // Fix: Convert Firestore Timestamp to Date using .toDate()\n    const lastLoginDate = userData?.lastLoginDate?.toDate ? userData.lastLoginDate.toDate() : null;\n\n    let newStreak = 1;\n\n    if (lastLoginDate) {\n      const lastLogin = new Date(lastLoginDate.getFullYear(), lastLoginDate.getMonth(), lastLoginDate.getDate());\n      const daysDiff = Math.floor((today.getTime() - lastLogin.getTime()) / (1000 * 60 * 60 * 24));\n\n      if (daysDiff === 0) {\n        // Same day, keep current streak\n        newStreak = userData?.currentStreak || 1;\n      } else if (daysDiff === 1) {\n        // Consecutive day, increment streak\n        newStreak = (userData?.currentStreak || 0) + 1;\n      } else {\n        // Streak broken, reset to 1\n        newStreak = 1;\n      }\n    }\n\n    // Calculate current rank based on XP\n    const currentRank = this.calculateRank(user.totalXp);\n\n    await updateDoc(userRef, {\n      currentStreak: newStreak,\n      lastLoginDate: now,\n      lastActiveAt: now,\n      currentRank,\n    });\n  }\n\n  calculateRank(totalXp: number): string {\n    if (totalXp < 10000) return \"Junior\";\n    if (totalXp < 25000) return \"Mid-Level\";\n    if (totalXp < 50000) return \"Senior\";\n    return \"Lead\";\n  }\n\n  async getUserRank(userId: string): Promise<{ rank: string; progress: number; nextRank: string | null }> {\n    const user = await this.getUser(userId);\n    if (!user) {\n      return { rank: \"Junior\", progress: 0, nextRank: \"Mid-Level\" };\n    }\n\n    const rank = this.calculateRank(user.totalXp);\n    const ranks = [\n      { name: \"Junior\", minXp: 0 },\n      { name: \"Mid-Level\", minXp: 10000 },\n      { name: \"Senior\", minXp: 25000 },\n      { name: \"Lead\", minXp: 50000 },\n    ];\n\n    const currentRankIndex = ranks.findIndex(r => r.name === rank);\n    const nextRank = currentRankIndex < ranks.length - 1 ? ranks[currentRankIndex + 1] : null;\n    \n    const progress = nextRank \n      ? ((user.totalXp - ranks[currentRankIndex].minXp) / (nextRank.minXp - ranks[currentRankIndex].minXp)) * 100\n      : 100;\n\n    return {\n      rank,\n      progress,\n      nextRank: nextRank?.name || null,\n    };\n  }\n\n  async getUserQuizAttempts(userId: string, maxResults?: number): Promise<QuizAttempt[]> {\n    const constraints: QueryConstraint[] = [where(\"userId\", \"==\", userId)];\n    if (maxResults) {\n      constraints.push(orderBy(\"completedAt\", \"desc\"), firestoreLimit(maxResults));\n    }\n    const q = query(collection(db, \"quizAttempts\"), ...constraints);\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => serializeTimestamps<QuizAttempt>({ id: doc.id, ...doc.data() }));\n  }\n\n  async getRecentQuizAttempts(limitCount = 50): Promise<QuizAttempt[]> {\n    const q = query(collection(db, \"quizAttempts\"), orderBy(\"completedAt\", \"desc\"), firestoreLimit(limitCount));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => serializeTimestamps<QuizAttempt>({ id: doc.id, ...doc.data() }));\n  }\n\n  async getUserQuestionAttempts(userId: string, maxResults?: number): Promise<QuestionAttempt[]> {\n    const constraints: QueryConstraint[] = [where(\"userId\", \"==\", userId)];\n    if (maxResults) {\n      constraints.push(orderBy(\"answeredAt\", \"desc\"), firestoreLimit(maxResults));\n    }\n    const q = query(collection(db, \"questionAttempts\"), ...constraints);\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => serializeTimestamps<QuestionAttempt>({ id: doc.id, ...doc.data() }));\n  }\n\n  async getUsersForLeaderboard(limitCount = 10): Promise<User[]> {\n    const q = query(collection(db, \"users\"), orderBy(\"totalXp\", \"desc\"), firestoreLimit(limitCount));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => serializeTimestamps<User>({ id: doc.id, ...doc.data() }));\n  }\n\n  // Career Path operations\n  async getCareerPaths(): Promise<CareerPath[]> {\n    const snapshot = await getDocs(collection(db, \"careerPaths\"));\n    return snapshot.docs.map(doc => serializeTimestamps<CareerPath>({ id: doc.id, ...doc.data() }));\n  }\n\n  async getCareerPath(id: string): Promise<CareerPath | undefined> {\n    const docRef = doc(db, \"careerPaths\", id);\n    const docSnap = await getDoc(docRef);\n    if (!docSnap.exists()) return undefined;\n    return serializeTimestamps<CareerPath>({ id: docSnap.id, ...docSnap.data() });\n  }\n\n  async createCareerPath(path: InsertCareerPath): Promise<CareerPath> {\n    const id = generateId();\n    const newPath = {\n      id,\n      name: path.name,\n      description: path.description,\n      color: path.color,\n      icon: path.icon,\n      progressionRanks: path.progressionRanks as string[],\n      requiredSkills: path.requiredSkills as string[],\n      createdAt: new Date(),\n    };\n    await setDoc(doc(db, \"careerPaths\", id), newPath);\n    return newPath as CareerPath;\n  }\n\n  // Badge operations\n  async getBadges(): Promise<Badge[]> {\n    const snapshot = await getDocs(collection(db, \"badges\"));\n    const allBadges = snapshot.docs.map(doc => serializeTimestamps<Badge>({ id: doc.id, ...doc.data() }));\n    \n    // Deduplicate by name, prioritizing seeded badges (ones with badge_* IDs)\n    const seededBadgeIds = new Set([\n      \"badge_level_10\", \"badge_level_20\", \"badge_first_challenge\", \"badge_ten_challenges\",\n      \"badge_perfect_score\", \"badge_first_quiz\", \"badge_five_quizzes\", \"badge_streak_7\",\n      \"badge_streak_30\", \"badge_path_finder\"\n    ]);\n    \n    const seen = new Set<string>();\n    const deduped = allBadges.filter(badge => {\n      // Always include seeded badges first\n      if (seededBadgeIds.has(badge.id)) {\n        if (!seen.has(badge.name)) {\n          seen.add(badge.name);\n          return true;\n        }\n        return false;\n      }\n      // For non-seeded badges, only include if we haven't seen this name yet\n      if (!seen.has(badge.name)) {\n        seen.add(badge.name);\n        return true;\n      }\n      return false;\n    });\n    \n    // Sort to ensure seeded badges come first\n    deduped.sort((a, b) => {\n      const aIsSeeded = seededBadgeIds.has(a.id) ? 0 : 1;\n      const bIsSeeded = seededBadgeIds.has(b.id) ? 0 : 1;\n      return aIsSeeded - bIsSeeded;\n    });\n    \n    console.log(`[getBadges] Returning ${deduped.length} unique badges after deduplication`);\n    return deduped;\n  }\n\n  async getBadge(id: string): Promise<Badge | undefined> {\n    const docRef = doc(db, \"badges\", id);\n    const docSnap = await getDoc(docRef);\n    if (!docSnap.exists()) return undefined;\n    return serializeTimestamps<Badge>({ id: docSnap.id, ...docSnap.data() });\n  }\n\n  async createBadge(badge: InsertBadge): Promise<Badge> {\n    const id = generateId();\n    const newBadge: Badge = {\n      id,\n      ...badge,\n      createdAt: new Date(),\n    };\n    await setDoc(doc(db, \"badges\", id), newBadge);\n    return newBadge;\n  }\n\n  async seedBadges(): Promise<void> {\n    // Define all badges that the system can award\n    const badgesToCreate = [\n      { id: \"badge_level_10\", name: \"Level 10\", description: \"Reached Level 10!\", rarity: \"rare\" as const, icon: \"Trophy\" },\n      { id: \"badge_level_20\", name: \"Level 20\", description: \"Reached Level 20!\", rarity: \"rare\" as const, icon: \"Trophy\" },\n      { id: \"badge_first_challenge\", name: \"Code Challenger\", description: \"Completed your first code challenge!\", rarity: \"common\" as const, icon: \"Code2\" },\n      { id: \"badge_ten_challenges\", name: \"Code Warrior\", description: \"Completed 10 code challenges!\", rarity: \"epic\" as const, icon: \"Code2\" },\n      { id: \"badge_perfect_score\", name: \"Perfect Score\", description: \"Achieved a perfect score on a code challenge!\", rarity: \"epic\" as const, icon: \"Star\" },\n      { id: \"badge_first_quiz\", name: \"Quiz Starter\", description: \"Completed your first quiz!\", rarity: \"common\" as const, icon: \"Award\" },\n      { id: \"badge_five_quizzes\", name: \"Quiz Master\", description: \"Completed 5 quizzes!\", rarity: \"rare\" as const, icon: \"Award\" },\n      { id: \"badge_streak_7\", name: \"Week Warrior\", description: \"Maintained a 7-day login streak!\", rarity: \"rare\" as const, icon: \"Flame\" },\n      { id: \"badge_streak_30\", name: \"Month Master\", description: \"Maintained a 30-day login streak!\", rarity: \"legendary\" as const, icon: \"Flame\" },\n      { id: \"badge_path_finder\", name: \"Path Finder\", description: \"Complete interest assessment\", rarity: \"epic\" as const, icon: \"Rocket\" },\n    ];\n\n    // Check which badges already exist and create missing ones\n    for (const badgeData of badgesToCreate) {\n      const existing = await this.getBadge(badgeData.id);\n      if (!existing) {\n        console.log(`[seedBadges] Creating badge: ${badgeData.id}`);\n        await setDoc(doc(db, \"badges\", badgeData.id), {\n          name: badgeData.name,\n          description: badgeData.description,\n          rarity: badgeData.rarity,\n          icon: badgeData.icon,\n          createdAt: new Date().toISOString(),\n        });\n      }\n    }\n  }\n\n  async getUserBadges(userId: string): Promise<Array<UserBadge & { badge: Badge }>> {\n    // Check cache first\n    const cached = this.badgesCache.get(userId);\n    const now = Date.now();\n    if (cached && cached.expiresAt > now) {\n      console.log(`[getUserBadges] CACHE HIT for user ${userId} (expires in ${Math.ceil((cached.expiresAt - now)/1000)}s)`);\n      return cached.badges;\n    }\n\n    const q = query(collection(db, \"userBadges\"), where(\"userId\", \"==\", userId));\n    const snapshot = await getDocs(q);\n    console.log(`[getUserBadges] User ${userId}: Found ${snapshot.docs.length} user badge records`);\n\n    const results = [];\n    for (const docData of snapshot.docs) {\n      const userBadge = serializeTimestamps<UserBadge>({ id: docData.id, ...docData.data() });\n      const badge = await this.getBadge(userBadge.badgeId);\n      if (badge) {\n        results.push({ ...userBadge, badge });\n        console.log(`[getUserBadges] ‚úì Found badge definition: ${userBadge.badgeId} (${badge.name})`);\n      } else {\n        console.log(`[getUserBadges] ‚úó Badge definition NOT FOUND: ${userBadge.badgeId}`);\n      }\n    }\n\n    // Cache results briefly to limit repeated Firestore reads under burst\n    this.badgesCache.set(userId, { badges: results, expiresAt: Date.now() + this.BADGE_CACHE_TTL });\n    console.log(`[getUserBadges] Returning ${results.length} badges for user ${userId} (cached ${this.BADGE_CACHE_TTL/1000}s)`);\n    return results;\n  }\n\n  async awardBadge(userId: string, badgeId: string): Promise<UserBadge> {\n    // Check if badge already awarded using direct Firestore query to avoid recursion\n    const q = query(\n      collection(db, \"userBadges\"),\n      where(\"userId\", \"==\", userId),\n      where(\"badgeId\", \"==\", badgeId),\n      firestoreLimit(1)\n    );\n    const snapshot = await getDocs(q);\n    \n    if (!snapshot.empty) {\n      // Already has this badge, return the existing one\n      const existingDoc = snapshot.docs[0];\n      return serializeTimestamps<UserBadge>({ id: existingDoc.id, ...existingDoc.data() });\n    }\n\n    const id = generateId();\n    const userBadge: UserBadge = {\n      id,\n      userId,\n      badgeId,\n      earnedAt: new Date(),\n    };\n    await setDoc(doc(db, \"userBadges\", id), userBadge);\n\n    // Invalidate cache for this user so next request reads fresh data\n    try {\n      this.badgesCache.delete(userId);\n      console.log(`[awardBadge] Invalidated badge cache for user ${userId}`);\n    } catch (err) {\n      console.warn(`[awardBadge] Failed to clear badge cache for user ${userId}:`, err);\n    }\n    return userBadge;\n  }\n\n  // Quiz operations\n  async getQuizzes(careerPathId?: string, userLevel?: number): Promise<Quiz[]> {\n    // Fetch all quizzes and filter in memory to avoid composite index requirement\n    const snapshot = await getDocs(collection(db, \"quizzes\"));\n    let quizzes = snapshot.docs.map(doc => serializeTimestamps<Quiz>({ id: doc.id, ...doc.data() }));\n    \n    // Filter in memory\n    if (careerPathId) {\n      quizzes = quizzes.filter(q => q.careerPathId === careerPathId || q.careerPathId === null);\n    }\n    if (userLevel !== undefined) {\n      quizzes = quizzes.filter(q => q.requiredLevel <= userLevel);\n    }\n    \n    return quizzes;\n  }\n\n  async getQuiz(id: string): Promise<Quiz | undefined> {\n    const docRef = doc(db, \"quizzes\", id);\n    const docSnap = await getDoc(docRef);\n    if (!docSnap.exists()) return undefined;\n    return serializeTimestamps<Quiz>({ id: docSnap.id, ...docSnap.data() });\n  }\n\n  async getQuizById(id: string): Promise<Quiz | null> {\n    const quiz = await this.getQuiz(id);\n    return quiz || null;\n  }\n\n  async createQuiz(quiz: InsertQuiz): Promise<Quiz> {\n    const id = generateId();\n    const newQuiz: Quiz = {\n      id,\n      title: quiz.title,\n      description: quiz.description,\n      difficulty: quiz.difficulty,\n      careerPathId: quiz.careerPathId || null,\n      requiredLevel: quiz.requiredLevel || 1,\n      xpReward: quiz.xpReward || 100,\n      timeLimit: quiz.timeLimit || null,\n      isFinalAssessment: quiz.isFinalAssessment || false,\n      createdAt: new Date(),\n    };\n    await setDoc(doc(db, \"quizzes\", id), newQuiz);\n    return newQuiz;\n  }\n\n\n  // Question operations\n  async getQuestionsByQuiz(quizId: string): Promise<Question[]> {\n    const q = query(collection(db, \"questions\"), where(\"quizId\", \"==\", quizId));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => serializeTimestamps<Question>({ id: doc.id, ...doc.data() }));\n  }\n\n  async createQuestion(question: InsertQuestion): Promise<Question> {\n    const id = generateId();\n    const newQuestion = {\n      id,\n      quizId: question.quizId,\n      questionText: question.questionText,\n      questionType: question.questionType,\n      options: question.options as string[],\n      correctAnswer: question.correctAnswer,\n      explanation: question.explanation || null,\n      category: question.category || null,\n      createdAt: new Date(),\n    };\n    await setDoc(doc(db, \"questions\", id), newQuestion);\n    return newQuestion as Question;\n  }\n\n  async createQuestions(questions: InsertQuestion[]): Promise<Question[]> {\n    const results = [];\n    for (const question of questions) {\n      results.push(await this.createQuestion(question));\n    }\n    return results;\n  }\n\n  // Quiz attempt operations\n  async createQuizAttempt(attempt: InsertQuizAttempt): Promise<QuizAttempt> {\n    const id = generateId();\n    const newAttempt = {\n      id,\n      userId: attempt.userId,\n      quizId: attempt.quizId,\n      score: attempt.score,\n      correctAnswers: attempt.correctAnswers,\n      totalQuestions: attempt.totalQuestions,\n      xpEarned: attempt.xpEarned,\n      wasTabSwitched: attempt.wasTabSwitched || false,\n      timeSpent: attempt.timeSpent || null,\n      completedAt: new Date(),\n    };\n    await setDoc(doc(db, \"quizAttempts\", id), newAttempt);\n    return newAttempt as QuizAttempt;\n  }\n\n  // Question attempt operations\n  async createQuestionAttempt(attempt: InsertQuestionAttempt): Promise<QuestionAttempt> {\n    const id = generateId();\n    const newAttempt = {\n      id,\n      userId: attempt.userId,\n      questionId: attempt.questionId,\n      quizAttemptId: attempt.quizAttemptId,\n      selectedAnswer: attempt.selectedAnswer,\n      isCorrect: attempt.isCorrect,\n      category: attempt.category || null,\n      answeredAt: new Date(),\n    };\n    await setDoc(doc(db, \"questionAttempts\", id), newAttempt);\n    return newAttempt as QuestionAttempt;\n  }\n\n  async getUserQuestionAttemptsByCategory(userId: string): Promise<QuestionAttempt[]> {\n    const q = query(collection(db, \"questionAttempts\"), where(\"userId\", \"==\", userId));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => serializeTimestamps<QuestionAttempt>({ id: doc.id, ...doc.data() }));\n  }\n\n  // Code challenge operations\n  async getCodeChallenges(careerPathId?: string, userLevel?: number): Promise<CodeChallenge[]> {\n    // Fetch all code challenges and filter in memory to avoid composite index requirement\n    const snapshot = await getDocs(collection(db, \"codeChallenges\"));\n    let challenges = snapshot.docs.map(doc => serializeTimestamps<CodeChallenge>({ id: doc.id, ...doc.data() }));\n    \n    // Filter in memory\n    if (careerPathId) {\n      challenges = challenges.filter(c => c.careerPathId === careerPathId || c.careerPathId === null);\n    }\n    if (userLevel !== undefined) {\n      challenges = challenges.filter(c => c.requiredLevel <= userLevel);\n    }\n    \n    return challenges;\n  }\n\n  async getCodeChallenge(id: string): Promise<CodeChallenge | undefined> {\n    const docRef = doc(db, \"codeChallenges\", id);\n    const docSnap = await getDoc(docRef);\n    if (!docSnap.exists()) return undefined;\n    return serializeTimestamps<CodeChallenge>({ id: docSnap.id, ...docSnap.data() });\n  }\n\n  async createCodeChallenge(challenge: InsertCodeChallenge): Promise<CodeChallenge> {\n    const id = generateId();\n    const newChallenge = {\n      id,\n      title: challenge.title,\n      description: challenge.description,\n      difficulty: challenge.difficulty,\n      careerPathId: challenge.careerPathId || null,\n      requiredLevel: challenge.requiredLevel || 1,\n      xpReward: challenge.xpReward || 150,\n      starterCode: challenge.starterCode,\n      testCases: challenge.testCases as Array<{ input: string; expectedOutput: string }>,\n      supportedLanguages: challenge.supportedLanguages as string[],\n      createdAt: new Date(),\n    };\n    await setDoc(doc(db, \"codeChallenges\", id), newChallenge);\n    return newChallenge as CodeChallenge;\n  }\n\n  async createChallengeAttempt(attempt: InsertChallengeAttempt): Promise<ChallengeAttempt> {\n    const id = generateId();\n    const newAttempt: ChallengeAttempt = {\n      id,\n      ...attempt,\n      submittedAt: new Date(),\n    };\n    await setDoc(doc(db, \"challengeAttempts\", id), newAttempt);\n    return newAttempt;\n  }\n\n  async getUserChallengeAttempts(userId: string, limit: number = 50): Promise<ChallengeAttempt[]> {\n    // Fetch all attempts for user, then sort in memory to avoid composite index requirement\n    const q = query(\n      collection(db, \"challengeAttempts\"),\n      where(\"userId\", \"==\", userId)\n    );\n    const snapshot = await getDocs(q);\n    const attempts = snapshot.docs.map(doc => serializeTimestamps<ChallengeAttempt>({ id: doc.id, ...doc.data() }));\n    \n    // Sort by submittedAt descending in memory\n    return attempts\n      .sort((a, b) => {\n        const dateA = a.submittedAt instanceof Date ? a.submittedAt : new Date(a.submittedAt);\n        const dateB = b.submittedAt instanceof Date ? b.submittedAt : new Date(b.submittedAt);\n        return dateB.getTime() - dateA.getTime();\n      })\n      .slice(0, limit);\n  }\n\n  // Interest response operations\n  async createInterestResponse(response: InsertInterestResponse): Promise<InterestResponse> {\n    const id = generateId();\n    const newResponse: InterestResponse = {\n      id,\n      ...response,\n      completedAt: new Date(),\n    };\n    await setDoc(doc(db, \"interestResponses\", id), newResponse);\n    return newResponse;\n  }\n\n  async getUserInterestResponses(userId: string): Promise<InterestResponse[]> {\n    const q = query(collection(db, \"interestResponses\"), where(\"userId\", \"==\", userId));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => serializeTimestamps<InterestResponse>({ id: doc.id, ...doc.data() }));\n  }\n\n  // Daily challenge operations\n  async getDailyChallenges(userId: string, date: Date): Promise<DailyChallenge[]> {\n    const startOfDay = new Date(date.setHours(0, 0, 0, 0));\n    const endOfDay = new Date(date.setHours(23, 59, 59, 999));\n\n    const q = query(\n      collection(db, \"dailyChallenges\"),\n      where(\"userId\", \"==\", userId),\n      where(\"assignedDate\", \">=\", Timestamp.fromDate(startOfDay)),\n      where(\"assignedDate\", \"<=\", Timestamp.fromDate(endOfDay))\n    );\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => serializeTimestamps<DailyChallenge>({ id: doc.id, ...doc.data() }));\n  }\n\n  async createDailyChallenge(userId: string, challengeType: string, challengeId: string): Promise<DailyChallenge> {\n    const id = generateId();\n    const challenge: DailyChallenge = {\n      id,\n      userId,\n      challengeType,\n      challengeId,\n      assignedDate: new Date(),\n      completed: false,\n      completedAt: null,\n    };\n    await setDoc(doc(db, \"dailyChallenges\", id), challenge);\n    return challenge;\n  }\n\n  async markDailyChallengeComplete(id: string): Promise<void> {\n    const docRef = doc(db, \"dailyChallenges\", id);\n    await updateDoc(docRef, { completed: true, completedAt: new Date() });\n  }\n\n  // Audit log operations\n  async getAuditLogs(maxResults?: number): Promise<AuditLog[]> {\n    const constraints: QueryConstraint[] = [orderBy(\"createdAt\", \"desc\")];\n    if (maxResults) {\n      constraints.push(firestoreLimit(maxResults));\n    }\n    const q = query(collection(db, \"auditLogs\"), ...constraints);\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => serializeTimestamps<AuditLog>({ id: doc.id, ...doc.data() }));\n  }\n\n  async createAuditLog(log: InsertAuditLog): Promise<AuditLog> {\n    const id = generateId();\n    const newLog = {\n      id,\n      userId: log.userId || null,\n      action: log.action,\n      details: log.details,\n      status: log.status,\n      ipAddress: log.ipAddress || null,\n      createdAt: new Date(),\n    };\n    await setDoc(doc(db, \"auditLogs\", id), newLog);\n    return newLog as AuditLog;\n  }\n\n  // Syllabus upload operations\n  async createSyllabusUpload(upload: {\n    uploadedBy: string;\n    fileName: string;\n    careerPathId?: string;\n    questionsGenerated: number;\n  }): Promise<SyllabusUpload> {\n    const id = generateId();\n    const newUpload: SyllabusUpload = {\n      id,\n      uploadedBy: upload.uploadedBy,\n      fileName: upload.fileName,\n      careerPathId: upload.careerPathId || null,\n      questionsGenerated: upload.questionsGenerated,\n      uploadedAt: new Date(),\n    };\n    await setDoc(doc(db, \"syllabusUploads\", id), newUpload);\n    return newUpload;\n  }\n\n  async generateAIQuestions(syllabusText: string, careerPath: string): Promise<any[]> {\n    // This would use OpenAI to generate questions\n    // For now, return empty array\n    return [];\n  }\n\n  async getModulesForUser(user: any): Promise<any[]> {\n    const modulesRef = collection(db, \"modules\");\n    \n    // Get all modules and filter in memory\n    // This avoids Firestore composite index issues and the fact that 'in' operator doesn't work well with null\n    const snapshot = await getDocs(modulesRef);\n    const allModules = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n    \n    const filtered = allModules\n      .filter((m: any) => {\n        // Check if user meets level requirement\n        if ((m.requiredLevel || 0) > user.level) {\n          console.log(`[getModulesForUser] Filtered out module \"${m.title}\" (${m.id}): Level requirement ${m.requiredLevel} > user level ${user.level}`);\n          return false;\n        }\n        \n        // If user has a career path, show both career-specific and general modules\n        if (user.currentCareerPathId) {\n          const isAccessible = m.careerPath === user.currentCareerPathId || m.careerPath === null;\n          if (!isAccessible) {\n            console.log(`[getModulesForUser] Filtered out module \"${m.title}\" (${m.id}): Career path \"${m.careerPath}\" doesn't match user path \"${user.currentCareerPathId}\"`);\n          }\n          return isAccessible;\n        }\n        \n        // If no career path, show all modules (both career-specific and general)\n        // This ensures self-registered users see the same modules as admin-created users\n        return true;\n      })\n      .sort((a: any, b: any) => (a.order || 0) - (b.order || 0));\n    \n    console.log(`[getModulesForUser] User ${user.id} (level ${user.level}, career: ${user.currentCareerPathId || 'none'}): ${filtered.length} modules accessible`);\n    return filtered;\n  }\n\n  async getModuleLessons(moduleId: string): Promise<any[]> {\n    const lessonsRef = collection(db, \"lessons\");\n    // Note: Sort in memory to avoid composite index requirement\n    const q = query(\n      lessonsRef,\n      where(\"moduleId\", \"==\", moduleId)\n    );\n\n    try {\n      const snapshot = await getDocs(q);\n      const lessons = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      console.log(`[getModuleLessons] Module \"${moduleId}\": Found ${lessons.length} lessons`);\n      \n      // Sort by order in memory to avoid composite index\n      return lessons.sort((a: any, b: any) => (a.order || 0) - (b.order || 0));\n    } catch (error) {\n      console.error(`[getModuleLessons] ERROR fetching lessons for module \"${moduleId}\":`, error);\n      throw error;\n    }\n  }\n\n  async getModule(moduleId: string): Promise<any | null> {\n    const moduleRef = doc(db, \"modules\", moduleId);\n    const moduleSnap = await getDoc(moduleRef);\n    if (!moduleSnap.exists()) return null;\n    const data = moduleSnap.data();\n    const lessons = await this.getModuleLessons(moduleId);\n    return { id: moduleSnap.id, ...data, lessons };\n  }\n\n  async createModule(module: {\n    title: string;\n    description: string;\n    careerPath: string | null;\n    requiredLevel: number;\n    order: number;\n  }): Promise<any> {\n    const id = generateId();\n    const newModule = {\n      id,\n      ...module,\n      createdAt: new Date(),\n    };\n    await setDoc(doc(db, \"modules\", id), newModule);\n    return newModule;\n  }\n\n  async createLesson(lesson: {\n    moduleId: string;\n    title: string;\n    content: string;\n    description?: string;\n    type: string;\n    order: number;\n    xpReward: number;\n    requiredLevel?: number;\n    estimatedTime?: string;\n    pdfUrl?: string;\n  }): Promise<any> {\n    const id = generateId();\n    const newLesson = {\n      id,\n      ...lesson,\n      description: lesson.description || \"\",\n      requiredLevel: lesson.requiredLevel || 0,\n      estimatedTime: lesson.estimatedTime || \"10 min\",\n      createdAt: new Date(),\n    };\n    console.log(`[createLesson] Saving lesson \"${newLesson.title}\" (${id}) to module \"${newLesson.moduleId}\"`);\n    try {\n      await setDoc(doc(db, \"lessons\", id), newLesson);\n      console.log(`[createLesson] SUCCESS: Lesson \"${newLesson.title}\" saved to Firestore`);\n    } catch (error) {\n      console.error(`[createLesson] ERROR saving lesson:`, error);\n      throw error;\n    }\n    return newLesson;\n  }\n\n  async updateModule(moduleId: string, updates: Partial<{\n    title: string;\n    description: string;\n    careerPath: string | null;\n    requiredLevel: number;\n    order: number;\n  }>): Promise<void> {\n    const moduleRef = doc(db, \"modules\", moduleId);\n    await updateDoc(moduleRef, updates);\n  }\n\n  async deleteModule(moduleId: string): Promise<void> {\n    // Delete all lessons in this module first\n    const lessonsRef = collection(db, \"lessons\");\n    const q = query(lessonsRef, where(\"moduleId\", \"==\", moduleId));\n    const snapshot = await getDocs(q);\n    \n    const deletePromises = snapshot.docs.map(lessonDoc => \n      deleteDoc(doc(db, \"lessons\", lessonDoc.id))\n    );\n    await Promise.all(deletePromises);\n    \n    // Then delete the module\n    await deleteDoc(doc(db, \"modules\", moduleId));\n  }\n\n  async updateLesson(lessonId: string, updates: Partial<{\n    title: string;\n    content: string;\n    description: string;\n    type: string;\n    order: number;\n    xpReward: number;\n    requiredLevel: number;\n    estimatedTime: string;\n    pdfUrl: string;\n  }>): Promise<void> {\n    const lessonRef = doc(db, \"lessons\", lessonId);\n    await updateDoc(lessonRef, updates);\n  }\n\n  async deleteLesson(lessonId: string): Promise<void> {\n    await deleteDoc(doc(db, \"lessons\", lessonId));\n  }\n\n  async completeLesson(userId: string, lessonId: string, score?: number): Promise<void> {\n    // Get or create user progress document\n    const progressRef = doc(db, \"userProgress\", userId);\n    const progressDoc = await getDoc(progressRef);\n\n    const currentProgress = progressDoc.exists() \n      ? progressDoc.data() \n      : { completedLessons: [], completedModules: [] };\n\n    // Add lesson to completed list if not already there\n    if (!currentProgress.completedLessons.includes(lessonId)) {\n      currentProgress.completedLessons.push(lessonId);\n      await setDoc(progressRef, currentProgress, { merge: true });\n\n      // Award XP only if this is a new completion\n      const lesson = await getDoc(doc(db, \"lessons\", lessonId));\n      if (lesson.exists()) {\n        const xpReward = lesson.data().xpReward || 0;\n        const userRef = doc(db, \"users\", userId);\n        await updateDoc(userRef, {\n          totalXp: increment(xpReward),\n        });\n      }\n    }\n  }\n\n  async getLeaderboard(limit: number = 10) {\n    const usersRef = collection(db, \"users\");\n    const q = query(usersRef, orderBy(\"xp\", \"desc\"), firestoreLimit(limit));\n    const snapshot = await getDocs(q);\n\n    return snapshot.docs.map((doc, index) => ({\n      rank: index + 1,\n      userId: doc.id,\n      ...doc.data()\n    }));\n  }\n\n  async getModulesByCareerPath(careerPath: string) {\n    const modulesRef = collection(db, \"modules\");\n    const q = query(modulesRef, where(\"careerPath\", \"==\", careerPath), orderBy(\"order\"));\n    const snapshot = await getDocs(q);\n\n    const modules = await Promise.all(\n      snapshot.docs.map(async (doc) => {\n        const moduleData = { id: doc.id, ...doc.data() };\n        const lessonsRef = collection(db, \"modules\", doc.id, \"lessons\");\n        const lessonsQ = query(lessonsRef, orderBy(\"order\"));\n        const lessonsSnapshot = await getDocs(lessonsQ);\n\n        const lessons = lessonsSnapshot.docs.map(lessonDoc => ({\n          id: lessonDoc.id,\n          ...lessonDoc.data()\n        }));\n\n        return {\n          ...moduleData,\n          lessons,\n          totalXP: lessons.reduce((sum: number, lesson: any) => sum + (lesson.xpReward || 0), 0)\n        };\n      })\n    );\n\n    return modules;\n  }\n\n  async getLesson(lessonId: string) {\n    // Get lesson from top-level lessons collection\n    const lessonRef = doc(db, \"lessons\", lessonId);\n    const lessonDoc = await getDoc(lessonRef);\n\n    if (lessonDoc.exists()) {\n      return { id: lessonDoc.id, ...lessonDoc.data() };\n    }\n\n    return null;\n  }\n\n  async getUserProgress(userId: string) {\n    const progressRef = doc(db, \"userProgress\", userId);\n    const progressDoc = await getDoc(progressRef);\n\n    if (!progressDoc.exists()) {\n      return { completedLessons: [], completedModules: [] };\n    }\n\n    return progressDoc.data();\n  }\n\n  async markLessonComplete(userId: string, lessonId: string) {\n    const progressRef = doc(db, \"userProgress\", userId);\n    const progressDoc = await getDoc(progressRef);\n\n    const currentProgress = progressDoc.exists() ? progressDoc.data() : { completedLessons: [], completedModules: [] };\n\n    if (!currentProgress.completedLessons.includes(lessonId)) {\n      currentProgress.completedLessons.push(lessonId);\n      await setDoc(progressRef, currentProgress, { merge: true });\n    }\n  }\n\n  async createNotification(userId: string, type: string, title: string, message: string, metadata?: any) {\n    const notificationsRef = collection(db, \"notifications\");\n    await addDoc(notificationsRef, {\n      userId,\n      type,\n      title,\n      message,\n      metadata: metadata || {},\n      read: false,\n      createdAt: new Date().toISOString()\n    });\n  }\n\n  async getUserNotifications(userId: string) {\n    const notificationsRef = collection(db, \"notifications\");\n    const q = query(\n      notificationsRef,\n      where(\"userId\", \"==\", userId),\n      orderBy(\"createdAt\", \"desc\"),\n      firestoreLimit(50)\n    );\n\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n  }\n\n  async markNotificationRead(userId: string, notificationId: string) {\n    const notifRef = doc(db, \"notifications\", notificationId);\n    const notifDoc = await getDoc(notifRef);\n\n    if (notifDoc.exists() && notifDoc.data().userId === userId) {\n      await updateDoc(notifRef, { read: true });\n    }\n  }\n\n  async markAllNotificationsRead(userId: string) {\n    const notificationsRef = collection(db, \"notifications\");\n    const q = query(notificationsRef, where(\"userId\", \"==\", userId), where(\"read\", \"==\", false));\n    const snapshot = await getDocs(q);\n\n    const batch = writeBatch(db);\n    snapshot.docs.forEach(doc => {\n      batch.update(doc.ref, { read: true });\n    });\n\n    await batch.commit();\n  }\n\n  // Password reset operations\n  async createPasswordResetToken(userId: string, token: string, expiresAt: Date): Promise<void> {\n    const tokenRef = doc(db, \"passwordResetTokens\", token);\n    await setDoc(tokenRef, {\n      userId,\n      token,\n      expiresAt: Timestamp.fromDate(expiresAt),\n      createdAt: Timestamp.now(),\n    });\n  }\n\n  async getPasswordResetToken(token: string): Promise<{ userId: string; expiresAt: Date } | undefined> {\n    const tokenRef = doc(db, \"passwordResetTokens\", token);\n    const tokenDoc = await getDoc(tokenRef);\n    \n    if (!tokenDoc.exists()) return undefined;\n    \n    const data = tokenDoc.data();\n    return {\n      userId: data.userId,\n      expiresAt: data.expiresAt instanceof Timestamp \n        ? data.expiresAt.toDate() \n        : new Date(data.expiresAt),\n    };\n  }\n\n  async deletePasswordResetToken(token: string): Promise<void> {\n    const tokenRef = doc(db, \"passwordResetTokens\", token);\n    await deleteDoc(tokenRef);\n  }\n}\n\nexport const storage = new FirestoreStorage();","path":null,"size_bytes":37848,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"client/src/components/ParticleBackground.tsx":{"content":"import { useEffect, useRef } from 'react';\n\ninterface Particle {\n  x: number;\n  y: number;\n  size: number;\n  speedX: number;\n  speedY: number;\n  rotation: number;\n  rotationSpeed: number;\n  opacity: number;\n}\n\nexport function ParticleBackground() {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const particlesRef = useRef<Particle[]>([]);\n  const animationFrameRef = useRef<number>();\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Respect user's motion preferences\n    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n    if (prefersReducedMotion) return;\n\n    const resizeCanvas = () => {\n      canvas.width = window.innerWidth;\n      canvas.height = window.innerHeight;\n    };\n\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n\n    // Initialize particles\n    const particleCount = 25;\n    particlesRef.current = Array.from({ length: particleCount }, () => ({\n      x: Math.random() * canvas.width,\n      y: Math.random() * canvas.height,\n      size: Math.random() * 30 + 10,\n      speedX: (Math.random() - 0.5) * 0.5,\n      speedY: -Math.random() * 0.8 - 0.3,\n      rotation: Math.random() * Math.PI * 2,\n      rotationSpeed: (Math.random() - 0.5) * 0.02,\n      opacity: Math.random() * 0.15 + 0.05,\n    }));\n\n    const animate = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      particlesRef.current.forEach((particle) => {\n        // Update position\n        particle.x += particle.speedX;\n        particle.y += particle.speedY;\n        particle.rotation += particle.rotationSpeed;\n\n        // Wrap around screen\n        if (particle.y < -particle.size) {\n          particle.y = canvas.height + particle.size;\n          particle.x = Math.random() * canvas.width;\n        }\n        if (particle.x < -particle.size) particle.x = canvas.width + particle.size;\n        if (particle.x > canvas.width + particle.size) particle.x = -particle.size;\n\n        // Draw spinning box\n        ctx.save();\n        ctx.translate(particle.x, particle.y);\n        ctx.rotate(particle.rotation);\n        \n        // Gradient fill for the box\n        const gradient = ctx.createLinearGradient(\n          -particle.size / 2,\n          -particle.size / 2,\n          particle.size / 2,\n          particle.size / 2\n        );\n        gradient.addColorStop(0, `rgba(168, 85, 247, ${particle.opacity})`);\n        gradient.addColorStop(0.5, `rgba(139, 92, 246, ${particle.opacity})`);\n        gradient.addColorStop(1, `rgba(124, 58, 237, ${particle.opacity})`);\n        \n        ctx.fillStyle = gradient;\n        ctx.fillRect(-particle.size / 2, -particle.size / 2, particle.size, particle.size);\n        \n        // Add border for more definition\n        ctx.strokeStyle = `rgba(168, 85, 247, ${particle.opacity * 1.5})`;\n        ctx.lineWidth = 1;\n        ctx.strokeRect(-particle.size / 2, -particle.size / 2, particle.size, particle.size);\n        \n        ctx.restore();\n      });\n\n      animationFrameRef.current = requestAnimationFrame(animate);\n    };\n\n    animate();\n\n    return () => {\n      window.removeEventListener('resize', resizeCanvas);\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, []);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      className=\"fixed inset-0 pointer-events-none\"\n      style={{ opacity: 0.6, zIndex: -1 }}\n    />\n  );\n}\n","path":null,"size_bytes":3515,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"client/src/components/examples/QuizCard.tsx":{"content":"import QuizCard from '../QuizCard';\n\n//todo: remove mock functionality\nconst mockQuestions = [\n  {\n    id: 1,\n    question: \"What is the time complexity of binary search?\",\n    options: [\"O(n)\", \"O(log n)\", \"O(n¬≤)\", \"O(1)\"],\n    correctAnswer: 1\n  },\n  {\n    id: 2,\n    question: \"Which data structure uses LIFO (Last In First Out)?\",\n    options: [\"Queue\", \"Stack\", \"Array\", \"Tree\"],\n    correctAnswer: 1\n  },\n  {\n    id: 3,\n    question: \"What does SQL stand for?\",\n    options: [\n      \"Structured Query Language\",\n      \"Simple Question Language\",\n      \"System Query List\",\n      \"Standard Quality Logic\"\n    ],\n    correctAnswer: 0\n  }\n];\n\nexport default function QuizCardExample() {\n  return <QuizCard questions={mockQuestions} timeLimit={180} />;\n}\n","path":null,"size_bytes":758,"size_tokens":null},"client/src/pages/Admin.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport AdminSidebar from \"@/components/AdminSidebar\";\nimport { QuizResultsTable } from \"@/components/QuizResultsTable\";\nimport ModuleManagement from \"@/components/ModuleManagement\";\nimport ThemeToggle from \"@/components/ThemeToggle\";\nimport EditUserDialog from \"@/components/EditUserDialog\";\nimport AddUserDialog from \"@/components/AddUserDialog\";\nimport LogoutConfirmationDialog from \"@/components/LogoutConfirmationDialog\";\nimport ConfirmationDialog from \"@/components/ConfirmationDialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { \n  Users, \n  FileText, \n  TrendingUp, \n  Award,\n  Search,\n  MoreVertical,\n  Edit,\n  Trash2,\n  UserCog,\n  Activity,\n  BookOpen,\n  Target,\n  Clock,\n  Filter,\n  Download,\n  RefreshCw,\n  Shield,\n  Database,\n  Zap,\n  CheckCircle2,\n  AlertCircle,\n  ArrowUpRight,\n  ArrowDownRight,\n  Minus,\n  LogOut,\n  User,\n  Trophy\n} from \"lucide-react\";\nimport type { User as UserType, AuditLog, QuizAttempt } from \"@shared/schema\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  AreaChart, \n  Area, \n  BarChart, \n  Bar, \n  LineChart, \n  Line, \n  PieChart, \n  Pie, \n  Cell,\n  XAxis, \n  YAxis, \n  CartesianGrid, \n  Tooltip, \n  ResponsiveContainer, \n  Legend \n} from \"recharts\";\n\nconst COLORS = ['hsl(var(--chart-1))', 'hsl(var(--chart-2))', 'hsl(var(--chart-3))', 'hsl(var(--chart-4))', 'hsl(var(--chart-5))'];\n\nexport default function Admin() {\n  const { user: currentUser, logout } = useAuth();\n  const [activeTab, setActiveTab] = useState(\"overview\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [userFilter, setUserFilter] = useState(\"all\");\n  const [editingUser, setEditingUser] = useState<UserType | null>(null);\n  const [showAddUser, setShowAddUser] = useState(false);\n  const [showLogoutDialog, setShowLogoutDialog] = useState(false);\n  const [showProfileMenu, setShowProfileMenu] = useState(false);\n  const [deletingUserId, setDeletingUserId] = useState<string | null>(null);\n  const { toast } = useToast();\n\n  const handleEditUser = (userId: string) => {\n    const user = users.find(u => u.id === userId);\n    if (user) {\n      setEditingUser(user);\n    }\n  };\n\n  const [isDeletingUser, setIsDeletingUser] = useState(false);\n\n  const confirmDeleteUser = async () => {\n    if (!deletingUserId || isDeletingUser) return;\n\n    setIsDeletingUser(true);\n    try {\n      const response = await fetch(`/api/admin/users/${deletingUserId}`, {\n        method: \"DELETE\",\n        credentials: \"include\",\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to delete user\");\n      }\n\n      toast({\n        title: \"User Deleted\",\n        description: \"User has been successfully removed from the system.\",\n      });\n\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      setDeletingUserId(null);\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Delete Failed\",\n        description: \"Failed to delete user. Please try again.\",\n      });\n    } finally {\n      setIsDeletingUser(false);\n      setDeletingUserId(null);\n    }\n  };\n\n  const handleToggleAdmin = async (userId: string) => {\n    const user = users.find(u => u.id === userId);\n    if (!user) return;\n\n    try {\n      const response = await fetch(`/api/admin/users/${userId}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify({\n          isAdmin: !user.isAdmin,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to update admin status\");\n      }\n\n      toast({\n        title: \"Admin Status Updated\",\n        description: `User is now ${!user.isAdmin ? \"an admin\" : \"a regular user\"}.`,\n      });\n\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Update Failed\",\n        description: \"Failed to update admin status. Please try again.\",\n      });\n    }\n  };\n\n  const { data: usersData, isLoading: usersLoading } = useQuery<{ users: UserType[] }>({\n    queryKey: [\"/api/admin/users\"],\n    enabled: activeTab === \"users\" || activeTab === \"overview\",\n  });\n\n  const { data: logsData, isLoading: logsLoading } = useQuery<{ logs: AuditLog[] }>({\n    queryKey: [\"/api/admin/audit-logs\"],\n    enabled: activeTab === \"audit\" || activeTab === \"overview\",\n  });\n\n  const { data: quizResultsData, isLoading: resultsLoading } = useQuery<{ \n    attempts: (QuizAttempt & { username: string; quizTitle: string })[];\n    totalAttempts: number;\n  }>({\n    queryKey: [\"/api/admin/quiz-results\"],\n    enabled: activeTab === \"results\" || activeTab === \"overview\",\n  });\n\n  const allUsers = usersData?.users || [];\n  const logs = logsData?.logs || [];\n  const quizResults = quizResultsData?.attempts || [];\n\n  const users = useMemo(() => {\n    return allUsers.filter(u => u.id !== currentUser?.id);\n  }, [allUsers, currentUser?.id]);\n\n  const totalUsers = allUsers.length;\n  const activeUsers = allUsers.filter(u => u.lastActiveAt && \n    new Date(u.lastActiveAt).getTime() > Date.now() - 30 * 24 * 60 * 60 * 1000\n  ).length;\n  const adminUsers = allUsers.filter(u => u.isAdmin).length;\n\n  const averageScore = quizResults.length > 0 \n    ? Math.round(quizResults.reduce((sum, r) => sum + r.score, 0) / quizResults.length) \n    : 0;\n\n  const userGrowthData = useMemo(() => {\n    const last7Days = Array.from({ length: 7 }, (_, i) => {\n      const date = new Date();\n      date.setDate(date.getDate() - (6 - i));\n      return date.toISOString().split('T')[0];\n    });\n\n    return last7Days.map(date => ({\n      date: new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),\n      users: allUsers.filter(u => u.createdAt && new Date(u.createdAt).toISOString().split('T')[0] <= date).length,\n      active: allUsers.filter(u => u.lastActiveAt && new Date(u.lastActiveAt).toISOString().split('T')[0] === date).length\n    }));\n  }, [allUsers]);\n\n  const quizPerformanceData = useMemo(() => {\n    if (quizResults.length === 0) return [];\n    \n    const last7Days = Array.from({ length: 7 }, (_, i) => {\n      const date = new Date();\n      date.setDate(date.getDate() - (6 - i));\n      return date.toISOString().split('T')[0];\n    });\n\n    return last7Days.map(date => {\n      const dayResults = quizResults.filter(r => \n        r.completedAt && new Date(r.completedAt).toISOString().split('T')[0] === date\n      );\n      return {\n        date: new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),\n        attempts: dayResults.length,\n        avgScore: dayResults.length > 0 ? Math.round(dayResults.reduce((sum, r) => sum + r.score, 0) / dayResults.length) : 0\n      };\n    });\n  }, [quizResults]);\n\n  const levelDistribution = useMemo(() => {\n    const distribution: { [key: string]: number } = {};\n    allUsers.forEach(u => {\n      const levelRange = Math.floor(u.level / 5) * 5;\n      const key = `${levelRange}-${levelRange + 4}`;\n      distribution[key] = (distribution[key] || 0) + 1;\n    });\n    return Object.entries(distribution).map(([range, count]) => ({ range, count }));\n  }, [allUsers]);\n\n  const scoreDistribution = useMemo(() => {\n    const ranges = ['0-20', '21-40', '41-60', '61-80', '81-100'];\n    return ranges.map(range => {\n      const [min, max] = range.split('-').map(Number);\n      const count = quizResults.filter(r => r.score >= min && r.score <= max).length;\n      return { range, count };\n    });\n  }, [quizResults]);\n\n  const filteredUsers = useMemo(() => {\n    return users.filter(user => {\n      const matchesSearch = searchQuery === '' ||\n        user.username.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        user.email.toLowerCase().includes(searchQuery.toLowerCase());\n      \n      const matchesFilter = userFilter === \"all\" ||\n        (userFilter === \"admin\" && user.isAdmin) ||\n        (userFilter === \"active\" && user.lastActiveAt && new Date(user.lastActiveAt).getTime() > Date.now() - 7 * 24 * 60 * 60 * 1000);\n      \n      return matchesSearch && matchesFilter;\n    });\n  }, [users, searchQuery, userFilter]);\n\n  const getTrendIcon = (current: number, previous: number) => {\n    if (current > previous) return <ArrowUpRight className=\"w-4 h-4 text-green-500\" />;\n    if (current < previous) return <ArrowDownRight className=\"w-4 h-4 text-red-500\" />;\n    return <Minus className=\"w-4 h-4 text-muted-foreground\" />;\n  };\n\n  const getTrendPercentage = (current: number, previous: number) => {\n    if (previous === 0) return current > 0 ? \"+100%\" : \"0%\";\n    const change = ((current - previous) / previous) * 100;\n    return `${change > 0 ? '+' : ''}${change.toFixed(1)}%`;\n  };\n\n  const previousMonthUsers = allUsers.filter(u => \n    u.createdAt && new Date(u.createdAt).getTime() < Date.now() - 30 * 24 * 60 * 60 * 1000\n  ).length;\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      toast({\n        title: \"Logged Out\",\n        description: \"You have been successfully logged out.\",\n      });\n    } catch (error) {\n      toast({\n        variant: \"destructive\",\n        title: \"Logout Failed\",\n        description: \"Failed to logout. Please try again.\",\n      });\n    }\n  };\n\n  return (\n    <div className=\"flex h-screen bg-background\">\n      <AdminSidebar activeTab={activeTab} onTabChange={setActiveTab} />\n\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <header className=\"border-b bg-card p-4 shadow-sm\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"font-display font-bold text-2xl\">\n                {activeTab === \"overview\" && \"Dashboard Overview\"}\n                {activeTab === \"users\" && \"User Management\"}\n                {activeTab === \"modules\" && \"Module Management\"}\n                {activeTab === \"results\" && \"Quiz Results & Analytics\"}\n                {activeTab === \"syllabus\" && \"Syllabus Management\"}\n                {activeTab === \"audit\" && \"Audit Logs\"}\n                {activeTab === \"settings\" && \"System Settings\"}\n              </h1>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                {activeTab === \"overview\" && \"Monitor system performance and user activity\"}\n                {activeTab === \"users\" && `Managing ${totalUsers} registered users`}\n                {activeTab === \"modules\" && \"Create and manage learning modules and lessons\"}\n                {activeTab === \"results\" && `${quizResults.length} total quiz attempts`}\n                {activeTab === \"syllabus\" && \"Upload and manage course syllabi\"}\n                {activeTab === \"audit\" && `${logs.length} system events logged`}\n                {activeTab === \"settings\" && \"Configure system parameters and security\"}\n              </p>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                data-testid=\"button-refresh\"\n                onClick={() => {\n                  queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n                  queryClient.invalidateQueries({ queryKey: [\"/api/admin/audit-logs\"] });\n                  queryClient.invalidateQueries({ queryKey: [\"/api/admin/quiz-results\"] });\n                  queryClient.invalidateQueries({ queryKey: [\"/api/admin/modules\"] });\n                  toast({ title: \"Refreshed\", description: \"Data has been refreshed\" });\n                }}\n              >\n                <RefreshCw className=\"w-4 h-4 mr-2\" />\n                Refresh\n              </Button>\n              <ThemeToggle />\n              \n              <DropdownMenu open={showProfileMenu} onOpenChange={setShowProfileMenu}>\n                <DropdownMenuTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    className=\"relative w-9 h-9 rounded-full p-0\"\n                    data-testid=\"button-admin-profile\"\n                  >\n                    <div className=\"w-9 h-9 rounded-full bg-gradient-to-br from-primary to-primary/70 flex items-center justify-center text-primary-foreground font-semibold text-sm shadow-md cursor-pointer hover-elevate\">\n                      {currentUser?.username?.substring(0, 2).toUpperCase() || 'AD'}\n                    </div>\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-64\">\n                  <div className=\"flex items-center gap-3 p-3 border-b\">\n                    <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-primary/70 flex items-center justify-center text-primary-foreground font-bold\">\n                      {currentUser?.username?.substring(0, 2).toUpperCase() || 'AD'}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"font-semibold truncate\">{currentUser?.displayName || currentUser?.username}</div>\n                      <div className=\"text-sm text-muted-foreground truncate\">{currentUser?.email}</div>\n                    </div>\n                  </div>\n                  <DropdownMenuLabel className=\"text-xs text-muted-foreground\">\n                    Admin Account\n                  </DropdownMenuLabel>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem className=\"gap-2\">\n                    <User className=\"w-4 h-4\" />\n                    <span>Level {currentUser?.level || 1}</span>\n                  </DropdownMenuItem>\n                  <DropdownMenuItem className=\"gap-2\">\n                    <Trophy className=\"w-4 h-4\" />\n                    <span>{currentUser?.totalXp?.toLocaleString() || 0} XP</span>\n                  </DropdownMenuItem>\n                  <DropdownMenuItem className=\"gap-2\">\n                    <Shield className=\"w-4 h-4\" />\n                    <span>Administrator</span>\n                  </DropdownMenuItem>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem \n                    className=\"gap-2 text-destructive focus:text-destructive cursor-pointer\"\n                    onClick={() => {\n                      setShowProfileMenu(false);\n                      setShowLogoutDialog(true);\n                    }}\n                    data-testid=\"button-logout-admin\"\n                  >\n                    <LogOut className=\"w-4 h-4\" />\n                    <span>Logout</span>\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            </div>\n          </div>\n        </header>\n\n        <main className=\"flex-1 overflow-auto p-6 bg-background\">\n          {activeTab === \"overview\" && (\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                {usersLoading ? (\n                  [1, 2, 3, 4].map((i) => (\n                    <Card key={i}>\n                      <CardContent className=\"p-6\">\n                        <Skeleton className=\"h-4 w-24 mb-4\" />\n                        <Skeleton className=\"h-8 w-32 mb-2\" />\n                        <Skeleton className=\"h-4 w-20\" />\n                      </CardContent>\n                    </Card>\n                  ))\n                ) : (\n                  <>\n                    <Card className=\"hover-elevate border-l-4 border-l-primary\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <div className=\"text-sm font-medium text-muted-foreground\">Total Users</div>\n                          <div className=\"p-2 bg-primary/10 rounded-lg\">\n                            <Users className=\"w-5 h-5 text-primary\" />\n                          </div>\n                        </div>\n                        <div className=\"text-3xl font-display font-bold mb-2\">{totalUsers}</div>\n                        <div className=\"flex items-center gap-2\">\n                          {getTrendIcon(totalUsers, previousMonthUsers)}\n                          <span className=\"text-sm text-muted-foreground\">\n                            {getTrendPercentage(totalUsers, previousMonthUsers)} from last month\n                          </span>\n                        </div>\n                      </CardContent>\n                    </Card>\n\n                    <Card className=\"hover-elevate border-l-4 border-l-chart-2\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <div className=\"text-sm font-medium text-muted-foreground\">Active Learners</div>\n                          <div className=\"p-2 bg-chart-2/10 rounded-lg\">\n                            <Activity className=\"w-5 h-5 text-chart-2\" />\n                          </div>\n                        </div>\n                        <div className=\"text-3xl font-display font-bold mb-2\">{activeUsers}</div>\n                        <div className=\"flex items-center gap-2\">\n                          <CheckCircle2 className=\"w-4 h-4 text-green-500\" />\n                          <span className=\"text-sm text-muted-foreground\">\n                            {totalUsers > 0 ? Math.round((activeUsers / totalUsers) * 100) : 0}% engagement rate\n                          </span>\n                        </div>\n                      </CardContent>\n                    </Card>\n\n                    <Card className=\"hover-elevate border-l-4 border-l-chart-3\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <div className=\"text-sm font-medium text-muted-foreground\">Quiz Attempts</div>\n                          <div className=\"p-2 bg-chart-3/10 rounded-lg\">\n                            <Target className=\"w-5 h-5 text-chart-3\" />\n                          </div>\n                        </div>\n                        <div className=\"text-3xl font-display font-bold mb-2\">{quizResults.length}</div>\n                        <div className=\"flex items-center gap-2\">\n                          <TrendingUp className=\"w-4 h-4 text-green-500\" />\n                          <span className=\"text-sm text-muted-foreground\">\n                            {averageScore}% average score\n                          </span>\n                        </div>\n                      </CardContent>\n                    </Card>\n\n                    <Card className=\"hover-elevate border-l-4 border-l-chart-4\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <div className=\"text-sm font-medium text-muted-foreground\">System Events</div>\n                          <div className=\"p-2 bg-chart-4/10 rounded-lg\">\n                            <Shield className=\"w-5 h-5 text-chart-4\" />\n                          </div>\n                        </div>\n                        <div className=\"text-3xl font-display font-bold mb-2\">{logs.length}</div>\n                        <div className=\"flex items-center gap-2\">\n                          <Clock className=\"w-4 h-4 text-muted-foreground\" />\n                          <span className=\"text-sm text-muted-foreground\">\n                            Last: {logs.length > 0 ? new Date(logs[0].createdAt).toLocaleTimeString() : 'N/A'}\n                          </span>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </>\n                )}\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <Card className=\"col-span-1\">\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <TrendingUp className=\"w-5 h-5\" />\n                      User Growth Trend\n                    </CardTitle>\n                    <CardDescription>Total and active users over the last 7 days</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <ResponsiveContainer width=\"100%\" height={250}>\n                      <AreaChart data={userGrowthData}>\n                        <defs>\n                          <linearGradient id=\"colorUsers\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                            <stop offset=\"5%\" stopColor=\"hsl(var(--primary))\" stopOpacity={0.3}/>\n                            <stop offset=\"95%\" stopColor=\"hsl(var(--primary))\" stopOpacity={0}/>\n                          </linearGradient>\n                        </defs>\n                        <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                        <XAxis dataKey=\"date\" className=\"text-xs\" />\n                        <YAxis className=\"text-xs\" />\n                        <Tooltip \n                          contentStyle={{ \n                            backgroundColor: 'hsl(var(--card))',\n                            border: '1px solid hsl(var(--border))',\n                            borderRadius: '8px'\n                          }}\n                        />\n                        <Area type=\"monotone\" dataKey=\"users\" stroke=\"hsl(var(--primary))\" fillOpacity={1} fill=\"url(#colorUsers)\" />\n                      </AreaChart>\n                    </ResponsiveContainer>\n                  </CardContent>\n                </Card>\n\n                <Card className=\"col-span-1\">\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Target className=\"w-5 h-5\" />\n                      Quiz Performance\n                    </CardTitle>\n                    <CardDescription>Daily quiz attempts and average scores</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <ResponsiveContainer width=\"100%\" height={250}>\n                      <LineChart data={quizPerformanceData}>\n                        <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                        <XAxis dataKey=\"date\" className=\"text-xs\" />\n                        <YAxis yAxisId=\"left\" className=\"text-xs\" />\n                        <YAxis yAxisId=\"right\" orientation=\"right\" className=\"text-xs\" />\n                        <Tooltip \n                          contentStyle={{ \n                            backgroundColor: 'hsl(var(--card))',\n                            border: '1px solid hsl(var(--border))',\n                            borderRadius: '8px'\n                          }}\n                        />\n                        <Legend />\n                        <Line yAxisId=\"left\" type=\"monotone\" dataKey=\"attempts\" stroke=\"hsl(var(--chart-3))\" strokeWidth={2} name=\"Attempts\" />\n                        <Line yAxisId=\"right\" type=\"monotone\" dataKey=\"avgScore\" stroke=\"hsl(var(--chart-2))\" strokeWidth={2} name=\"Avg Score %\" />\n                      </LineChart>\n                    </ResponsiveContainer>\n                  </CardContent>\n                </Card>\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Users className=\"w-5 h-5\" />\n                      Level Distribution\n                    </CardTitle>\n                    <CardDescription>User distribution across level ranges</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <ResponsiveContainer width=\"100%\" height={200}>\n                      <BarChart data={levelDistribution}>\n                        <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                        <XAxis dataKey=\"range\" className=\"text-xs\" />\n                        <YAxis className=\"text-xs\" />\n                        <Tooltip \n                          contentStyle={{ \n                            backgroundColor: 'hsl(var(--card))',\n                            border: '1px solid hsl(var(--border))',\n                            borderRadius: '8px'\n                          }}\n                        />\n                        <Bar dataKey=\"count\" fill=\"hsl(var(--primary))\" radius={[8, 8, 0, 0]} />\n                      </BarChart>\n                    </ResponsiveContainer>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Award className=\"w-5 h-5\" />\n                      Score Distribution\n                    </CardTitle>\n                    <CardDescription>Quiz score ranges breakdown</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <ResponsiveContainer width=\"100%\" height={200}>\n                      <BarChart data={scoreDistribution}>\n                        <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                        <XAxis dataKey=\"range\" className=\"text-xs\" />\n                        <YAxis className=\"text-xs\" />\n                        <Tooltip \n                          contentStyle={{ \n                            backgroundColor: 'hsl(var(--card))',\n                            border: '1px solid hsl(var(--border))',\n                            borderRadius: '8px'\n                          }}\n                        />\n                        <Bar dataKey=\"count\" fill=\"hsl(var(--chart-3))\" radius={[8, 8, 0, 0]} />\n                      </BarChart>\n                    </ResponsiveContainer>\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <Activity className=\"w-5 h-5\" />\n                      Recent Activity\n                    </CardTitle>\n                    <CardDescription>Latest system events</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    {logsLoading ? (\n                      <div className=\"space-y-3\">\n                        {[1, 2, 3].map((i) => (\n                          <div key={i} className=\"space-y-2\">\n                            <Skeleton className=\"h-4 w-full\" />\n                            <Skeleton className=\"h-3 w-24\" />\n                          </div>\n                        ))}\n                      </div>\n                    ) : logs.length === 0 ? (\n                      <div className=\"text-center py-8 text-muted-foreground text-sm\">\n                        No activity logs found\n                      </div>\n                    ) : (\n                      <div className=\"space-y-3 max-h-[160px] overflow-y-auto\">\n                        {logs.slice(0, 5).map((log) => (\n                          <div key={log.id} className=\"flex items-start gap-2 pb-3 border-b border-border last:border-0 last:pb-0\">\n                            <div className=\"w-2 h-2 rounded-full bg-primary mt-1.5 flex-shrink-0\" />\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"text-sm font-medium truncate\">{log.action}</div>\n                              <div className=\"text-xs text-muted-foreground\">\n                                {new Date(log.createdAt).toLocaleString()}\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n              </div>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Award className=\"w-5 h-5\" />\n                    Top Performers\n                  </CardTitle>\n                  <CardDescription>Highest XP earners in the system</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {usersLoading ? (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                      {[1, 2, 3, 4].map((i) => (\n                        <div key={i} className=\"flex items-center gap-3\">\n                          <Skeleton className=\"h-10 w-10 rounded-full\" />\n                          <div className=\"flex-1 space-y-2\">\n                            <Skeleton className=\"h-4 w-32\" />\n                            <Skeleton className=\"h-3 w-20\" />\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                      {allUsers\n                        .sort((a, b) => b.totalXp - a.totalXp)\n                        .slice(0, 8)\n                        .map((user, index) => (\n                          <div key={user.id} className=\"flex items-center gap-3 p-3 rounded-lg hover-elevate border\">\n                            <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm\n                              ${index === 0 ? 'bg-yellow-500/20 text-yellow-600 dark:text-yellow-400' : \n                                index === 1 ? 'bg-gray-400/20 text-gray-600 dark:text-gray-400' :\n                                index === 2 ? 'bg-orange-600/20 text-orange-600 dark:text-orange-400' :\n                                'bg-primary/10 text-primary'}`}\n                            >\n                              #{index + 1}\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"font-semibold text-sm truncate\">{user.username}</div>\n                              <div className=\"text-xs text-muted-foreground\">\n                                Level {user.level} ‚Ä¢ {user.totalXp.toLocaleString()} XP\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          )}\n\n          {activeTab === \"users\" && (\n            <div className=\"space-y-6\">\n              <div className=\"flex flex-wrap items-center gap-4\">\n                <div className=\"relative flex-1 min-w-[250px] max-w-md\">\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                  <Input \n                    placeholder=\"Search by username or email...\" \n                    className=\"pl-10\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    data-testid=\"input-search-users\"\n                  />\n                </div>\n                <Select value={userFilter} onValueChange={setUserFilter}>\n                  <SelectTrigger className=\"w-[180px]\" data-testid=\"select-user-filter\">\n                    <Filter className=\"w-4 h-4 mr-2\" />\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Users</SelectItem>\n                    <SelectItem value=\"active\">Active (7d)</SelectItem>\n                    <SelectItem value=\"admin\">Admins Only</SelectItem>\n                  </SelectContent>\n                </Select>\n                <Button \n                  data-testid=\"button-add-user\"\n                  onClick={() => setShowAddUser(true)}\n                  className=\"gap-2\"\n                >\n                  <Users className=\"w-4 h-4\" />\n                  Add User\n                </Button>\n              </div>\n\n              <Card>\n                <CardContent className=\"p-0\">\n                  {usersLoading ? (\n                    <div className=\"p-8 space-y-4\">\n                      {[1, 2, 3, 4, 5].map((i) => (\n                        <div key={i} className=\"flex items-center gap-4\">\n                          <Skeleton className=\"h-5 w-32\" />\n                          <Skeleton className=\"h-5 w-48\" />\n                          <Skeleton className=\"h-5 w-16\" />\n                        </div>\n                      ))}\n                    </div>\n                  ) : filteredUsers.length === 0 ? (\n                    <div className=\"text-center py-16 text-muted-foreground\">\n                      <User className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                      <p className=\"font-medium\">No users found</p>\n                      <p className=\"text-sm\">Try adjusting your search or filters</p>\n                    </div>\n                  ) : (\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"w-full\">\n                        <thead className=\"bg-muted/50 border-b\">\n                          <tr className=\"text-left\">\n                            <th className=\"p-4 font-semibold text-sm\">User</th>\n                            <th className=\"p-4 font-semibold text-sm\">Email</th>\n                            <th className=\"p-4 font-semibold text-sm\">Level</th>\n                            <th className=\"p-4 font-semibold text-sm\">Total XP</th>\n                            <th className=\"p-4 font-semibold text-sm\">Status</th>\n                            <th className=\"p-4 font-semibold text-sm\">Role</th>\n                            <th className=\"p-4 font-semibold text-sm w-12\"></th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {filteredUsers.map((user) => (\n                            <tr key={user.id} className=\"border-b last:border-0 hover-elevate transition-colors\" data-testid={`row-user-${user.id}`}>\n                              <td className=\"p-4\">\n                                <div className=\"flex items-center gap-3\">\n                                  <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center font-semibold text-sm\">\n                                    {user.username.substring(0, 2).toUpperCase()}\n                                  </div>\n                                  <span className=\"font-medium\">{user.username}</span>\n                                </div>\n                              </td>\n                              <td className=\"p-4 text-muted-foreground text-sm\">{user.email}</td>\n                              <td className=\"p-4\">\n                                <Badge variant=\"outline\" className=\"font-semibold\">\n                                  Level {user.level}\n                                </Badge>\n                              </td>\n                              <td className=\"p-4 text-muted-foreground font-medium\">{user.totalXp.toLocaleString()}</td>\n                              <td className=\"p-4\">\n                                {user.lastActiveAt && new Date(user.lastActiveAt).getTime() > Date.now() - 7 * 24 * 60 * 60 * 1000 ? (\n                                  <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-700 dark:text-green-400\">\n                                    <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                                    Active\n                                  </Badge>\n                                ) : (\n                                  <Badge variant=\"outline\" className=\"text-muted-foreground\">\n                                    Inactive\n                                  </Badge>\n                                )}\n                              </td>\n                              <td className=\"p-4\">\n                                {user.isAdmin ? (\n                                  <Badge variant=\"outline\" className=\"bg-primary/10 text-primary\">\n                                    <Shield className=\"w-3 h-3 mr-1\" />\n                                    Admin\n                                  </Badge>\n                                ) : (\n                                  <Badge variant=\"outline\">User</Badge>\n                                )}\n                              </td>\n                              <td className=\"p-4\">\n                                <DropdownMenu>\n                                  <DropdownMenuTrigger asChild>\n                                    <Button variant=\"ghost\" size=\"icon\">\n                                      <MoreVertical className=\"w-4 h-4\" />\n                                    </Button>\n                                  </DropdownMenuTrigger>\n                                  <DropdownMenuContent align=\"end\">\n                                    <DropdownMenuLabel>Actions</DropdownMenuLabel>\n                                    <DropdownMenuSeparator />\n                                    <DropdownMenuItem onClick={() => handleEditUser(user.id)}>\n                                      <Edit className=\"w-4 h-4 mr-2\" />\n                                      Edit User\n                                    </DropdownMenuItem>\n                                    <DropdownMenuItem onClick={() => handleToggleAdmin(user.id)}>\n                                      <UserCog className=\"w-4 h-4 mr-2\" />\n                                      {user.isAdmin ? \"Remove Admin\" : \"Make Admin\"}\n                                    </DropdownMenuItem>\n                                    <DropdownMenuSeparator />\n                                    <DropdownMenuItem \n                                      onClick={() => setDeletingUserId(user.id)}\n                                      className=\"text-destructive\"\n                                    >\n                                      <Trash2 className=\"w-4 h-4 mr-2\" />\n                                      Delete User\n                                    </DropdownMenuItem>\n                                  </DropdownMenuContent>\n                                </DropdownMenu>\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n\n              {!usersLoading && (\n                <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n                  <span>Showing {filteredUsers.length} of {totalUsers} users</span>\n                  <span>{adminUsers} admin{adminUsers !== 1 ? 's' : ''} ‚Ä¢ {activeUsers} active</span>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === \"modules\" && (\n            <ModuleManagement />\n          )}\n\n          {activeTab === \"results\" && (\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n                <Card className=\"hover-elevate\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"text-sm font-medium text-muted-foreground\">Total Attempts</div>\n                      <div className=\"p-2 bg-chart-1/10 rounded-lg\">\n                        <FileText className=\"w-5 h-5 text-chart-1\" />\n                      </div>\n                    </div>\n                    <div className=\"text-3xl font-display font-bold mb-1\">{quizResults.length}</div>\n                    <div className=\"text-sm text-muted-foreground\">All time</div>\n                  </CardContent>\n                </Card>\n                <Card className=\"hover-elevate\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"text-sm font-medium text-muted-foreground\">Average Score</div>\n                      <div className=\"p-2 bg-chart-2/10 rounded-lg\">\n                        <TrendingUp className=\"w-5 h-5 text-chart-2\" />\n                      </div>\n                    </div>\n                    <div className=\"text-3xl font-display font-bold mb-1\">{averageScore}%</div>\n                    <div className=\"text-sm text-muted-foreground\">Across all quizzes</div>\n                  </CardContent>\n                </Card>\n                <Card className=\"hover-elevate\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"text-sm font-medium text-muted-foreground\">Active Learners</div>\n                      <div className=\"p-2 bg-chart-3/10 rounded-lg\">\n                        <Award className=\"w-5 h-5 text-chart-3\" />\n                      </div>\n                    </div>\n                    <div className=\"text-3xl font-display font-bold mb-1\">\n                      {new Set(quizResults.map(r => r.userId)).size}\n                    </div>\n                    <div className=\"text-sm text-muted-foreground\">Unique participants</div>\n                  </CardContent>\n                </Card>\n                <Card className=\"hover-elevate\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"text-sm font-medium text-muted-foreground\">Unique Quizzes</div>\n                      <div className=\"p-2 bg-chart-4/10 rounded-lg\">\n                        <BookOpen className=\"w-5 h-5 text-chart-4\" />\n                      </div>\n                    </div>\n                    <div className=\"text-3xl font-display font-bold mb-1\">\n                      {new Set(quizResults.map(r => r.quizId)).size}\n                    </div>\n                    <div className=\"text-sm text-muted-foreground\">Available quizzes</div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              {resultsLoading ? (\n                <Card>\n                  <CardContent className=\"p-8 space-y-4\">\n                    {[1, 2, 3, 4, 5].map((i) => (\n                      <div key={i} className=\"flex items-center gap-4\">\n                        <Skeleton className=\"h-5 w-32\" />\n                        <Skeleton className=\"h-5 w-48\" />\n                        <Skeleton className=\"h-5 w-24\" />\n                      </div>\n                    ))}\n                  </CardContent>\n                </Card>\n              ) : (\n                <QuizResultsTable attempts={quizResults} />\n              )}\n            </div>\n          )}\n\n          {activeTab === \"syllabus\" && (\n            <div className=\"max-w-4xl\">\n              <Card className=\"mb-6\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <FileText className=\"w-5 h-5\" />\n                    Syllabus Management\n                  </CardTitle>\n                  <CardDescription>\n                    Syllabus uploads have been disabled.\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-sm text-muted-foreground\">Syllabus upload functionality is not available.</p>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n\n          {/* Audit logs page removed */}\n\n          {activeTab === \"settings\" && (\n            <div className=\"space-y-6 max-w-5xl\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Zap className=\"w-5 h-5\" />\n                    AI & Integration Services\n                  </CardTitle>\n                  <CardDescription>Configure external services and AI capabilities</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"p-4 border rounded-lg hover-elevate\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <div className=\"font-semibold\">Naive Bayes Model</div>\n                          <div className=\"text-sm text-muted-foreground\">Career path recommendations</div>\n                        </div>\n                        <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-700 dark:text-green-400\">\n                          <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                          Active\n                        </Badge>\n                      </div>\n                      <p className=\"text-xs text-muted-foreground\">\n                        ML algorithm for personalized career guidance based on quiz performance\n                      </p>\n                    </div>\n\n                    <div className=\"p-4 border rounded-lg hover-elevate\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <div className=\"font-semibold\">OpenAI Integration</div>\n                          <div className=\"text-sm text-muted-foreground\">Question generation</div>\n                        </div>\n                        <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-700 dark:text-green-400\">\n                          <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                          Active\n                        </Badge>\n                      </div>\n                      <p className=\"text-xs text-muted-foreground\">\n                        GPT-powered quiz generation from syllabus documents\n                      </p>\n                    </div>\n\n                    <div className=\"p-4 border rounded-lg hover-elevate\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <div className=\"font-semibold\">Judge0 API</div>\n                          <div className=\"text-sm text-muted-foreground\">Code execution</div>\n                        </div>\n                        <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-700 dark:text-green-400\">\n                          <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                          Active\n                        </Badge>\n                      </div>\n                      <p className=\"text-xs text-muted-foreground\">\n                        Multi-language code compilation and testing environment\n                      </p>\n                    </div>\n\n                    <div className=\"p-4 border rounded-lg hover-elevate\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <div className=\"font-semibold\">Firebase Firestore</div>\n                          <div className=\"text-sm text-muted-foreground\">Primary database</div>\n                        </div>\n                        <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-700 dark:text-green-400\">\n                          <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                          Connected\n                        </Badge>\n                      </div>\n                      <p className=\"text-xs text-muted-foreground\">\n                        NoSQL cloud database - {totalUsers} users, {quizResults.length} quiz attempts\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Shield className=\"w-5 h-5\" />\n                    Assessment Security\n                  </CardTitle>\n                  <CardDescription>Anti-cheating and assessment integrity features</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"p-4 border rounded-lg hover-elevate\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <div className=\"font-semibold\">Tab Switch Detection</div>\n                          <div className=\"text-sm text-muted-foreground\">Auto-fail protection</div>\n                        </div>\n                        <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-700 dark:text-green-400\">\n                          <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                          Enabled\n                        </Badge>\n                      </div>\n                      <p className=\"text-xs text-muted-foreground\">\n                        Automatically fails quizzes when students switch tabs during assessment\n                      </p>\n                    </div>\n\n                    <div className=\"p-4 border rounded-lg hover-elevate\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <div className=\"font-semibold\">Fullscreen Mode</div>\n                          <div className=\"text-sm text-muted-foreground\">Required for assessments</div>\n                        </div>\n                        <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-700 dark:text-green-400\">\n                          <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                          Enabled\n                        </Badge>\n                      </div>\n                      <p className=\"text-xs text-muted-foreground\">\n                        Enforces fullscreen mode during critical assessments\n                      </p>\n                    </div>\n\n                    <div className=\"p-4 border rounded-lg hover-elevate\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <div className=\"font-semibold\">Question Randomization</div>\n                          <div className=\"text-sm text-muted-foreground\">Shuffle quiz content</div>\n                        </div>\n                        <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-700 dark:text-green-400\">\n                          <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                          Enabled\n                        </Badge>\n                      </div>\n                      <p className=\"text-xs text-muted-foreground\">\n                        Randomizes question order and answer options to prevent copying\n                      </p>\n                    </div>\n\n                    <div className=\"p-4 border rounded-lg hover-elevate\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <div className=\"font-semibold\">Duplicate Submission Block</div>\n                          <div className=\"text-sm text-muted-foreground\">Prevent re-submission</div>\n                        </div>\n                        <Badge variant=\"outline\" className=\"bg-green-500/10 text-green-700 dark:text-green-400\">\n                          <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                          Enabled\n                        </Badge>\n                      </div>\n                      <p className=\"text-xs text-muted-foreground\">\n                        Prevents multiple submissions of the same quiz attempt\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Database className=\"w-5 h-5\" />\n                    System Information\n                  </CardTitle>\n                  <CardDescription>Platform statistics and resource usage</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n                    <div className=\"p-4 border rounded-lg\">\n                      <div className=\"text-sm text-muted-foreground mb-1\">Database</div>\n                      <div className=\"text-xl font-bold\">Firestore</div>\n                      <div className=\"text-xs text-muted-foreground mt-1\">Cloud NoSQL</div>\n                    </div>\n                    <div className=\"p-4 border rounded-lg\">\n                      <div className=\"text-sm text-muted-foreground mb-1\">Total Users</div>\n                      <div className=\"text-xl font-bold\">{totalUsers.toLocaleString()}</div>\n                      <div className=\"text-xs text-muted-foreground mt-1\">{adminUsers} admins</div>\n                    </div>\n                    <div className=\"p-4 border rounded-lg\">\n                      <div className=\"text-sm text-muted-foreground mb-1\">Quiz Attempts</div>\n                      <div className=\"text-xl font-bold\">{quizResults.length.toLocaleString()}</div>\n                      <div className=\"text-xs text-muted-foreground mt-1\">All time</div>\n                    </div>\n                    <div className=\"p-4 border rounded-lg\">\n                      <div className=\"text-sm text-muted-foreground mb-1\">System Events</div>\n                      <div className=\"text-xl font-bold\">{logs.length.toLocaleString()}</div>\n                      <div className=\"text-xs text-muted-foreground mt-1\">Audit logs</div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </main>\n      </div>\n\n      <EditUserDialog\n        open={!!editingUser}\n        onClose={() => setEditingUser(null)}\n        user={editingUser}\n        onUserUpdated={() => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n          setEditingUser(null);\n        }}\n      />\n\n      <AddUserDialog\n        open={showAddUser}\n        onClose={() => setShowAddUser(false)}\n        onUserAdded={() => {\n          queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n          setShowAddUser(false);\n        }}\n      />\n\n      <LogoutConfirmationDialog\n        open={showLogoutDialog}\n        onOpenChange={setShowLogoutDialog}\n        onConfirm={handleLogout}\n      />\n\n      <ConfirmationDialog\n        open={!!deletingUserId}\n        onOpenChange={(open) => {\n          if (!open && !isDeletingUser) {\n            setDeletingUserId(null);\n          }\n        }}\n        onConfirm={confirmDeleteUser}\n        title=\"Delete User\"\n        description=\"Are you sure you want to delete this user? This action cannot be undone and will permanently remove all user data, progress, and achievements.\"\n        confirmText=\"Delete User\"\n        cancelText=\"Cancel\"\n        variant=\"destructive\"\n        isLoading={isDeletingUser}\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":55835,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@600;700&family=JetBrains+Mono:wght@400;500&display=swap');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 250 100% 99%;\n\n  --foreground: 260 20% 15%;\n\n  --border: 250 30% 88%;\n\n  --card: 0 0% 97%;\n\n  --card-foreground: 260 20% 18%;\n\n  --card-border: 250 25% 90%;\n\n  --sidebar: 250 40% 96%;\n\n  --sidebar-foreground: 260 20% 18%;\n\n  --sidebar-border: 250 30% 88%;\n\n  --sidebar-primary: 270 91% 65%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 250 35% 90%;\n\n  --sidebar-accent-foreground: 260 30% 22%;\n\n  --sidebar-ring: 270 91% 65%;\n\n  --popover: 250 40% 94%;\n\n  --popover-foreground: 260 20% 18%;\n\n  --popover-border: 250 30% 86%;\n\n  --primary: 270 91% 65%;\n\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 250 30% 88%;\n\n  --secondary-foreground: 260 25% 20%;\n\n  --muted: 250 25% 92%;\n\n  --muted-foreground: 260 10% 42%;\n\n  --accent: 280 85% 90%;\n\n  --accent-foreground: 270 60% 25%;\n\n  --destructive: 0 84% 60%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 250 25% 80%;\n  --ring: 270 91% 65%;\n  --chart-1: 270 91% 65%;\n  --chart-2: 195 100% 50%;\n  --chart-3: 280 85% 60%;\n  --chart-4: 38 100% 55%;\n  --chart-5: 142 85% 45%;\n\n  --font-sans: Inter, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: JetBrains Mono, monospace;\n  --font-display: Space Grotesk, sans-serif;\n  --radius: .5rem;\n  --shadow-2xs: 0px 1px 2px 0px hsl(240 6% 10% / 0.05);\n  --shadow-xs: 0px 1px 2px 0px hsl(240 6% 10% / 0.06);\n  --shadow-sm: 0px 1px 2px 0px hsl(240 6% 10% / 0.05), 0px 1px 3px 0px hsl(240 6% 10% / 0.08);\n  --shadow: 0px 1px 3px 0px hsl(240 6% 10% / 0.1), 0px 1px 2px -1px hsl(240 6% 10% / 0.1);\n  --shadow-md: 0px 2px 4px -1px hsl(240 6% 10% / 0.06), 0px 4px 6px -1px hsl(240 6% 10% / 0.1);\n  --shadow-lg: 0px 4px 6px -2px hsl(240 6% 10% / 0.05), 0px 10px 15px -3px hsl(240 6% 10% / 0.1);\n  --shadow-xl: 0px 10px 10px -5px hsl(240 6% 10% / 0.04), 0px 20px 25px -5px hsl(240 6% 10% / 0.1);\n  --shadow-2xl: 0px 25px 50px -12px hsl(240 6% 10% / 0.25);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Badge rarity colors */\n  --badge-common: 240 5% 50%;\n  --badge-rare: 195 92% 46%;\n  --badge-epic: 291 64% 52%;\n  --badge-legendary: 38 92% 50%;\n\n  /* Success color for code editor */\n  --success: 142 76% 36%;\n  --success-foreground: 0 0% 100%;\n\n  /* Warning color for timers */\n  --warning: 38 92% 50%;\n  --warning-foreground: 240 10% 10%;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 260 40% 6%;\n\n  --foreground: 0 0% 96%;\n\n  --border: 260 30% 18%;\n\n  --card: 260 35% 9%;\n\n  --card-foreground: 0 0% 94%;\n\n  --card-border: 260 28% 20%;\n\n  --sidebar: 260 38% 10%;\n\n  --sidebar-foreground: 0 0% 93%;\n\n  --sidebar-border: 260 32% 20%;\n\n  --sidebar-primary: 270 91% 68%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 260 30% 18%;\n\n  --sidebar-accent-foreground: 0 0% 92%;\n\n  --sidebar-ring: 270 91% 68%;\n\n  --popover: 260 35% 12%;\n\n  --popover-foreground: 0 0% 92%;\n\n  --popover-border: 260 28% 22%;\n\n  --primary: 270 91% 68%;\n\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 260 25% 20%;\n\n  --secondary-foreground: 0 0% 90%;\n\n  --muted: 260 30% 16%;\n\n  --muted-foreground: 260 15% 68%;\n\n  --accent: 280 75% 22%;\n\n  --accent-foreground: 0 0% 90%;\n\n  --destructive: 0 84% 60%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 260 25% 24%;\n  --ring: 270 91% 68%;\n  --chart-1: 270 91% 68%;\n  --chart-2: 195 100% 60%;\n  --chart-3: 280 85% 65%;\n  --chart-4: 38 100% 65%;\n  --chart-5: 142 85% 55%;\n\n  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.3);\n  --shadow-xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.4);\n  --shadow-sm: 0px 1px 2px 0px hsl(0 0% 0% / 0.3), 0px 1px 3px 0px hsl(0 0% 0% / 0.4);\n  --shadow: 0px 1px 3px 0px hsl(0 0% 0% / 0.5), 0px 1px 2px -1px hsl(0 0% 0% / 0.5);\n  --shadow-md: 0px 2px 4px -1px hsl(0 0% 0% / 0.4), 0px 4px 6px -1px hsl(0 0% 0% / 0.5);\n  --shadow-lg: 0px 4px 6px -2px hsl(0 0% 0% / 0.3), 0px 10px 15px -3px hsl(0 0% 0% / 0.5);\n  --shadow-xl: 0px 10px 10px -5px hsl(0 0% 0% / 0.3), 0px 20px 25px -5px hsl(0 0% 0% / 0.5);\n  --shadow-2xl: 0px 25px 50px -12px hsl(0 0% 0% / 0.6);\n\n  /* Badge rarity colors */\n  --badge-common: 240 5% 70%;\n  --badge-rare: 195 92% 66%;\n  --badge-epic: 291 64% 72%;\n  --badge-legendary: 38 92% 70%;\n\n  /* Success color for code editor */\n  --success: 142 76% 56%;\n  --success-foreground: 142 76% 10%;\n\n  /* Warning color for timers */\n  --warning: 38 92% 70%;\n  --warning-foreground: 38 92% 10%;\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n    position: relative;\n  }\n\n  body::before {\n    content: \"\";\n    position: fixed;\n    inset: 0;\n    background: radial-gradient(circle at 20% 20%, hsl(270 91% 65% / 0.08) 0%, transparent 50%),\n                radial-gradient(circle at 80% 80%, hsl(280 85% 60% / 0.06) 0%, transparent 50%);\n    pointer-events: none;\n    z-index: -1;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    @apply font-display;\n  }\n\n  code, pre {\n    @apply font-mono;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    border-radius: inherit;\n    z-index: -1;\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    border-radius: inherit;\n    z-index: 999;\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n\n  /* Gradient text utility */\n  .text-gradient {\n    @apply bg-clip-text text-transparent;\n  }\n\n  /* Badge glow effects */\n  .badge-glow-common {\n    box-shadow: 0 0 20px hsl(var(--badge-common) / 0.4);\n  }\n\n  .badge-glow-rare {\n    box-shadow: 0 0 20px hsl(var(--badge-rare) / 0.5);\n  }\n\n  .badge-glow-epic {\n    box-shadow: 0 0 20px hsl(var(--badge-epic) / 0.5);\n  }\n\n  .badge-glow-legendary {\n    box-shadow: 0 0 25px hsl(var(--badge-legendary) / 0.6);\n  }\n}","path":null,"size_bytes":12773,"size_tokens":null},"ml_model/visualize_datasets.py":{"content":"\nimport pickle\nimport json\nimport numpy as np\nfrom pathlib import Path\n\ndef generate_svg_visualizations():\n    \"\"\"Generate SVG visualizations of the training datasets (2000 total samples)\"\"\"\n    \n    svg_content = \"\"\"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1200 2400\">\n  <style>\n    .title { font: bold 24px sans-serif; fill: #333; }\n    .subtitle { font: bold 18px sans-serif; fill: #666; }\n    .text { font: 14px sans-serif; fill: #444; }\n    .label { font: 12px sans-serif; fill: #666; }\n    .rect-career { fill: #4F46E5; opacity: 0.7; }\n    .rect-study { fill: #10B981; opacity: 0.7; }\n    .rect-question { fill: #F59E0B; opacity: 0.7; }\n    .rect-difficulty { fill: #EF4444; opacity: 0.7; }\n    .border { fill: none; stroke: #ddd; stroke-width: 2; }\n  </style>\n\n  <!-- Header -->\n  <text x=\"600\" y=\"40\" text-anchor=\"middle\" class=\"title\">ML Model Training Datasets Overview</text>\n  <text x=\"600\" y=\"70\" text-anchor=\"middle\" class=\"label\">Total: 2000 samples across all models</text>\n\n\"\"\"\n    \n    y_offset = 120\n    \n    # 1. Career Recommendation Dataset (800 samples)\n    svg_content += f\"\"\"\n  <!-- Career Recommendation Dataset -->\n  <rect x=\"50\" y=\"{y_offset}\" width=\"1100\" height=\"400\" class=\"border\"/>\n  <text x=\"600\" y=\"{y_offset + 30}\" text-anchor=\"middle\" class=\"subtitle\">1. Career Recommendation Dataset (800 samples - 40%)</text>\n  \n  <text x=\"100\" y=\"{y_offset + 70}\" class=\"text\">Features: Level, XP, Badges, Quiz Scores, Code Challenges, Study Time, Interests</text>\n  <text x=\"100\" y=\"{y_offset + 95}\" class=\"text\">Target: Career Path (Web Dev, Data Science, Mobile Dev, DevOps, etc.)</text>\n  \n  <!-- Sample Data Visualization -->\n  <text x=\"100\" y=\"{y_offset + 130}\" class=\"label\">Sample Distribution (Career Paths):</text>\n\"\"\"\n    \n    careers = [\n        (\"Frontend\", 95, \"#4F46E5\"),\n        (\"Backend\", 90, \"#7C3AED\"),\n        (\"Full Stack\", 85, \"#2563EB\"),\n        (\"Data Sci\", 80, \"#10B981\"),\n        (\"Mobile\", 75, \"#F59E0B\"),\n        (\"DevOps\", 70, \"#EF4444\"),\n        (\"ML Eng\", 65, \"#EC4899\"),\n        (\"Cloud\", 60, \"#8B5CF6\"),\n        (\"Security\", 50, \"#06B6D4\"),\n        (\"Game\", 40, \"#14B8A6\"),\n        (\"Other\", 90, \"#64748B\")\n    ]\n    \n    x_bar = 100\n    y_bar = y_offset + 150\n    for idx, (career, count, color) in enumerate(careers):\n        bar_height = count * 1.2\n        svg_content += f\"\"\"\n  <rect x=\"{x_bar + idx * 95}\" y=\"{y_bar + 180 - bar_height}\" width=\"80\" height=\"{bar_height}\" fill=\"{color}\" opacity=\"0.8\"/>\n  <text x=\"{x_bar + idx * 95 + 40}\" y=\"{y_bar + 195}\" text-anchor=\"middle\" class=\"label\" transform=\"rotate(-45 {x_bar + idx * 95 + 40} {y_bar + 195})\">{career}</text>\n  <text x=\"{x_bar + idx * 95 + 40}\" y=\"{y_bar + 175 - bar_height}\" text-anchor=\"middle\" class=\"label\">{count}</text>\n\"\"\"\n    \n    y_offset += 450\n    \n    # 2. Study Suggestion Dataset (500 samples)\n    svg_content += f\"\"\"\n  <!-- Study Suggestion Dataset -->\n  <rect x=\"50\" y=\"{y_offset}\" width=\"1100\" height=\"350\" class=\"border\"/>\n  <text x=\"600\" y=\"{y_offset + 30}\" text-anchor=\"middle\" class=\"subtitle\">2. Study Suggestion Dataset (500 samples - 25%)</text>\n  \n  <text x=\"100\" y=\"{y_offset + 70}\" class=\"text\">Features: Recent Quiz Scores, Time Since Last Study, Weak Topics, Preferred Difficulty</text>\n  <text x=\"100\" y=\"{y_offset + 95}\" class=\"text\">Target: Study Recommendation (Focus Areas, Difficulty Level, Time Allocation)</text>\n  \n  <text x=\"100\" y=\"{y_offset + 130}\" class=\"label\">Sample Distribution (Study Focus Areas):</text>\n\"\"\"\n    \n    study_areas = [\n        (\"Data Structures\", 80, \"#10B981\"),\n        (\"Algorithms\", 75, \"#059669\"),\n        (\"Web Development\", 70, \"#10B981\"),\n        (\"Databases\", 65, \"#34D399\"),\n        (\"System Design\", 60, \"#6EE7B7\"),\n        (\"APIs & Backend\", 55, \"#A7F3D0\"),\n        (\"Frontend Frameworks\", 50, \"#D1FAE5\"),\n        (\"Testing & QA\", 45, \"#ECFDF5\")\n    ]\n    \n    x_pie = 300\n    y_pie = y_offset + 200\n    start_angle = 0\n    total = sum(count for _, count, _ in study_areas)\n    \n    for area, count, color in study_areas:\n        angle = (count / total) * 360\n        end_angle = start_angle + angle\n        \n        # Calculate pie slice path\n        start_rad = start_angle * np.pi / 180\n        end_rad = end_angle * np.pi / 180\n        x1 = x_pie + 100 * np.cos(start_rad)\n        y1 = y_pie + 100 * np.sin(start_rad)\n        x2 = x_pie + 100 * np.cos(end_rad)\n        y2 = y_pie + 100 * np.sin(end_rad)\n        \n        large_arc = 1 if angle > 180 else 0\n        \n        svg_content += f\"\"\"\n  <path d=\"M {x_pie} {y_pie} L {x1} {y1} A 100 100 0 {large_arc} 1 {x2} {y2} Z\" fill=\"{color}\" opacity=\"0.8\" stroke=\"#fff\" stroke-width=\"2\"/>\n\"\"\"\n        \n        start_angle = end_angle\n    \n    # Legend for pie chart\n    legend_x = 650\n    legend_y = y_offset + 150\n    for idx, (area, count, color) in enumerate(study_areas):\n        svg_content += f\"\"\"\n  <rect x=\"{legend_x}\" y=\"{legend_y + idx * 25}\" width=\"20\" height=\"20\" fill=\"{color}\" opacity=\"0.8\"/>\n  <text x=\"{legend_x + 30}\" y=\"{legend_y + idx * 25 + 15}\" class=\"label\">{area} ({count})</text>\n\"\"\"\n    \n    y_offset += 400\n    \n    # 3. Question Classifier Dataset (500 samples)\n    svg_content += f\"\"\"\n  <!-- Question Classifier Dataset -->\n  <rect x=\"50\" y=\"{y_offset}\" width=\"1100\" height=\"350\" class=\"border\"/>\n  <text x=\"600\" y=\"{y_offset + 30}\" text-anchor=\"middle\" class=\"subtitle\">3. Question Classifier Dataset (500 samples - 25%)</text>\n  \n  <text x=\"100\" y=\"{y_offset + 70}\" class=\"text\">Features: Question Text (TF-IDF Vectorized), Keywords, Context</text>\n  <text x=\"100\" y=\"{y_offset + 95}\" class=\"text\">Target: Question Category (Programming, Theory, Math, Design, etc.)</text>\n  \n  <text x=\"100\" y=\"{y_offset + 130}\" class=\"label\">Sample Distribution (Question Categories):</text>\n\"\"\"\n    \n    categories = [\n        (\"Programming\", 90, \"#F59E0B\"),\n        (\"Algorithms\", 80, \"#FB923C\"),\n        (\"Data Structures\", 75, \"#FDBA74\"),\n        (\"Web Dev\", 70, \"#FED7AA\"),\n        (\"Databases\", 60, \"#FFEDD5\"),\n        (\"System Design\", 50, \"#FFF7ED\"),\n        (\"Math/Logic\", 45, \"#F97316\"),\n        (\"Debugging\", 30, \"#EA580C\")\n    ]\n    \n    x_start = 100\n    y_bar_start = y_offset + 200\n    max_width = 900\n    max_count = max(count for _, count, _ in categories)\n    \n    for idx, (category, count, color) in enumerate(categories):\n        bar_width = (count / max_count) * max_width\n        svg_content += f\"\"\"\n  <rect x=\"{x_start}\" y=\"{y_bar_start + idx * 35}\" width=\"{bar_width}\" height=\"25\" fill=\"{color}\" opacity=\"0.8\"/>\n  <text x=\"{x_start + 10}\" y=\"{y_bar_start + idx * 35 + 18}\" class=\"label\" fill=\"#fff\">{category}</text>\n  <text x=\"{x_start + bar_width + 10}\" y=\"{y_bar_start + idx * 35 + 18}\" class=\"label\">{count} samples</text>\n\"\"\"\n    \n    y_offset += 400\n    \n    # 4. Difficulty Predictor Dataset (200 samples)\n    svg_content += f\"\"\"\n  <!-- Difficulty Predictor Dataset -->\n  <rect x=\"50\" y=\"{y_offset}\" width=\"1100\" height=\"300\" class=\"border\"/>\n  <text x=\"600\" y=\"{y_offset + 30}\" text-anchor=\"middle\" class=\"subtitle\">4. Difficulty Predictor Dataset (200 samples - 10%)</text>\n  \n  <text x=\"100\" y=\"{y_offset + 70}\" class=\"text\">Features: User Level, Past Performance, Question Complexity, Time Taken</text>\n  <text x=\"100\" y=\"{y_offset + 95}\" class=\"text\">Target: Difficulty Level (Beginner, Intermediate, Advanced, Expert)</text>\n  \n  <text x=\"100\" y=\"{y_offset + 130}\" class=\"label\">Sample Distribution (Difficulty Levels):</text>\n\"\"\"\n    \n    difficulties = [\n        (\"Beginner\", 60, \"#10B981\", 200),\n        (\"Intermediate\", 80, \"#F59E0B\", 400),\n        (\"Advanced\", 45, \"#EF4444\", 600),\n        (\"Expert\", 15, \"#8B5CF6\", 800)\n    ]\n    \n    for diff, count, color, x_pos in difficulties:\n        radius = np.sqrt(count / np.pi) * 4\n        svg_content += f\"\"\"\n  <circle cx=\"{x_pos}\" cy=\"{y_offset + 210}\" r=\"{radius}\" fill=\"{color}\" opacity=\"0.6\" stroke=\"#333\" stroke-width=\"2\"/>\n  <text x=\"{x_pos}\" y=\"{y_offset + 210}\" text-anchor=\"middle\" class=\"text\" fill=\"#fff\">{diff}</text>\n  <text x=\"{x_pos}\" y=\"{y_offset + 230}\" text-anchor=\"middle\" class=\"label\" fill=\"#fff\">{count}</text>\n\"\"\"\n    \n    svg_content += \"\"\"\n  <!-- Footer -->\n  <text x=\"600\" y=\"2350\" text-anchor=\"middle\" class=\"label\">Total Dataset Size: 2000 samples (800 + 500 + 500 + 200)</text>\n  <text x=\"600\" y=\"2370\" text-anchor=\"middle\" class=\"label\">Models: Gradient Boosting, Random Forest, Naive Bayes, Decision Tree, TF-IDF</text>\n</svg>\n\"\"\"\n    \n    return svg_content\n\nif __name__ == \"__main__\":\n    print(\"Generating dataset visualizations...\")\n    \n    svg = generate_svg_visualizations()\n    \n    output_file = Path(\"ml_model/dataset_visualization.svg\")\n    with open(output_file, \"w\", encoding=\"utf-8\") as f:\n        f.write(svg)\n    \n    print(f\"‚úÖ Dataset visualization saved to: {output_file}\")\n    print(\"\\nYou can:\")\n    print(\"1. Open the SVG file directly in your browser\")\n    print(\"2. View it in the Replit file viewer\")\n    print(\"3. Download it to view locally\")\n    \n    # Also generate a simple HTML viewer\n    html_content = f\"\"\"<!DOCTYPE html>\n<html>\n<head>\n    <title>ML Dataset Visualization</title>\n    <style>\n        body {{\n            font-family: sans-serif;\n            margin: 0;\n            padding: 20px;\n            background: #f5f5f5;\n        }}\n        .container {{\n            max-width: 1200px;\n            margin: 0 auto;\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n        }}\n        h1 {{\n            color: #333;\n            text-align: center;\n        }}\n        .info {{\n            background: #e3f2fd;\n            padding: 15px;\n            border-radius: 4px;\n            margin: 20px 0;\n        }}\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>ü§ñ ML Model Training Datasets Visualization</h1>\n        <div class=\"info\">\n            <strong>Total Dataset: 2000 samples</strong><br>\n            ‚Ä¢ Career Recommendation: 800 samples (40%)<br>\n            ‚Ä¢ Study Suggestions: 500 samples (25%)<br>\n            ‚Ä¢ Question Classification: 500 samples (25%)<br>\n            ‚Ä¢ Difficulty Prediction: 200 samples (10%)<br><br>\n            All datasets are saved as .pkl files in <code>ml_model/saved_models/</code>\n        </div>\n        <img src=\"dataset_visualization.svg\" alt=\"Dataset Visualization\" style=\"width: 100%; height: auto;\">\n    </div>\n</body>\n</html>\n\"\"\"\n    \n    html_file = Path(\"ml_model/dataset_visualization.html\")\n    with open(html_file, \"w\", encoding=\"utf-8\") as f:\n        f.write(html_content)\n    \n    print(f\"‚úÖ HTML viewer saved to: {html_file}\")\n    print(\"\\nDataset Breakdown (Total: 2000 samples):\")\n    print(\"  ‚Ä¢ Career Recommendation: 800 samples (40%) ‚Üí gradient_boosting.pkl, random_forest.pkl\")\n    print(\"  ‚Ä¢ Study Suggestions: 500 samples (25%) ‚Üí study_suggester.pkl\")\n    print(\"  ‚Ä¢ Question Classification: 500 samples (25%) ‚Üí question_classifier.pkl\")\n    print(\"  ‚Ä¢ Difficulty Prediction: 200 samples (10%) ‚Üí difficulty_predictor.pkl\")\n","path":null,"size_bytes":11091,"size_tokens":null},"ml_model/generate_synthetic_data.py":{"content":"\nimport csv\nimport random\nimport numpy as np\n\n# Career paths and their typical patterns\nCAREER_PATTERNS = {\n    \"frontend\": {\n        \"interests\": {\"visual\": (3, 5), \"web\": (4, 5), \"mobile\": (2, 4)},\n        \"performance\": {\"frontend_perf\": (0.7, 0.95), \"backend_perf\": (0.4, 0.6)},\n    },\n    \"backend\": {\n        \"interests\": {\"backend\": (4, 5), \"data\": (3, 4), \"cloud\": (3, 4)},\n        \"performance\": {\"backend_perf\": (0.75, 0.95), \"data_perf\": (0.6, 0.8)},\n    },\n    \"data\": {\n        \"interests\": {\"data\": (4, 5), \"math\": (4, 5), \"backend\": (3, 4)},\n        \"performance\": {\"data_perf\": (0.8, 0.95), \"algo_perf\": (0.7, 0.9)},\n    },\n    \"cloud\": {\n        \"interests\": {\"cloud\": (4, 5), \"backend\": (3, 4), \"security\": (3, 4)},\n        \"performance\": {\"backend_perf\": (0.65, 0.85), \"data_perf\": (0.6, 0.75)},\n    },\n    \"mobile\": {\n        \"interests\": {\"mobile\": (4, 5), \"visual\": (4, 5), \"web\": (3, 4)},\n        \"performance\": {\"frontend_perf\": (0.8, 0.95), \"backend_perf\": (0.45, 0.6)},\n    },\n    \"security\": {\n        \"interests\": {\"security\": (4, 5), \"backend\": (3, 4), \"math\": (3, 4)},\n        \"performance\": {\"backend_perf\": (0.6, 0.8), \"algo_perf\": (0.7, 0.85)},\n    },\n    \"fullstack\": {\n        \"interests\": {\"web\": (4, 5), \"backend\": (4, 5), \"visual\": (3, 4)},\n        \"performance\": {\"frontend_perf\": (0.75, 0.9), \"backend_perf\": (0.7, 0.9)},\n    },\n}\n\ndef generate_user_data(career_path, user_id):\n    \"\"\"Generate synthetic user data for a specific career path\"\"\"\n    pattern = CAREER_PATTERNS[career_path]\n    \n    # Level correlates with XP and badges\n    level = random.randint(1, 25)\n    xp = level * 100 + random.randint(-50, 200)\n    badges = max(0, level // 3 + random.randint(-1, 2))\n    \n    # Quiz and code scores\n    quiz_score = round(random.uniform(0.55, 0.95), 2)\n    code_score = round(random.uniform(0.45, 0.90), 2)\n    \n    # Study time correlates with level\n    study_time = level * 20 + random.randint(-50, 100)\n    \n    # Interest scores (1-5 scale)\n    interests = {\n        \"visual\": random.randint(1, 5),\n        \"backend\": random.randint(1, 5),\n        \"math\": random.randint(1, 5),\n        \"web\": random.randint(1, 5),\n        \"data\": random.randint(1, 5),\n        \"cloud\": random.randint(1, 5),\n        \"mobile\": random.randint(1, 5),\n        \"security\": random.randint(1, 5),\n    }\n    \n    # Apply career-specific interest patterns\n    for interest, (min_val, max_val) in pattern.get(\"interests\", {}).items():\n        interests[interest] = random.randint(min_val, max_val)\n    \n    # Performance scores (0-1 scale)\n    performance = {\n        \"frontend_perf\": round(random.uniform(0.4, 0.7), 2),\n        \"backend_perf\": round(random.uniform(0.4, 0.7), 2),\n        \"data_perf\": round(random.uniform(0.4, 0.7), 2),\n        \"algo_perf\": round(random.uniform(0.5, 0.8), 2),\n    }\n    \n    # Apply career-specific performance patterns\n    for perf, (min_val, max_val) in pattern.get(\"performance\", {}).items():\n        performance[perf] = round(random.uniform(min_val, max_val), 2)\n    \n    return [\n        level, xp, badges, quiz_score, code_score, study_time,\n        interests[\"visual\"], interests[\"backend\"], interests[\"math\"], interests[\"web\"],\n        interests[\"data\"], interests[\"cloud\"], interests[\"mobile\"], interests[\"security\"],\n        performance[\"frontend_perf\"], performance[\"backend_perf\"],\n        performance[\"data_perf\"], performance[\"algo_perf\"],\n        career_path\n    ]\n\n# Generate 2000 samples with balanced distribution\nsamples = []\ncareers = list(CAREER_PATTERNS.keys())\nsamples_per_career = 2000 // len(careers)\nremainder = 2000 % len(careers)\n\nfor i, career in enumerate(careers):\n    count = samples_per_career + (1 if i < remainder else 0)\n    for j in range(count):\n        samples.append(generate_user_data(career, len(samples)))\n\n# Shuffle to avoid sequential patterns\nrandom.shuffle(samples)\n\n# Write to CSV\nwith open(\"ml_model/synthetic_data_2000.csv\", \"w\", newline=\"\") as f:\n    writer = csv.writer(f)\n    writer.writerow([\n        \"level\", \"xp\", \"badges\", \"quiz_score\", \"code_challenge_score\", \"study_time\",\n        \"interest_visual\", \"interest_backend\", \"interest_math\", \"interest_web\",\n        \"interest_data\", \"interest_cloud\", \"interest_mobile\", \"interest_security\",\n        \"frontend_perf\", \"backend_perf\", \"data_perf\", \"algo_perf\", \"career_path\"\n    ])\n    writer.writerows(samples)\n\nprint(f\"‚úÖ Generated 2000 synthetic training samples\")\nprint(f\"Distribution: {samples_per_career} samples per career path\")\n","path":null,"size_bytes":4497,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"joblib>=1.5.2\",\n    \"numpy>=2.3.5\",\n    \"scikit-learn>=1.7.2\",\n]\n","path":null,"size_bytes":212,"size_tokens":null},"client/src/components/SearchInput.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Input } from \"@/components/ui/input\";\nimport { Search } from \"lucide-react\";\n\nexport default function SearchInput() {\n  const [query, setQuery] = useState(\"\");\n  const [, setLocation] = useLocation();\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (query.trim().length >= 2) {\n      setLocation(`/search?q=${encodeURIComponent(query.trim())}`);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSearch} className=\"relative w-64\">\n      <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n      <Input\n        type=\"text\"\n        placeholder=\"Search...\"\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n        className=\"pl-10\"\n        data-testid=\"input-search\"\n      />\n    </form>\n  );\n}","path":null,"size_bytes":891,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"client/src/pages/Modules.tsx":{"content":"\nimport { useEffect, useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport { BookOpen, CheckCircle2, Lock, PlayCircle, Trophy, ArrowLeft, FileText, X } from \"lucide-react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\ninterface Lesson {\n  id: string;\n  title: string;\n  description: string;\n  content: string;\n  xpReward: number;\n  order: number;\n  requiredLevel?: number;\n  estimatedTime: string;\n  pdfUrl?: string;\n}\n\ninterface Module {\n  id: string;\n  title: string;\n  description: string;\n  careerPath: string;\n  order: number;\n  lessons: Lesson[];\n  totalXP: number;\n  requiredLevel?: number;\n}\n\ninterface UserProgress {\n  completedLessons: string[];\n  completedModules: string[];\n}\n\nexport default function Modules() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const [userProgress, setUserProgress] = useState<UserProgress>({\n    completedLessons: [],\n    completedModules: []\n  });\n  const [selectedLesson, setSelectedLesson] = useState<Lesson | null>(null);\n  const [selectedModule, setSelectedModule] = useState<Module | null>(null);\n  const [isLessonModalOpen, setIsLessonModalOpen] = useState(false);\n  const [completingLesson, setCompletingLesson] = useState(false);\n\n  // Fetch modules using useQuery for cache invalidation support\n  // staleTime: 0 ensures fresh data is always fetched (no caching beyond invalidation)\n  const { data: modulesData, isLoading: loading, error: modulesError, refetch: refetchModules } = useQuery<{ modules: Module[] }>({\n    queryKey: [\"/api/modules\"],\n    staleTime: 0,\n    refetchOnMount: 'always',\n  });\n\n  const modules = modulesData?.modules || [];\n\n  useEffect(() => {\n    if (modulesError) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: \"Failed to load modules\"\n      });\n    }\n  }, [modulesError, toast]);\n\n  useEffect(() => {\n    fetchUserProgress();\n  }, []);\n\n  const fetchUserProgress = async () => {\n    try {\n      const response = await fetch(\"/api/users/me/progress\", {\n        credentials: \"include\",\n        headers: {\n          'Cache-Control': 'no-cache, no-store, must-revalidate',\n          'Pragma': 'no-cache',\n          'Expires': '0'\n        }\n      });\n\n      if (!response.ok) throw new Error(\"Failed to fetch progress\");\n\n      const data = await response.json();\n      setUserProgress(data.progress || { completedLessons: [], completedModules: [] });\n    } catch (error: any) {\n      console.error(\"Failed to load user progress:\", error);\n    }\n  };\n\n  const calculateModuleProgress = (module: Module) => {\n    const completed = module.lessons.filter(lesson => \n      userProgress.completedLessons.includes(lesson.id)\n    ).length;\n    return (completed / module.lessons.length) * 100;\n  };\n\n  const isModuleLocked = (module: Module) => {\n    if (!module.requiredLevel) return false;\n    return (user?.level || 0) < module.requiredLevel;\n  };\n\n  const isLessonLocked = (lesson: Lesson) => {\n    if (!lesson.requiredLevel) return false;\n    return (user?.level || 0) < lesson.requiredLevel;\n  };\n\n  const handleOpenLesson = (lesson: Lesson, module: Module) => {\n    setSelectedLesson(lesson);\n    setSelectedModule(module);\n    setIsLessonModalOpen(true);\n  };\n\n  const handleCloseLesson = () => {\n    setIsLessonModalOpen(false);\n    // Delay clearing state to avoid flicker during close animation\n    setTimeout(() => {\n      setSelectedLesson(null);\n      setSelectedModule(null);\n    }, 200);\n  };\n\n  const handleModalOpenChange = (open: boolean) => {\n    if (open) {\n      setIsLessonModalOpen(true);\n    } else {\n      handleCloseLesson();\n    }\n  };\n\n  const completeLessonMutation = useMutation({\n    mutationFn: async (lessonId: string) => {\n      return apiRequest(\"POST\", `/api/lessons/${lessonId}/complete`, {});\n    },\n    onSuccess: async () => {\n      toast({\n        title: \"Lesson Complete!\",\n        description: `You earned ${selectedLesson?.xpReward || 0} XP!`,\n      });\n\n      // Refresh progress and modules cache immediately\n      await fetchUserProgress();\n      await queryClient.invalidateQueries({ queryKey: [\"/api/modules\"] });\n      await queryClient.refetchQueries({ queryKey: [\"/api/modules\"] });\n      await refetchModules();\n      handleCloseLesson();\n    },\n    onError: (error: any) => {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: error.message || \"Failed to mark lesson as complete\"\n      });\n    },\n  });\n\n  const handleCompleteLesson = async () => {\n    if (!selectedLesson) return;\n    completeLessonMutation.mutate(selectedLesson.id);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"flex items-center justify-center min-h-[400px]\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n            <p className=\"text-muted-foreground\">Loading modules...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"mb-8\">\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => setLocation(\"/dashboard\")}\n          className=\"mb-4 gap-2\"\n          data-testid=\"button-back-to-dashboard\"\n        >\n          <ArrowLeft className=\"w-4 h-4\" />\n          Back to Dashboard\n        </Button>\n        <h1 className=\"text-4xl font-bold mb-2\">Learning Modules</h1>\n        <p className=\"text-muted-foreground\">\n          Progress through structured lessons to master your career path\n        </p>\n      </div>\n\n      {modules.length === 0 ? (\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <BookOpen className=\"w-16 h-16 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold mb-2\">No Modules Available</h3>\n            <p className=\"text-muted-foreground mb-4\">\n              Modules for your career path will appear here once they're created.\n            </p>\n            <Button onClick={() => setLocation(\"/career-paths\")}>\n              View Career Paths\n            </Button>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-6\">\n          {modules.map((module) => {\n            const progress = calculateModuleProgress(module);\n            const locked = isModuleLocked(module);\n            const completed = userProgress.completedModules.includes(module.id);\n\n            return (\n              <Card key={module.id} className={locked ? \"opacity-60\" : \"\"}>\n                <CardHeader>\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <CardTitle className=\"text-2xl\">{module.title}</CardTitle>\n                        {completed && (\n                          <Badge variant=\"default\" className=\"bg-green-500\">\n                            <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                            Completed\n                          </Badge>\n                        )}\n                        {locked && (\n                          <Badge variant=\"secondary\">\n                            <Lock className=\"w-3 h-3 mr-1\" />\n                            Level {module.requiredLevel} Required\n                          </Badge>\n                        )}\n                      </div>\n                      <CardDescription>{module.description}</CardDescription>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n                        <Trophy className=\"w-4 h-4\" />\n                        {module.totalXP} XP\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"mt-4\">\n                    <div className=\"flex items-center justify-between text-sm mb-2\">\n                      <span className=\"text-muted-foreground\">Progress</span>\n                      <span className=\"font-medium\">{Math.round(progress)}%</span>\n                    </div>\n                    <Progress value={progress} />\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {module.lessons.map((lesson) => {\n                      const lessonCompleted = userProgress.completedLessons.includes(lesson.id);\n                      const lessonLocked = locked || isLessonLocked(lesson);\n\n                      return (\n                        <div\n                          key={lesson.id}\n                          className={`flex items-center justify-between p-4 rounded-lg border ${\n                            lessonLocked ? \"bg-muted/50\" : \"bg-card hover:bg-accent/50\"\n                          } transition-colors`}\n                        >\n                          <div className=\"flex items-center gap-4 flex-1\">\n                            <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\n                              lessonCompleted ? \"bg-green-500 text-white\" : lessonLocked ? \"bg-muted\" : \"bg-primary/10\"\n                            }`}>\n                              {lessonCompleted ? (\n                                <CheckCircle2 className=\"w-5 h-5\" />\n                              ) : lessonLocked ? (\n                                <Lock className=\"w-5 h-5\" />\n                              ) : (\n                                <PlayCircle className=\"w-5 h-5\" />\n                              )}\n                            </div>\n                            <div className=\"flex-1\">\n                              <h4 className=\"font-semibold\">{lesson.title}</h4>\n                              <p className=\"text-sm text-muted-foreground\">{lesson.description}</p>\n                              <div className=\"flex items-center gap-4 mt-1 text-xs text-muted-foreground\">\n                                <span>{lesson.estimatedTime}</span>\n                                <span>‚Ä¢</span>\n                                <span>{lesson.xpReward} XP</span>\n                                {lesson.requiredLevel && (\n                                  <>\n                                    <span>‚Ä¢</span>\n                                    <span>Level {lesson.requiredLevel}+</span>\n                                  </>\n                                )}\n                              </div>\n                            </div>\n                          </div>\n                          <Button\n                            variant={lessonCompleted ? \"outline\" : \"default\"}\n                            size=\"sm\"\n                            disabled={lessonLocked}\n                            onClick={() => handleOpenLesson(lesson, module)}\n                            data-testid={`button-start-lesson-${lesson.id}`}\n                          >\n                            {lessonCompleted ? \"Review\" : \"Start\"}\n                          </Button>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Lesson Modal */}\n      <Dialog open={isLessonModalOpen} onOpenChange={handleModalOpenChange}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\n          <DialogHeader>\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"text-sm text-muted-foreground mb-1 flex items-center gap-2\">\n                  <BookOpen className=\"w-4 h-4\" />\n                  {selectedModule?.title}\n                </div>\n                <DialogTitle className=\"text-2xl\">{selectedLesson?.title}</DialogTitle>\n                <DialogDescription>\n                  {selectedLesson?.description}\n                </DialogDescription>\n              </div>\n            </div>\n          </DialogHeader>\n          \n          <div className=\"flex-1 overflow-y-auto px-1\">\n            {selectedLesson?.pdfUrl ? (\n              <div className=\"flex flex-col items-center justify-center h-full gap-6 p-8 text-center\">\n                <div className=\"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center\">\n                  <FileText className=\"w-10 h-10 text-primary\" />\n                </div>\n                <div>\n                  <h3 className=\"text-xl font-semibold mb-2\">PDF Lesson Ready</h3>\n                  <p className=\"text-muted-foreground max-w-md\">\n                    This lesson is in PDF format. Click below to open it in a new tab and view it with your browser's built-in PDF viewer.\n                  </p>\n                </div>\n                <div className=\"flex gap-3\">\n                  <Button\n                    onClick={() => selectedLesson.pdfUrl && window.open(selectedLesson.pdfUrl, '_blank')}\n                    size=\"lg\"\n                    data-testid=\"button-open-pdf-new-tab\"\n                  >\n                    <FileText className=\"w-5 h-5 mr-2\" />\n                    Open PDF in New Tab\n                  </Button>\n                  <Button\n                    onClick={() => {\n                      if (!selectedLesson.pdfUrl) return;\n                      const link = document.createElement('a');\n                      link.href = selectedLesson.pdfUrl;\n                      link.download = `${selectedLesson.title}.pdf`;\n                      link.click();\n                    }}\n                    variant=\"outline\"\n                    size=\"lg\"\n                    data-testid=\"button-download-pdf\"\n                  >\n                    <FileText className=\"w-5 h-5 mr-2\" />\n                    Download PDF\n                  </Button>\n                </div>\n              </div>\n            ) : (\n              <div \n                className=\"prose prose-sm max-w-none dark:prose-invert\"\n                dangerouslySetInnerHTML={{ __html: selectedLesson?.content || '' }}\n              />\n            )}\n          </div>\n\n          <div className=\"border-t pt-4 mt-4 flex items-center justify-between\">\n            <div className=\"text-sm text-muted-foreground\">\n              Earn <span className=\"font-semibold text-primary\">{selectedLesson?.xpReward} XP</span> upon completion\n            </div>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"outline\"\n                onClick={handleCloseLesson}\n                data-testid=\"button-cancel-lesson\"\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={handleCompleteLesson}\n                disabled={completeLessonMutation.isPending || userProgress.completedLessons.includes(selectedLesson?.id || '')}\n                data-testid=\"button-complete-lesson\"\n              >\n                <CheckCircle2 className=\"w-4 h-4 mr-2\" />\n                {completeLessonMutation.isPending ? \"Completing...\" : userProgress.completedLessons.includes(selectedLesson?.id || '') ? \"Completed\" : \"Mark as Complete\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","path":null,"size_bytes":15961,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface ProgressProps\n  extends React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root> {\n  indicatorClassName?: string\n}\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  ProgressProps\n>(({ className, value, indicatorClassName, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className={cn(\"h-full w-full flex-1 bg-primary transition-all\", indicatorClassName)}\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":927,"size_tokens":null},"client/src/components/ConfirmationDialog.tsx":{"content":"import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { AlertTriangle, Loader2 } from \"lucide-react\";\nimport type { ReactNode } from \"react\";\n\ninterface ConfirmationDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onConfirm: () => void;\n  title: string;\n  description: string;\n  confirmText?: string;\n  cancelText?: string;\n  icon?: ReactNode;\n  variant?: \"destructive\" | \"default\";\n  isLoading?: boolean;\n}\n\nexport default function ConfirmationDialog({ \n  open, \n  onOpenChange, \n  onConfirm,\n  title,\n  description,\n  confirmText = \"Continue\",\n  cancelText = \"Cancel\",\n  icon,\n  variant = \"destructive\",\n  isLoading = false\n}: ConfirmationDialogProps) {\n  const handleConfirm = () => {\n    if (!isLoading) {\n      onConfirm();\n    }\n  };\n\n  return (\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\n      <AlertDialogContent data-testid=\"dialog-confirmation\">\n        <AlertDialogHeader>\n          <div className=\"flex items-center gap-3 mb-2\">\n            <div className={`w-12 h-12 rounded-full flex items-center justify-center ${\n              variant === \"destructive\" \n                ? \"bg-destructive/10\" \n                : \"bg-primary/10\"\n            }`}>\n              {icon || <AlertTriangle className={`w-6 h-6 ${\n                variant === \"destructive\" \n                  ? \"text-destructive\" \n                  : \"text-primary\"\n              }`} />}\n            </div>\n            <AlertDialogTitle className=\"text-xl\">{title}</AlertDialogTitle>\n          </div>\n          <AlertDialogDescription className=\"text-base\">\n            {description}\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel \n            disabled={isLoading}\n            data-testid=\"button-cancel-confirmation\"\n          >\n            {cancelText}\n          </AlertDialogCancel>\n          <AlertDialogAction \n            onClick={handleConfirm}\n            disabled={isLoading}\n            className={variant === \"destructive\" \n              ? \"bg-destructive text-destructive-foreground hover:bg-destructive/90\" \n              : \"\"\n            }\n            data-testid=\"button-confirm-action\"\n          >\n            {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n            {confirmText}\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}\n","path":null,"size_bytes":2587,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"test_ml_service.py":{"content":"\n#!/usr/bin/env python3\n\"\"\"\nTest script to verify ML service is working correctly\n\"\"\"\n\nimport subprocess\nimport json\n\ndef test_ml_service(command, data):\n    \"\"\"Test the ML prediction service\"\"\"\n    request = json.dumps({\n        \"command\": command,\n        \"data\": data\n    })\n    \n    try:\n        result = subprocess.run(\n            [\"python3\", \"ml_model/prediction_service.py\", request],\n            capture_output=True,\n            text=True,\n            timeout=30\n        )\n        \n        if result.returncode != 0:\n            print(f\"‚ùå Error: {result.stderr}\")\n            return None\n            \n        response = json.loads(result.stdout)\n        return response\n    except Exception as e:\n        print(f\"‚ùå Exception: {e}\")\n        return None\n\n# Test 1: Health Check\nprint(\"=\" * 60)\nprint(\"TEST 1: Health Check\")\nprint(\"=\" * 60)\nresult = test_ml_service(\"health_check\", {})\nif result and result.get(\"success\"):\n    print(\"‚úÖ ML Service is healthy!\")\n    print(f\"   Models loaded: {result['result']['models_loaded']}\")\n    print(f\"   Question bank size: {result['result']['question_bank_size']}\")\n    print(f\"   Using ML: {result['result']['using_ml']}\")\n    print(f\"   Available ML models: {result['result']['ml_models_available']}\")\nelse:\n    print(\"‚ùå Health check failed\")\n\n# Test 2: Generate Quiz\nprint(\"\\n\" + \"=\" * 60)\nprint(\"TEST 2: Generate Practice Quiz (Frontend, Medium)\")\nprint(\"=\" * 60)\nresult = test_ml_service(\"generate_quiz\", {\n    \"career_path\": \"frontend\",\n    \"difficulty\": \"medium\",\n    \"category\": \"frontend\",\n    \"level\": 10,\n    \"count\": 5\n})\n\nif result and result.get(\"success\"):\n    questions = result.get(\"result\", [])\n    print(f\"‚úÖ Generated {len(questions)} questions\")\n    for i, q in enumerate(questions[:2], 1):  # Show first 2 questions\n        print(f\"\\n   Question {i}:\")\n        print(f\"   Q: {q['question']}\")\n        print(f\"   Category: {q['category']} | Difficulty: {q['difficulty']}\")\n        print(f\"   Options: {q['options']}\")\n        print(f\"   Correct: {q['correctAnswer']}\")\nelse:\n    print(\"‚ùå Quiz generation failed\")\n\n# Test 3: Career Recommendation\nprint(\"\\n\" + \"=\" * 60)\nprint(\"TEST 3: Career Path Recommendation\")\nprint(\"=\" * 60)\nresult = test_ml_service(\"recommend_career\", {\n    \"visual_design\": 4,\n    \"backend_pref\": 2,\n    \"math_stats\": 3,\n    \"web_apps\": 4,\n    \"data_interest\": 2,\n    \"cloud_interest\": 3,\n    \"mobile_interest\": 2,\n    \"security_interest\": 2,\n    \"frontend_perf\": 0.8,\n    \"backend_perf\": 0.5,\n    \"data_perf\": 0.6,\n    \"algo_perf\": 0.7\n})\n\nif result and result.get(\"success\"):\n    rec = result.get(\"result\", {})\n    print(f\"‚úÖ Recommended Path: {rec.get('recommended_path')}\")\n    print(f\"   Confidence: {rec.get('confidence', 0):.1%}\")\n    print(\"   Probabilities:\")\n    for path, prob in rec.get('probabilities', {}).items():\n        print(f\"      {path}: {prob:.1%}\")\nelse:\n    print(\"‚ùå Career recommendation failed\")\n\n# Test 4: Study Suggestions\nprint(\"\\n\" + \"=\" * 60)\nprint(\"TEST 4: Study Suggestions\")\nprint(\"=\" * 60)\nresult = test_ml_service(\"suggest_study\", {\n    \"level\": 10,\n    \"career_path\": \"fullstack\",\n    \"frontend_score\": 0.7,\n    \"backend_score\": 0.5,\n    \"data_score\": 0.4,\n    \"algo_score\": 0.6,\n    \"security_score\": 0.3,\n    \"weak_categories\": [\"security\", \"data\"]\n})\n\nif result and result.get(\"success\"):\n    suggestions = result.get(\"result\", [])\n    print(f\"‚úÖ Generated {len(suggestions)} study suggestions\")\n    for i, s in enumerate(suggestions, 1):\n        print(f\"\\n   {i}. {s['topic']} (Priority: {s['priority']})\")\n        print(f\"      Reason: {s['reason']}\")\n        print(f\"      Action: {s['recommendedAction']}\")\nelse:\n    print(\"‚ùå Study suggestions failed\")\n\n# Test 5: Question Classification\nprint(\"\\n\" + \"=\" * 60)\nprint(\"TEST 5: Question Classification\")\nprint(\"=\" * 60)\nresult = test_ml_service(\"classify_question\", {\n    \"text\": \"What is the time complexity of binary search?\"\n})\n\nif result and result.get(\"success\"):\n    classification = result.get(\"result\", {})\n    print(f\"‚úÖ Classified as: {classification.get('category')}\")\n    print(f\"   Confidence: {classification.get('confidence', 0):.1%}\")\nelse:\n    print(\"‚ùå Question classification failed\")\n\nprint(\"\\n\" + \"=\" * 60)\nprint(\"TESTS COMPLETE\")\nprint(\"=\" * 60)\n","path":null,"size_bytes":4270,"size_tokens":null},"client/src/components/NotificationBell.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Bell } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { useLocation } from \"wouter\";\n\ninterface Notification {\n  id: string;\n  userId: string;\n  type: \"level_up\" | \"badge_earned\" | \"challenge_complete\" | \"streak\" | \"system\";\n  title: string;\n  message: string;\n  read: boolean;\n  createdAt: Date;\n  metadata?: Record<string, any>;\n}\n\nexport default function NotificationBell() {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [open, setOpen] = useState(false);\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    fetchNotifications();\n    const interval = setInterval(fetchNotifications, 60000); // Poll every minute\n    return () => clearInterval(interval);\n  }, []);\n\n  const fetchNotifications = async () => {\n    try {\n      const response = await fetch(\"/api/notifications\", {\n        credentials: \"include\"\n      });\n\n      if (!response.ok) {\n        // Silently fail if notifications aren't available yet\n        return;\n      }\n\n      const data = await response.json();\n      const notifs = (data.notifications || []).map((n: any) => ({\n        ...n,\n        createdAt: new Date(n.createdAt)\n      }));\n\n      setNotifications(notifs);\n      setUnreadCount(notifs.filter((n: Notification) => !n.read).length);\n    } catch (error) {\n      // Silently fail\n      console.error(\"Failed to fetch notifications:\", error);\n    }\n  };\n\n  const markAsRead = async (notificationId: string) => {\n    try {\n      await fetch(`/api/notifications/${notificationId}/read`, {\n        method: \"POST\",\n        credentials: \"include\"\n      });\n\n      setNotifications(prev =>\n        prev.map(n => n.id === notificationId ? { ...n, read: true } : n)\n      );\n      setUnreadCount(prev => Math.max(0, prev - 1));\n    } catch (error) {\n      console.error(\"Failed to mark notification as read:\", error);\n    }\n  };\n\n  const markAllAsReadMutation = useMutation({\n    mutationFn: () => fetch(\"/api/notifications/mark-all-read\", {\n        method: \"POST\",\n        credentials: \"include\"\n      }),\n    onSuccess: () => {\n      setNotifications(prev => prev.map(n => ({ ...n, read: true })));\n      setUnreadCount(0);\n    },\n    onError: () => {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: \"Failed to mark all as read\"\n      });\n    }\n  });\n\n  const handleNotificationClick = (notification: Notification) => {\n    // Mark as read\n    markAsRead(notification.id);\n\n    // Navigate if there's an action\n    if (notification.metadata?.action === \"interest-assessment\") {\n      setLocation(\"/interest-assessment\");\n      setOpen(false);\n    }\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case \"level_up\":\n        return \"üéâ\";\n      case \"badge_earned\":\n        return \"üèÜ\";\n      case \"challenge_complete\":\n        return \"‚úÖ\";\n      case \"streak\":\n        return \"üî•\";\n      default:\n        return \"üì¢\";\n    }\n  };\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" className=\"relative\">\n          <Bell className=\"h-5 w-5\" />\n          {unreadCount > 0 && (\n            <Badge\n              variant=\"destructive\"\n              className=\"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs\"\n            >\n              {unreadCount > 9 ? \"9+\" : unreadCount}\n            </Badge>\n          )}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-80 p-0\" align=\"end\">\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h3 className=\"font-semibold\">Notifications</h3>\n          {unreadCount > 0 && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => markAllAsReadMutation.mutate()}\n              className=\"text-xs\"\n            >\n              Mark all read\n            </Button>\n          )}\n        </div>\n        <ScrollArea className=\"h-[400px]\">\n          {notifications.length === 0 ? (\n            <div className=\"p-8 text-center text-muted-foreground\">\n              <Bell className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n              <p>No notifications yet</p>\n            </div>\n          ) : (\n            <div className=\"divide-y\">\n              {notifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  className={`p-4 hover:bg-accent cursor-pointer transition-colors ${\n                    !notification.read ? \"bg-accent/50\" : \"\"\n                  }`}\n                  onClick={() => handleNotificationClick(notification)}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"text-2xl\">{getNotificationIcon(notification.type)}</div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center justify-between mb-1\">\n                        <p className=\"font-semibold text-sm\">{notification.title}</p>\n                        {!notification.read && (\n                          <div className=\"w-2 h-2 rounded-full bg-primary flex-shrink-0\" />\n                        )}\n                      </div>\n                      <p className=\"text-sm text-muted-foreground\">{notification.message}</p>\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        {formatDistanceToNow(notification.createdAt, { addSuffix: true })}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </ScrollArea>\n      </PopoverContent>\n    </Popover>\n  );\n}","path":null,"size_bytes":6240,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport session from \"express-session\";\nimport memorystore from \"memorystore\";\nimport passport from \"passport\";\nimport helmet from \"helmet\"; // Import helmet\nimport rateLimit from \"express-rate-limit\"; // Import express-rate-limit\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport \"./auth\"; // Initialize passport strategies\nimport \"./firebase\"; // Initialize Firebase\nimport { storage } from \"./storage-firestore\";\n\nconst app = express();\n\n// Trust proxy - required for rate limiting behind reverse proxy (Replit)\napp.set('trust proxy', 1);\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\n\n// Session configuration (using in-memory store for Firebase setup)\n// Use Memorystore as a more robust in-memory store (reduces in-process eviction)\nconst MemoryStore = memorystore(session);\n\napp.use(session({\n  store: new MemoryStore({\n    checkPeriod: 86400000 // prune expired entries every 24 hours\n  }),\n  secret: process.env.SESSION_SECRET || \"careerquest-firebase-session\",\n  resave: false,\n  saveUninitialized: false,\n  // Refresh cookie expiry on each response to keep active sessions alive\n  rolling: true,\n  cookie: {\n    secure: process.env.NODE_ENV === \"production\",\n    httpOnly: true,\n    sameSite: 'lax',\n    maxAge: 1000 * 60 * 60 * 24 * 7 // 7 days\n  }\n}));\n\n\n// Passport middleware\napp.use(passport.initialize());\napp.use(passport.session());\n\n// Security middleware\napp.use(helmet({\n  contentSecurityPolicy: false, // Disable for Vite dev\n}));\n\n// Rate limiting\nconst limiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: parseInt(process.env.RATE_LIMIT || '100', 10), // Limit each IP (configurable)\n  message: \"Too many requests from this IP, please try again later.\",\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\n// Helper to skip rate limiting for certain safe endpoints or authenticated users\nfunction shouldSkipRateLimit(req: any) {\n  try {\n    const safePaths = new Set([\n      '/api/auth/me',\n      '/api/users/me/badges',\n      '/api/notifications',\n      '/api/badges',\n      '/api/users/me/progress',\n      '/api/study-suggestions'\n    ]);\n\n    if (safePaths.has(req.path)) return true;\n    if (typeof req.isAuthenticated === 'function' && req.isAuthenticated()) return true;\n  } catch (err) {\n    // ignore\n  }\n  return false;\n}\n\nconst authLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000,\n  max: parseInt(process.env.AUTH_RATE_LIMIT || '100', 10), // configurable\n  message: \"Too many authentication attempts, please try again later.\",\n  standardHeaders: true,\n  legacyHeaders: false,\n  skip: shouldSkipRateLimit,\n});\n\nif (app.get('env') === 'development') {\n  console.log('[RATE LIMIT] Development environment detected ‚Äî skipping global API limiter');\n} else {\n  // Apply global limiter but allow skipping for safe endpoints\n  app.use(\"/api/\", rateLimit({\n    ...limiter,\n    skip: shouldSkipRateLimit,\n  }));\n  app.use(\"/api/auth/login\", authLimiter);\n  app.use(\"/api/auth/register\", authLimiter);\n}\n\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"‚Ä¶\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n  \n  // Initialize badge definitions in Firestore\n  await storage.seedBadges();\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();","path":null,"size_bytes":5129,"size_tokens":null},"server/seed-firestore.ts":{"content":"import { storage } from \"./storage-firestore\";\nimport type { InsertCareerPath, InsertBadge, InsertQuiz, InsertQuestion, InsertCodeChallenge } from \"@shared/schema\";\nimport { hashPassword } from \"./auth\";\n\nasync function seedFirestore() {\n  console.log(\"üå± Starting Firestore seed...\");\n\n  try {\n    // 1. Create Career Paths\n    console.log(\"Creating career paths...\");\n    const careerPaths: InsertCareerPath[] = [\n      {\n        name: \"Full Stack Development\",\n        description: \"Master both frontend and backend technologies to build complete web applications\",\n        color: \"#6366f1\",\n        icon: \"Code2\",\n        progressionRanks: [\"Junior Full Stack\", \"Mid-Level Full Stack\", \"Senior Full Stack\", \"Lead Engineer\"],\n        requiredSkills: [\"JavaScript\", \"React\", \"Node.js\", \"Databases\", \"REST APIs\", \"Git\"],\n      },\n      {\n        name: \"Data Science & AI\",\n        description: \"Analyze data, build machine learning models, and create intelligent systems\",\n        color: \"#8b5cf6\",\n        icon: \"Database\",\n        progressionRanks: [\"Junior Data Analyst\", \"Data Scientist\", \"Senior ML Engineer\", \"AI Research Lead\"],\n        requiredSkills: [\"Python\", \"Statistics\", \"Machine Learning\", \"SQL\", \"Data Visualization\", \"Deep Learning\"],\n      },\n      {\n        name: \"Cloud & DevOps\",\n        description: \"Design scalable infrastructure and automate deployment pipelines\",\n        color: \"#06b6d4\",\n        icon: \"Cloud\",\n        progressionRanks: [\"Junior DevOps\", \"Cloud Engineer\", \"Senior DevOps\", \"Infrastructure Architect\"],\n        requiredSkills: [\"Docker\", \"Kubernetes\", \"CI/CD\", \"AWS/Azure\", \"Linux\", \"Terraform\"],\n      },\n      {\n        name: \"Mobile Development\",\n        description: \"Create native and cross-platform mobile applications\",\n        color: \"#10b981\",\n        icon: \"Smartphone\",\n        progressionRanks: [\"Junior Mobile Dev\", \"Mobile Developer\", \"Senior Mobile Dev\", \"Mobile Architect\"],\n        requiredSkills: [\"React Native\", \"Swift/Kotlin\", \"Mobile UI/UX\", \"API Integration\", \"App Store Deployment\"],\n      },\n      {\n        name: \"Cybersecurity\",\n        description: \"Protect systems, networks, and data from cyber threats\",\n        color: \"#ef4444\",\n        icon: \"Shield\",\n        progressionRanks: [\"Security Analyst\", \"Security Engineer\", \"Senior Security Engineer\", \"Security Architect\"],\n        requiredSkills: [\"Network Security\", \"Cryptography\", \"Penetration Testing\", \"Security Compliance\", \"Incident Response\"],\n      },\n    ];\n\n    const createdPaths = [];\n    for (const path of careerPaths) {\n      const created = await storage.createCareerPath(path);\n      createdPaths.push(created);\n      console.log(`‚úì Created career path: ${created.name}`);\n    }\n\n    // 2. Create Badges\n    console.log(\"\\nCreating badges...\");\n    const badges: InsertBadge[] = [\n      { name: \"First Steps\", description: \"Complete your first quiz\", icon: \"Award\", rarity: \"common\", requirement: \"Complete 1 quiz\" },\n      { name: \"Quiz Master\", description: \"Score 100% on any quiz\", icon: \"Trophy\", rarity: \"rare\", requirement: \"Perfect score\" },\n      { name: \"Code Warrior\", description: \"Complete 10 code challenges\", icon: \"Code2\", rarity: \"epic\", requirement: \"10 code challenges\" },\n      { name: \"Week Warrior\", description: \"Maintain a 7-day streak\", icon: \"Flame\", rarity: \"rare\", requirement: \"7-day streak\" },\n      { name: \"Month Master\", description: \"Maintain a 30-day streak\", icon: \"Star\", rarity: \"legendary\", requirement: \"30-day streak\" },\n      { name: \"Level 10\", description: \"Reach level 10\", icon: \"Zap\", rarity: \"common\", requirement: \"Level 10\" },\n      { name: \"Level 20\", description: \"Reach level 20\", icon: \"Rocket\", rarity: \"rare\", requirement: \"Level 20\" },\n      { name: \"Path Finder\", description: \"Complete interest assessment\", icon: \"Shield\", rarity: \"epic\", requirement: \"Interest assessment\" },\n    ];\n\n    for (const badge of badges) {\n      await storage.createBadge(badge);\n      console.log(`‚úì Created badge: ${badge.name}`);\n    }\n\n    // 3. Create Quizzes for each career path\n    console.log(\"\\nCreating quizzes...\");\n\n    const fullStackPath = createdPaths.find(p => p.name === \"Full Stack Development\");\n    const dataPath = createdPaths.find(p => p.name === \"Data Science & AI\");\n\n    if (fullStackPath) {\n      const fullStackQuizzes: InsertQuiz[] = [\n        {\n          title: \"JavaScript Fundamentals\",\n          description: \"Test your knowledge of core JavaScript concepts\",\n          difficulty: \"beginner\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 1,\n          xpReward: 100,\n          timeLimit: 600,\n          isFinalAssessment: false,\n        },\n        {\n          title: \"React Basics\",\n          description: \"Learn React components and hooks\",\n          difficulty: \"intermediate\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 5,\n          xpReward: 200,\n          timeLimit: 900,\n          isFinalAssessment: false,\n        },\n        {\n          title: \"Node.js & Express\",\n          description: \"Backend development with Node.js\",\n          difficulty: \"intermediate\",\n          careerPathId: fullStackPath.id,\n          requiredLevel: 8,\n          xpReward: 250,\n          timeLimit: 1200,\n          isFinalAssessment: false,\n        },\n      ];\n\n      for (const quiz of fullStackQuizzes) {\n        const createdQuiz = await storage.createQuiz(quiz);\n        console.log(`‚úì Created quiz: ${createdQuiz.title}`);\n\n        // Add questions to each quiz\n        const questions: InsertQuestion[] = [\n          {\n            quizId: createdQuiz.id,\n            questionText: \"What is the correct way to declare a variable in JavaScript?\",\n            questionType: \"multiple-choice\",\n            options: [\"var x = 5\", \"let x = 5\", \"const x = 5\", \"All of the above\"],\n            correctAnswer: \"All of the above\",\n            explanation: \"JavaScript supports var, let, and const for variable declaration\",\n            category: \"frontend\",\n          },\n          {\n            quizId: createdQuiz.id,\n            questionText: \"Which method is used to add an element to the end of an array?\",\n            questionType: \"multiple-choice\",\n            options: [\"push()\", \"pop()\", \"shift()\", \"unshift()\"],\n            correctAnswer: \"push()\",\n            explanation: \"push() adds elements to the end of an array\",\n            category: \"frontend\",\n          },\n          {\n            quizId: createdQuiz.id,\n            questionText: \"What does === operator do in JavaScript?\",\n            questionType: \"multiple-choice\",\n            options: [\"Compares values only\", \"Compares types only\", \"Compares both value and type\", \"Assigns a value\"],\n            correctAnswer: \"Compares both value and type\",\n            explanation: \"=== is the strict equality operator that checks both value and type\",\n            category: \"frontend\",\n          },\n        ];\n\n        await storage.createQuestions(questions);\n        console.log(`  ‚úì Added ${questions.length} questions`);\n      }\n    }\n\n    if (dataPath) {\n      const dataQuizzes: InsertQuiz[] = [\n        {\n          title: \"Python for Data Science\",\n          description: \"Essential Python concepts for data analysis\",\n          difficulty: \"beginner\",\n          careerPathId: dataPath.id,\n          requiredLevel: 1,\n          xpReward: 100,\n          timeLimit: 600,\n          isFinalAssessment: false,\n        },\n        {\n          title: \"Statistics Fundamentals\",\n          description: \"Core statistical concepts for data science\",\n          difficulty: \"intermediate\",\n          careerPathId: dataPath.id,\n          requiredLevel: 5,\n          xpReward: 200,\n          timeLimit: 900,\n          isFinalAssessment: false,\n        },\n      ];\n\n      for (const quiz of dataQuizzes) {\n        const createdQuiz = await storage.createQuiz(quiz);\n        console.log(`‚úì Created quiz: ${createdQuiz.title}`);\n\n        const questions: InsertQuestion[] = [\n          {\n            quizId: createdQuiz.id,\n            questionText: \"Which library is commonly used for data manipulation in Python?\",\n            questionType: \"multiple-choice\",\n            options: [\"NumPy\", \"Pandas\", \"Matplotlib\", \"Scikit-learn\"],\n            correctAnswer: \"Pandas\",\n            explanation: \"Pandas is the primary library for data manipulation in Python\",\n            category: \"data\",\n          },\n          {\n            quizId: createdQuiz.id,\n            questionText: \"What does SQL stand for?\",\n            questionType: \"multiple-choice\",\n            options: [\"Structured Query Language\", \"Simple Query Language\", \"Standard Query Language\", \"Sequential Query Language\"],\n            correctAnswer: \"Structured Query Language\",\n            explanation: \"SQL is Structured Query Language for database management\",\n            category: \"data\",\n          },\n        ];\n\n        await storage.createQuestions(questions);\n        console.log(`  ‚úì Added ${questions.length} questions`);\n      }\n    }\n\n    // 4. Create Code Challenges\n    console.log(\"\\nCreating code challenges...\");\n    const codeChallenges: InsertCodeChallenge[] = [\n      {\n        title: \"FizzBuzz\",\n        description: \"Print numbers 1-100, but for multiples of 3 print 'Fizz', multiples of 5 print 'Buzz', and multiples of both print 'FizzBuzz'\",\n        difficulty: \"easy\",\n        careerPathId: fullStackPath?.id,\n        requiredLevel: 1,\n        xpReward: 150,\n        starterCode: \"function fizzBuzz(n) {\\n  // Your code here\\n}\",\n        testCases: [\n          { input: \"15\", expectedOutput: \"FizzBuzz\" },\n          { input: \"9\", expectedOutput: \"Fizz\" },\n          { input: \"10\", expectedOutput: \"Buzz\" },\n          { input: \"7\", expectedOutput: \"7\" },\n        ],\n        supportedLanguages: [\"javascript\", \"python\", \"java\", \"cpp\"],\n      },\n      {\n        title: \"Reverse String\",\n        description: \"Write a function that reverses a string\",\n        difficulty: \"easy\",\n        careerPathId: fullStackPath?.id,\n        requiredLevel: 1,\n        xpReward: 120,\n        starterCode: \"function reverseString(str) {\\n  // Your code here\\n}\",\n        testCases: [\n          { input: \"hello\", expectedOutput: \"olleh\" },\n          { input: \"world\", expectedOutput: \"dlrow\" },\n          { input: \"12345\", expectedOutput: \"54321\" },\n        ],\n        supportedLanguages: [\"javascript\", \"python\", \"java\", \"cpp\"],\n      },\n      {\n        title: \"Palindrome Checker\",\n        description: \"Check if a string is a palindrome (reads the same forwards and backwards)\",\n        difficulty: \"medium\",\n        careerPathId: fullStackPath?.id,\n        requiredLevel: 3,\n        xpReward: 200,\n        starterCode: \"function isPalindrome(str) {\\n  // Your code here\\n}\",\n        testCases: [\n          { input: \"racecar\", expectedOutput: \"true\" },\n          { input: \"hello\", expectedOutput: \"false\" },\n          { input: \"A man a plan a canal Panama\", expectedOutput: \"true\" },\n        ],\n        supportedLanguages: [\"javascript\", \"python\", \"java\", \"cpp\"],\n      },\n    ];\n\n    for (const challenge of codeChallenges) {\n      await storage.createCodeChallenge(challenge);\n      console.log(`‚úì Created code challenge: ${challenge.title}`);\n    }\n\n    // 5. Create Modules and Lessons\n    console.log(\"\\nCreating modules and lessons...\");\n    \n    // General Modules (for all paths, levels 1-20)\n    const generalModules = [\n      {\n        title: \"Programming Fundamentals\",\n        description: \"Learn the basics of programming, variables, and control flow\",\n        careerPath: null,\n        requiredLevel: 1,\n        order: 1,\n        lessons: [\n          { title: \"Introduction to Programming\", content: \"What is programming? Understanding computers and code.\", type: \"theory\" as const, xpReward: 50 },\n          { title: \"Variables and Data Types\", content: \"Learn about storing and manipulating data.\", type: \"theory\" as const, xpReward: 50 },\n          { title: \"Control Flow: If/Else\", content: \"Making decisions in code with conditional statements.\", type: \"practice\" as const, xpReward: 75 },\n          { title: \"Loops and Iteration\", content: \"Repeating actions with for and while loops.\", type: \"practice\" as const, xpReward: 75 },\n        ]\n      },\n      {\n        title: \"Data Structures Basics\",\n        description: \"Understanding arrays, objects, and basic data organization\",\n        careerPath: null,\n        requiredLevel: 3,\n        order: 2,\n        lessons: [\n          { title: \"Arrays and Lists\", content: \"Storing collections of data efficiently.\", type: \"theory\" as const, xpReward: 60 },\n          { title: \"Objects and Maps\", content: \"Key-value pairs and structured data.\", type: \"theory\" as const, xpReward: 60 },\n          { title: \"Stacks and Queues\", content: \"LIFO and FIFO data structures.\", type: \"practice\" as const, xpReward: 80 },\n        ]\n      },\n      {\n        title: \"Algorithm Fundamentals\",\n        description: \"Learn basic algorithms and problem-solving strategies\",\n        careerPath: null,\n        requiredLevel: 5,\n        order: 3,\n        lessons: [\n          { title: \"Searching Algorithms\", content: \"Linear and binary search techniques.\", type: \"theory\" as const, xpReward: 70 },\n          { title: \"Sorting Algorithms\", content: \"Bubble sort, selection sort, and quick sort.\", type: \"practice\" as const, xpReward: 90 },\n          { title: \"Big O Notation\", content: \"Understanding time and space complexity.\", type: \"theory\" as const, xpReward: 60 },\n        ]\n      },\n      {\n        title: \"Object-Oriented Programming\",\n        description: \"Master classes, objects, and OOP principles\",\n        careerPath: null,\n        requiredLevel: 8,\n        order: 4,\n        lessons: [\n          { title: \"Classes and Objects\", content: \"Creating blueprints for objects.\", type: \"theory\" as const, xpReward: 70 },\n          { title: \"Inheritance and Polymorphism\", content: \"Reusing code through inheritance.\", type: \"practice\" as const, xpReward: 85 },\n          { title: \"Encapsulation and Abstraction\", content: \"Hiding complexity and protecting data.\", type: \"theory\" as const, xpReward: 65 },\n        ]\n      },\n      {\n        title: \"Version Control with Git\",\n        description: \"Learn Git and collaborative development workflows\",\n        careerPath: null,\n        requiredLevel: 10,\n        order: 5,\n        lessons: [\n          { title: \"Git Basics\", content: \"Commits, branches, and repositories.\", type: \"theory\" as const, xpReward: 60 },\n          { title: \"Branching and Merging\", content: \"Working with feature branches and pull requests.\", type: \"practice\" as const, xpReward: 80 },\n          { title: \"Collaboration Workflows\", content: \"Team development with Git.\", type: \"theory\" as const, xpReward: 55 },\n        ]\n      },\n    ];\n\n    for (const moduleData of generalModules) {\n      const { lessons, ...moduleInfo } = moduleData;\n      const module = await storage.createModule(moduleInfo);\n      console.log(`‚úì Created module: ${module.title}`);\n      \n      for (let i = 0; i < lessons.length; i++) {\n        await storage.createLesson({\n          moduleId: module.id,\n          ...lessons[i],\n          order: i + 1,\n        });\n      }\n      console.log(`  Added ${lessons.length} lessons`);\n    }\n\n    // Full Stack Development Modules\n    if (fullStackPath) {\n      const fullStackModules = [\n        {\n          title: \"Frontend Web Development\",\n          description: \"HTML, CSS, and JavaScript for building user interfaces\",\n          careerPath: fullStackPath.id,\n          requiredLevel: 12,\n          order: 6,\n          lessons: [\n            { title: \"HTML5 Fundamentals\", content: \"Semantic HTML and document structure.\", type: \"theory\" as const, xpReward: 70 },\n            { title: \"CSS Styling and Layout\", content: \"Flexbox, Grid, and responsive design.\", type: \"practice\" as const, xpReward: 90 },\n            { title: \"JavaScript DOM Manipulation\", content: \"Interacting with web pages dynamically.\", type: \"practice\" as const, xpReward: 95 },\n            { title: \"Modern JavaScript (ES6+)\", content: \"Arrow functions, async/await, and modules.\", type: \"theory\" as const, xpReward: 75 },\n          ]\n        },\n        {\n          title: \"React Development\",\n          description: \"Building modern UIs with React and hooks\",\n          careerPath: fullStackPath.id,\n          requiredLevel: 15,\n          order: 7,\n          lessons: [\n            { title: \"React Components\", content: \"Function and class components.\", type: \"theory\" as const, xpReward: 80 },\n            { title: \"State and Props\", content: \"Managing component data and passing information.\", type: \"practice\" as const, xpReward: 100 },\n            { title: \"React Hooks\", content: \"useState, useEffect, and custom hooks.\", type: \"practice\" as const, xpReward: 110 },\n            { title: \"React Router\", content: \"Client-side routing and navigation.\", type: \"practice\" as const, xpReward: 90 },\n          ]\n        },\n        {\n          title: \"Backend with Node.js\",\n          description: \"Server-side JavaScript and API development\",\n          careerPath: fullStackPath.id,\n          requiredLevel: 18,\n          order: 8,\n          lessons: [\n            { title: \"Node.js Fundamentals\", content: \"Event loop, modules, and npm.\", type: \"theory\" as const, xpReward: 85 },\n            { title: \"Express.js Framework\", content: \"Building REST APIs with Express.\", type: \"practice\" as const, xpReward: 120 },\n            { title: \"Database Integration\", content: \"SQL and NoSQL databases.\", type: \"practice\" as const, xpReward: 130 },\n            { title: \"Authentication & Security\", content: \"JWT, sessions, and secure APIs.\", type: \"theory\" as const, xpReward: 100 },\n          ]\n        },\n        {\n          title: \"Full Stack Project\",\n          description: \"Build a complete web application from scratch\",\n          careerPath: fullStackPath.id,\n          requiredLevel: 22,\n          order: 9,\n          lessons: [\n            { title: \"Project Planning\", content: \"Requirements, architecture, and design.\", type: \"theory\" as const, xpReward: 90 },\n            { title: \"Frontend Implementation\", content: \"Building the user interface.\", type: \"practice\" as const, xpReward: 150 },\n            { title: \"Backend Implementation\", content: \"Creating the API and database.\", type: \"practice\" as const, xpReward: 150 },\n            { title: \"Deployment and Testing\", content: \"Deploying to production.\", type: \"practice\" as const, xpReward: 120 },\n          ]\n        },\n      ];\n\n      for (const moduleData of fullStackModules) {\n        const { lessons, ...moduleInfo } = moduleData;\n        const module = await storage.createModule(moduleInfo);\n        console.log(`‚úì Created Full Stack module: ${module.title}`);\n        \n        for (let i = 0; i < lessons.length; i++) {\n          await storage.createLesson({\n            moduleId: module.id,\n            ...lessons[i],\n            order: i + 1,\n          });\n        }\n        console.log(`  Added ${lessons.length} lessons`);\n      }\n    }\n\n    // Data Science & AI Modules\n    if (dataPath) {\n      const dataModules = [\n        {\n          title: \"Python for Data Science\",\n          description: \"Master Python libraries for data analysis\",\n          careerPath: dataPath.id,\n          requiredLevel: 12,\n          order: 6,\n          lessons: [\n            { title: \"NumPy Fundamentals\", content: \"Arrays and numerical computing.\", type: \"theory\" as const, xpReward: 80 },\n            { title: \"Pandas for Data Manipulation\", content: \"DataFrames and data processing.\", type: \"practice\" as const, xpReward: 100 },\n            { title: \"Data Visualization with Matplotlib\", content: \"Creating charts and graphs.\", type: \"practice\" as const, xpReward: 90 },\n          ]\n        },\n        {\n          title: \"Statistics and Probability\",\n          description: \"Essential math for data science\",\n          careerPath: dataPath.id,\n          requiredLevel: 15,\n          order: 7,\n          lessons: [\n            { title: \"Descriptive Statistics\", content: \"Mean, median, mode, and variance.\", type: \"theory\" as const, xpReward: 75 },\n            { title: \"Probability Theory\", content: \"Distributions and probability rules.\", type: \"theory\" as const, xpReward: 85 },\n            { title: \"Hypothesis Testing\", content: \"Statistical significance and p-values.\", type: \"practice\" as const, xpReward: 110 },\n          ]\n        },\n        {\n          title: \"Machine Learning Basics\",\n          description: \"Introduction to ML algorithms and models\",\n          careerPath: dataPath.id,\n          requiredLevel: 18,\n          order: 8,\n          lessons: [\n            { title: \"Supervised vs Unsupervised Learning\", content: \"Types of ML problems.\", type: \"theory\" as const, xpReward: 90 },\n            { title: \"Linear Regression\", content: \"Predicting continuous values.\", type: \"practice\" as const, xpReward: 120 },\n            { title: \"Classification Algorithms\", content: \"Decision trees and logistic regression.\", type: \"practice\" as const, xpReward: 130 },\n            { title: \"Model Evaluation\", content: \"Accuracy, precision, recall, and F1 score.\", type: \"theory\" as const, xpReward: 95 },\n          ]\n        },\n        {\n          title: \"Deep Learning with Neural Networks\",\n          description: \"Advanced AI with deep learning\",\n          careerPath: dataPath.id,\n          requiredLevel: 22,\n          order: 9,\n          lessons: [\n            { title: \"Neural Network Fundamentals\", content: \"Layers, neurons, and activation functions.\", type: \"theory\" as const, xpReward: 100 },\n            { title: \"Training Neural Networks\", content: \"Backpropagation and gradient descent.\", type: \"practice\" as const, xpReward: 140 },\n            { title: \"Convolutional Neural Networks\", content: \"Image recognition and computer vision.\", type: \"practice\" as const, xpReward: 150 },\n          ]\n        },\n      ];\n\n      for (const moduleData of dataModules) {\n        const { lessons, ...moduleInfo } = moduleData;\n        const module = await storage.createModule(moduleInfo);\n        console.log(`‚úì Created Data Science module: ${module.title}`);\n        \n        for (let i = 0; i < lessons.length; i++) {\n          await storage.createLesson({\n            moduleId: module.id,\n            ...lessons[i],\n            order: i + 1,\n          });\n        }\n        console.log(`  Added ${lessons.length} lessons`);\n      }\n    }\n\n    // Cloud & DevOps Modules\n    const cloudPath = createdPaths.find(p => p.name === \"Cloud & DevOps\");\n    if (cloudPath) {\n      const cloudModules = [\n        {\n          title: \"Linux Fundamentals\",\n          description: \"Master the Linux command line and system administration\",\n          careerPath: cloudPath.id,\n          requiredLevel: 12,\n          order: 6,\n          lessons: [\n            { title: \"Linux File System\", content: \"Understanding directories and permissions.\", type: \"theory\" as const, xpReward: 70 },\n            { title: \"Command Line Basics\", content: \"Essential Linux commands and navigation.\", type: \"practice\" as const, xpReward: 85 },\n            { title: \"Process Management\", content: \"Managing running processes and services.\", type: \"practice\" as const, xpReward: 90 },\n          ]\n        },\n        {\n          title: \"Docker and Containerization\",\n          description: \"Package applications in containers\",\n          careerPath: cloudPath.id,\n          requiredLevel: 15,\n          order: 7,\n          lessons: [\n            { title: \"Docker Fundamentals\", content: \"Images, containers, and Docker architecture.\", type: \"theory\" as const, xpReward: 90 },\n            { title: \"Creating Dockerfiles\", content: \"Building custom container images.\", type: \"practice\" as const, xpReward: 110 },\n            { title: \"Docker Compose\", content: \"Multi-container applications.\", type: \"practice\" as const, xpReward: 120 },\n          ]\n        },\n        {\n          title: \"CI/CD Pipelines\",\n          description: \"Automate testing and deployment\",\n          careerPath: cloudPath.id,\n          requiredLevel: 18,\n          order: 8,\n          lessons: [\n            { title: \"Continuous Integration Basics\", content: \"Automated testing and builds.\", type: \"theory\" as const, xpReward: 85 },\n            { title: \"GitHub Actions\", content: \"Creating CI/CD workflows.\", type: \"practice\" as const, xpReward: 130 },\n            { title: \"Deployment Strategies\", content: \"Blue-green and canary deployments.\", type: \"theory\" as const, xpReward: 95 },\n          ]\n        },\n        {\n          title: \"Kubernetes and Orchestration\",\n          description: \"Manage containerized applications at scale\",\n          careerPath: cloudPath.id,\n          requiredLevel: 22,\n          order: 9,\n          lessons: [\n            { title: \"Kubernetes Architecture\", content: \"Pods, nodes, and clusters.\", type: \"theory\" as const, xpReward: 100 },\n            { title: \"Deploying to Kubernetes\", content: \"Deployments and services.\", type: \"practice\" as const, xpReward: 150 },\n            { title: \"Scaling and Load Balancing\", content: \"Auto-scaling and high availability.\", type: \"practice\" as const, xpReward: 140 },\n          ]\n        },\n      ];\n\n      for (const moduleData of cloudModules) {\n        const { lessons, ...moduleInfo } = moduleData;\n        const module = await storage.createModule(moduleInfo);\n        console.log(`‚úì Created Cloud & DevOps module: ${module.title}`);\n        \n        for (let i = 0; i < lessons.length; i++) {\n          await storage.createLesson({\n            moduleId: module.id,\n            ...lessons[i],\n            order: i + 1,\n          });\n        }\n        console.log(`  Added ${lessons.length} lessons`);\n      }\n    }\n\n    // Mobile Development Modules\n    const mobilePath = createdPaths.find(p => p.name === \"Mobile Development\");\n    if (mobilePath) {\n      const mobileModules = [\n        {\n          title: \"Mobile UI/UX Basics\",\n          description: \"Design principles for mobile applications\",\n          careerPath: mobilePath.id,\n          requiredLevel: 12,\n          order: 6,\n          lessons: [\n            { title: \"Mobile Design Patterns\", content: \"Common UI patterns for mobile apps.\", type: \"theory\" as const, xpReward: 75 },\n            { title: \"Responsive Layouts\", content: \"Adapting to different screen sizes.\", type: \"practice\" as const, xpReward: 90 },\n            { title: \"Touch Interactions\", content: \"Gestures and touch events.\", type: \"practice\" as const, xpReward: 85 },\n          ]\n        },\n        {\n          title: \"React Native Development\",\n          description: \"Build cross-platform mobile apps with React Native\",\n          careerPath: mobilePath.id,\n          requiredLevel: 15,\n          order: 7,\n          lessons: [\n            { title: \"React Native Basics\", content: \"Components and navigation.\", type: \"theory\" as const, xpReward: 90 },\n            { title: \"Native Modules\", content: \"Accessing device features.\", type: \"practice\" as const, xpReward: 110 },\n            { title: \"State Management in Mobile\", content: \"Redux and Context API.\", type: \"practice\" as const, xpReward: 120 },\n          ]\n        },\n        {\n          title: \"Native iOS Development\",\n          description: \"Build iOS apps with Swift\",\n          careerPath: mobilePath.id,\n          requiredLevel: 18,\n          order: 8,\n          lessons: [\n            { title: \"Swift Programming\", content: \"Swift syntax and fundamentals.\", type: \"theory\" as const, xpReward: 95 },\n            { title: \"UIKit and SwiftUI\", content: \"Building iOS user interfaces.\", type: \"practice\" as const, xpReward: 130 },\n            { title: \"iOS App Architecture\", content: \"MVC and MVVM patterns.\", type: \"theory\" as const, xpReward: 100 },\n          ]\n        },\n        {\n          title: \"App Store Deployment\",\n          description: \"Publishing mobile apps to app stores\",\n          careerPath: mobilePath.id,\n          requiredLevel: 22,\n          order: 9,\n          lessons: [\n            { title: \"App Store Guidelines\", content: \"Apple and Google submission requirements.\", type: \"theory\" as const, xpReward: 85 },\n            { title: \"App Testing and QA\", content: \"Testing on real devices.\", type: \"practice\" as const, xpReward: 120 },\n            { title: \"Release Management\", content: \"Versioning and updates.\", type: \"practice\" as const, xpReward: 110 },\n          ]\n        },\n      ];\n\n      for (const moduleData of mobileModules) {\n        const { lessons, ...moduleInfo } = moduleData;\n        const module = await storage.createModule(moduleInfo);\n        console.log(`‚úì Created Mobile Development module: ${module.title}`);\n        \n        for (let i = 0; i < lessons.length; i++) {\n          await storage.createLesson({\n            moduleId: module.id,\n            ...lessons[i],\n            order: i + 1,\n          });\n        }\n        console.log(`  Added ${lessons.length} lessons`);\n      }\n    }\n\n    // Cybersecurity Modules\n    const securityPath = createdPaths.find(p => p.name === \"Cybersecurity\");\n    if (securityPath) {\n      const securityModules = [\n        {\n          title: \"Network Security Fundamentals\",\n          description: \"Secure networks and prevent attacks\",\n          careerPath: securityPath.id,\n          requiredLevel: 12,\n          order: 6,\n          lessons: [\n            { title: \"Network Protocols\", content: \"TCP/IP, HTTP, and DNS.\", type: \"theory\" as const, xpReward: 80 },\n            { title: \"Firewalls and VPNs\", content: \"Network security devices.\", type: \"theory\" as const, xpReward: 90 },\n            { title: \"Network Scanning\", content: \"Tools like nmap and Wireshark.\", type: \"practice\" as const, xpReward: 100 },\n          ]\n        },\n        {\n          title: \"Web Application Security\",\n          description: \"Protect web apps from common vulnerabilities\",\n          careerPath: securityPath.id,\n          requiredLevel: 15,\n          order: 7,\n          lessons: [\n            { title: \"OWASP Top 10\", content: \"Common web vulnerabilities.\", type: \"theory\" as const, xpReward: 95 },\n            { title: \"SQL Injection\", content: \"Understanding and preventing SQL attacks.\", type: \"practice\" as const, xpReward: 120 },\n            { title: \"XSS and CSRF\", content: \"Cross-site scripting and request forgery.\", type: \"practice\" as const, xpReward: 115 },\n          ]\n        },\n        {\n          title: \"Penetration Testing\",\n          description: \"Ethical hacking and security testing\",\n          careerPath: securityPath.id,\n          requiredLevel: 18,\n          order: 8,\n          lessons: [\n            { title: \"Reconnaissance Techniques\", content: \"Information gathering and footprinting.\", type: \"theory\" as const, xpReward: 90 },\n            { title: \"Vulnerability Scanning\", content: \"Using automated tools.\", type: \"practice\" as const, xpReward: 130 },\n            { title: \"Exploitation Basics\", content: \"Metasploit and exploit frameworks.\", type: \"practice\" as const, xpReward: 140 },\n          ]\n        },\n        {\n          title: \"Incident Response & Forensics\",\n          description: \"Handle security breaches and analyze evidence\",\n          careerPath: securityPath.id,\n          requiredLevel: 22,\n          order: 9,\n          lessons: [\n            { title: \"Incident Response Plan\", content: \"Preparation and response procedures.\", type: \"theory\" as const, xpReward: 100 },\n            { title: \"Digital Forensics\", content: \"Evidence collection and analysis.\", type: \"practice\" as const, xpReward: 140 },\n            { title: \"Malware Analysis\", content: \"Identifying and analyzing malicious software.\", type: \"practice\" as const, xpReward: 150 },\n          ]\n        },\n      ];\n\n      for (const moduleData of securityModules) {\n        const { lessons, ...moduleInfo } = moduleData;\n        const module = await storage.createModule(moduleInfo);\n        console.log(`‚úì Created Cybersecurity module: ${module.title}`);\n        \n        for (let i = 0; i < lessons.length; i++) {\n          await storage.createLesson({\n            moduleId: module.id,\n            ...lessons[i],\n            order: i + 1,\n          });\n        }\n        console.log(`  Added ${lessons.length} lessons`);\n      }\n    }\n\n    // 6. Create sample users and award badges (retaining original intent for users)\n    console.log(\"\\nCreating test users...\");\n    const testUser = await storage.createUser({\n      username: \"testuser\",\n      email: \"test@careerquest.com\",\n      password: await hashPassword(\"password123\"),\n      displayName: \"Test User\",\n      pathSelectionMode: \"ai-guided\",\n      currentCareerPathId: null,\n    });\n\n    // TODO: Award some badges to test user after implementing getBadgeByName method\n    // For now, badges are awarded automatically based on achievements\n\n    const adminUser = await storage.createUser({\n      username: \"admin\",\n      email: \"admin@careerquest.com\",\n      password: await hashPassword(\"admin123\"),\n      displayName: \"Admin User\",\n      pathSelectionMode: \"manual\",\n      currentCareerPathId: fullStackPath?.id,\n    });\n    await storage.updateUser(adminUser.id, { isAdmin: true, level: 25, totalXp: 25000, xp: 0 });\n    console.log(`‚úì Created admin user: ${adminUser.username}`);\n    console.log(`   - test@careerquest.com / password123`);\n    console.log(`   - admin@careerquest.com / admin123 (Admin)`);\n\n\n    console.log(\"\\n‚úÖ Firestore seed completed successfully!\");\n  } catch (error) {\n    console.error(\"‚ùå Seed failed:\", error);\n    throw error;\n  }\n}\n\n// Run seed if called directly\nif (require.main === module) {\n  seedFirestore()\n    .then(() => process.exit(0))\n    .catch((error) => {\n      console.error(error);\n      process.exit(1);\n    });\n}\n\nexport { seedFirestore };","path":null,"size_bytes":33814,"size_tokens":null},"client/src/components/CareerRecommendationModal.tsx":{"content":"import { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Sparkles, Zap, Brain, Target, Rocket, CheckCircle } from \"lucide-react\";\n\ninterface CareerRecommendationModalProps {\n  open: boolean;\n  onClose: () => void;\n  careerPath: any;\n  usedTrainedModel?: boolean;\n  modelSource?: string;\n}\n\nexport default function CareerRecommendationModal({\n  open,\n  onClose,\n  careerPath,\n  usedTrainedModel = false,\n  modelSource = \"ML Model\",\n}: CareerRecommendationModalProps) {\n  if (!careerPath) return null;\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader className=\"space-y-2\">\n          <div className=\"flex items-center gap-2\">\n            <Sparkles className=\"w-5 h-5 text-primary\" />\n            <DialogTitle className=\"text-2xl font-bold\">Your Career Path Recommendation</DialogTitle>\n          </div>\n        </DialogHeader>\n\n        <div className=\"space-y-6 py-4\">\n          {/* Main Recommendation Card */}\n          <Card className=\"bg-gradient-to-br from-primary/10 to-primary/5 border-primary/30 p-6\">\n            <div className=\"space-y-4\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"space-y-1\">\n                  <p className=\"text-xs font-medium text-primary/70 uppercase tracking-wider\">Recommended Path</p>\n                  <h2 className=\"text-3xl font-bold text-primary\">{careerPath.name}</h2>\n                </div>\n                <div className=\"flex-shrink-0\">\n                  <div className=\"w-12 h-12 rounded-lg bg-primary/20 flex items-center justify-center\">\n                    <Rocket className=\"w-6 h-6 text-primary\" />\n                  </div>\n                </div>\n              </div>\n              <p className=\"text-base text-muted-foreground\">{careerPath.description}</p>\n            </div>\n          </Card>\n\n          {/* Trained Model Indicator */}\n          {usedTrainedModel && (\n            <Card className=\"bg-green-500/10 border-green-500/30 p-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center\">\n                  <Brain className=\"w-5 h-5 text-green-600\" />\n                </div>\n                <div>\n                  <p className=\"font-semibold text-green-700 dark:text-green-400 text-sm\">Trained ML Model Used</p>\n                  <p className=\"text-xs text-green-600/80 dark:text-green-500/80\">{modelSource}</p>\n                  <p className=\"text-xs text-muted-foreground mt-0.5\">This recommendation was generated using our trained Scikit-Learn model (NOT OpenAI)</p>\n                </div>\n              </div>\n            </Card>\n          )}\n\n          {/* How You Were Matched */}\n          <div className=\"space-y-3\">\n            <h3 className=\"font-semibold text-base flex items-center gap-2\">\n              <Brain className=\"w-5 h-5 text-primary\" />\n              How You Were Matched\n            </h3>\n            <div className=\"space-y-2\">\n              <div className=\"p-3 rounded-lg bg-primary/5 border border-primary/20\">\n                <div className=\"flex items-start gap-3\">\n                  <CheckCircle className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">{usedTrainedModel ? \"Trained ML Model Analysis\" : \"AI-Powered Analysis\"}</p>\n                    <p className=\"text-xs text-muted-foreground mt-1\">\n                      {usedTrainedModel \n                        ? \"Our locally trained Random Forest classifier analyzed your interest assessment responses and academic performance to find your perfect match.\"\n                        : \"Our machine learning algorithm analyzed your interest assessment responses and academic performance to find your perfect match.\"}\n                    </p>\n                  </div>\n                </div>\n              </div>\n              <div className=\"p-3 rounded-lg bg-primary/5 border border-primary/20\">\n                <div className=\"flex items-start gap-3\">\n                  <Target className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">Interest Alignment</p>\n                    <p className=\"text-xs text-muted-foreground mt-1\">\n                      Your responses showed strong preferences for the skills and concepts that define this career path.\n                    </p>\n                  </div>\n                </div>\n              </div>\n              <div className=\"p-3 rounded-lg bg-primary/5 border border-primary/20\">\n                <div className=\"flex items-start gap-3\">\n                  <Zap className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">Personalized for You</p>\n                    <p className=\"text-xs text-muted-foreground mt-1\">\n                      This recommendation is tailored to your learning style and career aspirations.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Progression Path */}\n          {careerPath.progressionRanks && careerPath.progressionRanks.length > 0 && (\n            <div className=\"space-y-3\">\n              <h3 className=\"font-semibold text-base\">Your Career Progression</h3>\n              <div className=\"flex gap-2\">\n                {careerPath.progressionRanks.map((rank: string, idx: number) => (\n                  <div key={idx} className=\"flex-1\">\n                    <div className=\"p-2 rounded-lg bg-primary/10 border border-primary/30 text-center\">\n                      <p className=\"text-xs font-medium text-primary\">{rank}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Required Skills */}\n          {careerPath.requiredSkills && careerPath.requiredSkills.length > 0 && (\n            <div className=\"space-y-3\">\n              <h3 className=\"font-semibold text-base\">Key Skills to Develop</h3>\n              <div className=\"flex flex-wrap gap-2\">\n                {careerPath.requiredSkills.map((skill: string, idx: number) => (\n                  <div\n                    key={idx}\n                    className=\"px-3 py-1.5 rounded-full bg-primary/10 border border-primary/30 text-xs font-medium text-primary\"\n                  >\n                    {skill}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Next Steps */}\n          <Card className=\"bg-primary/5 border-primary/20 p-4\">\n            <h3 className=\"font-semibold text-sm mb-2\">What's Next?</h3>\n            <ul className=\"space-y-1.5 text-xs text-muted-foreground\">\n              <li className=\"flex gap-2\">\n                <span className=\"text-primary font-bold\">‚Üí</span>\n                <span>Access curated learning modules for {careerPath.name}</span>\n              </li>\n              <li className=\"flex gap-2\">\n                <span className=\"text-primary font-bold\">‚Üí</span>\n                <span>Complete daily challenges to build your skills</span>\n              </li>\n              <li className=\"flex gap-2\">\n                <span className=\"text-primary font-bold\">‚Üí</span>\n                <span>Earn badges and unlock advanced content</span>\n              </li>\n            </ul>\n          </Card>\n        </div>\n\n        <div className=\"flex gap-2 pt-4\">\n          <Button onClick={onClose} className=\"flex-1\">\n            Start Learning\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":7917,"size_tokens":null},"client/src/components/ForgotPasswordModal.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2, ArrowLeft, CheckCircle } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface ForgotPasswordModalProps {\n  open: boolean;\n  onClose: () => void;\n  onBackToLogin: () => void;\n}\n\nexport default function ForgotPasswordModal({ open, onClose, onBackToLogin }: ForgotPasswordModalProps) {\n  const [email, setEmail] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await apiRequest(\"POST\", \"/api/auth/forgot-password\", { email });\n      setSubmitted(true);\n      toast({\n        title: \"Email sent!\",\n        description: \"Check your email for a password reset link\",\n      });\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Error\",\n        description: error.message || \"Failed to send reset email\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setEmail(\"\");\n    setSubmitted(false);\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-[480px] p-6\">\n        <DialogHeader className=\"pb-4\">\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={() => {\n                handleClose();\n                onBackToLogin();\n              }}\n              className=\"p-1 hover:bg-muted rounded\"\n              data-testid=\"button-back-to-login\"\n            >\n              <ArrowLeft className=\"w-4 h-4\" />\n            </button>\n            <div>\n              <DialogTitle className=\"text-2xl font-display font-bold\">Reset Password</DialogTitle>\n              <DialogDescription>\n                Enter your email to receive a password reset link\n              </DialogDescription>\n            </div>\n          </div>\n        </DialogHeader>\n\n        {submitted ? (\n          <div className=\"space-y-4 text-center py-8\">\n            <CheckCircle className=\"w-12 h-12 mx-auto text-green-600\" />\n            <div>\n              <h3 className=\"font-semibold text-lg mb-2\">Check your email</h3>\n              <p className=\"text-muted-foreground text-sm\">\n                We've sent a password reset link to <strong>{email}</strong>\n              </p>\n              <p className=\"text-muted-foreground text-sm mt-2\">\n                The link will expire in 1 hour\n              </p>\n            </div>\n            <Button onClick={handleClose} variant=\"outline\" className=\"w-full\">\n              Back to Login\n            </Button>\n          </div>\n        ) : (\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"reset-email\">Email</Label>\n              <Input\n                id=\"reset-email\"\n                type=\"email\"\n                placeholder=\"you@example.com\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                data-testid=\"input-reset-email\"\n              />\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full\"\n              disabled={isLoading || !email}\n              data-testid=\"button-send-reset\"\n            >\n              {isLoading && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n              Send Reset Link\n            </Button>\n          </form>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":3934,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"client/src/components/ThemeToggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useEffect, useState } from \"react\";\n\nexport default function ThemeToggle() {\n  const [theme, setTheme] = useState<\"light\" | \"dark\">(\"light\");\n\n  useEffect(() => {\n    const savedTheme = localStorage.getItem(\"theme\") as \"light\" | \"dark\" | null;\n    const prefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n    const initialTheme = savedTheme || (prefersDark ? \"dark\" : \"light\");\n    \n    setTheme(initialTheme);\n    document.documentElement.classList.toggle(\"dark\", initialTheme === \"dark\");\n  }, []);\n\n  const toggleTheme = () => {\n    const newTheme = theme === \"light\" ? \"dark\" : \"light\";\n    setTheme(newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n    document.documentElement.classList.toggle(\"dark\", newTheme === \"dark\");\n    console.log('Theme toggled to:', newTheme);\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      data-testid=\"button-theme-toggle\"\n    >\n      {theme === \"light\" ? (\n        <Moon className=\"w-5 h-5\" />\n      ) : (\n        <Sun className=\"w-5 h-5\" />\n      )}\n    </Button>\n  );\n}\n","path":null,"size_bytes":1193,"size_tokens":null},"lastsetup.md":{"content":"**Last Setup Guide**\n\nThis document lists the minimal steps to reproduce the development environment and run the project exactly as configured on the original machine. It assumes a Windows laptop (PowerShell) and that you have Git installed.\n\n**Prerequisites:**\n- **Python:** Install Python 3.11 (or 3.10+). Use the official installer and check \"Add Python to PATH\" if you prefer global python commands.\n- **Node.js & npm:** Install Node.js (recommended LTS) which includes `npm`.\n- **Git:** For cloning the repository.\n\n**1. Clone repository**\n\nDownload the project to your laptop:\n\n```powershell\ngit clone <your-repo-url> careerquestprojectFinal\ncd careerquestprojectFinal\n```\n\n**2. Create and activate Python virtual environment**\n\nOpen PowerShell and run:\n\n```powershell\npy -3 -m venv .venv\n.\\.venv\\Scripts\\Activate.ps1\n# or using the py launcher\n# py -3 -m venv .venv\n# . .venv/Scripts/activate\n```\n\nNotes:\n- If `py` isn't available, use the installed `python` executable (e.g. `python -m venv .venv`).\n\n**3. Install Python dependencies for ML service**\n\nInstall the packages used by the ML service (Flask + scikit-learn etc.):\n\n```powershell\npip install -r ml_model/requirements.txt\n```\n\nIf you encounter `numpy` / `scikit-learn` compatibility issues when loading pickled models, use the same versions used originally: for example:\n\n```powershell\npip install --upgrade --force-reinstall scikit-learn==1.3.0 numpy==1.25.3 joblib==1.3.2 scipy\n```\n\nAdjust versions if you re-train models on a different environment.\n\n**4. (Optional) Install global convenience script for PowerShell**\n\nWe created a helper script to make `python3` available in PowerShell and to set PATH if needed.\n\nFile: `scripts/setup_python_windows.ps1`\n\nTo run it (once per machine):\n\n```powershell\nSet-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy RemoteSigned -Force\n.\\scripts\\setup_python_windows.ps1\n# Follow prompts or allow the script to add aliases to your PowerShell profile\n```\n\nThis step is optional ‚Äî you can always use `py -3` or the full path to `python`.\n\n**5. Start the ML Flask service**\n\nFrom the activated virtual environment, run:\n\n```powershell\npython ml_model\\app.py\n# or\npy -3 ml_model\\app.py\n```\n\nThe service listens on `http://127.0.0.1:5001` and exposes two endpoints:\n- `GET /health` ‚Äî basic health check\n- `POST /predict` ‚Äî body: `{ \"command\": \"<task>\", \"data\": { ... } }`\n\nExample `POST /predict` (PowerShell):\n\n```powershell\nInvoke-RestMethod -Uri http://127.0.0.1:5001/predict -Method POST -ContentType 'application/json' -Body '{\"command\":\"generate_quiz\",\"data\":{\"career_path\":\"fullstack\",\"difficulty\":\"medium\",\"level\":10,\"count\":5}}'\n```\n\nWhen requests hit `/predict` you'll see detailed logs in the ML terminal including explicit lines like:\n\n- `‚úÖ Trained model used for ...` or `TRAINED MODEL REQUEST` depending on the flow. These logs are used as proof that the scikit-learn models were used.\n\n**6. Install Node dependencies and start the server & client**\n\nInstall backend and frontend dependencies and run the application:\n\n```powershell\n# From repo root\nnpm install\n\n# Start development servers (this repo uses one command for frontend/backend dev)\nnpm run dev\n```\n\nNotes:\n- Restart the Node server after modifying server-side TypeScript files (e.g., `server/ml-client.ts`).\n- The Node backend expects the ML service at `http://127.0.0.1:5001` by default. You can override with `ML_SERVICE_URL` environment variable.\n\n**7. Files changed / important project items**\n\n- `ml_model/app.py` ‚Äî Flask ML service (run this first).\n- `ml_model/prediction_service.py` ‚Äî ML model loaders and handlers (loads pickles from `ml_model/saved_models`).\n- `ml_model/saved_models/` ‚Äî trained scikit-learn pickles used by the service.\n- `scripts/setup_python_windows.ps1` ‚Äî convenience PowerShell helper for `python3` alias.\n- `server/ml-client.ts` ‚Äî HTTP client used by the Node backend to call the ML service (this must exist and point to `http://127.0.0.1:5001/predict`).\n\n**8. Verify integration (end-to-end checks)**\n\n1. Start ML service (`python ml_model\\app.py`) ‚Äî confirm `GET /health` returns 200:\n\n```powershell\nInvoke-RestMethod -Uri http://127.0.0.1:5001/health\n```\n\n2. Start Node server (`npm run dev`) and log into the app from the browser.\n3. Trigger the following flows and watch the ML terminal for logs:\n  - AI Practice Quiz: generate a practice quiz in the UI and verify ML terminal shows `TRAINED MODEL REQUEST` / `‚úÖ Trained model used ...` when the trained model is used.\n  - Career Assessment (Interest Questionnaire): submit responses and confirm ML terminal printed the `TRAINED MODEL_REQUEST` summary and `TRAINED MODEL USED FOR CAREER ASSESSMENT` when applicable.\n  - Level 20 milestone: reach level 20 (or simulate user data) and confirm ML terminal logs for Level 20 milestone analysis.\n  - Daily Task completion: complete a daily quiz/code challenge and confirm `TRAINED MODEL USED FOR DAILY TASK ANALYSIS` logs.\n\n**9. Running tests (optional)**\n\nThere is a `test_ml_service.py` intended to validate ML logic. It may call Python modules directly ‚Äî prefer updating it to exercise the HTTP API if you want end-to-end verification. Example quick HTTP check (PowerShell):\n\n```powershell\nInvoke-RestMethod -Uri http://127.0.0.1:5001/predict -Method POST -ContentType 'application/json' -Body '{\"command\":\"health_check\"}'\n```\n\n**10. Troubleshooting**\n\n- If you see pickle / import errors about `numpy._core`, reinstall `numpy` and `scikit-learn` matching the versions used when the models were serialized (see step 3).\n- If the Node backend doesn't show ML logs when triggering UI flows, ensure `server/ml-client.ts` exists and the Node process has been restarted so it picks up the new client implementation.\n- If the ML service times out from the Node backend, increase the timeout in `server/ml-client.ts` call or ensure Flask is running and not blocked.\n\n**11. Environment variables**\n\nYou may set the following env vars (optional):\n\n- `ML_SERVICE_URL` ‚Äî override default ML service base URL (default `http://127.0.0.1:5001`).\n- `HUGGINGFACE_API_KEY` ‚Äî if you want to enable HF generation in AI Quiz flows.\n\nSet env vars in PowerShell for the session:\n\n```powershell\n$env:ML_SERVICE_URL = \"http://127.0.0.1:5001\"\n$env:HUGGINGFACE_API_KEY = \"your_key_here\"\n```\n\n--\n\nIf you'd like, I can also:\n- produce a one-line install script for Windows that automates steps 2‚Äì4,\n- update `test_ml_service.py` to hit the HTTP endpoints for automated verification,\n- or create a short checklist you can tick while setting up the other laptop.\n\nTell me which of those you'd like me to deliver next.\n \n---\n\n**Appendix: PowerShell helper script**\n\nBelow is the exact `scripts/setup_python_windows.ps1` helper used in this project. You can copy it into the same path on the new laptop or run it from the repo root with PowerShell.\n\nFile: `scripts/setup_python_windows.ps1`\n\n```powershell\n# Adds persistent `python` and `python3` aliases that call `py -3`, and adds Python install folders to User PATH.\n# Run this from the project root in PowerShell:\n#   powershell -ExecutionPolicy Bypass -File .\\scripts\\setup_python_windows.ps1\n\ntry {\n  $pythonExe = & py -3 -c \"import sys; print(sys.executable)\" 2>$null\n} catch {\n  $pythonExe = $null\n}\n\nif (-not $pythonExe -or $pythonExe -eq \"\") {\n  Write-Error \"Could not locate Python via 'py -3'. Ensure Python is installed and the 'py' launcher is available.\"\n  exit 1\n}\n\n$pythonDir = Split-Path $pythonExe\nWrite-Output \"Detected python.exe at: $pythonExe\"\nWrite-Output \"Python install folder: $pythonDir\"\n\n# Ensure profile exists\nif (-not (Test-Path $PROFILE)) {\n  New-Item -ItemType File -Path $PROFILE -Force | Out-Null\n  Write-Output \"Created PowerShell profile: $PROFILE\"\n}\n\n$profileText = Get-Content $PROFILE -Raw\n$funcPython = \"function python { py -3 @args }\"\n$funcPython3 = \"function python3 { py -3 @args }\"\n\nif ($profileText -notmatch [regex]::Escape($funcPython)) {\n  Add-Content -Path $PROFILE -Value \"`n# Alias to call py -3 as python`n$funcPython`n\"\n  Write-Output \"Added 'python' alias to profile\"\n} else {\n  Write-Output \"'python' alias already present in profile\"\n}\n\nif ($profileText -notmatch [regex]::Escape($funcPython3)) {\n  Add-Content -Path $PROFILE -Value \"`n# Alias to call py -3 as python3`n$funcPython3`n\"\n  Write-Output \"Added 'python3' alias to profile\"\n} else {\n  Write-Output \"'python3' alias already present in profile\"\n}\n\n# Add install folders to User PATH if missing\n$userPath = [Environment]::GetEnvironmentVariable(\"Path\",\"User\")\n$pathsToAdd = @($pythonDir, (Join-Path $pythonDir 'Scripts'))\n$changed = $false\nforeach ($p in $pathsToAdd) {\n  if (-not ($userPath -and ($userPath -split ';' | ForEach-Object { $_.Trim() } | Where-Object { $_ -ne '' } | Where-Object { $_ -ieq $p }))) {\n    $userPath = ($userPath + \";\" + $p).TrimStart(';')\n    Write-Output \"Queued adding to User PATH: $p\"\n    $changed = $true\n  } else {\n    Write-Output \"Already in User PATH: $p\"\n  }\n}\n\nif ($changed) {\n  [Environment]::SetEnvironmentVariable(\"Path\", $userPath, \"User\")\n  Write-Output \"Updated User PATH. Restart PowerShell to apply changes.\"\n} else {\n  Write-Output \"No changes required to User PATH.\"\n}\n\nWrite-Output \"Done. Restart PowerShell (or start a new session) to use the aliases and PATH changes.\"\n```\n\n**Quick automated installer (one-line)**\n\nIf you prefer a single command that runs the helper in the repo root, open PowerShell (Admin if needed) and run:\n\n```powershell\npowershell -ExecutionPolicy Bypass -Command \"Invoke-Expression ((Get-Content .\\scripts\\setup_python_windows.ps1 -Raw))\"\n```\n\nThis evaluates the script in your session ‚Äî or run the file directly:\n\n```powershell\npowershell -ExecutionPolicy Bypass -File .\\scripts\\setup_python_windows.ps1\n```\n\n--\n\nIf you want, I can also add a small wrapper `scripts/quick_setup_windows.ps1` that will create the venv and install `ml_model/requirements.txt` automatically. Would you like that created now?\nI added a helper script `scripts/quick_setup_windows.ps1` to automate venv creation and ML dependency installation. Usage:\n\n```powershell\n# From repo root - create venv, install ML deps, and run the alias helper\npowershell -ExecutionPolicy Bypass -File .\\scripts\\quick_setup_windows.ps1 -RunAliasHelper\n\n# Add Node deps as well (if needed)\npowershell -ExecutionPolicy Bypass -File .\\scripts\\quick_setup_windows.ps1 -RunAliasHelper -InstallNode\n```\n\nThe script will:\n- Create `.venv` if missing\n- Upgrade `pip`, `setuptools`, and `wheel` inside the venv\n- Install `ml_model/requirements.txt` using the venv Python\n- Optionally run `scripts/setup_python_windows.ps1` to add `python`/`python3` aliases\n- Optionally run `npm install` if `-InstallNode` is passed and `npm` is available\n\nAfter running, activate the venv in your session:\n\n```powershell\n.\\.venv\\Scripts\\Activate.ps1\n```\n\nThen start the ML service:\n\n```powershell\npython ml_model\\app.py\n```\n","path":null,"size_bytes":10921,"size_tokens":null},"coverage/sorter.js":{"content":"/* eslint-disable */\nvar addSorting = (function() {\n    'use strict';\n    var cols,\n        currentSort = {\n            index: 0,\n            desc: false\n        };\n\n    // returns the summary table element\n    function getTable() {\n        return document.querySelector('.coverage-summary');\n    }\n    // returns the thead element of the summary table\n    function getTableHeader() {\n        return getTable().querySelector('thead tr');\n    }\n    // returns the tbody element of the summary table\n    function getTableBody() {\n        return getTable().querySelector('tbody');\n    }\n    // returns the th element for nth column\n    function getNthColumn(n) {\n        return getTableHeader().querySelectorAll('th')[n];\n    }\n\n    function onFilterInput() {\n        const searchValue = document.getElementById('fileSearch').value;\n        const rows = document.getElementsByTagName('tbody')[0].children;\n\n        // Try to create a RegExp from the searchValue. If it fails (invalid regex),\n        // it will be treated as a plain text search\n        let searchRegex;\n        try {\n            searchRegex = new RegExp(searchValue, 'i'); // 'i' for case-insensitive\n        } catch (error) {\n            searchRegex = null;\n        }\n\n        for (let i = 0; i < rows.length; i++) {\n            const row = rows[i];\n            let isMatch = false;\n\n            if (searchRegex) {\n                // If a valid regex was created, use it for matching\n                isMatch = searchRegex.test(row.textContent);\n            } else {\n                // Otherwise, fall back to the original plain text search\n                isMatch = row.textContent\n                    .toLowerCase()\n                    .includes(searchValue.toLowerCase());\n            }\n\n            row.style.display = isMatch ? '' : 'none';\n        }\n    }\n\n    // loads the search box\n    function addSearchBox() {\n        var template = document.getElementById('filterTemplate');\n        var templateClone = template.content.cloneNode(true);\n        templateClone.getElementById('fileSearch').oninput = onFilterInput;\n        template.parentElement.appendChild(templateClone);\n    }\n\n    // loads all columns\n    function loadColumns() {\n        var colNodes = getTableHeader().querySelectorAll('th'),\n            colNode,\n            cols = [],\n            col,\n            i;\n\n        for (i = 0; i < colNodes.length; i += 1) {\n            colNode = colNodes[i];\n            col = {\n                key: colNode.getAttribute('data-col'),\n                sortable: !colNode.getAttribute('data-nosort'),\n                type: colNode.getAttribute('data-type') || 'string'\n            };\n            cols.push(col);\n            if (col.sortable) {\n                col.defaultDescSort = col.type === 'number';\n                colNode.innerHTML =\n                    colNode.innerHTML + '<span class=\"sorter\"></span>';\n            }\n        }\n        return cols;\n    }\n    // attaches a data attribute to every tr element with an object\n    // of data values keyed by column name\n    function loadRowData(tableRow) {\n        var tableCols = tableRow.querySelectorAll('td'),\n            colNode,\n            col,\n            data = {},\n            i,\n            val;\n        for (i = 0; i < tableCols.length; i += 1) {\n            colNode = tableCols[i];\n            col = cols[i];\n            val = colNode.getAttribute('data-value');\n            if (col.type === 'number') {\n                val = Number(val);\n            }\n            data[col.key] = val;\n        }\n        return data;\n    }\n    // loads all row data\n    function loadData() {\n        var rows = getTableBody().querySelectorAll('tr'),\n            i;\n\n        for (i = 0; i < rows.length; i += 1) {\n            rows[i].data = loadRowData(rows[i]);\n        }\n    }\n    // sorts the table using the data for the ith column\n    function sortByIndex(index, desc) {\n        var key = cols[index].key,\n            sorter = function(a, b) {\n                a = a.data[key];\n                b = b.data[key];\n                return a < b ? -1 : a > b ? 1 : 0;\n            },\n            finalSorter = sorter,\n            tableBody = document.querySelector('.coverage-summary tbody'),\n            rowNodes = tableBody.querySelectorAll('tr'),\n            rows = [],\n            i;\n\n        if (desc) {\n            finalSorter = function(a, b) {\n                return -1 * sorter(a, b);\n            };\n        }\n\n        for (i = 0; i < rowNodes.length; i += 1) {\n            rows.push(rowNodes[i]);\n            tableBody.removeChild(rowNodes[i]);\n        }\n\n        rows.sort(finalSorter);\n\n        for (i = 0; i < rows.length; i += 1) {\n            tableBody.appendChild(rows[i]);\n        }\n    }\n    // removes sort indicators for current column being sorted\n    function removeSortIndicators() {\n        var col = getNthColumn(currentSort.index),\n            cls = col.className;\n\n        cls = cls.replace(/ sorted$/, '').replace(/ sorted-desc$/, '');\n        col.className = cls;\n    }\n    // adds sort indicators for current column being sorted\n    function addSortIndicators() {\n        getNthColumn(currentSort.index).className += currentSort.desc\n            ? ' sorted-desc'\n            : ' sorted';\n    }\n    // adds event listeners for all sorter widgets\n    function enableUI() {\n        var i,\n            el,\n            ithSorter = function ithSorter(i) {\n                var col = cols[i];\n\n                return function() {\n                    var desc = col.defaultDescSort;\n\n                    if (currentSort.index === i) {\n                        desc = !currentSort.desc;\n                    }\n                    sortByIndex(i, desc);\n                    removeSortIndicators();\n                    currentSort.index = i;\n                    currentSort.desc = desc;\n                    addSortIndicators();\n                };\n            };\n        for (i = 0; i < cols.length; i += 1) {\n            if (cols[i].sortable) {\n                // add the click event handler on the th so users\n                // dont have to click on those tiny arrows\n                el = getNthColumn(i).querySelector('.sorter').parentElement;\n                if (el.addEventListener) {\n                    el.addEventListener('click', ithSorter(i));\n                } else {\n                    el.attachEvent('onclick', ithSorter(i));\n                }\n            }\n        }\n    }\n    // adds sorting functionality to the UI\n    return function() {\n        if (!getTable()) {\n            return;\n        }\n        cols = loadColumns();\n        loadData();\n        addSearchBox();\n        addSortIndicators();\n        enableUI();\n    };\n})();\n\nwindow.addEventListener('load', addSorting);\n","path":null,"size_bytes":6731,"size_tokens":null},"tests/server/auth.test.ts":{"content":"import { describe, it, expect, vi, beforeEach } from 'vitest';\nimport { hashPassword, comparePassword, requireAuth, requireAdmin } from '../../server/auth';\n\ndescribe('Auth Module', () => {\n  describe('hashPassword', () => {\n    it('should hash a password successfully', async () => {\n      const password = 'testPassword123!';\n      const hash = await hashPassword(password);\n      \n      expect(hash).toBeDefined();\n      expect(hash).not.toBe(password);\n      expect(hash.length).toBeGreaterThan(0);\n    });\n\n    it('should create different hashes for the same password', async () => {\n      const password = 'testPassword123!';\n      const hash1 = await hashPassword(password);\n      const hash2 = await hashPassword(password);\n      \n      expect(hash1).not.toBe(hash2);\n    });\n\n    it('should create a valid bcrypt hash format', async () => {\n      const password = 'testPassword123!';\n      const hash = await hashPassword(password);\n      \n      expect(hash).toMatch(/^\\$2[aby]?\\$\\d{1,2}\\$.{53}$/);\n    });\n  });\n\n  describe('comparePassword', () => {\n    it('should return true for matching password', async () => {\n      const password = 'testPassword123!';\n      const hash = await hashPassword(password);\n      \n      const result = await comparePassword(password, hash);\n      \n      expect(result).toBe(true);\n    });\n\n    it('should return false for non-matching password', async () => {\n      const password = 'testPassword123!';\n      const wrongPassword = 'wrongPassword456!';\n      const hash = await hashPassword(password);\n      \n      const result = await comparePassword(wrongPassword, hash);\n      \n      expect(result).toBe(false);\n    });\n\n    it('should return false for empty password', async () => {\n      const password = 'testPassword123!';\n      const hash = await hashPassword(password);\n      \n      const result = await comparePassword('', hash);\n      \n      expect(result).toBe(false);\n    });\n  });\n\n  describe('requireAuth middleware', () => {\n    let mockReq: any;\n    let mockRes: any;\n    let mockNext: any;\n\n    beforeEach(() => {\n      mockReq = {\n        isAuthenticated: vi.fn(),\n      };\n      mockRes = {\n        status: vi.fn().mockReturnThis(),\n        send: vi.fn(),\n      };\n      mockNext = vi.fn();\n    });\n\n    it('should call next() when user is authenticated', () => {\n      mockReq.isAuthenticated.mockReturnValue(true);\n\n      requireAuth(mockReq, mockRes, mockNext);\n\n      expect(mockNext).toHaveBeenCalled();\n      expect(mockRes.status).not.toHaveBeenCalled();\n    });\n\n    it('should return 401 when user is not authenticated', () => {\n      mockReq.isAuthenticated.mockReturnValue(false);\n\n      requireAuth(mockReq, mockRes, mockNext);\n\n      expect(mockNext).not.toHaveBeenCalled();\n      expect(mockRes.status).toHaveBeenCalledWith(401);\n      expect(mockRes.send).toHaveBeenCalledWith({ error: 'Not authenticated' });\n    });\n  });\n\n  describe('requireAdmin middleware', () => {\n    let mockReq: any;\n    let mockRes: any;\n    let mockNext: any;\n\n    beforeEach(() => {\n      mockReq = {\n        isAuthenticated: vi.fn(),\n        user: { isAdmin: false },\n      };\n      mockRes = {\n        status: vi.fn().mockReturnThis(),\n        send: vi.fn(),\n      };\n      mockNext = vi.fn();\n    });\n\n    it('should call next() when user is authenticated and admin', () => {\n      mockReq.isAuthenticated.mockReturnValue(true);\n      mockReq.user = { isAdmin: true };\n\n      requireAdmin(mockReq, mockRes, mockNext);\n\n      expect(mockNext).toHaveBeenCalled();\n      expect(mockRes.status).not.toHaveBeenCalled();\n    });\n\n    it('should return 403 when user is authenticated but not admin', () => {\n      mockReq.isAuthenticated.mockReturnValue(true);\n      mockReq.user = { isAdmin: false };\n\n      requireAdmin(mockReq, mockRes, mockNext);\n\n      expect(mockNext).not.toHaveBeenCalled();\n      expect(mockRes.status).toHaveBeenCalledWith(403);\n      expect(mockRes.send).toHaveBeenCalledWith({ error: 'Admin access required' });\n    });\n\n    it('should return 403 when user is not authenticated', () => {\n      mockReq.isAuthenticated.mockReturnValue(false);\n\n      requireAdmin(mockReq, mockRes, mockNext);\n\n      expect(mockNext).not.toHaveBeenCalled();\n      expect(mockRes.status).toHaveBeenCalledWith(403);\n    });\n  });\n});\n","path":null,"size_bytes":4294,"size_tokens":null},"tests/server/learningIntelligence.test.ts":{"content":"import { describe, it, expect } from 'vitest';\n\ninterface CategoryPerformance {\n  [category: string]: { correct: number; total: number; accuracy: number };\n}\n\ninterface QuestionAttempt {\n  category?: string;\n  isCorrect: boolean;\n}\n\nfunction shuffleArray<T>(array: T[]): T[] {\n  const shuffled = [...array];\n  for (let i = shuffled.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n  }\n  return shuffled;\n}\n\nfunction calculateCategoryPerformance(attempts: QuestionAttempt[]): CategoryPerformance {\n  const performance: CategoryPerformance = {};\n\n  for (const attempt of attempts) {\n    if (!attempt.category) continue;\n\n    if (!performance[attempt.category]) {\n      performance[attempt.category] = { correct: 0, total: 0, accuracy: 0 };\n    }\n\n    performance[attempt.category].total++;\n    if (attempt.isCorrect) {\n      performance[attempt.category].correct++;\n    }\n  }\n\n  for (const category of Object.keys(performance)) {\n    const cat = performance[category];\n    cat.accuracy = cat.total > 0 ? cat.correct / cat.total : 0;\n  }\n\n  return performance;\n}\n\nfunction selectDifficultyForLevel(level: number): 'easy' | 'medium' | 'hard' {\n  if (level <= 3) return 'easy';\n  if (level <= 7) return 'medium';\n  return 'hard';\n}\n\nfunction mapDifficultyLabel(difficulty?: string): 'easy' | 'medium' | 'hard' {\n  if (difficulty === 'beginner') return 'easy';\n  if (difficulty === 'intermediate') return 'medium';\n  if (difficulty === 'advanced') return 'hard';\n  return 'medium';\n}\n\ndescribe('Learning Intelligence Service', () => {\n  describe('shuffleArray', () => {\n    it('should return array with same length', () => {\n      const arr = [1, 2, 3, 4, 5];\n      const shuffled = shuffleArray(arr);\n      expect(shuffled).toHaveLength(arr.length);\n    });\n\n    it('should contain all original elements', () => {\n      const arr = [1, 2, 3, 4, 5];\n      const shuffled = shuffleArray(arr);\n      expect(shuffled.sort()).toEqual(arr.sort());\n    });\n\n    it('should not modify original array', () => {\n      const arr = [1, 2, 3, 4, 5];\n      const originalCopy = [...arr];\n      shuffleArray(arr);\n      expect(arr).toEqual(originalCopy);\n    });\n\n    it('should handle empty array', () => {\n      const result = shuffleArray([]);\n      expect(result).toEqual([]);\n    });\n\n    it('should handle single element array', () => {\n      const result = shuffleArray([1]);\n      expect(result).toEqual([1]);\n    });\n  });\n\n  describe('calculateCategoryPerformance', () => {\n    it('should calculate accuracy correctly', () => {\n      const attempts: QuestionAttempt[] = [\n        { category: 'frontend', isCorrect: true },\n        { category: 'frontend', isCorrect: false },\n      ];\n\n      const result = calculateCategoryPerformance(attempts);\n\n      expect(result.frontend.accuracy).toBe(0.5);\n      expect(result.frontend.correct).toBe(1);\n      expect(result.frontend.total).toBe(2);\n    });\n\n    it('should handle 100% accuracy', () => {\n      const attempts: QuestionAttempt[] = [\n        { category: 'backend', isCorrect: true },\n        { category: 'backend', isCorrect: true },\n        { category: 'backend', isCorrect: true },\n      ];\n\n      const result = calculateCategoryPerformance(attempts);\n\n      expect(result.backend.accuracy).toBe(1);\n    });\n\n    it('should handle 0% accuracy', () => {\n      const attempts: QuestionAttempt[] = [\n        { category: 'data', isCorrect: false },\n        { category: 'data', isCorrect: false },\n      ];\n\n      const result = calculateCategoryPerformance(attempts);\n\n      expect(result.data.accuracy).toBe(0);\n    });\n\n    it('should skip attempts without category', () => {\n      const attempts: QuestionAttempt[] = [\n        { category: 'frontend', isCorrect: true },\n        { isCorrect: true },\n        { category: undefined, isCorrect: false },\n      ];\n\n      const result = calculateCategoryPerformance(attempts);\n\n      expect(Object.keys(result)).toHaveLength(1);\n      expect(result.frontend).toBeDefined();\n    });\n  });\n\n  describe('selectDifficultyForLevel', () => {\n    it('should return easy for levels 1-3', () => {\n      expect(selectDifficultyForLevel(1)).toBe('easy');\n      expect(selectDifficultyForLevel(2)).toBe('easy');\n      expect(selectDifficultyForLevel(3)).toBe('easy');\n    });\n\n    it('should return medium for levels 4-7', () => {\n      expect(selectDifficultyForLevel(4)).toBe('medium');\n      expect(selectDifficultyForLevel(5)).toBe('medium');\n      expect(selectDifficultyForLevel(6)).toBe('medium');\n      expect(selectDifficultyForLevel(7)).toBe('medium');\n    });\n\n    it('should return hard for levels 8+', () => {\n      expect(selectDifficultyForLevel(8)).toBe('hard');\n      expect(selectDifficultyForLevel(10)).toBe('hard');\n      expect(selectDifficultyForLevel(20)).toBe('hard');\n    });\n  });\n\n  describe('mapDifficultyLabel', () => {\n    it('should map beginner to easy', () => {\n      expect(mapDifficultyLabel('beginner')).toBe('easy');\n    });\n\n    it('should map intermediate to medium', () => {\n      expect(mapDifficultyLabel('intermediate')).toBe('medium');\n    });\n\n    it('should map advanced to hard', () => {\n      expect(mapDifficultyLabel('advanced')).toBe('hard');\n    });\n\n    it('should default to medium for unknown values', () => {\n      expect(mapDifficultyLabel('unknown')).toBe('medium');\n      expect(mapDifficultyLabel('')).toBe('medium');\n    });\n\n    it('should default to medium for undefined', () => {\n      expect(mapDifficultyLabel(undefined)).toBe('medium');\n    });\n  });\n});\n","path":null,"size_bytes":5589,"size_tokens":null},"coverage/lcov-report/prettify.css":{"content":".pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}pre.prettyprint{padding:2px;border:1px solid #888}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}\n","path":null,"size_bytes":676,"size_tokens":null},"tests/shared/schema.test.ts":{"content":"import { describe, it, expect } from 'vitest';\nimport { insertUserSchema, registerRequestSchema } from '../../shared/schema';\n\ndescribe('Schema Validation', () => {\n  describe('insertUserSchema', () => {\n    it('should validate correct user data', () => {\n      const validUser = {\n        username: 'testuser',\n        email: 'test@example.com',\n        password: 'password123',\n        displayName: 'Test User',\n      };\n\n      const result = insertUserSchema.safeParse(validUser);\n      expect(result.success).toBe(true);\n    });\n\n    it('should require username field', () => {\n      const invalidUser = {\n        email: 'test@example.com',\n        password: 'password123',\n        displayName: 'Test User',\n      };\n\n      const result = insertUserSchema.safeParse(invalidUser);\n      expect(result.success).toBe(false);\n    });\n\n    it('should require email field', () => {\n      const invalidUser = {\n        username: 'testuser',\n        password: 'password123',\n        displayName: 'Test User',\n      };\n\n      const result = insertUserSchema.safeParse(invalidUser);\n      expect(result.success).toBe(false);\n    });\n\n    it('should require password field', () => {\n      const invalidUser = {\n        username: 'testuser',\n        email: 'test@example.com',\n        displayName: 'Test User',\n      };\n\n      const result = insertUserSchema.safeParse(invalidUser);\n      expect(result.success).toBe(false);\n    });\n\n    it('should require displayName field', () => {\n      const invalidUser = {\n        username: 'testuser',\n        email: 'test@example.com',\n        password: 'password123',\n      };\n\n      const result = insertUserSchema.safeParse(invalidUser);\n      expect(result.success).toBe(false);\n    });\n\n    it('should accept optional pathSelectionMode', () => {\n      const userWithMode = {\n        username: 'testuser',\n        email: 'test@example.com',\n        password: 'password123',\n        displayName: 'Test User',\n        pathSelectionMode: 'ai-guided',\n      };\n\n      const result = insertUserSchema.safeParse(userWithMode);\n      expect(result.success).toBe(true);\n    });\n\n    it('should accept manual pathSelectionMode', () => {\n      const userWithMode = {\n        username: 'testuser',\n        email: 'test@example.com',\n        password: 'password123',\n        displayName: 'Test User',\n        pathSelectionMode: 'manual',\n      };\n\n      const result = insertUserSchema.safeParse(userWithMode);\n      expect(result.success).toBe(true);\n    });\n\n    it('should reject non-string username', () => {\n      const invalidUser = {\n        username: 123,\n        email: 'test@example.com',\n        password: 'password123',\n        displayName: 'Test User',\n      };\n\n      const result = insertUserSchema.safeParse(invalidUser);\n      expect(result.success).toBe(false);\n    });\n\n    it('should reject non-string email', () => {\n      const invalidUser = {\n        username: 'testuser',\n        email: 123,\n        password: 'password123',\n        displayName: 'Test User',\n      };\n\n      const result = insertUserSchema.safeParse(invalidUser);\n      expect(result.success).toBe(false);\n    });\n\n    it('should reject null values for required fields', () => {\n      const invalidUser = {\n        username: null,\n        email: 'test@example.com',\n        password: 'password123',\n        displayName: 'Test User',\n      };\n\n      const result = insertUserSchema.safeParse(invalidUser);\n      expect(result.success).toBe(false);\n    });\n  });\n\n  describe('registerRequestSchema', () => {\n    it('should validate matching passwords', () => {\n      const validRegistration = {\n        username: 'testuser',\n        email: 'test@example.com',\n        password: 'password123',\n        confirmPassword: 'password123',\n        displayName: 'Test User',\n      };\n\n      const result = registerRequestSchema.safeParse(validRegistration);\n      expect(result.success).toBe(true);\n    });\n\n    it('should reject non-matching passwords', () => {\n      const invalidRegistration = {\n        username: 'testuser',\n        email: 'test@example.com',\n        password: 'password123',\n        confirmPassword: 'differentpassword',\n        displayName: 'Test User',\n      };\n\n      const result = registerRequestSchema.safeParse(invalidRegistration);\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        const confirmPasswordError = result.error.issues.find(\n          (issue) => issue.path.includes('confirmPassword')\n        );\n        expect(confirmPasswordError).toBeDefined();\n        expect(confirmPasswordError?.message).toBe('Passwords do not match');\n      }\n    });\n\n    it('should reject empty confirmPassword', () => {\n      const invalidRegistration = {\n        username: 'testuser',\n        email: 'test@example.com',\n        password: 'password123',\n        confirmPassword: '',\n        displayName: 'Test User',\n      };\n\n      const result = registerRequestSchema.safeParse(invalidRegistration);\n      expect(result.success).toBe(false);\n    });\n\n    it('should reject missing confirmPassword', () => {\n      const invalidRegistration = {\n        username: 'testuser',\n        email: 'test@example.com',\n        password: 'password123',\n        displayName: 'Test User',\n      };\n\n      const result = registerRequestSchema.safeParse(invalidRegistration);\n      expect(result.success).toBe(false);\n    });\n\n    it('should require all base user fields', () => {\n      const invalidRegistration = {\n        password: 'password123',\n        confirmPassword: 'password123',\n      };\n\n      const result = registerRequestSchema.safeParse(invalidRegistration);\n      expect(result.success).toBe(false);\n    });\n\n    it('should validate with optional fields included', () => {\n      const validRegistration = {\n        username: 'testuser',\n        email: 'test@example.com',\n        password: 'password123',\n        confirmPassword: 'password123',\n        displayName: 'Test User',\n        pathSelectionMode: 'manual',\n      };\n\n      const result = registerRequestSchema.safeParse(validRegistration);\n      expect(result.success).toBe(true);\n    });\n  });\n});\n","path":null,"size_bytes":6116,"size_tokens":null},"coverage/lcov-report/prettify.js":{"content":"/* eslint-disable */\nwindow.PR_SHOULD_USE_CONTINUATION=true;(function(){var h=[\"break,continue,do,else,for,if,return,while\"];var u=[h,\"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile\"];var p=[u,\"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof\"];var l=[p,\"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where\"];var x=[p,\"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient\"];var R=[x,\"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var\"];var r=\"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes\";var w=[p,\"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN\"];var s=\"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END\";var I=[h,\"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None\"];var f=[h,\"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END\"];var H=[h,\"case,done,elif,esac,eval,fi,function,in,local,set,then,until\"];var A=[l,R,w,s+I,f,H];var e=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\\d*)/;var C=\"str\";var z=\"kwd\";var j=\"com\";var O=\"typ\";var G=\"lit\";var L=\"pun\";var F=\"pln\";var m=\"tag\";var E=\"dec\";var J=\"src\";var P=\"atn\";var n=\"atv\";var N=\"nocode\";var M=\"(?:^^\\\\.?|[+-]|\\\\!|\\\\!=|\\\\!==|\\\\#|\\\\%|\\\\%=|&|&&|&&=|&=|\\\\(|\\\\*|\\\\*=|\\\\+=|\\\\,|\\\\-=|\\\\->|\\\\/|\\\\/=|:|::|\\\\;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\\\?|\\\\@|\\\\[|\\\\^|\\\\^=|\\\\^\\\\^|\\\\^\\\\^=|\\\\{|\\\\||\\\\|=|\\\\|\\\\||\\\\|\\\\|=|\\\\~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\\\s*\";function k(Z){var ad=0;var S=false;var ac=false;for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.ignoreCase){ac=true}else{if(/[a-z]/i.test(ae.source.replace(/\\\\u[0-9a-f]{4}|\\\\x[0-9a-f]{2}|\\\\[^ux]/gi,\"\"))){S=true;ac=false;break}}}var Y={b:8,t:9,n:10,v:11,f:12,r:13};function ab(ah){var ag=ah.charCodeAt(0);if(ag!==92){return ag}var af=ah.charAt(1);ag=Y[af];if(ag){return ag}else{if(\"0\"<=af&&af<=\"7\"){return parseInt(ah.substring(1),8)}else{if(af===\"u\"||af===\"x\"){return parseInt(ah.substring(2),16)}else{return ah.charCodeAt(1)}}}}function T(af){if(af<32){return(af<16?\"\\\\x0\":\"\\\\x\")+af.toString(16)}var ag=String.fromCharCode(af);if(ag===\"\\\\\"||ag===\"-\"||ag===\"[\"||ag===\"]\"){ag=\"\\\\\"+ag}return ag}function X(am){var aq=am.substring(1,am.length-1).match(new RegExp(\"\\\\\\\\u[0-9A-Fa-f]{4}|\\\\\\\\x[0-9A-Fa-f]{2}|\\\\\\\\[0-3][0-7]{0,2}|\\\\\\\\[0-7]{1,2}|\\\\\\\\[\\\\s\\\\S]|-|[^-\\\\\\\\]\",\"g\"));var ak=[];var af=[];var ao=aq[0]===\"^\";for(var ar=ao?1:0,aj=aq.length;ar<aj;++ar){var ah=aq[ar];if(/\\\\[bdsw]/i.test(ah)){ak.push(ah)}else{var ag=ab(ah);var al;if(ar+2<aj&&\"-\"===aq[ar+1]){al=ab(aq[ar+2]);ar+=2}else{al=ag}af.push([ag,al]);if(!(al<65||ag>122)){if(!(al<65||ag>90)){af.push([Math.max(65,ag)|32,Math.min(al,90)|32])}if(!(al<97||ag>122)){af.push([Math.max(97,ag)&~32,Math.min(al,122)&~32])}}}}af.sort(function(av,au){return(av[0]-au[0])||(au[1]-av[1])});var ai=[];var ap=[NaN,NaN];for(var ar=0;ar<af.length;++ar){var at=af[ar];if(at[0]<=ap[1]+1){ap[1]=Math.max(ap[1],at[1])}else{ai.push(ap=at)}}var an=[\"[\"];if(ao){an.push(\"^\")}an.push.apply(an,ak);for(var ar=0;ar<ai.length;++ar){var at=ai[ar];an.push(T(at[0]));if(at[1]>at[0]){if(at[1]+1>at[0]){an.push(\"-\")}an.push(T(at[1]))}}an.push(\"]\");return an.join(\"\")}function W(al){var aj=al.source.match(new RegExp(\"(?:\\\\[(?:[^\\\\x5C\\\\x5D]|\\\\\\\\[\\\\s\\\\S])*\\\\]|\\\\\\\\u[A-Fa-f0-9]{4}|\\\\\\\\x[A-Fa-f0-9]{2}|\\\\\\\\[0-9]+|\\\\\\\\[^ux0-9]|\\\\(\\\\?[:!=]|[\\\\(\\\\)\\\\^]|[^\\\\x5B\\\\x5C\\\\(\\\\)\\\\^]+)\",\"g\"));var ah=aj.length;var an=[];for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag===\"(\"){++am}else{if(\"\\\\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){an[af]=-1}}}}for(var ak=1;ak<an.length;++ak){if(-1===an[ak]){an[ak]=++ad}}for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag===\"(\"){++am;if(an[am]===undefined){aj[ak]=\"(?:\"}}else{if(\"\\\\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){aj[ak]=\"\\\\\"+an[am]}}}}for(var ak=0,am=0;ak<ah;++ak){if(\"^\"===aj[ak]&&\"^\"!==aj[ak+1]){aj[ak]=\"\"}}if(al.ignoreCase&&S){for(var ak=0;ak<ah;++ak){var ag=aj[ak];var ai=ag.charAt(0);if(ag.length>=2&&ai===\"[\"){aj[ak]=X(ag)}else{if(ai!==\"\\\\\"){aj[ak]=ag.replace(/[a-zA-Z]/g,function(ao){var ap=ao.charCodeAt(0);return\"[\"+String.fromCharCode(ap&~32,ap|32)+\"]\"})}}}}return aj.join(\"\")}var aa=[];for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.global||ae.multiline){throw new Error(\"\"+ae)}aa.push(\"(?:\"+W(ae)+\")\")}return new RegExp(aa.join(\"|\"),ac?\"gi\":\"g\")}function a(V){var U=/(?:^|\\s)nocode(?:\\s|$)/;var X=[];var T=0;var Z=[];var W=0;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=document.defaultView.getComputedStyle(V,null).getPropertyValue(\"white-space\")}}var Y=S&&\"pre\"===S.substring(0,3);function aa(ab){switch(ab.nodeType){case 1:if(U.test(ab.className)){return}for(var ae=ab.firstChild;ae;ae=ae.nextSibling){aa(ae)}var ad=ab.nodeName;if(\"BR\"===ad||\"LI\"===ad){X[W]=\"\\n\";Z[W<<1]=T++;Z[(W++<<1)|1]=ab}break;case 3:case 4:var ac=ab.nodeValue;if(ac.length){if(!Y){ac=ac.replace(/[ \\t\\r\\n]+/g,\" \")}else{ac=ac.replace(/\\r\\n?/g,\"\\n\")}X[W]=ac;Z[W<<1]=T;T+=ac.length;Z[(W++<<1)|1]=ab}break}}aa(V);return{sourceCode:X.join(\"\").replace(/\\n$/,\"\"),spans:Z}}function B(S,U,W,T){if(!U){return}var V={sourceCode:U,basePos:S};W(V);T.push.apply(T,V.decorations)}var v=/\\S/;function o(S){var V=undefined;for(var U=S.firstChild;U;U=U.nextSibling){var T=U.nodeType;V=(T===1)?(V?S:U):(T===3)?(v.test(U.nodeValue)?S:V):V}return V===S?undefined:V}function g(U,T){var S={};var V;(function(){var ad=U.concat(T);var ah=[];var ag={};for(var ab=0,Z=ad.length;ab<Z;++ab){var Y=ad[ab];var ac=Y[3];if(ac){for(var ae=ac.length;--ae>=0;){S[ac.charAt(ae)]=Y}}var af=Y[1];var aa=\"\"+af;if(!ag.hasOwnProperty(aa)){ah.push(af);ag[aa]=null}}ah.push(/[\\0-\\uffff]/);V=k(ah)})();var X=T.length;var W=function(ah){var Z=ah.sourceCode,Y=ah.basePos;var ad=[Y,F];var af=0;var an=Z.match(V)||[];var aj={};for(var ae=0,aq=an.length;ae<aq;++ae){var ag=an[ae];var ap=aj[ag];var ai=void 0;var am;if(typeof ap===\"string\"){am=false}else{var aa=S[ag.charAt(0)];if(aa){ai=ag.match(aa[1]);ap=aa[0]}else{for(var ao=0;ao<X;++ao){aa=T[ao];ai=ag.match(aa[1]);if(ai){ap=aa[0];break}}if(!ai){ap=F}}am=ap.length>=5&&\"lang-\"===ap.substring(0,5);if(am&&!(ai&&typeof ai[1]===\"string\")){am=false;ap=J}if(!am){aj[ag]=ap}}var ab=af;af+=ag.length;if(!am){ad.push(Y+ab,ap)}else{var al=ai[1];var ak=ag.indexOf(al);var ac=ak+al.length;if(ai[2]){ac=ag.length-ai[2].length;ak=ac-al.length}var ar=ap.substring(5);B(Y+ab,ag.substring(0,ak),W,ad);B(Y+ab+ak,al,q(ar,al),ad);B(Y+ab+ac,ag.substring(ac),W,ad)}}ah.decorations=ad};return W}function i(T){var W=[],S=[];if(T.tripleQuotedStrings){W.push([C,/^(?:\\'\\'\\'(?:[^\\'\\\\]|\\\\[\\s\\S]|\\'{1,2}(?=[^\\']))*(?:\\'\\'\\'|$)|\\\"\\\"\\\"(?:[^\\\"\\\\]|\\\\[\\s\\S]|\\\"{1,2}(?=[^\\\"]))*(?:\\\"\\\"\\\"|$)|\\'(?:[^\\\\\\']|\\\\[\\s\\S])*(?:\\'|$)|\\\"(?:[^\\\\\\\"]|\\\\[\\s\\S])*(?:\\\"|$))/,null,\"'\\\"\"])}else{if(T.multiLineStrings){W.push([C,/^(?:\\'(?:[^\\\\\\']|\\\\[\\s\\S])*(?:\\'|$)|\\\"(?:[^\\\\\\\"]|\\\\[\\s\\S])*(?:\\\"|$)|\\`(?:[^\\\\\\`]|\\\\[\\s\\S])*(?:\\`|$))/,null,\"'\\\"`\"])}else{W.push([C,/^(?:\\'(?:[^\\\\\\'\\r\\n]|\\\\.)*(?:\\'|$)|\\\"(?:[^\\\\\\\"\\r\\n]|\\\\.)*(?:\\\"|$))/,null,\"\\\"'\"])}}if(T.verbatimStrings){S.push([C,/^@\\\"(?:[^\\\"]|\\\"\\\")*(?:\\\"|$)/,null])}var Y=T.hashComments;if(Y){if(T.cStyleComments){if(Y>1){W.push([j,/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,\"#\"])}else{W.push([j,/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\\b|[^\\r\\n]*)/,null,\"#\"])}S.push([C,/^<(?:(?:(?:\\.\\.\\/)*|\\/?)(?:[\\w-]+(?:\\/[\\w-]+)+)?[\\w-]+\\.h|[a-z]\\w*)>/,null])}else{W.push([j,/^#[^\\r\\n]*/,null,\"#\"])}}if(T.cStyleComments){S.push([j,/^\\/\\/[^\\r\\n]*/,null]);S.push([j,/^\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,null])}if(T.regexLiterals){var X=(\"/(?=[^/*])(?:[^/\\\\x5B\\\\x5C]|\\\\x5C[\\\\s\\\\S]|\\\\x5B(?:[^\\\\x5C\\\\x5D]|\\\\x5C[\\\\s\\\\S])*(?:\\\\x5D|$))+/\");S.push([\"lang-regex\",new RegExp(\"^\"+M+\"(\"+X+\")\")])}var V=T.types;if(V){S.push([O,V])}var U=(\"\"+T.keywords).replace(/^ | $/g,\"\");if(U.length){S.push([z,new RegExp(\"^(?:\"+U.replace(/[\\s,]+/g,\"|\")+\")\\\\b\"),null])}W.push([F,/^\\s+/,null,\" \\r\\n\\t\\xA0\"]);S.push([G,/^@[a-z_$][a-z_$@0-9]*/i,null],[O,/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\\w+_t\\b)/,null],[F,/^[a-z_$][a-z_$@0-9]*/i,null],[G,new RegExp(\"^(?:0x[a-f0-9]+|(?:\\\\d(?:_\\\\d+)*\\\\d*(?:\\\\.\\\\d*)?|\\\\.\\\\d\\\\+)(?:e[+\\\\-]?\\\\d+)?)[a-z]*\",\"i\"),null,\"0123456789\"],[F,/^\\\\[\\s\\S]?/,null],[L,/^.[^\\s\\w\\.$@\\'\\\"\\`\\/\\#\\\\]*/,null]);return g(W,S)}var K=i({keywords:A,hashComments:true,cStyleComments:true,multiLineStrings:true,regexLiterals:true});function Q(V,ag){var U=/(?:^|\\s)nocode(?:\\s|$)/;var ab=/\\r\\n?|\\n/;var ac=V.ownerDocument;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=ac.defaultView.getComputedStyle(V,null).getPropertyValue(\"white-space\")}}var Z=S&&\"pre\"===S.substring(0,3);var af=ac.createElement(\"LI\");while(V.firstChild){af.appendChild(V.firstChild)}var W=[af];function ae(al){switch(al.nodeType){case 1:if(U.test(al.className)){break}if(\"BR\"===al.nodeName){ad(al);if(al.parentNode){al.parentNode.removeChild(al)}}else{for(var an=al.firstChild;an;an=an.nextSibling){ae(an)}}break;case 3:case 4:if(Z){var am=al.nodeValue;var aj=am.match(ab);if(aj){var ai=am.substring(0,aj.index);al.nodeValue=ai;var ah=am.substring(aj.index+aj[0].length);if(ah){var ak=al.parentNode;ak.insertBefore(ac.createTextNode(ah),al.nextSibling)}ad(al);if(!ai){al.parentNode.removeChild(al)}}}break}}function ad(ak){while(!ak.nextSibling){ak=ak.parentNode;if(!ak){return}}function ai(al,ar){var aq=ar?al.cloneNode(false):al;var ao=al.parentNode;if(ao){var ap=ai(ao,1);var an=al.nextSibling;ap.appendChild(aq);for(var am=an;am;am=an){an=am.nextSibling;ap.appendChild(am)}}return aq}var ah=ai(ak.nextSibling,0);for(var aj;(aj=ah.parentNode)&&aj.nodeType===1;){ah=aj}W.push(ah)}for(var Y=0;Y<W.length;++Y){ae(W[Y])}if(ag===(ag|0)){W[0].setAttribute(\"value\",ag)}var aa=ac.createElement(\"OL\");aa.className=\"linenums\";var X=Math.max(0,((ag-1))|0)||0;for(var Y=0,T=W.length;Y<T;++Y){af=W[Y];af.className=\"L\"+((Y+X)%10);if(!af.firstChild){af.appendChild(ac.createTextNode(\"\\xA0\"))}aa.appendChild(af)}V.appendChild(aa)}function D(ac){var aj=/\\bMSIE\\b/.test(navigator.userAgent);var am=/\\n/g;var al=ac.sourceCode;var an=al.length;var V=0;var aa=ac.spans;var T=aa.length;var ah=0;var X=ac.decorations;var Y=X.length;var Z=0;X[Y]=an;var ar,aq;for(aq=ar=0;aq<Y;){if(X[aq]!==X[aq+2]){X[ar++]=X[aq++];X[ar++]=X[aq++]}else{aq+=2}}Y=ar;for(aq=ar=0;aq<Y;){var at=X[aq];var ab=X[aq+1];var W=aq+2;while(W+2<=Y&&X[W+1]===ab){W+=2}X[ar++]=at;X[ar++]=ab;aq=W}Y=X.length=ar;var ae=null;while(ah<T){var af=aa[ah];var S=aa[ah+2]||an;var ag=X[Z];var ap=X[Z+2]||an;var W=Math.min(S,ap);var ak=aa[ah+1];var U;if(ak.nodeType!==1&&(U=al.substring(V,W))){if(aj){U=U.replace(am,\"\\r\")}ak.nodeValue=U;var ai=ak.ownerDocument;var ao=ai.createElement(\"SPAN\");ao.className=X[Z+1];var ad=ak.parentNode;ad.replaceChild(ao,ak);ao.appendChild(ak);if(V<S){aa[ah+1]=ak=ai.createTextNode(al.substring(W,S));ad.insertBefore(ak,ao.nextSibling)}}V=W;if(V>=S){ah+=2}if(V>=ap){Z+=2}}}var t={};function c(U,V){for(var S=V.length;--S>=0;){var T=V[S];if(!t.hasOwnProperty(T)){t[T]=U}else{if(window.console){console.warn(\"cannot override language handler %s\",T)}}}}function q(T,S){if(!(T&&t.hasOwnProperty(T))){T=/^\\s*</.test(S)?\"default-markup\":\"default-code\"}return t[T]}c(K,[\"default-code\"]);c(g([],[[F,/^[^<?]+/],[E,/^<!\\w[^>]*(?:>|$)/],[j,/^<\\!--[\\s\\S]*?(?:-\\->|$)/],[\"lang-\",/^<\\?([\\s\\S]+?)(?:\\?>|$)/],[\"lang-\",/^<%([\\s\\S]+?)(?:%>|$)/],[L,/^(?:<[%?]|[%?]>)/],[\"lang-\",/^<xmp\\b[^>]*>([\\s\\S]+?)<\\/xmp\\b[^>]*>/i],[\"lang-js\",/^<script\\b[^>]*>([\\s\\S]*?)(<\\/script\\b[^>]*>)/i],[\"lang-css\",/^<style\\b[^>]*>([\\s\\S]*?)(<\\/style\\b[^>]*>)/i],[\"lang-in.tag\",/^(<\\/?[a-z][^<>]*>)/i]]),[\"default-markup\",\"htm\",\"html\",\"mxml\",\"xhtml\",\"xml\",\"xsl\"]);c(g([[F,/^[\\s]+/,null,\" \\t\\r\\n\"],[n,/^(?:\\\"[^\\\"]*\\\"?|\\'[^\\']*\\'?)/,null,\"\\\"'\"]],[[m,/^^<\\/?[a-z](?:[\\w.:-]*\\w)?|\\/?>$/i],[P,/^(?!style[\\s=]|on)[a-z](?:[\\w:-]*\\w)?/i],[\"lang-uq.val\",/^=\\s*([^>\\'\\\"\\s]*(?:[^>\\'\\\"\\s\\/]|\\/(?=\\s)))/],[L,/^[=<>\\/]+/],[\"lang-js\",/^on\\w+\\s*=\\s*\\\"([^\\\"]+)\\\"/i],[\"lang-js\",/^on\\w+\\s*=\\s*\\'([^\\']+)\\'/i],[\"lang-js\",/^on\\w+\\s*=\\s*([^\\\"\\'>\\s]+)/i],[\"lang-css\",/^style\\s*=\\s*\\\"([^\\\"]+)\\\"/i],[\"lang-css\",/^style\\s*=\\s*\\'([^\\']+)\\'/i],[\"lang-css\",/^style\\s*=\\s*([^\\\"\\'>\\s]+)/i]]),[\"in.tag\"]);c(g([],[[n,/^[\\s\\S]+/]]),[\"uq.val\"]);c(i({keywords:l,hashComments:true,cStyleComments:true,types:e}),[\"c\",\"cc\",\"cpp\",\"cxx\",\"cyc\",\"m\"]);c(i({keywords:\"null,true,false\"}),[\"json\"]);c(i({keywords:R,hashComments:true,cStyleComments:true,verbatimStrings:true,types:e}),[\"cs\"]);c(i({keywords:x,cStyleComments:true}),[\"java\"]);c(i({keywords:H,hashComments:true,multiLineStrings:true}),[\"bsh\",\"csh\",\"sh\"]);c(i({keywords:I,hashComments:true,multiLineStrings:true,tripleQuotedStrings:true}),[\"cv\",\"py\"]);c(i({keywords:s,hashComments:true,multiLineStrings:true,regexLiterals:true}),[\"perl\",\"pl\",\"pm\"]);c(i({keywords:f,hashComments:true,multiLineStrings:true,regexLiterals:true}),[\"rb\"]);c(i({keywords:w,cStyleComments:true,regexLiterals:true}),[\"js\"]);c(i({keywords:r,hashComments:3,cStyleComments:true,multilineStrings:true,tripleQuotedStrings:true,regexLiterals:true}),[\"coffee\"]);c(g([],[[C,/^[\\s\\S]+/]]),[\"regex\"]);function d(V){var U=V.langExtension;try{var S=a(V.sourceNode);var T=S.sourceCode;V.sourceCode=T;V.spans=S.spans;V.basePos=0;q(U,T)(V);D(V)}catch(W){if(\"console\" in window){console.log(W&&W.stack?W.stack:W)}}}function y(W,V,U){var S=document.createElement(\"PRE\");S.innerHTML=W;if(U){Q(S,U)}var T={langExtension:V,numberLines:U,sourceNode:S};d(T);return S.innerHTML}function b(ad){function Y(af){return document.getElementsByTagName(af)}var ac=[Y(\"pre\"),Y(\"code\"),Y(\"xmp\")];var T=[];for(var aa=0;aa<ac.length;++aa){for(var Z=0,V=ac[aa].length;Z<V;++Z){T.push(ac[aa][Z])}}ac=null;var W=Date;if(!W.now){W={now:function(){return +(new Date)}}}var X=0;var S;var ab=/\\blang(?:uage)?-([\\w.]+)(?!\\S)/;var ae=/\\bprettyprint\\b/;function U(){var ag=(window.PR_SHOULD_USE_CONTINUATION?W.now()+250:Infinity);for(;X<T.length&&W.now()<ag;X++){var aj=T[X];var ai=aj.className;if(ai.indexOf(\"prettyprint\")>=0){var ah=ai.match(ab);var am;if(!ah&&(am=o(aj))&&\"CODE\"===am.tagName){ah=am.className.match(ab)}if(ah){ah=ah[1]}var al=false;for(var ak=aj.parentNode;ak;ak=ak.parentNode){if((ak.tagName===\"pre\"||ak.tagName===\"code\"||ak.tagName===\"xmp\")&&ak.className&&ak.className.indexOf(\"prettyprint\")>=0){al=true;break}}if(!al){var af=aj.className.match(/\\blinenums\\b(?::(\\d+))?/);af=af?af[1]&&af[1].length?+af[1]:true:false;if(af){Q(aj,af)}S={langExtension:ah,sourceNode:aj,numberLines:af};d(S)}}}if(X<T.length){setTimeout(U,250)}else{if(ad){ad()}}}U()}window.prettyPrintOne=y;window.prettyPrint=b;window.PR={createSimpleLexer:g,registerLangHandler:c,sourceDecorator:i,PR_ATTRIB_NAME:P,PR_ATTRIB_VALUE:n,PR_COMMENT:j,PR_DECLARATION:E,PR_KEYWORD:z,PR_LITERAL:G,PR_NOCODE:N,PR_PLAIN:F,PR_PUNCTUATION:L,PR_SOURCE:J,PR_STRING:C,PR_TAG:m,PR_TYPE:O}})();PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_DECLARATION,/^<!\\w[^>]*(?:>|$)/],[PR.PR_COMMENT,/^<\\!--[\\s\\S]*?(?:-\\->|$)/],[PR.PR_PUNCTUATION,/^(?:<[%?]|[%?]>)/],[\"lang-\",/^<\\?([\\s\\S]+?)(?:\\?>|$)/],[\"lang-\",/^<%([\\s\\S]+?)(?:%>|$)/],[\"lang-\",/^<xmp\\b[^>]*>([\\s\\S]+?)<\\/xmp\\b[^>]*>/i],[\"lang-handlebars\",/^<script\\b[^>]*type\\s*=\\s*['\"]?text\\/x-handlebars-template['\"]?\\b[^>]*>([\\s\\S]*?)(<\\/script\\b[^>]*>)/i],[\"lang-js\",/^<script\\b[^>]*>([\\s\\S]*?)(<\\/script\\b[^>]*>)/i],[\"lang-css\",/^<style\\b[^>]*>([\\s\\S]*?)(<\\/style\\b[^>]*>)/i],[\"lang-in.tag\",/^(<\\/?[a-z][^<>]*>)/i],[PR.PR_DECLARATION,/^{{[#^>/]?\\s*[\\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{&?\\s*[\\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{{>?\\s*[\\w.][^}]*}}}/],[PR.PR_COMMENT,/^{{![^}]*}}/]]),[\"handlebars\",\"hbs\"]);PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[ \\t\\r\\n\\f]+/,null,\" \\t\\r\\n\\f\"]],[[PR.PR_STRING,/^\\\"(?:[^\\n\\r\\f\\\\\\\"]|\\\\(?:\\r\\n?|\\n|\\f)|\\\\[\\s\\S])*\\\"/,null],[PR.PR_STRING,/^\\'(?:[^\\n\\r\\f\\\\\\']|\\\\(?:\\r\\n?|\\n|\\f)|\\\\[\\s\\S])*\\'/,null],[\"lang-css-str\",/^url\\(([^\\)\\\"\\']*)\\)/i],[PR.PR_KEYWORD,/^(?:url|rgb|\\!important|@import|@page|@media|@charset|inherit)(?=[^\\-\\w]|$)/i,null],[\"lang-css-kw\",/^(-?(?:[_a-z]|(?:\\\\[0-9a-f]+ ?))(?:[_a-z0-9\\-]|\\\\(?:\\\\[0-9a-f]+ ?))*)\\s*:/i],[PR.PR_COMMENT,/^\\/\\*[^*]*\\*+(?:[^\\/*][^*]*\\*+)*\\//],[PR.PR_COMMENT,/^(?:<!--|-->)/],[PR.PR_LITERAL,/^(?:\\d+|\\d*\\.\\d+)(?:%|[a-z]+)?/i],[PR.PR_LITERAL,/^#(?:[0-9a-f]{3}){1,2}/i],[PR.PR_PLAIN,/^-?(?:[_a-z]|(?:\\\\[\\da-f]+ ?))(?:[_a-z\\d\\-]|\\\\(?:\\\\[\\da-f]+ ?))*/i],[PR.PR_PUNCTUATION,/^[^\\s\\w\\'\\\"]+/]]),[\"css\"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_KEYWORD,/^-?(?:[_a-z]|(?:\\\\[\\da-f]+ ?))(?:[_a-z\\d\\-]|\\\\(?:\\\\[\\da-f]+ ?))*/i]]),[\"css-kw\"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_STRING,/^[^\\)\\\"\\']+/]]),[\"css-str\"]);\n","path":null,"size_bytes":17590,"size_tokens":null},"coverage/base.css":{"content":"body, html {\n  margin:0; padding: 0;\n  height: 100%;\n}\nbody {\n    font-family: Helvetica Neue, Helvetica, Arial;\n    font-size: 14px;\n    color:#333;\n}\n.small { font-size: 12px; }\n*, *:after, *:before {\n  -webkit-box-sizing:border-box;\n     -moz-box-sizing:border-box;\n          box-sizing:border-box;\n  }\nh1 { font-size: 20px; margin: 0;}\nh2 { font-size: 14px; }\npre {\n    font: 12px/1.4 Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n    margin: 0;\n    padding: 0;\n    -moz-tab-size: 2;\n    -o-tab-size:  2;\n    tab-size: 2;\n}\na { color:#0074D9; text-decoration:none; }\na:hover { text-decoration:underline; }\n.strong { font-weight: bold; }\n.space-top1 { padding: 10px 0 0 0; }\n.pad2y { padding: 20px 0; }\n.pad1y { padding: 10px 0; }\n.pad2x { padding: 0 20px; }\n.pad2 { padding: 20px; }\n.pad1 { padding: 10px; }\n.space-left2 { padding-left:55px; }\n.space-right2 { padding-right:20px; }\n.center { text-align:center; }\n.clearfix { display:block; }\n.clearfix:after {\n  content:'';\n  display:block;\n  height:0;\n  clear:both;\n  visibility:hidden;\n  }\n.fl { float: left; }\n@media only screen and (max-width:640px) {\n  .col3 { width:100%; max-width:100%; }\n  .hide-mobile { display:none!important; }\n}\n\n.quiet {\n  color: #7f7f7f;\n  color: rgba(0,0,0,0.5);\n}\n.quiet a { opacity: 0.7; }\n\n.fraction {\n  font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace;\n  font-size: 10px;\n  color: #555;\n  background: #E8E8E8;\n  padding: 4px 5px;\n  border-radius: 3px;\n  vertical-align: middle;\n}\n\ndiv.path a:link, div.path a:visited { color: #333; }\ntable.coverage {\n  border-collapse: collapse;\n  margin: 10px 0 0 0;\n  padding: 0;\n}\n\ntable.coverage td {\n  margin: 0;\n  padding: 0;\n  vertical-align: top;\n}\ntable.coverage td.line-count {\n    text-align: right;\n    padding: 0 5px 0 20px;\n}\ntable.coverage td.line-coverage {\n    text-align: right;\n    padding-right: 10px;\n    min-width:20px;\n}\n\ntable.coverage td span.cline-any {\n    display: inline-block;\n    padding: 0 5px;\n    width: 100%;\n}\n.missing-if-branch {\n    display: inline-block;\n    margin-right: 5px;\n    border-radius: 3px;\n    position: relative;\n    padding: 0 4px;\n    background: #333;\n    color: yellow;\n}\n\n.skip-if-branch {\n    display: none;\n    margin-right: 10px;\n    position: relative;\n    padding: 0 4px;\n    background: #ccc;\n    color: white;\n}\n.missing-if-branch .typ, .skip-if-branch .typ {\n    color: inherit !important;\n}\n.coverage-summary {\n  border-collapse: collapse;\n  width: 100%;\n}\n.coverage-summary tr { border-bottom: 1px solid #bbb; }\n.keyline-all { border: 1px solid #ddd; }\n.coverage-summary td, .coverage-summary th { padding: 10px; }\n.coverage-summary tbody { border: 1px solid #bbb; }\n.coverage-summary td { border-right: 1px solid #bbb; }\n.coverage-summary td:last-child { border-right: none; }\n.coverage-summary th {\n  text-align: left;\n  font-weight: normal;\n  white-space: nowrap;\n}\n.coverage-summary th.file { border-right: none !important; }\n.coverage-summary th.pct { }\n.coverage-summary th.pic,\n.coverage-summary th.abs,\n.coverage-summary td.pct,\n.coverage-summary td.abs { text-align: right; }\n.coverage-summary td.file { white-space: nowrap;  }\n.coverage-summary td.pic { min-width: 120px !important;  }\n.coverage-summary tfoot td { }\n\n.coverage-summary .sorter {\n    height: 10px;\n    width: 7px;\n    display: inline-block;\n    margin-left: 0.5em;\n    background: url(sort-arrow-sprite.png) no-repeat scroll 0 0 transparent;\n}\n.coverage-summary .sorted .sorter {\n    background-position: 0 -20px;\n}\n.coverage-summary .sorted-desc .sorter {\n    background-position: 0 -10px;\n}\n.status-line {  height: 10px; }\n/* yellow */\n.cbranch-no { background: yellow !important; color: #111; }\n/* dark red */\n.red.solid, .status-line.low, .low .cover-fill { background:#C21F39 }\n.low .chart { border:1px solid #C21F39 }\n.highlighted,\n.highlighted .cstat-no, .highlighted .fstat-no, .highlighted .cbranch-no{\n  background: #C21F39 !important;\n}\n/* medium red */\n.cstat-no, .fstat-no, .cbranch-no, .cbranch-no { background:#F6C6CE }\n/* light red */\n.low, .cline-no { background:#FCE1E5 }\n/* light green */\n.high, .cline-yes { background:rgb(230,245,208) }\n/* medium green */\n.cstat-yes { background:rgb(161,215,106) }\n/* dark green */\n.status-line.high, .high .cover-fill { background:rgb(77,146,33) }\n.high .chart { border:1px solid rgb(77,146,33) }\n/* dark yellow (gold) */\n.status-line.medium, .medium .cover-fill { background: #f9cd0b; }\n.medium .chart { border:1px solid #f9cd0b; }\n/* light yellow */\n.medium { background: #fff4c2; }\n\n.cstat-skip { background: #ddd; color: #111; }\n.fstat-skip { background: #ddd; color: #111 !important; }\n.cbranch-skip { background: #ddd !important; color: #111; }\n\nspan.cline-neutral { background: #eaeaea; }\n\n.coverage-summary td.empty {\n    opacity: .5;\n    padding-top: 4px;\n    padding-bottom: 4px;\n    line-height: 1;\n    color: #888;\n}\n\n.cover-fill, .cover-empty {\n  display:inline-block;\n  height: 12px;\n}\n.chart {\n  line-height: 0;\n}\n.cover-empty {\n    background: white;\n}\n.cover-full {\n    border-right: none !important;\n}\npre.prettyprint {\n    border: none !important;\n    padding: 0 !important;\n    margin: 0 !important;\n}\n.com { color: #999 !important; }\n.ignore-none { color: #999; font-weight: normal; }\n\n.wrapper {\n  min-height: 100%;\n  height: auto !important;\n  height: 100%;\n  margin: 0 auto -48px;\n}\n.footer, .push {\n  height: 48px;\n}\n","path":null,"size_bytes":5394,"size_tokens":null},"vitest.config.ts":{"content":"import { defineConfig } from 'vitest/config';\nimport path from 'path';\n\nexport default defineConfig({\n  test: {\n    globals: true,\n    environment: 'node',\n    include: ['**/*.{test,spec}.{js,mjs,cjs,ts,mts,cts,jsx,tsx}'],\n    exclude: ['**/node_modules/**', '**/dist/**'],\n    coverage: {\n      provider: 'v8',\n      reporter: ['text', 'json', 'html', 'lcov'],\n      reportsDirectory: './coverage',\n      include: [\n        'server/**/*.ts',\n        'client/src/lib/**/*.ts',\n        'shared/**/*.ts'\n      ],\n      exclude: [\n        'node_modules',\n        'dist',\n        '**/*.d.ts',\n        '**/*.test.ts',\n        '**/*.spec.ts',\n        '**/index.ts',\n        'server/vite.ts',\n        'server/firebase.ts',\n        'server/seed*.ts',\n        'server/migrate*.ts',\n        'server/routes.ts',\n        'server/storage*.ts',\n        'server/db.ts',\n        'server/judge0.ts',\n        'server/huggingface*.ts',\n        'client/src/lib/firebase.ts',\n        'client/src/lib/queryClient.ts',\n        'client/src/lib/utils.ts'\n      ],\n      thresholds: {\n        statements: 20,\n        branches: 15,\n        functions: 15,\n        lines: 20\n      }\n    },\n    testTimeout: 10000,\n    hookTimeout: 10000,\n    setupFiles: ['./tests/setup.ts'],\n  },\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, 'client/src'),\n      '@shared': path.resolve(__dirname, 'shared'),\n      '@assets': path.resolve(__dirname, 'attached_assets'),\n    },\n  },\n});\n","path":null,"size_bytes":1457,"size_tokens":null},"coverage/block-navigation.js":{"content":"/* eslint-disable */\nvar jumpToCode = (function init() {\n    // Classes of code we would like to highlight in the file view\n    var missingCoverageClasses = ['.cbranch-no', '.cstat-no', '.fstat-no'];\n\n    // Elements to highlight in the file listing view\n    var fileListingElements = ['td.pct.low'];\n\n    // We don't want to select elements that are direct descendants of another match\n    var notSelector = ':not(' + missingCoverageClasses.join('):not(') + ') > '; // becomes `:not(a):not(b) > `\n\n    // Selector that finds elements on the page to which we can jump\n    var selector =\n        fileListingElements.join(', ') +\n        ', ' +\n        notSelector +\n        missingCoverageClasses.join(', ' + notSelector); // becomes `:not(a):not(b) > a, :not(a):not(b) > b`\n\n    // The NodeList of matching elements\n    var missingCoverageElements = document.querySelectorAll(selector);\n\n    var currentIndex;\n\n    function toggleClass(index) {\n        missingCoverageElements\n            .item(currentIndex)\n            .classList.remove('highlighted');\n        missingCoverageElements.item(index).classList.add('highlighted');\n    }\n\n    function makeCurrent(index) {\n        toggleClass(index);\n        currentIndex = index;\n        missingCoverageElements.item(index).scrollIntoView({\n            behavior: 'smooth',\n            block: 'center',\n            inline: 'center'\n        });\n    }\n\n    function goToPrevious() {\n        var nextIndex = 0;\n        if (typeof currentIndex !== 'number' || currentIndex === 0) {\n            nextIndex = missingCoverageElements.length - 1;\n        } else if (missingCoverageElements.length > 1) {\n            nextIndex = currentIndex - 1;\n        }\n\n        makeCurrent(nextIndex);\n    }\n\n    function goToNext() {\n        var nextIndex = 0;\n\n        if (\n            typeof currentIndex === 'number' &&\n            currentIndex < missingCoverageElements.length - 1\n        ) {\n            nextIndex = currentIndex + 1;\n        }\n\n        makeCurrent(nextIndex);\n    }\n\n    return function jump(event) {\n        if (\n            document.getElementById('fileSearch') === document.activeElement &&\n            document.activeElement != null\n        ) {\n            // if we're currently focused on the search input, we don't want to navigate\n            return;\n        }\n\n        switch (event.which) {\n            case 78: // n\n            case 74: // j\n                goToNext();\n                break;\n            case 66: // b\n            case 75: // k\n            case 80: // p\n                goToPrevious();\n                break;\n        }\n    };\n})();\nwindow.addEventListener('keydown', jumpToCode);\n","path":null,"size_bytes":2655,"size_tokens":null},"coverage/prettify.js":{"content":"/* eslint-disable */\nwindow.PR_SHOULD_USE_CONTINUATION=true;(function(){var h=[\"break,continue,do,else,for,if,return,while\"];var u=[h,\"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile\"];var p=[u,\"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof\"];var l=[p,\"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where\"];var x=[p,\"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient\"];var R=[x,\"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var\"];var r=\"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes\";var w=[p,\"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN\"];var s=\"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END\";var I=[h,\"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None\"];var f=[h,\"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END\"];var H=[h,\"case,done,elif,esac,eval,fi,function,in,local,set,then,until\"];var A=[l,R,w,s+I,f,H];var e=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\\d*)/;var C=\"str\";var z=\"kwd\";var j=\"com\";var O=\"typ\";var G=\"lit\";var L=\"pun\";var F=\"pln\";var m=\"tag\";var E=\"dec\";var J=\"src\";var P=\"atn\";var n=\"atv\";var N=\"nocode\";var M=\"(?:^^\\\\.?|[+-]|\\\\!|\\\\!=|\\\\!==|\\\\#|\\\\%|\\\\%=|&|&&|&&=|&=|\\\\(|\\\\*|\\\\*=|\\\\+=|\\\\,|\\\\-=|\\\\->|\\\\/|\\\\/=|:|::|\\\\;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\\\?|\\\\@|\\\\[|\\\\^|\\\\^=|\\\\^\\\\^|\\\\^\\\\^=|\\\\{|\\\\||\\\\|=|\\\\|\\\\||\\\\|\\\\|=|\\\\~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\\\s*\";function k(Z){var ad=0;var S=false;var ac=false;for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.ignoreCase){ac=true}else{if(/[a-z]/i.test(ae.source.replace(/\\\\u[0-9a-f]{4}|\\\\x[0-9a-f]{2}|\\\\[^ux]/gi,\"\"))){S=true;ac=false;break}}}var Y={b:8,t:9,n:10,v:11,f:12,r:13};function ab(ah){var ag=ah.charCodeAt(0);if(ag!==92){return ag}var af=ah.charAt(1);ag=Y[af];if(ag){return ag}else{if(\"0\"<=af&&af<=\"7\"){return parseInt(ah.substring(1),8)}else{if(af===\"u\"||af===\"x\"){return parseInt(ah.substring(2),16)}else{return ah.charCodeAt(1)}}}}function T(af){if(af<32){return(af<16?\"\\\\x0\":\"\\\\x\")+af.toString(16)}var ag=String.fromCharCode(af);if(ag===\"\\\\\"||ag===\"-\"||ag===\"[\"||ag===\"]\"){ag=\"\\\\\"+ag}return ag}function X(am){var aq=am.substring(1,am.length-1).match(new RegExp(\"\\\\\\\\u[0-9A-Fa-f]{4}|\\\\\\\\x[0-9A-Fa-f]{2}|\\\\\\\\[0-3][0-7]{0,2}|\\\\\\\\[0-7]{1,2}|\\\\\\\\[\\\\s\\\\S]|-|[^-\\\\\\\\]\",\"g\"));var ak=[];var af=[];var ao=aq[0]===\"^\";for(var ar=ao?1:0,aj=aq.length;ar<aj;++ar){var ah=aq[ar];if(/\\\\[bdsw]/i.test(ah)){ak.push(ah)}else{var ag=ab(ah);var al;if(ar+2<aj&&\"-\"===aq[ar+1]){al=ab(aq[ar+2]);ar+=2}else{al=ag}af.push([ag,al]);if(!(al<65||ag>122)){if(!(al<65||ag>90)){af.push([Math.max(65,ag)|32,Math.min(al,90)|32])}if(!(al<97||ag>122)){af.push([Math.max(97,ag)&~32,Math.min(al,122)&~32])}}}}af.sort(function(av,au){return(av[0]-au[0])||(au[1]-av[1])});var ai=[];var ap=[NaN,NaN];for(var ar=0;ar<af.length;++ar){var at=af[ar];if(at[0]<=ap[1]+1){ap[1]=Math.max(ap[1],at[1])}else{ai.push(ap=at)}}var an=[\"[\"];if(ao){an.push(\"^\")}an.push.apply(an,ak);for(var ar=0;ar<ai.length;++ar){var at=ai[ar];an.push(T(at[0]));if(at[1]>at[0]){if(at[1]+1>at[0]){an.push(\"-\")}an.push(T(at[1]))}}an.push(\"]\");return an.join(\"\")}function W(al){var aj=al.source.match(new RegExp(\"(?:\\\\[(?:[^\\\\x5C\\\\x5D]|\\\\\\\\[\\\\s\\\\S])*\\\\]|\\\\\\\\u[A-Fa-f0-9]{4}|\\\\\\\\x[A-Fa-f0-9]{2}|\\\\\\\\[0-9]+|\\\\\\\\[^ux0-9]|\\\\(\\\\?[:!=]|[\\\\(\\\\)\\\\^]|[^\\\\x5B\\\\x5C\\\\(\\\\)\\\\^]+)\",\"g\"));var ah=aj.length;var an=[];for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag===\"(\"){++am}else{if(\"\\\\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){an[af]=-1}}}}for(var ak=1;ak<an.length;++ak){if(-1===an[ak]){an[ak]=++ad}}for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag===\"(\"){++am;if(an[am]===undefined){aj[ak]=\"(?:\"}}else{if(\"\\\\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){aj[ak]=\"\\\\\"+an[am]}}}}for(var ak=0,am=0;ak<ah;++ak){if(\"^\"===aj[ak]&&\"^\"!==aj[ak+1]){aj[ak]=\"\"}}if(al.ignoreCase&&S){for(var ak=0;ak<ah;++ak){var ag=aj[ak];var ai=ag.charAt(0);if(ag.length>=2&&ai===\"[\"){aj[ak]=X(ag)}else{if(ai!==\"\\\\\"){aj[ak]=ag.replace(/[a-zA-Z]/g,function(ao){var ap=ao.charCodeAt(0);return\"[\"+String.fromCharCode(ap&~32,ap|32)+\"]\"})}}}}return aj.join(\"\")}var aa=[];for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.global||ae.multiline){throw new Error(\"\"+ae)}aa.push(\"(?:\"+W(ae)+\")\")}return new RegExp(aa.join(\"|\"),ac?\"gi\":\"g\")}function a(V){var U=/(?:^|\\s)nocode(?:\\s|$)/;var X=[];var T=0;var Z=[];var W=0;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=document.defaultView.getComputedStyle(V,null).getPropertyValue(\"white-space\")}}var Y=S&&\"pre\"===S.substring(0,3);function aa(ab){switch(ab.nodeType){case 1:if(U.test(ab.className)){return}for(var ae=ab.firstChild;ae;ae=ae.nextSibling){aa(ae)}var ad=ab.nodeName;if(\"BR\"===ad||\"LI\"===ad){X[W]=\"\\n\";Z[W<<1]=T++;Z[(W++<<1)|1]=ab}break;case 3:case 4:var ac=ab.nodeValue;if(ac.length){if(!Y){ac=ac.replace(/[ \\t\\r\\n]+/g,\" \")}else{ac=ac.replace(/\\r\\n?/g,\"\\n\")}X[W]=ac;Z[W<<1]=T;T+=ac.length;Z[(W++<<1)|1]=ab}break}}aa(V);return{sourceCode:X.join(\"\").replace(/\\n$/,\"\"),spans:Z}}function B(S,U,W,T){if(!U){return}var V={sourceCode:U,basePos:S};W(V);T.push.apply(T,V.decorations)}var v=/\\S/;function o(S){var V=undefined;for(var U=S.firstChild;U;U=U.nextSibling){var T=U.nodeType;V=(T===1)?(V?S:U):(T===3)?(v.test(U.nodeValue)?S:V):V}return V===S?undefined:V}function g(U,T){var S={};var V;(function(){var ad=U.concat(T);var ah=[];var ag={};for(var ab=0,Z=ad.length;ab<Z;++ab){var Y=ad[ab];var ac=Y[3];if(ac){for(var ae=ac.length;--ae>=0;){S[ac.charAt(ae)]=Y}}var af=Y[1];var aa=\"\"+af;if(!ag.hasOwnProperty(aa)){ah.push(af);ag[aa]=null}}ah.push(/[\\0-\\uffff]/);V=k(ah)})();var X=T.length;var W=function(ah){var Z=ah.sourceCode,Y=ah.basePos;var ad=[Y,F];var af=0;var an=Z.match(V)||[];var aj={};for(var ae=0,aq=an.length;ae<aq;++ae){var ag=an[ae];var ap=aj[ag];var ai=void 0;var am;if(typeof ap===\"string\"){am=false}else{var aa=S[ag.charAt(0)];if(aa){ai=ag.match(aa[1]);ap=aa[0]}else{for(var ao=0;ao<X;++ao){aa=T[ao];ai=ag.match(aa[1]);if(ai){ap=aa[0];break}}if(!ai){ap=F}}am=ap.length>=5&&\"lang-\"===ap.substring(0,5);if(am&&!(ai&&typeof ai[1]===\"string\")){am=false;ap=J}if(!am){aj[ag]=ap}}var ab=af;af+=ag.length;if(!am){ad.push(Y+ab,ap)}else{var al=ai[1];var ak=ag.indexOf(al);var ac=ak+al.length;if(ai[2]){ac=ag.length-ai[2].length;ak=ac-al.length}var ar=ap.substring(5);B(Y+ab,ag.substring(0,ak),W,ad);B(Y+ab+ak,al,q(ar,al),ad);B(Y+ab+ac,ag.substring(ac),W,ad)}}ah.decorations=ad};return W}function i(T){var W=[],S=[];if(T.tripleQuotedStrings){W.push([C,/^(?:\\'\\'\\'(?:[^\\'\\\\]|\\\\[\\s\\S]|\\'{1,2}(?=[^\\']))*(?:\\'\\'\\'|$)|\\\"\\\"\\\"(?:[^\\\"\\\\]|\\\\[\\s\\S]|\\\"{1,2}(?=[^\\\"]))*(?:\\\"\\\"\\\"|$)|\\'(?:[^\\\\\\']|\\\\[\\s\\S])*(?:\\'|$)|\\\"(?:[^\\\\\\\"]|\\\\[\\s\\S])*(?:\\\"|$))/,null,\"'\\\"\"])}else{if(T.multiLineStrings){W.push([C,/^(?:\\'(?:[^\\\\\\']|\\\\[\\s\\S])*(?:\\'|$)|\\\"(?:[^\\\\\\\"]|\\\\[\\s\\S])*(?:\\\"|$)|\\`(?:[^\\\\\\`]|\\\\[\\s\\S])*(?:\\`|$))/,null,\"'\\\"`\"])}else{W.push([C,/^(?:\\'(?:[^\\\\\\'\\r\\n]|\\\\.)*(?:\\'|$)|\\\"(?:[^\\\\\\\"\\r\\n]|\\\\.)*(?:\\\"|$))/,null,\"\\\"'\"])}}if(T.verbatimStrings){S.push([C,/^@\\\"(?:[^\\\"]|\\\"\\\")*(?:\\\"|$)/,null])}var Y=T.hashComments;if(Y){if(T.cStyleComments){if(Y>1){W.push([j,/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,\"#\"])}else{W.push([j,/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\\b|[^\\r\\n]*)/,null,\"#\"])}S.push([C,/^<(?:(?:(?:\\.\\.\\/)*|\\/?)(?:[\\w-]+(?:\\/[\\w-]+)+)?[\\w-]+\\.h|[a-z]\\w*)>/,null])}else{W.push([j,/^#[^\\r\\n]*/,null,\"#\"])}}if(T.cStyleComments){S.push([j,/^\\/\\/[^\\r\\n]*/,null]);S.push([j,/^\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,null])}if(T.regexLiterals){var X=(\"/(?=[^/*])(?:[^/\\\\x5B\\\\x5C]|\\\\x5C[\\\\s\\\\S]|\\\\x5B(?:[^\\\\x5C\\\\x5D]|\\\\x5C[\\\\s\\\\S])*(?:\\\\x5D|$))+/\");S.push([\"lang-regex\",new RegExp(\"^\"+M+\"(\"+X+\")\")])}var V=T.types;if(V){S.push([O,V])}var U=(\"\"+T.keywords).replace(/^ | $/g,\"\");if(U.length){S.push([z,new RegExp(\"^(?:\"+U.replace(/[\\s,]+/g,\"|\")+\")\\\\b\"),null])}W.push([F,/^\\s+/,null,\" \\r\\n\\t\\xA0\"]);S.push([G,/^@[a-z_$][a-z_$@0-9]*/i,null],[O,/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\\w+_t\\b)/,null],[F,/^[a-z_$][a-z_$@0-9]*/i,null],[G,new RegExp(\"^(?:0x[a-f0-9]+|(?:\\\\d(?:_\\\\d+)*\\\\d*(?:\\\\.\\\\d*)?|\\\\.\\\\d\\\\+)(?:e[+\\\\-]?\\\\d+)?)[a-z]*\",\"i\"),null,\"0123456789\"],[F,/^\\\\[\\s\\S]?/,null],[L,/^.[^\\s\\w\\.$@\\'\\\"\\`\\/\\#\\\\]*/,null]);return g(W,S)}var K=i({keywords:A,hashComments:true,cStyleComments:true,multiLineStrings:true,regexLiterals:true});function Q(V,ag){var U=/(?:^|\\s)nocode(?:\\s|$)/;var ab=/\\r\\n?|\\n/;var ac=V.ownerDocument;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=ac.defaultView.getComputedStyle(V,null).getPropertyValue(\"white-space\")}}var Z=S&&\"pre\"===S.substring(0,3);var af=ac.createElement(\"LI\");while(V.firstChild){af.appendChild(V.firstChild)}var W=[af];function ae(al){switch(al.nodeType){case 1:if(U.test(al.className)){break}if(\"BR\"===al.nodeName){ad(al);if(al.parentNode){al.parentNode.removeChild(al)}}else{for(var an=al.firstChild;an;an=an.nextSibling){ae(an)}}break;case 3:case 4:if(Z){var am=al.nodeValue;var aj=am.match(ab);if(aj){var ai=am.substring(0,aj.index);al.nodeValue=ai;var ah=am.substring(aj.index+aj[0].length);if(ah){var ak=al.parentNode;ak.insertBefore(ac.createTextNode(ah),al.nextSibling)}ad(al);if(!ai){al.parentNode.removeChild(al)}}}break}}function ad(ak){while(!ak.nextSibling){ak=ak.parentNode;if(!ak){return}}function ai(al,ar){var aq=ar?al.cloneNode(false):al;var ao=al.parentNode;if(ao){var ap=ai(ao,1);var an=al.nextSibling;ap.appendChild(aq);for(var am=an;am;am=an){an=am.nextSibling;ap.appendChild(am)}}return aq}var ah=ai(ak.nextSibling,0);for(var aj;(aj=ah.parentNode)&&aj.nodeType===1;){ah=aj}W.push(ah)}for(var Y=0;Y<W.length;++Y){ae(W[Y])}if(ag===(ag|0)){W[0].setAttribute(\"value\",ag)}var aa=ac.createElement(\"OL\");aa.className=\"linenums\";var X=Math.max(0,((ag-1))|0)||0;for(var Y=0,T=W.length;Y<T;++Y){af=W[Y];af.className=\"L\"+((Y+X)%10);if(!af.firstChild){af.appendChild(ac.createTextNode(\"\\xA0\"))}aa.appendChild(af)}V.appendChild(aa)}function D(ac){var aj=/\\bMSIE\\b/.test(navigator.userAgent);var am=/\\n/g;var al=ac.sourceCode;var an=al.length;var V=0;var aa=ac.spans;var T=aa.length;var ah=0;var X=ac.decorations;var Y=X.length;var Z=0;X[Y]=an;var ar,aq;for(aq=ar=0;aq<Y;){if(X[aq]!==X[aq+2]){X[ar++]=X[aq++];X[ar++]=X[aq++]}else{aq+=2}}Y=ar;for(aq=ar=0;aq<Y;){var at=X[aq];var ab=X[aq+1];var W=aq+2;while(W+2<=Y&&X[W+1]===ab){W+=2}X[ar++]=at;X[ar++]=ab;aq=W}Y=X.length=ar;var ae=null;while(ah<T){var af=aa[ah];var S=aa[ah+2]||an;var ag=X[Z];var ap=X[Z+2]||an;var W=Math.min(S,ap);var ak=aa[ah+1];var U;if(ak.nodeType!==1&&(U=al.substring(V,W))){if(aj){U=U.replace(am,\"\\r\")}ak.nodeValue=U;var ai=ak.ownerDocument;var ao=ai.createElement(\"SPAN\");ao.className=X[Z+1];var ad=ak.parentNode;ad.replaceChild(ao,ak);ao.appendChild(ak);if(V<S){aa[ah+1]=ak=ai.createTextNode(al.substring(W,S));ad.insertBefore(ak,ao.nextSibling)}}V=W;if(V>=S){ah+=2}if(V>=ap){Z+=2}}}var t={};function c(U,V){for(var S=V.length;--S>=0;){var T=V[S];if(!t.hasOwnProperty(T)){t[T]=U}else{if(window.console){console.warn(\"cannot override language handler %s\",T)}}}}function q(T,S){if(!(T&&t.hasOwnProperty(T))){T=/^\\s*</.test(S)?\"default-markup\":\"default-code\"}return t[T]}c(K,[\"default-code\"]);c(g([],[[F,/^[^<?]+/],[E,/^<!\\w[^>]*(?:>|$)/],[j,/^<\\!--[\\s\\S]*?(?:-\\->|$)/],[\"lang-\",/^<\\?([\\s\\S]+?)(?:\\?>|$)/],[\"lang-\",/^<%([\\s\\S]+?)(?:%>|$)/],[L,/^(?:<[%?]|[%?]>)/],[\"lang-\",/^<xmp\\b[^>]*>([\\s\\S]+?)<\\/xmp\\b[^>]*>/i],[\"lang-js\",/^<script\\b[^>]*>([\\s\\S]*?)(<\\/script\\b[^>]*>)/i],[\"lang-css\",/^<style\\b[^>]*>([\\s\\S]*?)(<\\/style\\b[^>]*>)/i],[\"lang-in.tag\",/^(<\\/?[a-z][^<>]*>)/i]]),[\"default-markup\",\"htm\",\"html\",\"mxml\",\"xhtml\",\"xml\",\"xsl\"]);c(g([[F,/^[\\s]+/,null,\" \\t\\r\\n\"],[n,/^(?:\\\"[^\\\"]*\\\"?|\\'[^\\']*\\'?)/,null,\"\\\"'\"]],[[m,/^^<\\/?[a-z](?:[\\w.:-]*\\w)?|\\/?>$/i],[P,/^(?!style[\\s=]|on)[a-z](?:[\\w:-]*\\w)?/i],[\"lang-uq.val\",/^=\\s*([^>\\'\\\"\\s]*(?:[^>\\'\\\"\\s\\/]|\\/(?=\\s)))/],[L,/^[=<>\\/]+/],[\"lang-js\",/^on\\w+\\s*=\\s*\\\"([^\\\"]+)\\\"/i],[\"lang-js\",/^on\\w+\\s*=\\s*\\'([^\\']+)\\'/i],[\"lang-js\",/^on\\w+\\s*=\\s*([^\\\"\\'>\\s]+)/i],[\"lang-css\",/^style\\s*=\\s*\\\"([^\\\"]+)\\\"/i],[\"lang-css\",/^style\\s*=\\s*\\'([^\\']+)\\'/i],[\"lang-css\",/^style\\s*=\\s*([^\\\"\\'>\\s]+)/i]]),[\"in.tag\"]);c(g([],[[n,/^[\\s\\S]+/]]),[\"uq.val\"]);c(i({keywords:l,hashComments:true,cStyleComments:true,types:e}),[\"c\",\"cc\",\"cpp\",\"cxx\",\"cyc\",\"m\"]);c(i({keywords:\"null,true,false\"}),[\"json\"]);c(i({keywords:R,hashComments:true,cStyleComments:true,verbatimStrings:true,types:e}),[\"cs\"]);c(i({keywords:x,cStyleComments:true}),[\"java\"]);c(i({keywords:H,hashComments:true,multiLineStrings:true}),[\"bsh\",\"csh\",\"sh\"]);c(i({keywords:I,hashComments:true,multiLineStrings:true,tripleQuotedStrings:true}),[\"cv\",\"py\"]);c(i({keywords:s,hashComments:true,multiLineStrings:true,regexLiterals:true}),[\"perl\",\"pl\",\"pm\"]);c(i({keywords:f,hashComments:true,multiLineStrings:true,regexLiterals:true}),[\"rb\"]);c(i({keywords:w,cStyleComments:true,regexLiterals:true}),[\"js\"]);c(i({keywords:r,hashComments:3,cStyleComments:true,multilineStrings:true,tripleQuotedStrings:true,regexLiterals:true}),[\"coffee\"]);c(g([],[[C,/^[\\s\\S]+/]]),[\"regex\"]);function d(V){var U=V.langExtension;try{var S=a(V.sourceNode);var T=S.sourceCode;V.sourceCode=T;V.spans=S.spans;V.basePos=0;q(U,T)(V);D(V)}catch(W){if(\"console\" in window){console.log(W&&W.stack?W.stack:W)}}}function y(W,V,U){var S=document.createElement(\"PRE\");S.innerHTML=W;if(U){Q(S,U)}var T={langExtension:V,numberLines:U,sourceNode:S};d(T);return S.innerHTML}function b(ad){function Y(af){return document.getElementsByTagName(af)}var ac=[Y(\"pre\"),Y(\"code\"),Y(\"xmp\")];var T=[];for(var aa=0;aa<ac.length;++aa){for(var Z=0,V=ac[aa].length;Z<V;++Z){T.push(ac[aa][Z])}}ac=null;var W=Date;if(!W.now){W={now:function(){return +(new Date)}}}var X=0;var S;var ab=/\\blang(?:uage)?-([\\w.]+)(?!\\S)/;var ae=/\\bprettyprint\\b/;function U(){var ag=(window.PR_SHOULD_USE_CONTINUATION?W.now()+250:Infinity);for(;X<T.length&&W.now()<ag;X++){var aj=T[X];var ai=aj.className;if(ai.indexOf(\"prettyprint\")>=0){var ah=ai.match(ab);var am;if(!ah&&(am=o(aj))&&\"CODE\"===am.tagName){ah=am.className.match(ab)}if(ah){ah=ah[1]}var al=false;for(var ak=aj.parentNode;ak;ak=ak.parentNode){if((ak.tagName===\"pre\"||ak.tagName===\"code\"||ak.tagName===\"xmp\")&&ak.className&&ak.className.indexOf(\"prettyprint\")>=0){al=true;break}}if(!al){var af=aj.className.match(/\\blinenums\\b(?::(\\d+))?/);af=af?af[1]&&af[1].length?+af[1]:true:false;if(af){Q(aj,af)}S={langExtension:ah,sourceNode:aj,numberLines:af};d(S)}}}if(X<T.length){setTimeout(U,250)}else{if(ad){ad()}}}U()}window.prettyPrintOne=y;window.prettyPrint=b;window.PR={createSimpleLexer:g,registerLangHandler:c,sourceDecorator:i,PR_ATTRIB_NAME:P,PR_ATTRIB_VALUE:n,PR_COMMENT:j,PR_DECLARATION:E,PR_KEYWORD:z,PR_LITERAL:G,PR_NOCODE:N,PR_PLAIN:F,PR_PUNCTUATION:L,PR_SOURCE:J,PR_STRING:C,PR_TAG:m,PR_TYPE:O}})();PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_DECLARATION,/^<!\\w[^>]*(?:>|$)/],[PR.PR_COMMENT,/^<\\!--[\\s\\S]*?(?:-\\->|$)/],[PR.PR_PUNCTUATION,/^(?:<[%?]|[%?]>)/],[\"lang-\",/^<\\?([\\s\\S]+?)(?:\\?>|$)/],[\"lang-\",/^<%([\\s\\S]+?)(?:%>|$)/],[\"lang-\",/^<xmp\\b[^>]*>([\\s\\S]+?)<\\/xmp\\b[^>]*>/i],[\"lang-handlebars\",/^<script\\b[^>]*type\\s*=\\s*['\"]?text\\/x-handlebars-template['\"]?\\b[^>]*>([\\s\\S]*?)(<\\/script\\b[^>]*>)/i],[\"lang-js\",/^<script\\b[^>]*>([\\s\\S]*?)(<\\/script\\b[^>]*>)/i],[\"lang-css\",/^<style\\b[^>]*>([\\s\\S]*?)(<\\/style\\b[^>]*>)/i],[\"lang-in.tag\",/^(<\\/?[a-z][^<>]*>)/i],[PR.PR_DECLARATION,/^{{[#^>/]?\\s*[\\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{&?\\s*[\\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{{>?\\s*[\\w.][^}]*}}}/],[PR.PR_COMMENT,/^{{![^}]*}}/]]),[\"handlebars\",\"hbs\"]);PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[ \\t\\r\\n\\f]+/,null,\" \\t\\r\\n\\f\"]],[[PR.PR_STRING,/^\\\"(?:[^\\n\\r\\f\\\\\\\"]|\\\\(?:\\r\\n?|\\n|\\f)|\\\\[\\s\\S])*\\\"/,null],[PR.PR_STRING,/^\\'(?:[^\\n\\r\\f\\\\\\']|\\\\(?:\\r\\n?|\\n|\\f)|\\\\[\\s\\S])*\\'/,null],[\"lang-css-str\",/^url\\(([^\\)\\\"\\']*)\\)/i],[PR.PR_KEYWORD,/^(?:url|rgb|\\!important|@import|@page|@media|@charset|inherit)(?=[^\\-\\w]|$)/i,null],[\"lang-css-kw\",/^(-?(?:[_a-z]|(?:\\\\[0-9a-f]+ ?))(?:[_a-z0-9\\-]|\\\\(?:\\\\[0-9a-f]+ ?))*)\\s*:/i],[PR.PR_COMMENT,/^\\/\\*[^*]*\\*+(?:[^\\/*][^*]*\\*+)*\\//],[PR.PR_COMMENT,/^(?:<!--|-->)/],[PR.PR_LITERAL,/^(?:\\d+|\\d*\\.\\d+)(?:%|[a-z]+)?/i],[PR.PR_LITERAL,/^#(?:[0-9a-f]{3}){1,2}/i],[PR.PR_PLAIN,/^-?(?:[_a-z]|(?:\\\\[\\da-f]+ ?))(?:[_a-z\\d\\-]|\\\\(?:\\\\[\\da-f]+ ?))*/i],[PR.PR_PUNCTUATION,/^[^\\s\\w\\'\\\"]+/]]),[\"css\"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_KEYWORD,/^-?(?:[_a-z]|(?:\\\\[\\da-f]+ ?))(?:[_a-z\\d\\-]|\\\\(?:\\\\[\\da-f]+ ?))*/i]]),[\"css-kw\"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_STRING,/^[^\\)\\\"\\']+/]]),[\"css-str\"]);\n","path":null,"size_bytes":17590,"size_tokens":null},"tests/server/dailyChallenges.test.ts":{"content":"import { describe, it, expect } from 'vitest';\n\nfunction getDifficultyOptions(level: number): string[] {\n  if (level < 3) return ['beginner', 'easy'];\n  if (level < 7) return ['easy', 'beginner', 'medium'];\n  if (level < 12) return ['easy', 'medium'];\n  if (level < 18) return ['medium', 'intermediate'];\n  return ['medium', 'intermediate', 'hard', 'advanced'];\n}\n\nfunction shouldPreferEasier(dayOfWeek: number): boolean {\n  return dayOfWeek === 1 || dayOfWeek === 6;\n}\n\nfunction shouldPreferHarder(dayOfWeek: number): boolean {\n  return dayOfWeek === 3 || dayOfWeek === 5;\n}\n\ndescribe('Daily Challenges Generator', () => {\n  describe('getDifficultyOptions', () => {\n    it('should return beginner/easy for low level users (< 3)', () => {\n      const result = getDifficultyOptions(1);\n      expect(result).toContain('beginner');\n      expect(result).toContain('easy');\n      expect(result).not.toContain('hard');\n    });\n\n    it('should return easy/beginner/medium for level 3-6', () => {\n      const result = getDifficultyOptions(5);\n      expect(result).toContain('easy');\n      expect(result).toContain('beginner');\n      expect(result).toContain('medium');\n    });\n\n    it('should return easy/medium for level 7-11', () => {\n      const result = getDifficultyOptions(10);\n      expect(result).toContain('easy');\n      expect(result).toContain('medium');\n      expect(result).not.toContain('beginner');\n    });\n\n    it('should return medium/intermediate for level 12-17', () => {\n      const result = getDifficultyOptions(15);\n      expect(result).toContain('medium');\n      expect(result).toContain('intermediate');\n      expect(result).not.toContain('easy');\n    });\n\n    it('should return all harder difficulties for level 18+', () => {\n      const result = getDifficultyOptions(20);\n      expect(result).toContain('medium');\n      expect(result).toContain('intermediate');\n      expect(result).toContain('hard');\n      expect(result).toContain('advanced');\n    });\n\n    it('should handle edge cases at boundaries', () => {\n      expect(getDifficultyOptions(2)).toEqual(['beginner', 'easy']);\n      expect(getDifficultyOptions(3)).toEqual(['easy', 'beginner', 'medium']);\n      expect(getDifficultyOptions(6)).toEqual(['easy', 'beginner', 'medium']);\n      expect(getDifficultyOptions(7)).toEqual(['easy', 'medium']);\n      expect(getDifficultyOptions(11)).toEqual(['easy', 'medium']);\n      expect(getDifficultyOptions(12)).toEqual(['medium', 'intermediate']);\n      expect(getDifficultyOptions(17)).toEqual(['medium', 'intermediate']);\n      expect(getDifficultyOptions(18)).toEqual(['medium', 'intermediate', 'hard', 'advanced']);\n    });\n  });\n\n  describe('shouldPreferEasier', () => {\n    it('should prefer easier on Monday (1)', () => {\n      expect(shouldPreferEasier(1)).toBe(true);\n    });\n\n    it('should prefer easier on Saturday (6)', () => {\n      expect(shouldPreferEasier(6)).toBe(true);\n    });\n\n    it('should not prefer easier on other days', () => {\n      expect(shouldPreferEasier(0)).toBe(false);\n      expect(shouldPreferEasier(2)).toBe(false);\n      expect(shouldPreferEasier(3)).toBe(false);\n      expect(shouldPreferEasier(4)).toBe(false);\n      expect(shouldPreferEasier(5)).toBe(false);\n    });\n  });\n\n  describe('shouldPreferHarder', () => {\n    it('should prefer harder on Wednesday (3)', () => {\n      expect(shouldPreferHarder(3)).toBe(true);\n    });\n\n    it('should prefer harder on Friday (5)', () => {\n      expect(shouldPreferHarder(5)).toBe(true);\n    });\n\n    it('should not prefer harder on other days', () => {\n      expect(shouldPreferHarder(0)).toBe(false);\n      expect(shouldPreferHarder(1)).toBe(false);\n      expect(shouldPreferHarder(2)).toBe(false);\n      expect(shouldPreferHarder(4)).toBe(false);\n      expect(shouldPreferHarder(6)).toBe(false);\n    });\n  });\n\n  describe('difficulty scaling logic', () => {\n    it('should progressively increase difficulty with level', () => {\n      const level1Options = getDifficultyOptions(1);\n      const level10Options = getDifficultyOptions(10);\n      const level20Options = getDifficultyOptions(20);\n\n      expect(level1Options).toContain('beginner');\n      expect(level10Options).not.toContain('beginner');\n      expect(level20Options).toContain('advanced');\n    });\n\n    it('should have overlapping difficulties for smooth progression', () => {\n      const level6Options = getDifficultyOptions(6);\n      const level7Options = getDifficultyOptions(7);\n\n      const commonDifficulties = level6Options.filter((d) =>\n        level7Options.includes(d)\n      );\n      expect(commonDifficulties.length).toBeGreaterThan(0);\n    });\n  });\n});\n","path":null,"size_bytes":4632,"size_tokens":null},"coverage/lcov-report/base.css":{"content":"body, html {\n  margin:0; padding: 0;\n  height: 100%;\n}\nbody {\n    font-family: Helvetica Neue, Helvetica, Arial;\n    font-size: 14px;\n    color:#333;\n}\n.small { font-size: 12px; }\n*, *:after, *:before {\n  -webkit-box-sizing:border-box;\n     -moz-box-sizing:border-box;\n          box-sizing:border-box;\n  }\nh1 { font-size: 20px; margin: 0;}\nh2 { font-size: 14px; }\npre {\n    font: 12px/1.4 Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n    margin: 0;\n    padding: 0;\n    -moz-tab-size: 2;\n    -o-tab-size:  2;\n    tab-size: 2;\n}\na { color:#0074D9; text-decoration:none; }\na:hover { text-decoration:underline; }\n.strong { font-weight: bold; }\n.space-top1 { padding: 10px 0 0 0; }\n.pad2y { padding: 20px 0; }\n.pad1y { padding: 10px 0; }\n.pad2x { padding: 0 20px; }\n.pad2 { padding: 20px; }\n.pad1 { padding: 10px; }\n.space-left2 { padding-left:55px; }\n.space-right2 { padding-right:20px; }\n.center { text-align:center; }\n.clearfix { display:block; }\n.clearfix:after {\n  content:'';\n  display:block;\n  height:0;\n  clear:both;\n  visibility:hidden;\n  }\n.fl { float: left; }\n@media only screen and (max-width:640px) {\n  .col3 { width:100%; max-width:100%; }\n  .hide-mobile { display:none!important; }\n}\n\n.quiet {\n  color: #7f7f7f;\n  color: rgba(0,0,0,0.5);\n}\n.quiet a { opacity: 0.7; }\n\n.fraction {\n  font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace;\n  font-size: 10px;\n  color: #555;\n  background: #E8E8E8;\n  padding: 4px 5px;\n  border-radius: 3px;\n  vertical-align: middle;\n}\n\ndiv.path a:link, div.path a:visited { color: #333; }\ntable.coverage {\n  border-collapse: collapse;\n  margin: 10px 0 0 0;\n  padding: 0;\n}\n\ntable.coverage td {\n  margin: 0;\n  padding: 0;\n  vertical-align: top;\n}\ntable.coverage td.line-count {\n    text-align: right;\n    padding: 0 5px 0 20px;\n}\ntable.coverage td.line-coverage {\n    text-align: right;\n    padding-right: 10px;\n    min-width:20px;\n}\n\ntable.coverage td span.cline-any {\n    display: inline-block;\n    padding: 0 5px;\n    width: 100%;\n}\n.missing-if-branch {\n    display: inline-block;\n    margin-right: 5px;\n    border-radius: 3px;\n    position: relative;\n    padding: 0 4px;\n    background: #333;\n    color: yellow;\n}\n\n.skip-if-branch {\n    display: none;\n    margin-right: 10px;\n    position: relative;\n    padding: 0 4px;\n    background: #ccc;\n    color: white;\n}\n.missing-if-branch .typ, .skip-if-branch .typ {\n    color: inherit !important;\n}\n.coverage-summary {\n  border-collapse: collapse;\n  width: 100%;\n}\n.coverage-summary tr { border-bottom: 1px solid #bbb; }\n.keyline-all { border: 1px solid #ddd; }\n.coverage-summary td, .coverage-summary th { padding: 10px; }\n.coverage-summary tbody { border: 1px solid #bbb; }\n.coverage-summary td { border-right: 1px solid #bbb; }\n.coverage-summary td:last-child { border-right: none; }\n.coverage-summary th {\n  text-align: left;\n  font-weight: normal;\n  white-space: nowrap;\n}\n.coverage-summary th.file { border-right: none !important; }\n.coverage-summary th.pct { }\n.coverage-summary th.pic,\n.coverage-summary th.abs,\n.coverage-summary td.pct,\n.coverage-summary td.abs { text-align: right; }\n.coverage-summary td.file { white-space: nowrap;  }\n.coverage-summary td.pic { min-width: 120px !important;  }\n.coverage-summary tfoot td { }\n\n.coverage-summary .sorter {\n    height: 10px;\n    width: 7px;\n    display: inline-block;\n    margin-left: 0.5em;\n    background: url(sort-arrow-sprite.png) no-repeat scroll 0 0 transparent;\n}\n.coverage-summary .sorted .sorter {\n    background-position: 0 -20px;\n}\n.coverage-summary .sorted-desc .sorter {\n    background-position: 0 -10px;\n}\n.status-line {  height: 10px; }\n/* yellow */\n.cbranch-no { background: yellow !important; color: #111; }\n/* dark red */\n.red.solid, .status-line.low, .low .cover-fill { background:#C21F39 }\n.low .chart { border:1px solid #C21F39 }\n.highlighted,\n.highlighted .cstat-no, .highlighted .fstat-no, .highlighted .cbranch-no{\n  background: #C21F39 !important;\n}\n/* medium red */\n.cstat-no, .fstat-no, .cbranch-no, .cbranch-no { background:#F6C6CE }\n/* light red */\n.low, .cline-no { background:#FCE1E5 }\n/* light green */\n.high, .cline-yes { background:rgb(230,245,208) }\n/* medium green */\n.cstat-yes { background:rgb(161,215,106) }\n/* dark green */\n.status-line.high, .high .cover-fill { background:rgb(77,146,33) }\n.high .chart { border:1px solid rgb(77,146,33) }\n/* dark yellow (gold) */\n.status-line.medium, .medium .cover-fill { background: #f9cd0b; }\n.medium .chart { border:1px solid #f9cd0b; }\n/* light yellow */\n.medium { background: #fff4c2; }\n\n.cstat-skip { background: #ddd; color: #111; }\n.fstat-skip { background: #ddd; color: #111 !important; }\n.cbranch-skip { background: #ddd !important; color: #111; }\n\nspan.cline-neutral { background: #eaeaea; }\n\n.coverage-summary td.empty {\n    opacity: .5;\n    padding-top: 4px;\n    padding-bottom: 4px;\n    line-height: 1;\n    color: #888;\n}\n\n.cover-fill, .cover-empty {\n  display:inline-block;\n  height: 12px;\n}\n.chart {\n  line-height: 0;\n}\n.cover-empty {\n    background: white;\n}\n.cover-full {\n    border-right: none !important;\n}\npre.prettyprint {\n    border: none !important;\n    padding: 0 !important;\n    margin: 0 !important;\n}\n.com { color: #999 !important; }\n.ignore-none { color: #999; font-weight: normal; }\n\n.wrapper {\n  min-height: 100%;\n  height: auto !important;\n  height: 100%;\n  margin: 0 auto -48px;\n}\n.footer, .push {\n  height: 48px;\n}\n","path":null,"size_bytes":5394,"size_tokens":null},"tests/server/naiveBayes.test.ts":{"content":"import { describe, it, expect, beforeEach } from 'vitest';\n\ninterface CategoryPerformance {\n  [category: string]: { correct: number; total: number };\n}\n\ninterface QuestionAttempt {\n  category?: string;\n  isCorrect: boolean;\n}\n\ninterface InterestResponse {\n  questionId: number;\n  response: string;\n}\n\nclass NaiveBayesRecommender {\n  private calculateCategoryPerformance(attempts: QuestionAttempt[]): CategoryPerformance {\n    const performance: CategoryPerformance = {};\n\n    for (const attempt of attempts) {\n      if (!attempt.category) continue;\n\n      if (!performance[attempt.category]) {\n        performance[attempt.category] = { correct: 0, total: 0 };\n      }\n\n      performance[attempt.category].total++;\n      if (attempt.isCorrect) {\n        performance[attempt.category].correct++;\n      }\n    }\n\n    return performance;\n  }\n\n  private analyzeInterestResponses(responses: InterestResponse[]): Record<string, number> {\n    const affinities: Record<string, number> = {\n      frontend: 0,\n      backend: 0,\n      data: 0,\n      cloud: 0,\n      mobile: 0,\n      security: 0,\n    };\n\n    for (const response of responses) {\n      const r = response.response.toString();\n\n      switch (response.questionId) {\n        case 1:\n          if (r === '5' || r === '4') {\n            affinities.frontend += 2;\n            affinities.mobile += 1;\n          }\n          break;\n\n        case 2:\n          if (r.includes('Backend')) {\n            affinities.backend += 3;\n            affinities.cloud += 1;\n          } else if (r.includes('Frontend')) {\n            affinities.frontend += 3;\n            affinities.mobile += 1;\n          } else if (r.includes('Both')) {\n            affinities.frontend += 1;\n            affinities.backend += 1;\n          }\n          break;\n\n        case 3:\n          if (r === '5' || r === '4') {\n            affinities.data += 3;\n            affinities.backend += 1;\n          }\n          break;\n\n        case 4:\n          if (r.includes('web applications')) {\n            affinities.frontend += 2;\n            affinities.backend += 2;\n          } else if (r.includes('data')) {\n            affinities.data += 3;\n          } else if (r.includes('cloud')) {\n            affinities.cloud += 3;\n          } else if (r.includes('mobile')) {\n            affinities.mobile += 3;\n          } else if (r.includes('security')) {\n            affinities.security += 3;\n          }\n          break;\n      }\n    }\n\n    return affinities;\n  }\n\n  public testCalculateCategoryPerformance(attempts: QuestionAttempt[]) {\n    return this.calculateCategoryPerformance(attempts);\n  }\n\n  public testAnalyzeInterestResponses(responses: InterestResponse[]) {\n    return this.analyzeInterestResponses(responses);\n  }\n}\n\ndescribe('NaiveBayesRecommender', () => {\n  let recommender: NaiveBayesRecommender;\n\n  beforeEach(() => {\n    recommender = new NaiveBayesRecommender();\n  });\n\n  describe('calculateCategoryPerformance', () => {\n    it('should calculate performance correctly for single category', () => {\n      const attempts: QuestionAttempt[] = [\n        { category: 'frontend', isCorrect: true },\n        { category: 'frontend', isCorrect: true },\n        { category: 'frontend', isCorrect: false },\n      ];\n\n      const result = recommender.testCalculateCategoryPerformance(attempts);\n\n      expect(result.frontend).toEqual({ correct: 2, total: 3 });\n    });\n\n    it('should calculate performance correctly for multiple categories', () => {\n      const attempts: QuestionAttempt[] = [\n        { category: 'frontend', isCorrect: true },\n        { category: 'backend', isCorrect: false },\n        { category: 'frontend', isCorrect: true },\n        { category: 'data', isCorrect: true },\n        { category: 'backend', isCorrect: true },\n      ];\n\n      const result = recommender.testCalculateCategoryPerformance(attempts);\n\n      expect(result.frontend).toEqual({ correct: 2, total: 2 });\n      expect(result.backend).toEqual({ correct: 1, total: 2 });\n      expect(result.data).toEqual({ correct: 1, total: 1 });\n    });\n\n    it('should ignore attempts without category', () => {\n      const attempts: QuestionAttempt[] = [\n        { category: 'frontend', isCorrect: true },\n        { isCorrect: false },\n        { category: undefined, isCorrect: true },\n      ];\n\n      const result = recommender.testCalculateCategoryPerformance(attempts);\n\n      expect(result.frontend).toEqual({ correct: 1, total: 1 });\n      expect(Object.keys(result)).toHaveLength(1);\n    });\n\n    it('should return empty object for empty array', () => {\n      const result = recommender.testCalculateCategoryPerformance([]);\n      expect(result).toEqual({});\n    });\n  });\n\n  describe('analyzeInterestResponses', () => {\n    it('should increase frontend affinity for visual design preference', () => {\n      const responses: InterestResponse[] = [\n        { questionId: 1, response: '5' },\n      ];\n\n      const result = recommender.testAnalyzeInterestResponses(responses);\n\n      expect(result.frontend).toBe(2);\n      expect(result.mobile).toBe(1);\n    });\n\n    it('should increase backend affinity for backend preference', () => {\n      const responses: InterestResponse[] = [\n        { questionId: 2, response: 'Backend development' },\n      ];\n\n      const result = recommender.testAnalyzeInterestResponses(responses);\n\n      expect(result.backend).toBe(3);\n      expect(result.cloud).toBe(1);\n    });\n\n    it('should increase data affinity for math/statistics preference', () => {\n      const responses: InterestResponse[] = [\n        { questionId: 3, response: '5' },\n      ];\n\n      const result = recommender.testAnalyzeInterestResponses(responses);\n\n      expect(result.data).toBe(3);\n      expect(result.backend).toBe(1);\n    });\n\n    it('should handle multiple responses correctly', () => {\n      const responses: InterestResponse[] = [\n        { questionId: 1, response: '5' },\n        { questionId: 2, response: 'Frontend design' },\n        { questionId: 4, response: 'Building web applications' },\n      ];\n\n      const result = recommender.testAnalyzeInterestResponses(responses);\n\n      expect(result.frontend).toBeGreaterThan(0);\n    });\n\n    it('should start with zero affinities', () => {\n      const result = recommender.testAnalyzeInterestResponses([]);\n\n      expect(result).toEqual({\n        frontend: 0,\n        backend: 0,\n        data: 0,\n        cloud: 0,\n        mobile: 0,\n        security: 0,\n      });\n    });\n  });\n});\n","path":null,"size_bytes":6441,"size_tokens":null},"tests/server/mlClient.test.ts":{"content":"import { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\n\ninterface MLResponse<T = any> {\n  success: boolean;\n  result?: T;\n  error?: string;\n}\n\nconst ML_BASE = process.env.ML_SERVICE_URL || 'http://localhost:5001';\n\nasync function callMLService<T = any>(\n  command: string,\n  data?: any,\n  timeoutMs = 10_000\n): Promise<MLResponse<T>> {\n  const url = `${ML_BASE}/predict`;\n  const controller = new AbortController();\n  const id = setTimeout(() => controller.abort(), timeoutMs);\n\n  try {\n    const resp = await fetch(url, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ command, data }),\n      signal: controller.signal,\n    });\n\n    clearTimeout(id);\n\n    let payload: any;\n    try {\n      payload = await resp.json();\n    } catch (jsonErr) {\n      return { success: false, error: `Invalid JSON response: ${jsonErr}` };\n    }\n\n    if (!resp.ok) {\n      return {\n        success: false,\n        error: `ML service error: ${resp.status} ${resp.statusText} - ${JSON.stringify(payload)}`,\n      };\n    }\n\n    return { success: true, result: payload };\n  } catch (err: any) {\n    clearTimeout(id);\n    if (err.name === 'AbortError') {\n      return { success: false, error: `Request timed out after ${timeoutMs}ms` };\n    }\n    return { success: false, error: String(err) };\n  }\n}\n\ndescribe('ML Client', () => {\n  const originalFetch = global.fetch;\n\n  beforeEach(() => {\n    vi.useFakeTimers();\n  });\n\n  afterEach(() => {\n    global.fetch = originalFetch;\n    vi.useRealTimers();\n  });\n\n  describe('callMLService', () => {\n    it('should return success response on valid request', async () => {\n      const mockResponse = { prediction: 'frontend', confidence: 0.85 };\n      \n      global.fetch = vi.fn().mockResolvedValue({\n        ok: true,\n        json: () => Promise.resolve(mockResponse),\n      });\n\n      const promise = callMLService('predict_career', { userId: '123' });\n      await vi.runAllTimersAsync();\n      const result = await promise;\n\n      expect(result.success).toBe(true);\n      expect(result.result).toEqual(mockResponse);\n    });\n\n    it('should return error on non-ok response', async () => {\n      global.fetch = vi.fn().mockResolvedValue({\n        ok: false,\n        status: 500,\n        statusText: 'Internal Server Error',\n        json: () => Promise.resolve({ error: 'Server error' }),\n      });\n\n      const promise = callMLService('predict_career', { userId: '123' });\n      await vi.runAllTimersAsync();\n      const result = await promise;\n\n      expect(result.success).toBe(false);\n      expect(result.error).toContain('ML service error');\n      expect(result.error).toContain('500');\n    });\n\n    it('should return error on invalid JSON response', async () => {\n      global.fetch = vi.fn().mockResolvedValue({\n        ok: true,\n        json: () => Promise.reject(new Error('Invalid JSON')),\n      });\n\n      const promise = callMLService('predict_career', { userId: '123' });\n      await vi.runAllTimersAsync();\n      const result = await promise;\n\n      expect(result.success).toBe(false);\n      expect(result.error).toContain('Invalid JSON response');\n    });\n\n    it('should return error on network failure', async () => {\n      global.fetch = vi.fn().mockRejectedValue(new Error('Network error'));\n\n      const promise = callMLService('predict_career', { userId: '123' });\n      await vi.runAllTimersAsync();\n      const result = await promise;\n\n      expect(result.success).toBe(false);\n      expect(result.error).toContain('Network error');\n    });\n\n    it('should handle timeout correctly', async () => {\n      const abortError = new Error('Aborted');\n      abortError.name = 'AbortError';\n      \n      global.fetch = vi.fn().mockRejectedValue(abortError);\n\n      vi.useRealTimers();\n      const result = await callMLService('predict_career', { userId: '123' }, 100);\n      vi.useFakeTimers();\n\n      expect(result.success).toBe(false);\n      expect(result.error).toContain('timed out');\n    });\n\n    it('should send correct request format', async () => {\n      const mockFetch = vi.fn().mockResolvedValue({\n        ok: true,\n        json: () => Promise.resolve({ result: 'success' }),\n      });\n      global.fetch = mockFetch;\n\n      const command = 'classify_question';\n      const data = { question: 'What is React?' };\n\n      const promise = callMLService(command, data);\n      await vi.runAllTimersAsync();\n      await promise;\n\n      expect(mockFetch).toHaveBeenCalledWith(\n        expect.stringContaining('/predict'),\n        expect.objectContaining({\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ command, data }),\n        })\n      );\n    });\n\n    it('should work without data parameter', async () => {\n      const mockFetch = vi.fn().mockResolvedValue({\n        ok: true,\n        json: () => Promise.resolve({ result: 'success' }),\n      });\n      global.fetch = mockFetch;\n\n      const promise = callMLService('health_check');\n      await vi.runAllTimersAsync();\n      await promise;\n\n      expect(mockFetch).toHaveBeenCalledWith(\n        expect.any(String),\n        expect.objectContaining({\n          body: JSON.stringify({ command: 'health_check', data: undefined }),\n        })\n      );\n    });\n  });\n});\n","path":null,"size_bytes":5305,"size_tokens":null},"coverage/prettify.css":{"content":".pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}pre.prettyprint{padding:2px;border:1px solid #888}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}\n","path":null,"size_bytes":676,"size_tokens":null},"docs/TESTING.md":{"content":"# Testing Guide\n\nThis document provides comprehensive guidelines for unit testing in this project.\n\n## Table of Contents\n\n1. [Testing Framework](#testing-framework)\n2. [Running Tests Locally](#running-tests-locally)\n3. [CI/CD Pipeline](#cicd-pipeline)\n4. [Test Structure](#test-structure)\n5. [Best Practices](#best-practices)\n6. [Coverage Requirements](#coverage-requirements)\n\n## Testing Framework\n\nThis project uses **Vitest** as the testing framework. Vitest is chosen for its:\n\n- Native TypeScript support\n- Fast execution with Vite integration\n- Jest-compatible API\n- Built-in coverage reporting\n- Watch mode for development\n\n### Dependencies\n\n```json\n{\n  \"vitest\": \"^4.0.15\",\n  \"@vitest/coverage-v8\": \"^4.0.15\",\n  \"@testing-library/react\": \"^16.3.0\",\n  \"@testing-library/jest-dom\": \"^6.9.1\",\n  \"jsdom\": \"^27.3.0\",\n  \"happy-dom\": \"^20.0.11\"\n}\n```\n\n## Running Tests Locally\n\n### Basic Commands\n\n```bash\n# Run all tests once\nnpm run test\n\n# Run tests in watch mode (recommended for development)\nnpm run test:watch\n\n# Run tests with coverage report\nnpm run test:coverage\n\n# Run tests with UI (interactive browser interface)\nnpm run test:ui\n```\n\n### Running Specific Tests\n\n```bash\n# Run tests matching a pattern\nnpx vitest run auth\n\n# Run tests in a specific file\nnpx vitest run tests/server/auth.test.ts\n\n# Run tests in a specific directory\nnpx vitest run tests/server/\n```\n\n### Coverage Report\n\nAfter running `npm run test:coverage`, you can view the coverage report:\n\n- **Terminal**: Summary printed to console\n- **HTML Report**: Open `coverage/index.html` in a browser\n- **JSON Report**: `coverage/coverage-summary.json`\n\n## CI/CD Pipeline\n\nThe GitHub Actions workflow (`.github/workflows/ci.yml`) runs automatically on:\n\n- Every push to `main`, `master`, or `develop` branches\n- Every pull request to these branches\n\n### Pipeline Jobs\n\n1. **lint-and-typecheck**: TypeScript type checking\n2. **test**: Runs all unit tests\n3. **test-coverage**: Generates coverage reports\n4. **build**: Builds the production application\n5. **security-audit**: Scans for vulnerable dependencies\n\n### Artifacts\n\nThe pipeline uploads:\n- Test results and coverage reports (retained 30 days)\n- Build artifacts (retained 7 days)\n\n## Test Structure\n\n### Directory Structure\n\n```\ntests/\n‚îú‚îÄ‚îÄ setup.ts                      # Global test setup and mocks\n‚îú‚îÄ‚îÄ server/                       # Server-side tests\n‚îÇ   ‚îú‚îÄ‚îÄ auth.test.ts             # Authentication tests\n‚îÇ   ‚îú‚îÄ‚îÄ naiveBayes.test.ts       # ML recommendation tests\n‚îÇ   ‚îî‚îÄ‚îÄ learningIntelligence.test.ts\n‚îú‚îÄ‚îÄ client/                       # Client-side tests\n‚îÇ   ‚îî‚îÄ‚îÄ passwordValidation.test.ts\n‚îî‚îÄ‚îÄ shared/                       # Shared module tests\n    ‚îî‚îÄ‚îÄ schema.test.ts\n```\n\n### File Naming Conventions\n\n- Test files: `*.test.ts` or `*.spec.ts`\n- Place tests near the code they test or in the `tests/` directory\n- Mirror the source directory structure in tests\n\n### Test Anatomy\n\n```typescript\nimport { describe, it, expect, beforeEach, vi } from 'vitest';\n\ndescribe('ModuleName', () => {\n  // Setup/teardown\n  beforeEach(() => {\n    // Reset state before each test\n  });\n\n  describe('functionName', () => {\n    it('should describe expected behavior', () => {\n      // Arrange\n      const input = 'test';\n      \n      // Act\n      const result = functionUnderTest(input);\n      \n      // Assert\n      expect(result).toBe('expected');\n    });\n\n    it('should handle edge case', () => {\n      // Test edge cases\n    });\n  });\n});\n```\n\n## Best Practices\n\n### 1. Test Naming\n\nUse descriptive names that explain behavior:\n\n```typescript\n// ‚úÖ Good\nit('should return 401 when user is not authenticated')\nit('should hash password with bcrypt salt rounds')\n\n// ‚ùå Bad\nit('test auth')\nit('works')\n```\n\n### 2. Arrange-Act-Assert (AAA) Pattern\n\nStructure tests clearly:\n\n```typescript\nit('should calculate category performance', () => {\n  // Arrange - Set up test data\n  const attempts = [\n    { category: 'frontend', isCorrect: true },\n    { category: 'frontend', isCorrect: false },\n  ];\n\n  // Act - Execute the code under test\n  const result = calculateCategoryPerformance(attempts);\n\n  // Assert - Verify the results\n  expect(result.frontend.accuracy).toBe(0.5);\n});\n```\n\n### 3. Test Isolation\n\nEach test should be independent:\n\n```typescript\nbeforeEach(() => {\n  vi.clearAllMocks();\n  // Reset any shared state\n});\n```\n\n### 4. Mock External Dependencies\n\nUse Vitest's mocking capabilities:\n\n```typescript\nimport { vi } from 'vitest';\n\n// Mock a module\nvi.mock('./storage-firestore', () => ({\n  storage: {\n    getUser: vi.fn(),\n  },\n}));\n\n// Mock a function\nconst mockFn = vi.fn().mockReturnValue('mocked');\n```\n\n### 5. Test Edge Cases\n\nAlways test:\n- Empty inputs\n- Null/undefined values\n- Boundary conditions\n- Error scenarios\n\n```typescript\nit('should handle empty array', () => {\n  const result = processArray([]);\n  expect(result).toEqual([]);\n});\n\nit('should throw error for invalid input', () => {\n  expect(() => processArray(null)).toThrow();\n});\n```\n\n### 6. Avoid Test Interdependence\n\n```typescript\n// ‚ùå Bad - Tests depend on each other\nlet sharedState;\nit('test 1', () => { sharedState = 'value'; });\nit('test 2', () => { expect(sharedState).toBe('value'); });\n\n// ‚úÖ Good - Each test is independent\nit('test 1', () => {\n  const state = 'value';\n  expect(state).toBe('value');\n});\n```\n\n### 7. Keep Tests Fast\n\n- Mock expensive operations (database, network)\n- Avoid unnecessary setup\n- Use `beforeAll` for one-time setup\n\n## Coverage Requirements\n\nThe project enforces minimum coverage thresholds:\n\n| Metric | Minimum |\n|--------|---------|\n| Statements | 60% |\n| Branches | 50% |\n| Functions | 60% |\n| Lines | 60% |\n\n### Files Included in Coverage\n\n- `server/**/*.ts`\n- `client/src/lib/**/*.ts`\n- `shared/**/*.ts`\n\n### Files Excluded from Coverage\n\n- Test files (`*.test.ts`, `*.spec.ts`)\n- Type definitions (`*.d.ts`)\n- Configuration files\n- Seed/migration scripts\n\n## Writing New Tests\n\n### For Server-Side Code\n\n1. Create test file in `tests/server/`\n2. Import functions/classes to test\n3. Mock external dependencies (Firebase, storage)\n4. Write tests following AAA pattern\n\n### For Client-Side Code\n\n1. Create test file in `tests/client/`\n2. For React components, use `@testing-library/react`\n3. For utilities, test pure functions directly\n\n### For Shared Modules\n\n1. Create test file in `tests/shared/`\n2. Test schema validations with valid/invalid inputs\n3. Test type exports and transformations\n\n## Troubleshooting\n\n### Tests Not Running\n\n```bash\n# Clear Vitest cache\nnpx vitest run --clearCache\n```\n\n### Coverage Not Generating\n\nEnsure `@vitest/coverage-v8` is installed:\n```bash\nnpm install -D @vitest/coverage-v8\n```\n\n### Mocks Not Working\n\nCheck mock placement and ensure they're before imports:\n```typescript\nvi.mock('./module'); // Must be before import\nimport { something } from './module';\n```\n\n## Resources\n\n- [Vitest Documentation](https://vitest.dev/)\n- [Testing Library](https://testing-library.com/)\n- [Zod Schema Testing](https://zod.dev/)\n","path":null,"size_bytes":7068,"size_tokens":null},"coverage/lcov-report/sorter.js":{"content":"/* eslint-disable */\nvar addSorting = (function() {\n    'use strict';\n    var cols,\n        currentSort = {\n            index: 0,\n            desc: false\n        };\n\n    // returns the summary table element\n    function getTable() {\n        return document.querySelector('.coverage-summary');\n    }\n    // returns the thead element of the summary table\n    function getTableHeader() {\n        return getTable().querySelector('thead tr');\n    }\n    // returns the tbody element of the summary table\n    function getTableBody() {\n        return getTable().querySelector('tbody');\n    }\n    // returns the th element for nth column\n    function getNthColumn(n) {\n        return getTableHeader().querySelectorAll('th')[n];\n    }\n\n    function onFilterInput() {\n        const searchValue = document.getElementById('fileSearch').value;\n        const rows = document.getElementsByTagName('tbody')[0].children;\n\n        // Try to create a RegExp from the searchValue. If it fails (invalid regex),\n        // it will be treated as a plain text search\n        let searchRegex;\n        try {\n            searchRegex = new RegExp(searchValue, 'i'); // 'i' for case-insensitive\n        } catch (error) {\n            searchRegex = null;\n        }\n\n        for (let i = 0; i < rows.length; i++) {\n            const row = rows[i];\n            let isMatch = false;\n\n            if (searchRegex) {\n                // If a valid regex was created, use it for matching\n                isMatch = searchRegex.test(row.textContent);\n            } else {\n                // Otherwise, fall back to the original plain text search\n                isMatch = row.textContent\n                    .toLowerCase()\n                    .includes(searchValue.toLowerCase());\n            }\n\n            row.style.display = isMatch ? '' : 'none';\n        }\n    }\n\n    // loads the search box\n    function addSearchBox() {\n        var template = document.getElementById('filterTemplate');\n        var templateClone = template.content.cloneNode(true);\n        templateClone.getElementById('fileSearch').oninput = onFilterInput;\n        template.parentElement.appendChild(templateClone);\n    }\n\n    // loads all columns\n    function loadColumns() {\n        var colNodes = getTableHeader().querySelectorAll('th'),\n            colNode,\n            cols = [],\n            col,\n            i;\n\n        for (i = 0; i < colNodes.length; i += 1) {\n            colNode = colNodes[i];\n            col = {\n                key: colNode.getAttribute('data-col'),\n                sortable: !colNode.getAttribute('data-nosort'),\n                type: colNode.getAttribute('data-type') || 'string'\n            };\n            cols.push(col);\n            if (col.sortable) {\n                col.defaultDescSort = col.type === 'number';\n                colNode.innerHTML =\n                    colNode.innerHTML + '<span class=\"sorter\"></span>';\n            }\n        }\n        return cols;\n    }\n    // attaches a data attribute to every tr element with an object\n    // of data values keyed by column name\n    function loadRowData(tableRow) {\n        var tableCols = tableRow.querySelectorAll('td'),\n            colNode,\n            col,\n            data = {},\n            i,\n            val;\n        for (i = 0; i < tableCols.length; i += 1) {\n            colNode = tableCols[i];\n            col = cols[i];\n            val = colNode.getAttribute('data-value');\n            if (col.type === 'number') {\n                val = Number(val);\n            }\n            data[col.key] = val;\n        }\n        return data;\n    }\n    // loads all row data\n    function loadData() {\n        var rows = getTableBody().querySelectorAll('tr'),\n            i;\n\n        for (i = 0; i < rows.length; i += 1) {\n            rows[i].data = loadRowData(rows[i]);\n        }\n    }\n    // sorts the table using the data for the ith column\n    function sortByIndex(index, desc) {\n        var key = cols[index].key,\n            sorter = function(a, b) {\n                a = a.data[key];\n                b = b.data[key];\n                return a < b ? -1 : a > b ? 1 : 0;\n            },\n            finalSorter = sorter,\n            tableBody = document.querySelector('.coverage-summary tbody'),\n            rowNodes = tableBody.querySelectorAll('tr'),\n            rows = [],\n            i;\n\n        if (desc) {\n            finalSorter = function(a, b) {\n                return -1 * sorter(a, b);\n            };\n        }\n\n        for (i = 0; i < rowNodes.length; i += 1) {\n            rows.push(rowNodes[i]);\n            tableBody.removeChild(rowNodes[i]);\n        }\n\n        rows.sort(finalSorter);\n\n        for (i = 0; i < rows.length; i += 1) {\n            tableBody.appendChild(rows[i]);\n        }\n    }\n    // removes sort indicators for current column being sorted\n    function removeSortIndicators() {\n        var col = getNthColumn(currentSort.index),\n            cls = col.className;\n\n        cls = cls.replace(/ sorted$/, '').replace(/ sorted-desc$/, '');\n        col.className = cls;\n    }\n    // adds sort indicators for current column being sorted\n    function addSortIndicators() {\n        getNthColumn(currentSort.index).className += currentSort.desc\n            ? ' sorted-desc'\n            : ' sorted';\n    }\n    // adds event listeners for all sorter widgets\n    function enableUI() {\n        var i,\n            el,\n            ithSorter = function ithSorter(i) {\n                var col = cols[i];\n\n                return function() {\n                    var desc = col.defaultDescSort;\n\n                    if (currentSort.index === i) {\n                        desc = !currentSort.desc;\n                    }\n                    sortByIndex(i, desc);\n                    removeSortIndicators();\n                    currentSort.index = i;\n                    currentSort.desc = desc;\n                    addSortIndicators();\n                };\n            };\n        for (i = 0; i < cols.length; i += 1) {\n            if (cols[i].sortable) {\n                // add the click event handler on the th so users\n                // dont have to click on those tiny arrows\n                el = getNthColumn(i).querySelector('.sorter').parentElement;\n                if (el.addEventListener) {\n                    el.addEventListener('click', ithSorter(i));\n                } else {\n                    el.attachEvent('onclick', ithSorter(i));\n                }\n            }\n        }\n    }\n    // adds sorting functionality to the UI\n    return function() {\n        if (!getTable()) {\n            return;\n        }\n        cols = loadColumns();\n        loadData();\n        addSearchBox();\n        addSortIndicators();\n        enableUI();\n    };\n})();\n\nwindow.addEventListener('load', addSorting);\n","path":null,"size_bytes":6731,"size_tokens":null},"coverage/lcov-report/block-navigation.js":{"content":"/* eslint-disable */\nvar jumpToCode = (function init() {\n    // Classes of code we would like to highlight in the file view\n    var missingCoverageClasses = ['.cbranch-no', '.cstat-no', '.fstat-no'];\n\n    // Elements to highlight in the file listing view\n    var fileListingElements = ['td.pct.low'];\n\n    // We don't want to select elements that are direct descendants of another match\n    var notSelector = ':not(' + missingCoverageClasses.join('):not(') + ') > '; // becomes `:not(a):not(b) > `\n\n    // Selector that finds elements on the page to which we can jump\n    var selector =\n        fileListingElements.join(', ') +\n        ', ' +\n        notSelector +\n        missingCoverageClasses.join(', ' + notSelector); // becomes `:not(a):not(b) > a, :not(a):not(b) > b`\n\n    // The NodeList of matching elements\n    var missingCoverageElements = document.querySelectorAll(selector);\n\n    var currentIndex;\n\n    function toggleClass(index) {\n        missingCoverageElements\n            .item(currentIndex)\n            .classList.remove('highlighted');\n        missingCoverageElements.item(index).classList.add('highlighted');\n    }\n\n    function makeCurrent(index) {\n        toggleClass(index);\n        currentIndex = index;\n        missingCoverageElements.item(index).scrollIntoView({\n            behavior: 'smooth',\n            block: 'center',\n            inline: 'center'\n        });\n    }\n\n    function goToPrevious() {\n        var nextIndex = 0;\n        if (typeof currentIndex !== 'number' || currentIndex === 0) {\n            nextIndex = missingCoverageElements.length - 1;\n        } else if (missingCoverageElements.length > 1) {\n            nextIndex = currentIndex - 1;\n        }\n\n        makeCurrent(nextIndex);\n    }\n\n    function goToNext() {\n        var nextIndex = 0;\n\n        if (\n            typeof currentIndex === 'number' &&\n            currentIndex < missingCoverageElements.length - 1\n        ) {\n            nextIndex = currentIndex + 1;\n        }\n\n        makeCurrent(nextIndex);\n    }\n\n    return function jump(event) {\n        if (\n            document.getElementById('fileSearch') === document.activeElement &&\n            document.activeElement != null\n        ) {\n            // if we're currently focused on the search input, we don't want to navigate\n            return;\n        }\n\n        switch (event.which) {\n            case 78: // n\n            case 74: // j\n                goToNext();\n                break;\n            case 66: // b\n            case 75: // k\n            case 80: // p\n                goToPrevious();\n                break;\n        }\n    };\n})();\nwindow.addEventListener('keydown', jumpToCode);\n","path":null,"size_bytes":2655,"size_tokens":null},"tests/setup.ts":{"content":"import { vi } from 'vitest';\n\nvi.mock('../server/firebase', () => ({\n  db: {},\n  auth: {},\n}));\n\nvi.mock('../server/storage-firestore', () => ({\n  storage: {\n    getUser: vi.fn(),\n    getUserByEmail: vi.fn(),\n    getUserByUsername: vi.fn(),\n    createUser: vi.fn(),\n    updateUser: vi.fn(),\n    getUserBadges: vi.fn(),\n    awardBadge: vi.fn(),\n    getBadge: vi.fn(),\n    createNotification: vi.fn(),\n    getUserChallengeAttempts: vi.fn(),\n    getUserQuizAttempts: vi.fn(),\n    getCareerPaths: vi.fn(),\n  },\n}));\n\nvi.mock('firebase/firestore', () => ({\n  collection: vi.fn(),\n  doc: vi.fn(),\n  getDoc: vi.fn(),\n  getDocs: vi.fn(),\n  setDoc: vi.fn(),\n  updateDoc: vi.fn(),\n  deleteDoc: vi.fn(),\n  query: vi.fn(),\n  where: vi.fn(),\n  orderBy: vi.fn(),\n  limit: vi.fn(),\n  Timestamp: {\n    now: vi.fn(() => ({ toDate: () => new Date() })),\n    fromDate: vi.fn((d) => ({ toDate: () => d })),\n  },\n}));\n","path":null,"size_bytes":897,"size_tokens":null},"tests/client/passwordValidation.test.ts":{"content":"import { describe, it, expect } from 'vitest';\nimport { \n  validatePasswordStrength, \n  getPasswordRequirements \n} from '../../client/src/lib/passwordValidation';\n\ndescribe('Password Validation', () => {\n  describe('validatePasswordStrength', () => {\n    it('should return Very Weak for empty password', () => {\n      const result = validatePasswordStrength('');\n      expect(result.score).toBe(0);\n      expect(result.feedback).toBe('Very Weak');\n      expect(result.isValid).toBe(false);\n    });\n\n    it('should return Weak for simple short password', () => {\n      const result = validatePasswordStrength('abc');\n      expect(result.score).toBeLessThanOrEqual(2);\n      expect(result.feedback).toBe('Weak');\n      expect(result.isValid).toBe(false);\n    });\n\n    it('should return Fair for password with 3 criteria', () => {\n      const result = validatePasswordStrength('Abcdefgh');\n      expect(result.score).toBe(3);\n      expect(result.feedback).toBe('Fair');\n      expect(result.isValid).toBe(false);\n    });\n\n    it('should return Good for password with 4 criteria', () => {\n      const result = validatePasswordStrength('Abcdefg1');\n      expect(result.score).toBe(4);\n      expect(result.feedback).toBe('Good');\n      expect(result.isValid).toBe(true);\n    });\n\n    it('should return Strong for password with all 5 criteria', () => {\n      const result = validatePasswordStrength('Abcdefg1!');\n      expect(result.score).toBe(5);\n      expect(result.feedback).toBe('Strong');\n      expect(result.isValid).toBe(true);\n    });\n\n    describe('checks', () => {\n      it('should correctly check minimum length', () => {\n        expect(validatePasswordStrength('short').checks.minLength).toBe(false);\n        expect(validatePasswordStrength('longpassword').checks.minLength).toBe(true);\n      });\n\n      it('should correctly check uppercase', () => {\n        expect(validatePasswordStrength('lowercase').checks.hasUppercase).toBe(false);\n        expect(validatePasswordStrength('Uppercase').checks.hasUppercase).toBe(true);\n      });\n\n      it('should correctly check lowercase', () => {\n        expect(validatePasswordStrength('UPPERCASE').checks.hasLowercase).toBe(false);\n        expect(validatePasswordStrength('lowercase').checks.hasLowercase).toBe(true);\n      });\n\n      it('should correctly check numbers', () => {\n        expect(validatePasswordStrength('nodigits').checks.hasNumber).toBe(false);\n        expect(validatePasswordStrength('has123').checks.hasNumber).toBe(true);\n      });\n\n      it('should correctly check special characters', () => {\n        expect(validatePasswordStrength('nospecial').checks.hasSpecial).toBe(false);\n        expect(validatePasswordStrength('special!').checks.hasSpecial).toBe(true);\n        expect(validatePasswordStrength('special@').checks.hasSpecial).toBe(true);\n        expect(validatePasswordStrength('special#').checks.hasSpecial).toBe(true);\n      });\n    });\n  });\n\n  describe('getPasswordRequirements', () => {\n    it('should return 5 requirements', () => {\n      const requirements = getPasswordRequirements();\n      expect(requirements).toHaveLength(5);\n    });\n\n    it('should include all expected requirements', () => {\n      const requirements = getPasswordRequirements();\n      expect(requirements).toContain('At least 8 characters long');\n      expect(requirements).toContain('Contains uppercase letter (A-Z)');\n      expect(requirements).toContain('Contains lowercase letter (a-z)');\n      expect(requirements).toContain('Contains number (0-9)');\n      expect(requirements).toContain('Contains special character (!@#$%^&*)');\n    });\n  });\n});\n","path":null,"size_bytes":3610,"size_tokens":null}},"version":2}